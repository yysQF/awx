(this.webpackJsonpui_next=this.webpackJsonpui_next||[]).push([[0],{463:function(e,t,a){e.exports=a.p+"static/media/brand-logo.6549f233.svg"},482:function(e,t){e.exports={languageData:{plurals:function(e,t){return"other"}},messages:{404:"404","> add":"> add","> edit":"> edit","AWX Logo":"AWX Logo",About:"About","AboutModal Logo":"AboutModal Logo",Access:"Access",Add:"Add","Add Roles":"Add Roles","Add Team Roles":"Add Team Roles","Add User Roles":"Add User Roles",Administration:"Administration",Admins:"Admins","Ansible Environment":"Ansible Environment","Ansible Version":"Ansible Version",Applications:"Applications","Apply roles":"Apply roles","Are you sure you want to delete:":"Are you sure you want to delete:","Are you sure you want to remove {0} access from {1}?  Doing so affects all members of the team.":function(e){return["Are you sure you want to remove ",e("0")," access from ",e("1"),"?  Doing so affects all members of the team."]},"Are you sure you want to remove {0} access from {username}?":function(e){return["Are you sure you want to remove ",e("0")," access from ",e("username"),"?"]},Authentication:"Authentication","Authentication Settings":"Authentication Settings","Brand Image":"Brand Image",Cancel:"Cancel","Cannot find organization with ID":"Cannot find organization with ID","Cannot find resource.":"Cannot find resource.","Cannot find route {0}.":function(e){return["Cannot find route ",e("0"),"."]},Close:"Close",Collapse:"Collapse","Copyright 2018 Red Hat, Inc.":"Copyright 2018 Red Hat, Inc.","Copyright 2019 Red Hat, Inc.":"Copyright 2019 Red Hat, Inc.","Create New Organization":"Create New Organization",Created:"Created","Credential Types":"Credential Types",Credentials:"Credentials","Current page":"Current page",Dashboard:"Dashboard",Delete:"Delete","Delete {0}":function(e){return["Delete ",e("0")]},"Delete {itemName}":function(e){return["Delete ",e("itemName")]},Description:"Description",Details:"Details",Edit:"Edit","Edit Details":"Edit Details",Expand:"Expand",Failure:"Failure",First:"First","Go to first page":"Go to first page","Go to last page":"Go to last page","Go to next page":"Go to next page","Go to previous page":"Go to previous page",Help:"Help","If you {0} want to remove access for this particular user, please remove them from the team.":function(e){return["If you ",e("0")," want to remove access for this particular user, please remove them from the team."]},Info:"Info","Instance Groups":"Instance Groups",Integrations:"Integrations","Invalid username or password. Please try again.":"Invalid username or password. Please try again.",Inventories:"Inventories","Inventory Scripts":"Inventory Scripts","Items Per Page":"Items Per Page","Items per page":"Items per page","Items {itemMin} \u2013 {itemMax} of {count}":function(e){return["Items ",e("itemMin")," \u2013 ",e("itemMax")," of ",e("count")]},Jobs:"Jobs","Jobs Settings":"Jobs Settings",Last:"Last","Last Modified":"Last Modified","Last Name":"Last Name",License:"License","Loading...":"Loading...",Logout:"Logout","Management Jobs":"Management Jobs",Members:"Members",Modified:"Modified","My View":"My View",Name:"Name",Next:"Next","No {0} Found":function(e){return["No ",e("0")," Found"]},"Notification Templates":"Notification Templates",Notifications:"Notifications","Organization Add":"Organization Add","Organization detail tabs":"Organization detail tabs",Organizations:"Organizations","Organizations List":"Organizations List",Page:"Page","Page <0/> of {pageCount}":function(e){return["Page <0/> of ",e("pageCount")]},"Page Number":"Page Number",Pagination:"Pagination",Password:"Password","Per Page":"Per Page","Please add {0} to populate this list":function(e){return["Please add ",e("0")," to populate this list"]},"Please add {0} {itemName} to populate this list":function(e){return["Please add ",e("0")," ",e("itemName")," to populate this list"]},"Portal Mode":"Portal Mode",Previous:"Previous","Primary Navigation":"Primary Navigation",Projects:"Projects","Remove {0} Access":function(e){return["Remove ",e("0")," Access"]},Resources:"Resources",Save:"Save",Schedules:"Schedules",Search:"Search","Search text input":"Search text input",Select:"Select","Select Input":"Select Input","Select Users Or Teams":"Select Users Or Teams","Select a row to delete":"Select a row to delete","Select all":"Select all","Select items from list":"Select items from list","Select the Instance Groups for this Organization to run on.":"Select the Instance Groups for this Organization to run on.","Select {header}":function(e){return["Select ",e("header")]},Selected:"Selected",Settings:"Settings",Sort:"Sort",Successful:"Successful",System:"System","System Settings":"System Settings",Team:"Team","Team Roles":"Team Roles",Teams:"Teams",Templates:"Templates","This field must not be blank":"This field must not be blank","This field must not exceed {max} characters":function(e){return["This field must not exceed ",e("max")," characters"]},"Toggle notification failure":"Toggle notification failure","Toggle notification success":"Toggle notification success","Use Default {label}":function(e){return["Use Default ",e("label")]},User:"User","User Details":"User Details","User Interface":"User Interface","User Interface Settings":"User Interface Settings","User Roles":"User Roles",Username:"Username",Users:"Users",Views:"Views","Welcome to Ansible {brandName}! Please Sign In.":function(e){return["Welcome to Ansible ",e("brandName"),"! Please Sign In."]},"You do not have permission to delete the following {0}: {itemsUnableToDelete}":function(e){return["You do not have permission to delete the following ",e("0"),": ",e("itemsUnableToDelete")]},"You have been logged out.":"You have been logged out.","add {currentTab}":function(e){return["add ",e("currentTab")]},"adding {currentTab}":function(e){return["adding ",e("currentTab")]},"cancel delete":"cancel delete","confirm delete":"confirm delete","confirm removal of {currentTab}/cancel and go back to {currentTab} view.":function(e){return["confirm removal of ",e("currentTab"),"/cancel and go back to ",e("currentTab")," view."]},"delete {currentTab}":function(e){return["delete ",e("currentTab")]},"deleting {currentTab} association with orgs":function(e){return["deleting ",e("currentTab")," association with orgs"]},"edit view":"edit view",items:"items","of {pageCount}":function(e){return["of ",e("pageCount")]},pages:"pages","per page":"per page","save/cancel and go back to view":"save/cancel and go back to view","save/cancel and go back to {currentTab} view":function(e){return["save/cancel and go back to ",e("currentTab")," view"]},"select organization {itemId}":function(e){return["select organization ",e("itemId")]},"{0}":function(e){return[e("0")]},"{0} List":function(e){return[e("0")," List"]},"{currentTab} detail view":function(e){return[e("currentTab")," detail view"]},"{itemMin} - {itemMax} of {count}":function(e){return[e("itemMin")," - ",e("itemMax")," of ",e("count")]}}}},483:function(e,t){e.exports={languageData:{plurals:function(e,t){var a=String(e).split("."),n=!a[1],r=Number(a[0])==e,i=r&&a[0].slice(-1),l=r&&a[0].slice(-2);return t?1==i&&11!=l?"one":2==i&&12!=l?"two":3==i&&13!=l?"few":"other":1==e&&n?"one":"other"}},messages:{404:"404","> add":"> add","> edit":"> edit","AWX Logo":"AWX Logo",About:"About","AboutModal Logo":"AboutModal Logo",Access:"Access",Add:"Add","Add Roles":"Add Roles","Add Team Roles":"Add Team Roles","Add User Roles":"Add User Roles",Administration:"Administration",Admins:"Admins","Ansible Environment":"Ansible Environment","Ansible Version":"Ansible Version",Applications:"Applications","Apply roles":"Apply roles","Are you sure you want to delete:":"Are you sure you want to delete:","Are you sure you want to remove {0} access from {1}?  Doing so affects all members of the team.":function(e){return["Are you sure you want to remove ",e("0")," access from ",e("1"),"?  Doing so affects all members of the team."]},"Are you sure you want to remove {0} access from {username}?":function(e){return["Are you sure you want to remove ",e("0")," access from ",e("username"),"?"]},Authentication:"Authentication","Authentication Settings":"Authentication Settings","Brand Image":"Brand Image",Cancel:"Cancel","Cannot find organization with ID":"Cannot find organization with ID","Cannot find resource.":"Cannot find resource.","Cannot find route {0}.":function(e){return["Cannot find route ",e("0"),"."]},Close:"Close",Collapse:"Collapse","Copyright 2018 Red Hat, Inc.":"Copyright 2018 Red Hat, Inc.","Copyright 2019 Red Hat, Inc.":"Copyright 2019 Red Hat, Inc.","Create New Organization":"Create New Organization",Created:"Created","Credential Types":"Credential Types",Credentials:"Credentials","Current page":"Current page",Dashboard:"Dashboard",Delete:"Delete","Delete {0}":function(e){return["Delete ",e("0")]},"Delete {itemName}":function(e){return["Delete ",e("itemName")]},Description:"Description",Details:"Details",Edit:"Edit","Edit Details":"Edit Details",Expand:"Expand",Failure:"Failure",First:"First","Go to first page":"Go to first page","Go to last page":"Go to last page","Go to next page":"Go to next page","Go to previous page":"Go to previous page",Help:"Help","If you {0} want to remove access for this particular user, please remove them from the team.":function(e){return["If you ",e("0")," want to remove access for this particular user, please remove them from the team."]},Info:"Info","Instance Groups":"Instance Groups",Integrations:"Integrations","Invalid username or password. Please try again.":"Invalid username or password. Please try again.",Inventories:"Inventories","Inventory Scripts":"Inventory Scripts","Items Per Page":"Items Per Page","Items per page":"Items per page","Items {itemMin} \u2013 {itemMax} of {count}":function(e){return["Items ",e("itemMin")," \u2013 ",e("itemMax")," of ",e("count")]},Jobs:"Jobs","Jobs Settings":"Jobs Settings",Last:"Last","Last Modified":"Last Modified","Last Name":"Last Name",License:"License","Loading...":"Loading...",Logout:"Logout","Management Jobs":"Management Jobs",Members:"Members",Modified:"Modified","My View":"My View",Name:"Name",Next:"Next","No {0} Found":function(e){return["No ",e("0")," Found"]},"Notification Templates":"Notification Templates",Notifications:"Notifications","Organization Add":"Organization Add","Organization detail tabs":"Organization detail tabs",Organizations:"Organizations","Organizations List":"Organizations List",Page:"Page","Page <0/> of {pageCount}":function(e){return["Page <0/> of ",e("pageCount")]},"Page Number":"Page Number",Pagination:"Pagination",Password:"Password","Per Page":"Per Page","Please add {0} to populate this list":function(e){return["Please add ",e("0")," to populate this list"]},"Please add {0} {itemName} to populate this list":function(e){return["Please add ",e("0")," ",e("itemName")," to populate this list"]},"Portal Mode":"Portal Mode",Previous:"Previous","Primary Navigation":"Primary Navigation",Projects:"Projects","Remove {0} Access":function(e){return["Remove ",e("0")," Access"]},Resources:"Resources",Save:"Save",Schedules:"Schedules",Search:"Search","Search text input":"Search text input",Select:"Select","Select Input":"Select Input","Select Users Or Teams":"Select Users Or Teams","Select a row to delete":"Select a row to delete","Select all":"Select all","Select items from list":"Select items from list","Select the Instance Groups for this Organization to run on.":"Select the Instance Groups for this Organization to run on.","Select {header}":function(e){return["Select ",e("header")]},Selected:"Selected",Settings:"Settings",Sort:"Sort",Successful:"Successful",System:"System","System Settings":"System Settings",Team:"Team","Team Roles":"Team Roles",Teams:"Teams",Templates:"Templates","This field must not be blank":"This field must not be blank","This field must not exceed {max} characters":function(e){return["This field must not exceed ",e("max")," characters"]},"Toggle notification failure":"Toggle notification failure","Toggle notification success":"Toggle notification success","Use Default {label}":function(e){return["Use Default ",e("label")]},User:"User","User Details":"User Details","User Interface":"User Interface","User Interface Settings":"User Interface Settings","User Roles":"User Roles",Username:"Username",Users:"Users",Views:"Views","Welcome to Ansible {brandName}! Please Sign In.":function(e){return["Welcome to Ansible ",e("brandName"),"! Please Sign In."]},"You do not have permission to delete the following {0}: {itemsUnableToDelete}":function(e){return["You do not have permission to delete the following ",e("0"),": ",e("itemsUnableToDelete")]},"You have been logged out.":"You have been logged out.","add {currentTab}":function(e){return["add ",e("currentTab")]},"adding {currentTab}":function(e){return["adding ",e("currentTab")]},"cancel delete":"cancel delete","confirm delete":"confirm delete","confirm removal of {currentTab}/cancel and go back to {currentTab} view.":function(e){return["confirm removal of ",e("currentTab"),"/cancel and go back to ",e("currentTab")," view."]},"delete {currentTab}":function(e){return["delete ",e("currentTab")]},"deleting {currentTab} association with orgs":function(e){return["deleting ",e("currentTab")," association with orgs"]},"edit view":"edit view",items:"items","of {pageCount}":function(e){return["of ",e("pageCount")]},pages:"pages","per page":"per page","save/cancel and go back to view":"save/cancel and go back to view","save/cancel and go back to {currentTab} view":function(e){return["save/cancel and go back to ",e("currentTab")," view"]},"select organization {itemId}":function(e){return["select organization ",e("itemId")]},"{0}":function(e){return[e("0")]},"{0} List":function(e){return[e("0")," List"]},"{currentTab} detail view":function(e){return[e("currentTab")," detail view"]},"{itemMin} - {itemMax} of {count}":function(e){return[e("itemMin")," - ",e("itemMax")," of ",e("count")]}}}},577:function(e,t,a){e.exports=a(953)},582:function(e,t,a){a.nc=window.NONCE_ID,document.addEventListener("securitypolicyviolation",(function(e){var t={"csp-report":{"blocked-uri":e.blockedURI,"document-uri":e.documentURI,"effective-directive":e.effectiveDirective,"original-policy":e.originalPolicy,referrer:e.referrer,"status-code":e.statusCode,"violated-directive":e.violatedDirective}};e.sourceFile&&(t["csp-report"]["source-file"]=e.sourceFile),e.lineNumber&&(t["csp-report"]["line-number"]=e.lineNumber),e.columnNumber&&(t["csp-report"]["column-number"]=e.columnNumber);var a=new XMLHttpRequest;a.open("POST","/csp-violation/",!0),a.setRequestHeader("content-type","application/csp-report"),a.send(JSON.stringify(t))}))},953:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(45),l=a.n(i),o=(a(582),a(583),a(24)),c=a(63),s=a(7),u=a(3),d=a(10),m=a(1),p=a.n(m),b=a(5),f=a(2),v=a(14),_=a(1106),h=a(197),E=a(162),y=a(999),g=a(294),O=a(173),j=a(6),k=a(16),w=a(18),C=a(17),S=a(19),x=a(462),T=a.n(x),I={job:"playbook",project_update:"project",system_job:"system",inventory_update:"inventory",ad_hoc_command:"command",workflow_job:"workflow"},A=a(13);function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1,page_size:5,order_by:"name"},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["page","page_size"],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["modified","created"];if(!e)throw new Error("a QS namespace is required");return t.order_by||(t.order_by="name"),{namespace:e,defaultParams:t,integerFields:a,dateFields:n}}function N(e,t){if(!t)return e.defaultParams||{};var a=function(e,t){var a={};return t.replace(/^\?/,"").split("&").map((function(e){return e.split("=")})).forEach((function(t){var n=Object(f.a)(t,2),r=n[0],i=n[1];if(r&&D(e.namespace,r)){var l=e.namespace?decodeURIComponent(r.substr(e.namespace.length+1)):decodeURIComponent(r),o=function(e,t,a){if(e.integerFields&&e.integerFields.some((function(e){return e===t})))return parseInt(a,10);return decodeURIComponent(a)}(e,l,i);a[l]=z(a[l],o)}})),a}(e,t);return function(e,t){return Object(d.a)(Object(d.a)({},e.defaultParams),t)}(e,a)}var D=function(e,t){return e?t.startsWith("".concat(e,".")):!t.includes(".")};var L=function(e){return e?Object.keys(e).sort().filter((function(t){return null!==e[t]})).map((function(t){return[t,e[t]]})).map((function(e){var t=Object(f.a)(e,2);return function(e,t){if(Array.isArray(t))return t.map((function(t){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))})).join("&");return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))}(t[0],t[1])})).join("&"):""};var P=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return"";var n=G({},t,e.defaultParams);return L(Object(d.a)(Object(d.a)({},U(e.namespace,n)),a))},U=function(e,t){if(!e)return t;var a={};return Object.keys(t).forEach((function(n){a["".concat(e,".").concat(n)]=t[n]})),a};function G(e,t,a){var n=Object(d.a)({},e.defaultParams);return Object.keys(t).forEach((function(e){var r=q(t[e],a[e]);null!==r&&(n[e]=r)})),n}function q(e,t){if(e===t)return null;if(Array.isArray(t))return t.reduce(q,e);if(Array.isArray(e)){var a=e.indexOf(t);if(a>-1&&e.splice(a,1),1===e.length)return e[0]}return e}function F(e,t){var a={};return Object.keys(e).forEach((function(n){a[n]=z(e[n],t[n])})),Object.keys(t).forEach((function(e){a[e]||(a[e]=t[e])})),a}function z(e,t){return t||""===t?e||""===e?function(e){var t=Object(A.a)(new Set(e));if(1===t.length)return t[0];return t}(Array.isArray(e)?e.concat(t):[e].concat(t)):t:e}function M(e,t){return Object(d.a)(Object(d.a)({},e),t)}var K=function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];clearTimeout(a),a=setTimeout((function(){e.apply(void 0,r)}),t)}}((function(e,t){window.localStorage.setItem(e,t),window.dispatchEvent(new Event("storage"))}),500),V=T.a.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",paramsSerializer:function(e){return L(e)}});V.interceptors.response.use((function(e){var t=null===e||void 0===e?void 0:e.headers["session-timeout"];if(t){var a=(new Date).getTime()+1e3*t;K("awx-session-timeout",String(a))}return e}));var H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,a=arguments.length>1?arguments[1]:void 0;Object(k.a)(this,e),this.http=t,this.baseUrl=a}return Object(S.a)(e,[{key:"create",value:function(e){return this.http.post(this.baseUrl,e)}},{key:"destroy",value:function(e){return this.http.delete("".concat(this.baseUrl).concat(e,"/"))}},{key:"read",value:function(e){return this.http.get(this.baseUrl,{params:e})}},{key:"readDetail",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/"))}},{key:"readOptions",value:function(){return this.http.options(this.baseUrl)}},{key:"replace",value:function(e,t){return this.http.put("".concat(this.baseUrl).concat(e,"/"),t)}},{key:"update",value:function(e,t){return this.http.patch("".concat(this.baseUrl).concat(e,"/"),t)}},{key:"copy",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/copy/"),t)}}]),e}(),B=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/activity_stream/",n}return a}(H),W=function(e){return function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"relaunch",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/relaunch/"),t)}},{key:"readRelaunch",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/relaunch/"))}}]),a}(e)},J=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/ad_hoc_commands/",n}return a}(W(H)),Y=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/applications/",n}return Object(S.a)(a,[{key:"readTokens",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/tokens/"),{params:t})}},{key:"readTokenOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/tokens/"))}}]),a}(H),X=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/auth/",n}return a}(H),Z=a(26),$=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/config/",n.read=n.read.bind(Object(Z.a)(n)),n}return a}(H),Q=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/credential_input_sources/",n}return a}(H),ee=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/credential_types/",n}return Object(S.a)(a,[{key:"loadAllTypes",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,s,u=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:["machine","cloud","net","ssh","vault","kubernetes"],a=200,e.next=4,this.read({page_size:a});case 4:if(n=e.sent,r=n.data,i=r.next,l=r.results,o=[],!i){e.next=15;break}return e.next=12,this.read({page_size:a,page:2});case 12:c=e.sent,s=c.data,o=s.results;case 15:return e.abrupt("return",l.concat(o).filter((function(e){return t.includes(e.kind)})));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"test",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/test/"),t)}}]),a}(H),te=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/credentials/",n.readAccessList=n.readAccessList.bind(Object(Z.a)(n)),n.readAccessOptions=n.readAccessOptions.bind(Object(Z.a)(n)),n.readInputSources=n.readInputSources.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"readAccessList",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/access_list/"),{params:t})}},{key:"readAccessOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/access_list/"))}},{key:"readInputSources",value:function(e){var t=this,a=0,n=function(){var r=Object(b.a)(p.a.mark((function r(){var i,l,o,c,s=arguments;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=s.length>0&&void 0!==s[0]?s[0]:1,l=s.length>1&&void 0!==s[1]?s[1]:[],r.prev=2,a++,r.next=6,t.http.get("".concat(t.baseUrl).concat(e,"/input_sources/"),{params:{page:i,page_size:200}});case 6:if(o=r.sent,!((null===(c=o.data)||void 0===c?void 0:c.next)&&a<=5)){r.next=10;break}return r.abrupt("return",n(i+1,l.concat(c.results)));case 10:return r.abrupt("return",Promise.resolve({data:{results:l.concat(c.results)}}));case 13:return r.prev=13,r.t0=r.catch(2),r.abrupt("return",Promise.reject(r.t0));case 16:case"end":return r.stop()}}),r,null,[[2,13]])})));return function(){return r.apply(this,arguments)}}();return n()}},{key:"test",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/test/"),t)}}]),a}(H),ae=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/dashboard/",n}return Object(S.a)(a,[{key:"readJobGraph",value:function(e){return this.http.get("".concat(this.baseUrl,"graphs/jobs/"),{params:e})}}]),a}(H),ne=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/groups/",n.associateHost=n.associateHost.bind(Object(Z.a)(n)),n.createHost=n.createHost.bind(Object(Z.a)(n)),n.readAllHosts=n.readAllHosts.bind(Object(Z.a)(n)),n.disassociateHost=n.disassociateHost.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"associateHost",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/hosts/"),{id:t})}},{key:"createHost",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/hosts/"),t)}},{key:"readAllHosts",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/all_hosts/"),{params:t})}},{key:"disassociateHost",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/hosts/"),{id:t.id,disassociate:!0})}},{key:"readChildren",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/children/"),{params:t})}},{key:"associateChildGroup",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/children/"),{id:t})}},{key:"disassociateChildGroup",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/children/"),{disassociate:e,id:t})}},{key:"readPotentialGroups",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/potential_children/"),{params:t})}}]),a}(H),re=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/hosts/",n.readFacts=n.readFacts.bind(Object(Z.a)(n)),n.readAllGroups=n.readAllGroups.bind(Object(Z.a)(n)),n.readGroupsOptions=n.readGroupsOptions.bind(Object(Z.a)(n)),n.associateGroup=n.associateGroup.bind(Object(Z.a)(n)),n.disassociateGroup=n.disassociateGroup.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"readFacts",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/ansible_facts/"))}},{key:"readAllGroups",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/all_groups/"),{params:t})}},{key:"readGroupsOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/groups/"))}},{key:"associateGroup",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/groups/"),{id:t})}},{key:"disassociateGroup",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/groups/"),{id:t.id,disassociate:!0})}}]),a}(H),ie=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/instance_groups/",n.associateInstance=n.associateInstance.bind(Object(Z.a)(n)),n.disassociateInstance=n.disassociateInstance.bind(Object(Z.a)(n)),n.readInstanceOptions=n.readInstanceOptions.bind(Object(Z.a)(n)),n.readInstances=n.readInstances.bind(Object(Z.a)(n)),n.readJobs=n.readJobs.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"associateInstance",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/instances/"),{id:t})}},{key:"disassociateInstance",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/instances/"),{id:t,disassociate:!0})}},{key:"readInstances",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/instances/"),{params:t})}},{key:"readInstanceOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/instances/"))}},{key:"readJobs",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/jobs/"))}}]),a}(H),le=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/instances/",n}return a}(H),oe=function(e){return function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"readInstanceGroups",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/instance_groups/"),{params:t})}},{key:"associateInstanceGroup",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/instance_groups/"),{id:t})}},{key:"disassociateInstanceGroup",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/instance_groups/"),{id:t,disassociate:!0})}}]),a}(e)},ce=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/inventories/",n.readAccessList=n.readAccessList.bind(Object(Z.a)(n)),n.readAccessOptions=n.readAccessOptions.bind(Object(Z.a)(n)),n.readHosts=n.readHosts.bind(Object(Z.a)(n)),n.readHostDetail=n.readHostDetail.bind(Object(Z.a)(n)),n.readGroups=n.readGroups.bind(Object(Z.a)(n)),n.readGroupsOptions=n.readGroupsOptions.bind(Object(Z.a)(n)),n.promoteGroup=n.promoteGroup.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"readAccessList",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/access_list/"),{params:t})}},{key:"readAccessOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/access_list/"))}},{key:"createHost",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/hosts/"),t)}},{key:"readHosts",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/hosts/"),{params:t})}},{key:"readHostDetail",value:function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("".concat(this.baseUrl).concat(t,"/hosts/?id=").concat(a));case 2:if(n=e.sent,r=n.data.results,!Array.isArray(r)||!r.length){e.next=6;break}return e.abrupt("return",r[0]);case 6:throw new Error("How did you get here? Host not found for Inventory ID: ".concat(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"readGroups",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/groups/"),{params:t})}},{key:"readGroupsOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/groups/"))}},{key:"readHostsOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/hosts/"))}},{key:"promoteGroup",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/groups/"),{id:t,disassociate:!0})}},{key:"readSources",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/inventory_sources/"),{params:t})}},{key:"readSourceDetail",value:function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("".concat(this.baseUrl).concat(t,"/inventory_sources/?id=").concat(a));case 2:if(n=e.sent,r=n.data.results,!Array.isArray(r)||!r.length){e.next=6;break}return e.abrupt("return",r[0]);case 6:throw new Error("How did you get here? Source not found for Inventory ID: ".concat(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"syncAllSources",value:function(e){return this.http.post("".concat(this.baseUrl).concat(e,"/update_inventory_sources/"))}},{key:"readAdHocOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/ad_hoc_commands/"))}},{key:"launchAdHocCommands",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/ad_hoc_commands/"),t)}}]),a}(oe(H)),se=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/inventory_scripts/",n}return a}(H),ue=function(e){return function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"readOptionsNotificationTemplates",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/notification_templates/"))}},{key:"readNotificationTemplates",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/notification_templates/"),t)}},{key:"readNotificationTemplatesStarted",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/notification_templates_started/"),{params:t})}},{key:"readNotificationTemplatesSuccess",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/notification_templates_success/"),{params:t})}},{key:"readNotificationTemplatesError",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/notification_templates_error/"),{params:t})}},{key:"associateNotificationTemplatesStarted",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_started/"),{id:t})}},{key:"disassociateNotificationTemplatesStarted",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_started/"),{id:t,disassociate:!0})}},{key:"associateNotificationTemplatesSuccess",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_success/"),{id:t})}},{key:"disassociateNotificationTemplatesSuccess",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_success/"),{id:t,disassociate:!0})}},{key:"associateNotificationTemplatesError",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_error/"),{id:t})}},{key:"disassociateNotificationTemplatesError",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_error/"),{id:t,disassociate:!0})}},{key:"associateNotificationTemplate",value:function(e,t,a){if("approvals"===a)return this.associateNotificationTemplatesApprovals(e,t);if("started"===a)return this.associateNotificationTemplatesStarted(e,t);if("success"===a)return this.associateNotificationTemplatesSuccess(e,t);if("error"===a)return this.associateNotificationTemplatesError(e,t);throw new Error("Unsupported notificationType for association: ".concat(a))}},{key:"disassociateNotificationTemplate",value:function(e,t,a){if("approvals"===a)return this.disassociateNotificationTemplatesApprovals(e,t);if("started"===a)return this.disassociateNotificationTemplatesStarted(e,t);if("success"===a)return this.disassociateNotificationTemplatesSuccess(e,t);if("error"===a)return this.disassociateNotificationTemplatesError(e,t);throw new Error("Unsupported notificationType for disassociation: ".concat(a))}}]),a}(e)},de=function(e){return function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"launchUpdate",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/update/"),t)}},{key:"readLaunchUpdate",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/update/"))}}]),a}(e)},me=function(e){return function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"createSchedule",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/schedules/"),t)}},{key:"readSchedules",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/schedules/"),{params:t})}},{key:"readScheduleOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/schedules/"))}}]),a}(e)},pe=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/inventory_sources/",n.createSyncStart=n.createSyncStart.bind(Object(Z.a)(n)),n.destroyGroups=n.destroyGroups.bind(Object(Z.a)(n)),n.destroyHosts=n.destroyHosts.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"createSyncStart",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/update/"),{extra_vars:t})}},{key:"destroyGroups",value:function(e){return this.http.delete("".concat(this.baseUrl).concat(e,"/groups/"))}},{key:"destroyHosts",value:function(e){return this.http.delete("".concat(this.baseUrl).concat(e,"/hosts/"))}}]),a}(de(ue(me(H)))),be=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/inventory_updates/",n.createSyncCancel=n.createSyncCancel.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"createSyncCancel",value:function(e){return this.http.post("".concat(this.baseUrl).concat(e,"/cancel/"))}}]),a}(de(H)),fe=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/job_templates/",n.launch=n.launch.bind(Object(Z.a)(n)),n.readLaunch=n.readLaunch.bind(Object(Z.a)(n)),n.associateLabel=n.associateLabel.bind(Object(Z.a)(n)),n.disassociateLabel=n.disassociateLabel.bind(Object(Z.a)(n)),n.readCredentials=n.readCredentials.bind(Object(Z.a)(n)),n.readAccessList=n.readAccessList.bind(Object(Z.a)(n)),n.readAccessOptions=n.readAccessOptions.bind(Object(Z.a)(n)),n.readWebhookKey=n.readWebhookKey.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"launch",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/launch/"),t)}},{key:"readTemplateOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/"))}},{key:"readLaunch",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/launch/"))}},{key:"associateLabel",value:function(e,t,a){return this.http.post("".concat(this.baseUrl).concat(e,"/labels/"),{name:t.name,organization:a})}},{key:"disassociateLabel",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/labels/"),{id:t.id,disassociate:!0})}},{key:"readCredentials",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/credentials/"),{params:t})}},{key:"associateCredentials",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/credentials/"),{id:t})}},{key:"disassociateCredentials",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/credentials/"),{id:t,disassociate:!0})}},{key:"readAccessList",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/access_list/"),{params:t})}},{key:"readAccessOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/access_list/"))}},{key:"readScheduleList",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/schedules/"),{params:t})}},{key:"readSurvey",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/survey_spec/"))}},{key:"updateSurvey",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/survey_spec/"),t)}},{key:"destroySurvey",value:function(e){return this.http.delete("".concat(this.baseUrl).concat(e,"/survey_spec/"))}},{key:"readWebhookKey",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/webhook_key/"))}},{key:"updateWebhookKey",value:function(e){return this.http.post("".concat(this.baseUrl).concat(e,"/webhook_key/"))}}]),a}(me(oe(ue(H)))),ve=function(e){switch(e){case"playbook":case"job":return"/jobs/";case"project":case"project_update":return"/project_updates/";case"system":case"system_job":return"/system_jobs/";case"inventory":case"inventory_update":return"/inventory_updates/";case"command":case"ad_hoc_command":return"/ad_hoc_commands/";case"workflow":case"workflow_job":return"/workflow_jobs/";default:throw new Error("Unable to find matching job type")}},_e=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/jobs/",n}return Object(S.a)(a,[{key:"cancel",value:function(e,t){return this.http.post("/api/v2".concat(ve(t)).concat(e,"/cancel/"))}},{key:"readCredentials",value:function(e,t){return this.http.get("/api/v2".concat(ve(t)).concat(e,"/credentials/"))}},{key:"readDetail",value:function(e,t){return this.http.get("/api/v2".concat(ve(t)).concat(e,"/"))}},{key:"readEvents",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"playbook",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t="playbook"===a?"/api/v2".concat(ve(a)).concat(e,"/job_events/"):"/api/v2".concat(ve(a)).concat(e,"/events/"),this.http.get(t,{params:n})}}]),a}(W(H)),he=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/labels/",n}return a}(H),Ee=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/me/",n}return a}(H),ye=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/notification_templates/",n}return Object(S.a)(a,[{key:"test",value:function(e){return this.http.post("".concat(this.baseUrl).concat(e,"/test/"))}}]),a}(H),ge=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/notifications/",n}return a}(H),Oe=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/organizations/",n}return Object(S.a)(a,[{key:"readAccessList",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/access_list/"),{params:t})}},{key:"readAccessOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/access_list/"))}},{key:"readTeams",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/teams/"),{params:t})}},{key:"readTeamsOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/teams/"))}},{key:"readGalaxyCredentials",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/galaxy_credentials/"),{params:t})}},{key:"createUser",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/users/"),t)}},{key:"readNotificationTemplatesApprovals",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/notification_templates_approvals/"),{params:t})}},{key:"associateNotificationTemplatesApprovals",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_approvals/"),{id:t})}},{key:"disassociateNotificationTemplatesApprovals",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_approvals/"),{id:t,disassociate:!0})}},{key:"associateGalaxyCredential",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/galaxy_credentials/"),{id:t})}},{key:"disassociateGalaxyCredential",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/galaxy_credentials/"),{id:t,disassociate:!0})}}]),a}(oe(ue(H))),je=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/project_updates/",n}return a}(H),ke=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/projects/",n.readAccessList=n.readAccessList.bind(Object(Z.a)(n)),n.readAccessOptions=n.readAccessOptions.bind(Object(Z.a)(n)),n.readInventories=n.readInventories.bind(Object(Z.a)(n)),n.readPlaybooks=n.readPlaybooks.bind(Object(Z.a)(n)),n.readSync=n.readSync.bind(Object(Z.a)(n)),n.sync=n.sync.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"readAccessList",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/access_list/"),{params:t})}},{key:"readAccessOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/access_list/"))}},{key:"readInventories",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/inventories/"))}},{key:"readPlaybooks",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/playbooks/"))}},{key:"readSync",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/update/"))}},{key:"sync",value:function(e){return this.http.post("".concat(this.baseUrl).concat(e,"/update/"))}}]),a}(me(de(ue(H)))),we=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/roles/",n}return Object(S.a)(a,[{key:"disassociateUserRole",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/users/"),{disassociate:!0,id:t})}},{key:"disassociateTeamRole",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/teams/"),{disassociate:!0,id:t})}}]),a}(H),Ce=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/",n.redirectURL="/api/v2/config/",n}return Object(S.a)(a,[{key:"login",value:function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,r,i,l,o,c,s,u,d=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>2&&void 0!==d[2]?d[2]:this.redirectURL,r="".concat(this.baseUrl,"login/"),i=encodeURIComponent(t),l=encodeURIComponent(a),o=encodeURIComponent(n),c="username=".concat(i,"&password=").concat(l,"&next=").concat(o),s={"Content-Type":"application/x-www-form-urlencoded"},e.next=9,this.http.get(r,{headers:s});case 9:return e.next=11,this.http.post(r,c,{headers:s});case 11:return u=e.sent,e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){return this.http.get("".concat(this.baseUrl,"logout/"))}},{key:"readAssetVariables",value:function(){return this.http.get("/static/media/default.strings.json")}}]),a}(H),Se=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/schedules/",n}return Object(S.a)(a,[{key:"createPreview",value:function(e){return this.http.post("".concat(this.baseUrl,"preview/"),e)}},{key:"readCredentials",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/credentials/"),t)}},{key:"readZoneInfo",value:function(){return this.http.get("".concat(this.baseUrl,"zoneinfo/"))}}]),a}(H),xe=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/settings/",n}return Object(S.a)(a,[{key:"readAllOptions",value:function(){return this.http.options("".concat(this.baseUrl,"all/"))}},{key:"updateAll",value:function(e){return this.http.patch("".concat(this.baseUrl,"all/"),e)}},{key:"readCategory",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/"))}},{key:"readCategoryOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/"))}},{key:"createTest",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/test/"),t)}}]),a}(H),Te=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/system_jobs/",n}return a}(H),Ie=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/teams/",n}return Object(S.a)(a,[{key:"associateRole",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/roles/"),{id:t})}},{key:"disassociateRole",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/roles/"),{id:t,disassociate:!0})}},{key:"readRoles",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/roles/"),{params:t})}},{key:"readRoleOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/roles/"))}},{key:"readAccessList",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/access_list/"),{params:t})}},{key:"readAccessOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/access_list/"))}},{key:"readUsersAccessOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/users/"))}}]),a}(H),Ae=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/tokens/",n}return a}(H),Re=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/unified_job_templates/",n}return a}(H),Ne=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/unified_jobs/",n}return a}(H),De=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/users/",n}return Object(S.a)(a,[{key:"associateRole",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/roles/"),{id:t})}},{key:"createToken",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/authorized_tokens/"),t)}},{key:"disassociateRole",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/roles/"),{id:t,disassociate:!0})}},{key:"readOrganizations",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/organizations/"),{params:t})}},{key:"readRoles",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/roles/"),{params:t})}},{key:"readRoleOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/roles/"))}},{key:"readTeams",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/teams/"),{params:t})}},{key:"readTeamsOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/teams/"))}},{key:"readTokens",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/tokens/"),{params:t})}},{key:"readAdminOfOrganizations",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/admin_of_organizations/"),{params:t})}},{key:"readTokenOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/tokens/"))}}]),a}(H),Le=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/workflow_approvals/",n}return Object(S.a)(a,[{key:"approve",value:function(e){return this.http.post("".concat(this.baseUrl).concat(e,"/approve/"))}},{key:"deny",value:function(e){return this.http.post("".concat(this.baseUrl).concat(e,"/deny/"))}}]),a}(H),Pe=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/workflow_approval_templates/",n}return a}(H),Ue=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/workflow_job_template_nodes/",n}return Object(S.a)(a,[{key:"createApprovalTemplate",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/create_approval_template/"),t)}},{key:"associateSuccessNode",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/success_nodes/"),{id:t})}},{key:"associateFailureNode",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/failure_nodes/"),{id:t})}},{key:"associateAlwaysNode",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/always_nodes/"),{id:t})}},{key:"disassociateSuccessNode",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/success_nodes/"),{id:t,disassociate:!0})}},{key:"disassociateFailuresNode",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/failure_nodes/"),{id:t,disassociate:!0})}},{key:"disassociateAlwaysNode",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/always_nodes/"),{id:t,disassociate:!0})}},{key:"readCredentials",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/credentials/"))}},{key:"associateCredentials",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/credentials/"),{id:t})}},{key:"disassociateCredentials",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/credentials/"),{id:t,disassociate:!0})}}]),a}(H),Ge=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/workflow_job_templates/",n}return Object(S.a)(a,[{key:"readWebhookKey",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/webhook_key/"))}},{key:"readWorkflowJobTemplateOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/"))}},{key:"updateWebhookKey",value:function(e){return this.http.post("".concat(this.baseUrl).concat(e,"/webhook_key/"))}},{key:"associateLabel",value:function(e,t,a){return this.http.post("".concat(this.baseUrl).concat(e,"/labels/"),{name:t.name,organization:a})}},{key:"createNode",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/workflow_nodes/"),t)}},{key:"disassociateLabel",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/labels/"),{id:t.id,disassociate:!0})}},{key:"launch",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/launch/"),t)}},{key:"readLaunch",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/launch/"))}},{key:"readNodes",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/workflow_nodes/"),{params:t})}},{key:"readAccessList",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/access_list/"),{params:t})}},{key:"readAccessOptions",value:function(e){return this.http.options("".concat(this.baseUrl).concat(e,"/access_list/"))}},{key:"readSurvey",value:function(e){return this.http.get("".concat(this.baseUrl).concat(e,"/survey_spec/"))}},{key:"updateSurvey",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/survey_spec/"),t)}},{key:"destroySurvey",value:function(e){return this.http.delete("".concat(this.baseUrl).concat(e,"/survey_spec/"))}},{key:"readNotificationTemplatesApprovals",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/notification_templates_approvals/"),{params:t})}},{key:"associateNotificationTemplatesApprovals",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_approvals/"),{id:t})}},{key:"disassociateNotificationTemplatesApprovals",value:function(e,t){return this.http.post("".concat(this.baseUrl).concat(e,"/notification_templates_approvals/"),{id:t,disassociate:!0})}}]),a}(me(ue(H))),qe=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).baseUrl="/api/v2/workflow_jobs/",n}return Object(S.a)(a,[{key:"readNodes",value:function(e,t){return this.http.get("".concat(this.baseUrl).concat(e,"/workflow_nodes/"),{params:t})}}]),a}(W(H)),Fe=new B,ze=new J,Me=new Y,Ke=new X,Ve=new $,He=new Q,Be=new ee,We=new te,Je=new ae,Ye=new ne,Xe=new re,Ze=new ie,$e=new le,Qe=new ce,et=(new se,new pe),tt=new be,at=new fe,nt=new _e,rt=new he,it=new Ee,lt=new ye,ot=new ge,ct=new Oe,st=new je,ut=new ke,dt=new we,mt=new Ce,pt=new Se,bt=new xe,ft=new Te,vt=new Ie,_t=new Ae,ht=new Re,Et=new Ne,yt=new De,gt=new Le,Ot=new Pe,jt=new Ue,kt=new Ge,wt=new qe,Ct=r.a.createContext({}),St=Ct.Provider,xt=Ct.Consumer,Tt=function(){return Object(n.useContext)(Ct)};function It(e){var t="; ".concat(e).split("; userLoggedIn=");return 2===t.length&&"true"===t.pop().split(";").shift()}var At=a(1093),Rt=a(979),Nt=a(980),Dt=a(981),Lt=a(463),Pt=a.n(Lt);function Ut(e){var t=e.ansible_version,a=e.version,n=e.isOpen,i=e.onClose,l=e.i18n,o=function(){for(var e="".concat("AWX"," ").concat(a),t="",n="",r=0;r<e.length;r++)t+="_",n+="-";return(t=" __".concat(t,"__ \n"))+(e="<  ".concat(e,"  >\n"))+(n=" --".concat(n,"-- "))}();return r.a.createElement(At.a,{isOpen:n,onClose:i,productName:"Ansible ".concat("AWX"),trademark:l._({id:"Copyright 2019 Red Hat, Inc."}),brandImageSrc:Pt.a,brandImageAlt:l._({id:"Brand Image"})},r.a.createElement("pre",null,o,"\n          \\\n          \\   ^__^\n              (oo)\\_______\n              (__)      A )\\\n                  ||----w |\n                  ||     ||\n                    "),r.a.createElement(Rt.a,null,r.a.createElement(Nt.a,{component:"dl"},r.a.createElement(Dt.a,{component:"dt"},l._({id:"Ansible Version"})),r.a.createElement(Dt.a,{component:"dd"},t))))}Ut.defaultProps={ansible_version:null,isOpen:!1,version:null};var Gt=Object(u.withI18n)()(Ut),qt=a(978),Ft=a(1092),zt=a(982),Mt=a(983),Kt=a(984),Vt=a(985),Ht=a(986),Bt=["i18n","isOpen","title","label","variant","children","i18nHash"],Wt=j.b.div.withConfig({displayName:"AlertModal__Header",componentId:"sc-l9z1bu-0"})(["display:flex;svg{margin-right:16px;}"]);var Jt,Yt,Xt,Zt=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.isOpen,n=void 0===a?null:a,i=e.title,l=e.label,c=e.variant,s=e.children,u=(e.i18nHash,Object(o.a)(e,Bt)),d={danger:r.a.createElement($t,{size:"lg"}),error:r.a.createElement(Qt,{size:"lg"}),info:r.a.createElement(ea,{size:"lg"}),success:r.a.createElement(ta,{size:"lg"}),warning:r.a.createElement(aa,{size:"lg"})},m=r.a.createElement(Wt,null,c?d[c]:null,r.a.createElement(qt.a,{id:"alert-modal-header-label",size:"2xl",headingLevel:"h2"},i));return r.a.createElement(Ft.a,Object.assign({header:m,"aria-label":l||t._({id:"Alert modal"}),"aria-labelledby":"alert-modal-header-label",isOpen:Boolean(n),variant:"small",title:i},u),s)})),$t=Object(j.b)(zt.a).withConfig({displayName:"AlertModal___StyledExclamationCircleIcon",componentId:"sc-l9z1bu-1"})(["color:var(--pf-global--danger-color--100)"]),Qt=Object(j.b)(Mt.a).withConfig({displayName:"AlertModal___StyledTimesCircleIcon",componentId:"sc-l9z1bu-2"})(["color:var(--pf-global--danger-color--100)"]),ea=Object(j.b)(Kt.a).withConfig({displayName:"AlertModal___StyledInfoCircleIcon",componentId:"sc-l9z1bu-3"})(["color:var(--pf-global--info-color--100)"]),ta=Object(j.b)(Vt.a).withConfig({displayName:"AlertModal___StyledCheckCircleIcon",componentId:"sc-l9z1bu-4"})(["color:var(--pf-global--success-color--100)"]),aa=Object(j.b)(Ht.a).withConfig({displayName:"AlertModal___StyledExclamationTriangleIcon",componentId:"sc-l9z1bu-5"})(["color:var(--pf-global--warning-color--100)"]),na=a(477),ra=a(987),ia=a(988);var la=Object(j.b)(na.a)(Jt||(Jt=Object(v.a)(["\n  background-color: var(--pf-global--BackgroundColor--200);\n  overflow-wrap: break-word;\n"]))),oa=Object(j.b)(ra.a)(Yt||(Yt=Object(v.a)(["\n  max-height: 200px;\n  overflow: scroll;\n"]))),ca=Object(j.b)(ia.a)(Xt||(Xt=Object(v.a)(["\n  text-align: left;\n\n  & .pf-c-expandable__toggle {\n    padding-left: 10px;\n    margin-left: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n"])));var sa,ua=Object(u.withI18n)()((function(e){var t=e.error,a=e.i18n,i=t.response,l=Object(n.useState)(!1),o=Object(f.a)(l,2),c=o[0],s=o[1];return r.a.createElement(ca,{toggleText:a._({id:"Details"}),onToggle:function(){s(!c)},isExpanded:c},r.a.createElement(la,null,Object.prototype.hasOwnProperty.call(t,"response")?function(){var e,t,a=function(e){return(null===e||void 0===e?void 0:e.data)?"string"===typeof e.data?e.data:e.data.detail?e.data.detail:Object.values(e.data).reduce((function(e,t){return e.concat(t)}),[]):null}(i);return r.a.createElement(n.Fragment,null,r.a.createElement(oa,null,null===i||void 0===i||null===(e=i.config)||void 0===e?void 0:e.method.toUpperCase()," ",null===i||void 0===i||null===(t=i.config)||void 0===t?void 0:t.url," ",r.a.createElement("strong",null,null===i||void 0===i?void 0:i.status)),r.a.createElement(oa,null,Array.isArray(a)?r.a.createElement("ul",null,a.map((function(e){return"string"===typeof e?r.a.createElement("li",{key:e},e):null}))):a))}():r.a.createElement(oa,null,t.stack)))})),da=j.b.img(sa||(sa=Object(v.a)(["\n  flex: initial;\n  height: 76px;\n  width: initial;\n  padding-left: 0px;\n  margin: 0px 0px 0px 0px;\n  max-width: 100px;\n  max-height: initial;\n  pointer-events: none;\n"]))),ma=function(){return r.a.createElement(da,{src:"/static/media/logo-header.svg"})},pa=a(989),ba=a(990),fa=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;Object(k.a)(this,a);var r=(n=t.call(this,e)).props.routes;return n.navItemPaths=r.map((function(e){return e.path})),n.isActiveGroup=n.isActiveGroup.bind(Object(Z.a)(n)),n.isActivePath=n.isActivePath.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"isActiveGroup",value:function(){return this.navItemPaths.some(this.isActivePath)}},{key:"isActivePath",value:function(e){var t=this.props.history;return Boolean(Object(c.f)(t.location.pathname,{path:e}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.groupId,n=t.groupTitle,i=t.routes;if(1===i.length){var l=Object(f.a)(i,1)[0].path;return r.a.createElement(pa.a,{itemId:a,isActive:this.isActivePath(l),key:l},r.a.createElement(s.b,{to:l},n))}return r.a.createElement(ba.a,{isActive:this.isActiveGroup(),isExpanded:!0,groupId:a,title:n},i.map((function(t){var n=t.path,i=t.title;return r.a.createElement(pa.a,{groupId:a,isActive:e.isActivePath(n),key:n},r.a.createElement(s.b,{to:n},i))})))}}]),a}(n.Component),va=Object(c.k)(fa),_a=a(991),ha=a(992),Ea=a(236),ya=a(993),ga=a(994),Oa=a(52),ja=a(995),ka=a(997),wa=a(996),Ca=a(998);function Sa(e){var t=e.isAboutDisabled,a=e.onAboutClick,i=e.onLogoutClick,l=e.loggedInUser,o=e.i18n,c=Object(n.useState)(!1),s=Object(f.a)(c,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(f.a)(m,2),b=p[0],v=p[1];return r.a.createElement(_a.a,null,r.a.createElement(ha.a,null,r.a.createElement(Ea.a,{position:"left",content:r.a.createElement("div",null,o._({id:"Info"}))},r.a.createElement(ya.a,null,r.a.createElement(ga.a,{isPlain:!0,isOpen:u,position:Oa.d.right,onSelect:function(){d(!u)},toggle:r.a.createElement(ja.a,{onToggle:d,"aria-label":o._({id:"Info"})},r.a.createElement(wa.a,null)),dropdownItems:[r.a.createElement(ka.a,{key:"help",target:"_blank",href:"https://docs.ansible.com/ansible-tower/latest/html/userguide/index.html"},o._({id:"Help"})),r.a.createElement(ka.a,{key:"about",component:"button",isDisabled:t,onClick:a},o._({id:"About"}))]}))),r.a.createElement(Ea.a,{position:"left",content:r.a.createElement("div",null,o._({id:"User"}))},r.a.createElement(ya.a,null,r.a.createElement(ga.a,{id:"toolbar-user-dropdown",isPlain:!0,isOpen:b,position:Oa.d.right,onSelect:function(){v(!b)},toggle:r.a.createElement(ja.a,{onToggle:v},r.a.createElement(Ca.a,null),l&&r.a.createElement("span",{style:{marginLeft:"10px"}},l.username)),dropdownItems:[r.a.createElement(ka.a,{key:"user",href:l?"/users/".concat(l.id,"/details"):"/home"},o._({id:"User Details"})),r.a.createElement(ka.a,{key:"logout",component:"button",onClick:i,id:"logout-button"},o._({id:"Logout"}))]})))))}Sa.defaultProps={isAboutDisabled:!1};var xa,Ta=Object(u.withI18n)()(Sa),Ia=Math.pow(2,31)-1,Aa=Object(j.b)(_.a)(xa||(xa=Object(v.a)(["\n  & .pf-c-page__header-brand-link {\n    color: inherit;\n\n    &:hover {\n      color: inherit;\n    }\n  }\n"])));var Ra=Object(u.withI18n)()(Object(c.k)((function(e){var t=e.i18n,a=e.navRouteConfig,i=void 0===a?[]:a,l=e.children,o=Object(c.g)(),s=Object(c.h)().pathname,u=Object(n.useState)({}),m=Object(f.a)(u,2),v=m[0],_=m[1],j=Object(n.useState)(null),k=Object(f.a)(j,2),w=k[0],C=k[1],S=Object(n.useState)(!1),x=Object(f.a)(S,2),T=x[0],I=x[1],A=Object(n.useState)(!1),R=Object(f.a)(A,2),N=R[0],D=R[1],L=Object(n.useRef)(),P=Object(n.useRef)(),U=function(e){var t=Object(n.useState)(window.localStorage.getItem(e)),a=Object(f.a)(t,2),r=a[0],i=a[1];return window.addEventListener("storage",(function(){var t=window.localStorage.getItem(e);t!==r&&i(t)})),[r,function(t){window.localStorage.setItem(e,t),i(t)}]}("awx-session-timeout"),G=Object(f.a)(U,2),q=G[0],F=G[1],z=Object(n.useState)(!1),M=Object(f.a)(z,2),K=M[0],V=M[1],H=Object(n.useState)(null),B=Object(f.a)(H,2),W=B[0],J=B[1],Y=function(){return V(!0)},X=Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.logout();case 2:F(null);case 3:case"end":return e.stop()}}),e)}))),[F]);Object(n.useEffect)((function(){It(document.cookie)||o.replace("/login");var e=function(){return parseInt(q,10)-(new Date).getTime()};return V(!1),clearTimeout(L.current),clearInterval(P.current),L.current=setTimeout(Y,Math.min(e()-1e4,Ia)),P.current=setInterval((function(){return J(e())}),1e3),function(){clearTimeout(L.current),clearInterval(P.current)}}),[o,q]),Object(n.useEffect)((function(){null!==W&&W<=1&&X()}),[X,W]),Object(n.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===v||void 0===v?void 0:v.version)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Promise.all([Ve.read(),it.read()]);case 5:t=e.sent,a=Object(f.a)(t,2),n=a[0].data,r=Object(f.a)(a[1].data.results,1),i=r[0],_(Object(d.a)(Object(d.a)({},n),{},{me:i})),D(!0),e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(2),401!==e.t0.response.status){e.next=19;break}return X(),e.abrupt("return");case 19:C(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}})()()}),[v,s,X]);var Z=r.a.createElement(Aa,{showNavToggle:!0,logo:r.a.createElement(ma,null),logoProps:{href:"/"},headerTools:r.a.createElement(Ta,{loggedInUser:null===v||void 0===v?void 0:v.me,isAboutDisabled:!(null===v||void 0===v?void 0:v.version),onAboutClick:function(){return I(!0)},onLogoutClick:X})}),$=r.a.createElement(h.a,{theme:"dark",nav:r.a.createElement(E.a,{"aria-label":t._({id:"Navigation"}),theme:"dark"},r.a.createElement(y.a,null,i.map((function(e){var t=e.groupId,a=e.groupTitle,n=e.routes;return r.a.createElement(va,{key:t,groupId:t,groupTitle:a,routes:n})}))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{isManagedSidebar:!0,header:Z,sidebar:$},N&&r.a.createElement(St,{value:v},l)),r.a.createElement(Gt,{ansible_version:null===v||void 0===v?void 0:v.ansible_version,version:null===v||void 0===v?void 0:v.version,isOpen:T,onClose:function(){return I(!1)}}),r.a.createElement(Zt,{isOpen:w,variant:"error",title:t._({id:"Error!"}),onClose:function(){return C(null)}},t._({id:"Failed to retrieve configuration."}),r.a.createElement(ua,{error:w})),r.a.createElement(Zt,{title:t._({id:"Your session is about to expire"}),isOpen:K&&q>0&&null!==W,onClose:X,showClose:!1,variant:"warning",actions:[r.a.createElement(O.a,{key:"confirm",variant:"primary",onClick:function(){it.read(),V(!1)}},t._({id:"Continue"})),r.a.createElement(O.a,{key:"logout",variant:"secondary",onClick:X},t._({id:"Logout"}))]},t._({id:"You will be logged out in {0} seconds due to inactivity.",values:{0:Number(Math.max(Math.floor(W/1e3),0))}})))}))),Na=a(1097),Da=function(e){var t=e.children;return r.a.createElement(n.Fragment,null,r.a.createElement(Na.a,null),t)},La=a(1003),Pa=a(1e3),Ua=a(1001),Ga=a(1002);function qa(){return(qa=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.logout();case 2:window.location.replace("/#/login");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e){var t=e.error,a=e.children,i=e.isNotFound,l=e.i18n;if(t&&t.response&&401===t.response.status&&!t.response.headers["session-timeout"])return function(){qa.apply(this,arguments)}(),null;var o=i||t&&t.response&&404===t.response.status,u=t&&t.response&&401===t.response.status;return r.a.createElement(n.Fragment,null,u?r.a.createElement(c.a,{to:"/login"}):r.a.createElement(Pa.a,{variant:"full"},r.a.createElement(Ua.a,{icon:Ht.a}),r.a.createElement(qt.a,{size:"lg",headingLevel:"h3"},o?l._({id:"Not Found"}):l._({id:"Something went wrong..."})),r.a.createElement(Ga.a,null,o?l._({id:"The page you requested could not be found."}):l._({id:"There was an error loading this content. Please reload the page."})," ",a||r.a.createElement(s.b,{to:"/home"},l._({id:"Back to Dashboard."}))),t&&r.a.createElement(ua,{error:t})))}Fa.defaultProps={error:null,isNotFound:!1};var za=Object(u.withI18n)()(Fa);var Ma,Ka=function(){return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{isNotFound:!0})))},Va=a(12),Ha=a(1095),Ba=a(1005),Wa=a(1102),Ja=a(1006),Ya=a(1007),Xa=a(1008),Za=a(1009);function $a(e,t){var a=Object(n.useState)(t),r=Object(f.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)(null),c=Object(f.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(f.a)(d,2),v=m[0],_=m[1],h=Object(n.useRef)(null);return Object(n.useEffect)((function(){return h.current=!0,function(){h.current=!1}}),[]),{result:i,error:s,isLoading:v,request:Object(n.useCallback)(Object(b.a)(p.a.mark((function a(){var n,r=arguments;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return _(!0),a.prev=1,a.next=4,e.apply(void 0,r);case 4:n=a.sent,h.current&&(l(n),u(null)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),h.current&&(u(a.t0),l(t));case 11:return a.prev=11,h.current&&_(!1),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,8,11,14]])}))),[e]),setValue:l}}function Qa(e){var t=Object(n.useState)(!1),a=Object(f.a)(t,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){e&&i(!0)}),[e]),{error:r?e:null,dismissError:function(){i(!1)}}}function en(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.qsConfig,n=void 0===a?null:a,r=t.allItemsSelected,i=void 0!==r&&r,l=t.fetchItems,o=void 0===l?null:l,s=Object(c.h)(),u=Object(c.g)(),d=$a(e,null),m=d.error,f=d.isLoading,v=d.request,_=Qa(m),h=_.error,E=_.dismissError,y=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:if(n){e.next=4;break}return e.abrupt("return");case 4:(t=N(n,s.search)).page>1&&i?(a=P(n,M(t,{page:t.page-1})),u.push("".concat(s.pathname,"?").concat(a))):o();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{isLoading:f,deleteItems:y,deletionError:h,clearDeletionError:E}}var tn=Object(j.b)(Ha.a)(Ma||(Ma=Object(v.a)(["\n  & .pf-c-brand {\n    max-height: 285px;\n  }\n"])));var an=Object(u.withI18n)()(Object(c.k)((function(e){var t,a=e.alt,i=e.i18n,l=e.isAuthenticated,o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([mt.read(),mt.readAssetVariables(),Ke.read()]);case 2:return t=e.sent,a=Object(f.a)(t,3),n=a[0].data,r=n.custom_logo,i=n.custom_login_info,l=a[1].data.BRAND_NAME,o=a[2].data,c=r?"data:image/jpeg;".concat(r):"/static/media/logo-login.svg",e.abrupt("return",{brandName:l,logo:c,loginInfo:i,socialAuthOptions:o});case 11:case"end":return e.stop()}}),e)}))),[]),{brandName:null,logo:"/static/media/logo-login.svg",loginInfo:null,socialAuthOptions:{}}),s=o.isLoading,u=o.error,d=o.request,m=o.result,v=m.brandName,_=m.logo,h=m.loginInfo,E=m.socialAuthOptions,y=Qa(u),g=y.error,O=y.dismissError;Object(n.useEffect)((function(){d()}),[d]);var j,k=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,e.next=3,mt.login(a,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[])),w=k.isLoading,C=k.error,S=k.request,x=Qa(C),T=x.error,I=x.dismissError,A=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(),e.next=3,S(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s?null:l(document.cookie)?r.a.createElement(c.a,{to:"/"}):(j=401===(null===T||void 0===T||null===(t=T.response)||void 0===t?void 0:t.status)?i._({id:"Invalid username or password. Please try again."}):i._({id:"There was a problem signing in. Please try again."}),r.a.createElement(tn,{brandImgSrc:_,brandImgAlt:a||v,loginTitle:v?i._({id:"Welcome to Ansible {brandName}! Please Sign In.",values:{brandName:v}}):"",textContent:h,socialMediaLoginContent:r.a.createElement(r.a.Fragment,null,E&&Object.keys(E).map((function(e){var t=E[e].login_url;if("azuread-oauth2"===e)return r.a.createElement(Ba.a,{href:t,key:e},r.a.createElement(Ea.a,{content:i._({id:"Sign in with Azure AD"})},r.a.createElement(Ja.a,null)));if("github"===e)return r.a.createElement(Ba.a,{href:t,key:e},r.a.createElement(Ea.a,{content:i._({id:"Sign in with GitHub"})},r.a.createElement(Ya.a,null)));if("github-org"===e)return r.a.createElement(Ba.a,{href:t,key:e},r.a.createElement(Ea.a,{content:i._({id:"Sign in with GitHub Organizations"})},r.a.createElement(Ya.a,null)));if("github-team"===e)return r.a.createElement(Ba.a,{href:t,key:e},r.a.createElement(Ea.a,{content:i._({id:"Sign in with GitHub Teams"})},r.a.createElement(Ya.a,null)));if("google-oauth2"===e)return r.a.createElement(Ba.a,{href:t,key:e},r.a.createElement(Ea.a,{content:i._({id:"Sign in with Google"})},r.a.createElement(Xa.a,null)));if(e.startsWith("saml")){var a=e.split(":")[1]||null;return r.a.createElement(Ba.a,{href:t,key:e},r.a.createElement(Ea.a,{content:a?i._({id:"Sign in with SAML {samlIDP}",values:{samlIDP:a}}):i._({id:"Sign in with SAML"})},r.a.createElement(Za.a,null)))}return null})))},r.a.createElement(Va.a,{initialValues:{password:"",username:""},onSubmit:A},(function(e){return r.a.createElement(Wa.a,{className:T?"pf-m-error":"",helperText:j,isLoginButtonDisabled:w,isValidPassword:!T,isValidUsername:!T,loginButtonLabel:i._({id:"Log In"}),onChangePassword:function(t){e.setFieldValue("password",t),I()},onChangeUsername:function(t){e.setFieldValue("username",t),I()},onLoginButtonClick:e.handleSubmit,passwordLabel:i._({id:"Password"}),passwordValue:e.values.password,showHelperText:T,usernameLabel:i._({id:"Username"}),usernameValue:e.values.username})})),g&&r.a.createElement(Zt,{isOpen:g,variant:"error",title:i._({id:"Error!"}),onClose:O},i._({id:"Failed to fetch custom login configuration settings.  System defaults will be shown instead."}),r.a.createElement(ua,{error:g}))))}))),nn=a(482),rn=a.n(nn),ln=a(483),on=a.n(ln);function cn(e){return e.languages&&e.languages[0]?e.languages[0]:e.language?e.language:e.userLanguage}var sn,un,dn=a(1100),mn=a(33),pn=a(166),bn=a(137),fn=a(1108),vn=a(1109),_n=a(168),hn=a(135),En=a(1012),yn=a(1022),gn=a(1110),On=a(1016),jn=a(1014),kn=a(1015),wn=Object(j.b)(O.a)(sn||(sn=Object(v.a)(["\n  padding: 0;\n  margin: 0;\n  height: 30px;\n  width: 30px;\n  ",";\n"])),(function(e){return e.isActive?"\n      background-color: #007bba;\n      --pf-c-button--m-plain--active--Color: white;\n      --pf-c-button--m-plain--focus--Color: white;":null})),Cn=Object(j.b)(hn.a)(un||(un=Object(v.a)(["\n  & :not(:last-child) {\n    margin-right: 20px;\n  }\n"])));function Sn(e){var t=e.isCompact,a=e.onCompact,i=e.onExpand,l=e.i18n;return r.a.createElement(n.Fragment,null,r.a.createElement(Cn,null,r.a.createElement(wn,{variant:"plain","aria-label":l._({id:"Collapse"}),onClick:a,isActive:t},r.a.createElement(jn.a,null))),r.a.createElement(Cn,null,r.a.createElement(wn,{variant:"plain","aria-label":l._({id:"Expand"}),onClick:i,isActive:!t},r.a.createElement(kn.a,null))))}Sn.defaultProps={isCompact:!0};var xn=Object(u.withI18n)()(Sn),Tn=a(298),In=a(1017),An=a(1011),Rn=a(954),Nn=a(8),Dn=a.n(Nn),Ln=Object(Nn.shape)({descendent_roles:Object(Nn.arrayOf)(Nn.string),role:Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired,description:Nn.string,user_capabilities:Object(Nn.shape)({unattach:Nn.bool}).isRequired})}),Pn=(Object(Nn.shape)({id:Nn.number.isRequired,username:Nn.string.isRequired,url:Nn.string.isRequired,email:Nn.string,first_name:Nn.string,last_name:Nn.string,is_superuser:Nn.bool,is_system_auditor:Nn.bool,created:Nn.string,last_login:Nn.string,ldap_dn:Nn.string,related:Object(Nn.shape)({}),summary_fields:Object(Nn.shape)({direct_access:Object(Nn.arrayOf)(Ln).isRequired,indirect_access:Object(Nn.arrayOf)(Ln).isRequired}).isRequired,type:Nn.string}),Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired,organization:Nn.number,summary_fields:Object(Nn.shape)({organization:Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired})})}),Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired,custom_virtualenv:Nn.string,description:Nn.string,max_hosts:Nn.number,related:Object(Nn.shape)(),summary_fields:Object(Nn.shape)({object_roles:Object(Nn.shape)()}),type:Nn.string,url:Nn.string,created:Nn.string,modified:Nn.string})),Un=(Object(Nn.shape)({defaultParams:Object(Nn.shape)().isRequired,namespace:Nn.string,integerFields:Object(Nn.arrayOf)(Nn.string).isRequired}),Object(Nn.shape)({name:Nn.string.isRequired,description:Nn.string,inventory:Nn.number,job_type:Object(Nn.oneOf)(["run","check"]),playbook:Nn.string,project:Nn.number})),Gn=(Object(Nn.shape)({name:Nn.string.isRequired,description:Nn.string,inventory:Nn.number}),Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string,description:Nn.string,groups_with_active_failures:Nn.number,has_active_failures:Nn.bool,has_inventory_sources:Nn.bool,hosts_with_active_failures:Nn.number,inventory_sources_with_failures:Nn.number,kind:Nn.string,organization_id:Nn.number,total_groups:Nn.number,total_hosts:Nn.number,total_inventory_sources:Nn.number})),qn=(Object(Nn.shape)({description:Nn.string,id:Nn.number.isRequired,name:Nn.string}),Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired})),Fn=Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired}),zn=Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired}),Mn=Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired,cloud:Nn.bool,kind:Nn.string}),Kn=Object(Nn.shape)({id:Nn.number.isRequired,type:Object(Nn.oneOf)(["project"]),url:Nn.string,related:Object(Nn.shape)(),summary_fields:Object(Nn.shape)({organization:Pn,credential:Mn,last_job:Object(Nn.shape)({}),last_update:Object(Nn.shape)({}),created_by:Object(Nn.shape)({}),modified_by:Object(Nn.shape)({}),object_roles:Object(Nn.shape)({}),user_capabilities:Object(Nn.objectOf)(Nn.bool)}),created:Nn.string,name:Nn.string.isRequired,description:Nn.string,scm_type:Object(Nn.oneOf)(["","git","svn","archive","insights"]),scm_url:Nn.string,scm_branch:Nn.string,scm_refspec:Nn.string,scm_clean:Nn.bool,scm_delete_on_update:Nn.bool,credential:Nn.number,status:Object(Nn.oneOf)(["new","pending","waiting","running","successful","failed","error","canceled","never updated","ok","missing"]),organization:Nn.number,scm_update_on_launch:Nn.bool,scm_update_cache_timeout:Nn.number,allow_override:Nn.bool,custom_virtualenv:Nn.string}),Vn=Object(Nn.shape)({status:Nn.string,started:Nn.string,finished:Nn.string,job_type:Nn.string,summary_fields:Object(Nn.shape)({job_template:Un,project:Kn,inventory:Gn,instance_group:qn,credentials:Object(Nn.arrayOf)(Mn),labels:Object(Nn.shape)({count:Nn.number,results:Object(Nn.arrayOf)(zn)})}),scm_revision:Nn.string,limit:Object(Nn.oneOfType)([Nn.number,Nn.string]),verbosity:Nn.number,execution_mode:Nn.string,job_slice_number:Nn.number,job_slice_count:Nn.number,extra_vars:Nn.string,artifacts:Object(Nn.shape)({})}),Hn=(Object(Nn.shape)({id:Nn.number.isRequired,type:Object(Nn.oneOf)(["host"]),url:Nn.string,related:Object(Nn.shape)(),summary_fields:Object(Nn.shape)({inventory:Gn,last_job:Vn,last_job_host_summary:Object(Nn.shape)({}),created_by:Object(Nn.shape)({}),modified_by:Object(Nn.shape)({}),user_capabilities:Object(Nn.objectOf)(Nn.bool),groups:Object(Nn.shape)({}),recent_jobs:Object(Nn.arrayOf)(Vn)}),created:Nn.string,modified:Nn.string,name:Nn.string.isRequired,description:Nn.string,inventory:Nn.number.isRequired,enabled:Nn.bool,instance_id:Nn.string,variables:Nn.string,last_job:Nn.number,last_job_host_summary:Nn.number}),Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired,organization:Nn.number})),Bn=(Object(Nn.shape)({id:Nn.number.isRequired,expires:Nn.string.isRequired,summary_fields:Object(Nn.shape)({}),scope:Nn.string.isRequired}),Object(Nn.shape)({id:Nn.number.isRequired,type:Object(Nn.oneOf)(["user"]),url:Nn.string,related:Object(Nn.shape)(),summary_fields:Object(Nn.shape)({user_capabilities:Object(Nn.objectOf)(Nn.bool)}),created:Nn.string,username:Nn.string,first_name:Nn.string,last_name:Nn.string,email:Nn.string.isRequired,is_superuser:Nn.bool,is_system_auditor:Nn.bool,ldap_dn:Nn.string,last_login:Nn.string})),Wn=(Object(Nn.shape)({id:Nn.number.isRequired,username:Nn.string.isRequired,first_name:Nn.string,last_name:Nn.string}),Object(Nn.shape)({id:Nn.number.isRequired,type:Object(Nn.oneOf)(["group"]),url:Nn.string,related:Object(Nn.shape)({}),summary_fields:Object(Nn.shape)({}),created:Nn.string,modified:Nn.string,name:Nn.string.isRequired,description:Nn.string,inventory:Nn.number,variables:Nn.string}),Object(Nn.arrayOf)(Object(Nn.exact)({name:Nn.string.isRequired,key:Nn.string.isRequired,isDefault:Nn.bool,isBoolean:Nn.bool,booleanLabels:Object(Nn.shape)({true:Nn.string.isRequired,false:Nn.string.isRequired}),options:Object(Nn.arrayOf)(Object(Nn.arrayOf)(Nn.string,Nn.string))})),Object(Nn.arrayOf)(Object(Nn.exact)({name:Nn.string.isRequired,key:Nn.string.isRequired})),Object(Nn.shape)({rrule:Nn.string.isRequired,id:Nn.number.isRequired,type:Nn.string,url:Nn.string,related:Object(Nn.shape)({}),summary_fields:Object(Nn.shape)({}),created:Nn.string,modified:Nn.string,name:Nn.string.isRequired,description:Nn.string,extra_data:Object(Nn.oneOfType)([Nn.string,Object(Nn.shape)({})]),inventory:Nn.number,scm_branch:Nn.string,job_type:Nn.string,job_tags:Nn.string,skip_tags:Nn.string,limit:Nn.string,diff_mode:Nn.bool,verbosity:Nn.number,unified_job_template:Nn.number,enabled:Nn.bool,dtstart:Nn.string,dtend:Nn.string,next_run:Nn.string,timezone:Nn.string,until:Nn.string}),Object(Nn.shape)({question_name:Nn.string,question_description:Nn.string,required:Nn.bool,type:Nn.string,variable:Nn.string,min:Nn.number,max:Nn.number,default:Nn.string,choices:Nn.string})),Jn=(Object(Nn.shape)({name:Nn.string,description:Nn.string,spec:Object(Nn.arrayOf)(Wn)}),Object(Nn.shape)({id:Nn.number.isRequired,type:Nn.string.isRequired,url:Nn.string.isRequired,related:Object(Nn.shape)({}),summary_fields:Object(Nn.shape)({}),name:Nn.string.isRequired,description:Nn.string,kind:Nn.string.isRequired,namespace:Nn.string,inputs:Object(Nn.shape)({}).isRequired})),Yn=Object(Nn.oneOf)(["email","grafana","irc","mattermost","pagerduty","rocketchat","slack","twilio","webhook"]),Xn=(Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired,description:Nn.string,url:Nn.string.isRequired,organization:Nn.number.isRequired,notification_type:Yn,summary_fields:Object(Nn.shape)({organization:Pn})}),Object(Nn.shape)({id:Nn.number.isRequired,name:Nn.string.isRequired,description:Nn.string,url:Nn.string.isRequired,failed:Nn.bool,started:Nn.string,finished:Nn.string,canceled_on:Nn.string,elapsed:Nn.number,job_explanation:Nn.string,can_approve_or_deny:Nn.bool,approval_expiration:Nn.string,timed_out:Nn.bool})),Zn=j.b.div.withConfig({displayName:"AdvancedSearch__AdvancedGroup",componentId:"sc-4u0r69-0"})(["display:flex;@media (max-width:991px){display:grid;grid-gap:var(--pf-c-toolbar__expandable-content--m-expanded--GridRowGap);}"]);function $n(e){var t=e.i18n,a=e.onSearch,i=e.searchableKeys,l=e.relatedSearchableKeys,o=Object(A.a)(new Set([].concat(Object(A.a)(i||[]),Object(A.a)(l||[])))),c=Object(n.useState)(!1),s=Object(f.a)(c,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(f.a)(m,2),b=p[0],v=p[1],_=Object(n.useState)(!1),h=Object(f.a)(_,2),E=h[0],y=h[1],g=Object(n.useState)(null),j=Object(f.a)(g,2),k=j[0],w=j[1],C=Object(n.useState)(null),S=Object(f.a)(C,2),x=S[0],T=S[1],I=Object(n.useState)(null),R=Object(f.a)(I,2),N=R[0],D=R[1],L=Object(n.useState)(""),P=Object(f.a)(L,2),U=P[0],G=P[1],q=function(e){if(e.preventDefault(),U){var t,n="and"===k?null:k;t=l.indexOf(N)>-1&&-1===i.indexOf(N)&&-1===N.indexOf("__")?"".concat(N,"__search"):[n,N,x].filter((function(e){return!!e})).join("__"),a(t,U),G("")}};return r.a.createElement(Zn,null,r.a.createElement(dn.a,{"aria-label":t._({id:"Set type select"}),className:"setTypeSelect",variant:mn.e.typeahead,typeAheadAriaLabel:t._({id:"Set type typeahead"}),onToggle:d,onSelect:function(e,t){return w(t)},onClear:function(){return w(null)},selections:k,isOpen:u,placeholderText:t._({id:"Set type"}),maxHeight:"500px",noResultsFoundText:t._({id:"No results found"})},r.a.createElement(bn.a,{key:"and",value:"and",description:t._({id:"Returns results that satisfy this one as well as other filters.  This is the default set type if nothing is selected."})}),r.a.createElement(bn.a,{key:"or",value:"or",description:t._({id:"Returns results that satisfy this one or any other filters."})}),r.a.createElement(bn.a,{key:"not",value:"not",description:t._({id:"Returns results that have values other than this one as well as other filters."})})),r.a.createElement(dn.a,{"aria-label":t._({id:"Key select"}),className:"keySelect",variant:mn.e.typeahead,typeAheadAriaLabel:t._({id:"Key typeahead"}),onToggle:y,onSelect:function(e,t){return D(t)},onClear:function(){return D(null)},selections:N,isOpen:E,placeholderText:t._({id:"Key"}),isCreatable:!0,onCreateOption:D,maxHeight:"500px",noResultsFoundText:t._({id:"No results found"})},o.map((function(e){return r.a.createElement(bn.a,{key:e,value:e},e)}))),r.a.createElement(dn.a,{"aria-label":t._({id:"Lookup select"}),className:"lookupSelect",variant:mn.e.typeahead,typeAheadAriaLabel:t._({id:"Lookup typeahead"}),onToggle:v,onSelect:function(e,t){return T(t)},onClear:function(){return T(null)},selections:x,isOpen:b,placeholderText:t._({id:"Lookup type"}),maxHeight:"500px",noResultsFoundText:t._({id:"No results found"})},r.a.createElement(bn.a,{key:"exact",value:"exact",description:t._({id:"Exact match (default lookup if not specified)."})}),r.a.createElement(bn.a,{key:"iexact",value:"iexact",description:t._({id:"Case-insensitive version of exact."})}),r.a.createElement(bn.a,{key:"contains",value:"contains",description:t._({id:"Field contains value."})}),r.a.createElement(bn.a,{key:"icontains",value:"icontains",description:t._({id:"Case-insensitive version of contains"})}),r.a.createElement(bn.a,{key:"startswith",value:"startswith",description:t._({id:"Field starts with value."})}),r.a.createElement(bn.a,{key:"istartswith",value:"istartswith",description:t._({id:"Case-insensitive version of startswith."})}),r.a.createElement(bn.a,{key:"endswith",value:"endswith",description:t._({id:"Field ends with value."})}),r.a.createElement(bn.a,{key:"iendswith",value:"iendswith",description:t._({id:"Case-insensitive version of endswith."})}),r.a.createElement(bn.a,{key:"regex",value:"regex",description:t._({id:"Field matches the given regular expression."})}),r.a.createElement(bn.a,{key:"iregex",value:"iregex",description:t._({id:"Case-insensitive version of regex."})}),r.a.createElement(bn.a,{key:"gt",value:"gt",description:t._({id:"Greater than comparison."})}),r.a.createElement(bn.a,{key:"gte",value:"gte",description:t._({id:"Greater than or equal to comparison."})}),r.a.createElement(bn.a,{key:"lt",value:"lt",description:t._({id:"Less than comparison."})}),r.a.createElement(bn.a,{key:"lte",value:"lte",description:t._({id:"Less than or equal to comparison."})}),r.a.createElement(bn.a,{key:"isnull",value:"isnull",description:t._({id:"Check whether the given field or related object is null; expects a boolean value."})}),r.a.createElement(bn.a,{key:"in",value:"in",description:t._({id:"Check whether the given field's value is present in the list provided; expects a comma-separated list of items."})})),r.a.createElement(An.a,null,r.a.createElement(Rn.a,{type:"search","aria-label":t._({id:"Advanced search value input"}),isDisabled:!N,value:!N&&t._({id:"First, select a key"})||U,onChange:G,onKeyDown:function(e){e.key&&"Enter"===e.key&&q(e)}}),r.a.createElement(er,{$_css:!U&&"cursor:not-allowed"},r.a.createElement(O.a,{variant:O.b.control,isDisabled:!U,"aria-label":t._({id:"Search submit button"}),onClick:q},r.a.createElement(On.a,null)))))}$n.defaultProps={searchableKeys:[],relatedSearchableKeys:[]};var Qn=Object(u.withI18n)()($n),er=Object(j.b)("div").withConfig({displayName:"AdvancedSearch___StyledDiv",componentId:"sc-4u0r69-1"})(["",""],(function(e){return e.$_css})),tr=j.b.div.withConfig({displayName:"Search__NoOptionDropdown",componentId:"sc-hyqzuo-0"})(["align-self:stretch;border:1px solid var(--pf-global--BorderColor--300);padding:5px 15px;white-space:nowrap;border-bottom-color:var(--pf-global--BorderColor--200);"]);function ar(e){var t=e.columns,a=e.i18n,i=e.onSearch,l=e.onReplaceSearch,o=e.onRemove,c=e.qsConfig,s=e.location,u=e.searchableKeys,d=e.relatedSearchableKeys,m=e.onShowAdvancedSearch,p=Object(n.useState)(!1),b=Object(f.a)(p,2),v=b[0],_=b[1],h=Object(n.useState)(function(){var e,a=t.filter((function(e){return e.isDefault}));if(1!==a.length)throw new Error("One (and only one) searchColumn must be marked isDefault: true");return null===(e=a[0])||void 0===e?void 0:e.key}()),E=Object(f.a)(h,2),y=E[0],g=E[1],j=Object(n.useState)(""),k=Object(f.a)(j,2),w=k[0],C=k[1],S=Object(n.useState)(!1),x=Object(f.a)(S,2),T=x[0],I=x[1],A=function(e){e.preventDefault(),w&&(i(y,w),C(""))},R=function(e){e.key&&"Enter"===e.key&&A(e)},D=function(e,a){var n,r=e,i=t.find((function(e){return e.key===a}));if(null===i||void 0===i||null===(n=i.options)||void 0===n?void 0:n.length){var l=i.options.find((function(t){return Object(f.a)(t,1)[0]===e}));r=Object(f.a)(l,2)[1]}else(null===i||void 0===i?void 0:i.booleanLabels)&&(r=i.booleanLabels[e]);return(r||a).toString()},L=function(){var e=N(c,s.search),a={};return t.forEach((function(e){var t=e.name,n=e.key;a[n]={key:n,label:t,chips:[]}})),function(e,t){var a=Object.keys(t.defaultParams||{});return e.filter((function(e){return-1===a.indexOf(e)}))}(Object.keys(e||{}),c).forEach((function(n){var r=n,i=t.filter((function(e){var t=e.key;return r===t})).length?"".concat(t.find((function(e){var t=e.key;return r===t})).name," (").concat(n,")"):r;a[r]={key:n,label:i,chips:[]},Array.isArray(e[n])?e[n].forEach((function(e){return a[r].chips.push({key:"".concat(n,":").concat(e),node:D(e,r)})})):a[r].chips.push({key:"".concat(n,":").concat(e[n]),node:D(e[n],r)})})),a}(),P=t.find((function(e){return e.key===y})).name,U=t.filter((function(e){return e.key!==y})).map((function(e){var t=e.key,a=e.name;return r.a.createElement(bn.a,{key:t,value:a,id:"select-option-".concat(t)},a)}));return r.a.createElement(_n.a,{variant:"filter-group"},r.a.createElement(hn.a,null,U.length>0?r.a.createElement(dn.a,{variant:mn.e.single,className:"simpleKeySelect","aria-label":a._({id:"Simple key select"}),onToggle:_,onSelect:function(e){var a=e.target,n=t.find((function(e){return e.name===a.innerText})).key;m("advanced"===n),I(!1),g(n)},selections:P,isOpen:v,ouiaId:"simple-key-select"},U):r.a.createElement(tr,null,P)),t.map((function(e){var t,s=e.key,m=e.name,p=e.options,b=e.isBoolean,v=e.booleanLabels,_=void 0===v?{}:v;return r.a.createElement(In.a,{chips:L[s]?L[s].chips:[],deleteChip:function(e,t){var a=t.key.split(":"),n=Object(Tn.a)(a),r=n[0],i=n.slice(1);o(r,i.join(":"))},categoryName:L[s]?L[s].label:s,key:s,showToolbarItem:y===s},"advanced"===s&&r.a.createElement(Qn,{onSearch:i,searchableKeys:u,relatedSearchableKeys:d})||p&&r.a.createElement(n.Fragment,null,r.a.createElement(dn.a,{variant:mn.e.checkbox,"aria-label":m,onToggle:I,onSelect:function(e,t){return function(e,t,a){t.target.checked?i(e,a):o(e,a)}(s,e,t)},selections:L[s].chips.map((function(e){var t=e.key.split(":");return Object(Tn.a)(t).slice(1).join(":")})),isOpen:T,placeholderText:"Filter By ".concat(m),ouiaId:"filter-by-".concat(s)},p.map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return r.a.createElement(bn.a,{key:a,value:a,inputId:"select-option-".concat(a)},n)}))))||b&&r.a.createElement(dn.a,{"aria-label":m,onToggle:I,onSelect:function(e,t){return l(s,t)},selections:null===(t=L[s].chips[0])||void 0===t?void 0:t.label,isOpen:T,placeholderText:"Filter By ".concat(m),ouiaId:"filter-by-".concat(s)},r.a.createElement(bn.a,{key:"true",value:"true"},_.true||a._({id:"Yes"})),r.a.createElement(bn.a,{key:"false",value:"false"},_.false||a._({id:"No"})))||r.a.createElement(An.a,null,r.a.createElement(Rn.a,{type:c.integerFields.find((function(e){return e===y}))?"number":"search","aria-label":a._({id:"Search text input"}),value:w,onChange:C,onKeyDown:R}),r.a.createElement(ir,{$_css:!w&&"cursor:not-allowed"},r.a.createElement(O.a,{variant:O.b.control,isDisabled:!w,"aria-label":a._({id:"Search submit button"}),onClick:A},r.a.createElement(On.a,null)))))})),Object.keys(L).filter((function(e){return L[e].chips.length>0})).filter((function(e){return-1===t.map((function(e){return e.key})).indexOf(e)})).map((function(e){return r.a.createElement(In.a,{chips:L[e]?L[e].chips:[],deleteChip:function(e,t){var a=t.key.split(":"),n=Object(Tn.a)(a),r=n[0],i=n.slice(1);o(r,i.join(":"))},categoryName:L[e]?L[e].label:e,key:e})})))}ar.defaultProps={onSearch:null,onRemove:null};var nr,rr=Object(u.withI18n)()(Object(c.k)(ar)),ir=Object(j.b)("div").withConfig({displayName:"Search___StyledDiv",componentId:"sc-hyqzuo-1"})(["",""],(function(e){return e.$_css})),lr=a(1018),or=a(1019),cr=a(1020),sr=a(1021),ur=j.b.div(nr||(nr=Object(v.a)(["\n  align-self: stretch;\n  border: 1px solid var(--pf-global--BorderColor--300);\n  padding: 5px 15px;\n  white-space: nowrap;\n  border-bottom-color: var(--pf-global--BorderColor--200);\n"])));function dr(e){var t,a,i,l=e.columns,o=e.qsConfig,s=e.onSort,u=e.i18n,d=Object(c.h)(),m=Object(n.useState)(!1),p=Object(f.a)(m,2),b=p[0],v=p[1],_=N(o,d.search);_.order_by&&_.order_by.startsWith("-")?(t=_.order_by.substr(1),a="descending"):_.order_by&&(t=_.order_by,a="ascending"),i=!!o.integerFields.find((function(e){return e===t}));var h=function(e){v(e)},E=Oa.d.up,y=l.find((function(e){return e.key===t}));if(!y)throw new Error("sortKey must match one of the column keys, check the sortColumns prop passed to <Sort />");var g,j=null===y||void 0===y?void 0:y.name,k=l.filter((function(e){return e.key!==t})).map((function(e){var t=e.key,a=e.name;return r.a.createElement(ka.a,{key:t,component:"button"},a)}));return g=i?"ascending"===a?lr.a:or.a:"ascending"===a?cr.a:sr.a,r.a.createElement(n.Fragment,null,j&&r.a.createElement(An.a,null,k.length>0&&r.a.createElement(ga.a,{onToggle:h,onSelect:function(e){var n=e.target.innerText,r=l.filter((function(e){return e.name===n})),c=Object(f.a)(r,1)[0].key;t=c,i=!!o.integerFields.find((function(e){return e===c})),v(!1),s(t,a)},direction:E,isOpen:b,toggle:r.a.createElement(ja.a,{id:"awx-sort",onToggle:h},j),dropdownItems:k})||r.a.createElement(ur,null,j),r.a.createElement(O.a,{variant:O.b.control,"aria-label":u._({id:"Sort"}),onClick:function(){s(t,"ascending"===a?"descending":"ascending")}},r.a.createElement(g,null))))}dr.defaultProps={onSort:null};var mr=Object(u.withI18n)()(Object(c.k)(dr)),pr=r.a.createContext({}),br=pr.Provider,fr=(pr.Consumer,function(){return Object(n.useContext)(pr)});function vr(e){var t=e.itemCount,a=e.clearAllFilters,i=e.searchColumns,l=e.searchableKeys,o=e.relatedSearchableKeys,c=e.sortColumns,s=e.showSelectAll,u=e.isAllSelected,d=e.isCompact,m=e.onSort,p=e.onSearch,b=e.onReplaceSearch,v=e.onRemove,_=e.onCompact,h=e.onExpand,E=e.onSelectAll,y=e.additionalControls,g=e.i18n,O=e.qsConfig,j=e.pagination,k=_&&h,w=Object(n.useState)(!1),C=Object(f.a)(w,2),S=C[0],x=C[1],T=Object(n.useState)(!1),I=Object(f.a)(T,2),R=I[0],N=I[1],D=Object(n.useState)(!1),L=Object(f.a)(D,2),P=L[0],U=L[1];return Object(n.useEffect)((function(){R||x(!1)}),[R]),r.a.createElement(fn.a,{id:"".concat(O.namespace,"-list-toolbar"),clearAllFilters:a,collapseListedFiltersBreakpoint:"lg",clearFiltersButtonText:g._({id:"Clear all filters"})},r.a.createElement(vn.a,null,s&&r.a.createElement(_n.a,null,r.a.createElement(hn.a,null,r.a.createElement(En.a,{isChecked:u,onChange:E,"aria-label":g._({id:"Select all"}),id:"select-all"}))),r.a.createElement(yn.a,{toggleIcon:r.a.createElement(On.a,null),breakpoint:"lg"},r.a.createElement(hn.a,null,r.a.createElement(rr,{qsConfig:O,columns:[].concat(Object(A.a)(i),[{name:g._({id:"\u9ad8\u7ea7"}),key:"advanced"}]),searchableKeys:l,relatedSearchableKeys:o,onSearch:p,onReplaceSearch:b,onShowAdvancedSearch:function(e){U(e),x(!1)},onRemove:v})),c&&r.a.createElement(hn.a,null,r.a.createElement(mr,{qsConfig:O,columns:c,onSort:m}))),k&&r.a.createElement(_n.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(hn.a,null,r.a.createElement(xn,{isCompact:d,onCompact:_,onExpand:h})))),P&&y.length>0&&r.a.createElement(hn.a,null,r.a.createElement(br,{value:{isKebabified:!0,onKebabModalChange:N}},r.a.createElement(ga.a,{toggle:r.a.createElement(gn.a,{onToggle:function(e){R||x(e)}}),isOpen:S,isPlain:!0,dropdownItems:y}))),!P&&r.a.createElement(_n.a,null,y.map((function(e){return r.a.createElement(hn.a,{key:e.key},e)}))),!P&&j&&t>0&&r.a.createElement(hn.a,{variant:"pagination"},j)))}vr.defaultProps={itemCount:0,searchableKeys:[],relatedSearchableKeys:[],sortColumns:null,clearAllFilters:null,showSelectAll:!1,isAllSelected:!1,isCompact:!1,onCompact:null,onExpand:null,onSearch:null,onReplaceSearch:null,onSelectAll:null,onSort:null,additionalControls:[]};var _r,hr=Object(u.withI18n)()(vr),Er=a(1112),yr=a(1024),gr=a(15),Or=j.b.div(_r||(_r=Object(v.a)(["\n  display: flex;\n  margin-top: 20px;\n  margin-right: 20px;\n  margin-bottom: 20px;\n  justify-content: flex-end;\n\n  & > :not(:first-child) {\n    margin-left: 20px;\n  }\n"]))),jr=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).handleSearch=n.handleSearch.bind(Object(Z.a)(n)),n.handleReplaceSearch=n.handleReplaceSearch.bind(Object(Z.a)(n)),n.handleSort=n.handleSort.bind(Object(Z.a)(n)),n.handleRemove=n.handleRemove.bind(Object(Z.a)(n)),n.handleRemoveAll=n.handleRemoveAll.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"handleSearch",value:function(e,t){var a=this.props,n=a.location,r=N(a.qsConfig,n.search);r=M(r=F(r,Object(gr.a)({},e,t)),{page:1}),this.pushHistoryState(r)}},{key:"handleReplaceSearch",value:function(e,t){var a=this.props,n=a.location,r=N(a.qsConfig,n.search);this.pushHistoryState(M(r,Object(gr.a)({},e,t)))}},{key:"handleRemove",value:function(e,t){var a=this.props,n=a.location,r=a.qsConfig,i=N(r,n.search);parseInt(t,10)&&(i=G(r,i,Object(gr.a)({},e,parseInt(t,10)))),this.pushHistoryState(G(r,i,Object(gr.a)({},e,t)))}},{key:"handleRemoveAll",value:function(){var e=this.props,t=e.location,a=e.qsConfig,n=N(a,t.search),r=Object(d.a)({},n);delete r.page_size,delete r.order_by,this.pushHistoryState(G(a,n,r))}},{key:"handleSort",value:function(e,t){var a=this.props,n=a.location,r=N(a.qsConfig,n.search);this.pushHistoryState(M(r,{order_by:"ascending"===t?e:"-".concat(e),page:null}))}},{key:"pushHistoryState",value:function(e){var t=this.props,a=t.history,n=t.qsConfig,r=a.location.pathname,i=N({},a.location.search),l=P(n,e,i);a.push(l?"".concat(r,"?").concat(l):r)}},{key:"render",value:function(){var e=this.props,t=e.emptyStateControls,a=e.itemCount,i=e.searchColumns,l=e.searchableKeys,o=e.relatedSearchableKeys,c=e.sortColumns,s=e.renderToolbar,u=e.qsConfig,d=e.location,m=e.pagination,p=N(u,d.search),b=0===a&&0===Object.keys(p).length;return r.a.createElement(n.Fragment,null,b?r.a.createElement(fn.a,{id:"".concat(u.namespace,"-list-toolbar"),clearAllFilters:this.handleRemoveAll,collapseListedFiltersBreakpoint:"lg"},r.a.createElement(vn.a,null,r.a.createElement(Or,null,t))):r.a.createElement(n.Fragment,null,s({itemCount:a,searchColumns:i,sortColumns:c,searchableKeys:l,relatedSearchableKeys:o,onSearch:this.handleSearch,onReplaceSearch:this.handleReplaceSearch,onSort:this.handleSort,onRemove:this.handleRemove,clearAllFilters:this.handleRemoveAll,qsConfig:u,pagination:m})))}}]),a}(r.a.Component);jr.defaultProps={renderToolbar:function(e){return r.a.createElement(hr,e)},searchableKeys:[],sortColumns:null,relatedSearchableKeys:[]};var kr,wr,Cr,Sr,xr=Object(c.k)(jr),Tr=a(1023),Ir=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.title,n=void 0===a?"":a,i=e.message,l=void 0===i?"":i;return r.a.createElement(Pa.a,{variant:"full"},r.a.createElement(Ua.a,{icon:Tr.a}),r.a.createElement(qt.a,{size:"lg",headingLevel:"h3"},n||t._({id:"No items found."})),r.a.createElement(Ga.a,null,l))})),Ar=a(516),Rr=Object(j.b)(Pa.a)(kr||(kr=Object(v.a)(["\n  --pf-c-empty-state--m-lg--MaxWidth: none;\n  min-height: 250px;\n"]))),Nr=function(e){var t=e.className;return r.a.createElement(Rr,{variant:"full",className:t},r.a.createElement(Ua.a,{variant:"container",component:Ar.a}))},Dr=a(1096),Lr=Object(j.b)(Dr.a)(wr||(wr=Object(v.a)(["\n  ","\n"])),(function(e){return e.perPageOptions&&!e.perPageOptions.length&&Object(j.a)(Cr||(Cr=Object(v.a)(["\n      .pf-c-options-menu__toggle-button {\n        display: none;\n      }\n    "])))})),Pr=function(e){return r.a.createElement(u.I18n,null,(function(t){var a=t.i18n;return r.a.createElement(Lr,Object.assign({titles:{items:a._({id:"items"}),page:a._({id:"page"}),pages:a._({id:"pages"}),itemsPerPage:a._({id:"Items per page"}),perPageSuffix:a._({id:"per page"}),toFirstPage:a._({id:"Go to first page"}),toPreviousPage:a._({id:"Go to previous page"}),toLastPage:a._({id:"Go to last page"}),toNextPage:a._({id:"Go to next page"}),optionsToggle:a._({id:"\u9009\u62e9"}),currPage:a._({id:"Current page"}),paginationTitle:a._({id:"Pagination"})},dropDirection:Oa.c.up},e))}))},Ur=j.b.div(Sr||(Sr=Object(v.a)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  z-index: 300;\n  width: 100%;\n  height: 100%;\n  & + * {\n    opacity: 0.5;\n  }\n"]))),Gr=function(){return r.a.createElement(Ur,null,r.a.createElement(Ar.a,null))};function qr(e){var t,a=e.contentError,i=e.hasContentLoading,l=e.emptyStateControls,o=e.items,s=e.itemCount,u=e.qsConfig,d=e.headerRow,m=e.renderRow,p=e.toolbarSearchColumns,b=e.toolbarSearchableKeys,f=e.toolbarRelatedSearchableKeys,v=e.pluralizedItemName,_=e.showPageSizeOptions,h=e.i18n,E=e.renderToolbar,y=Object(c.g)(),g=function(e){var t=y.location,a=t.pathname,n=N({},t.search),r=P(u,e,n);y.push(r?"".concat(a,"?").concat(r):a)},O=function(e,t){var a=N(u,y.location.search);g(M(a,{page:t}))},j=function(e,t,a){var n=N(u,y.location.search);g(M(n,{page_size:t,page:a}))},k=p.length?p:[{name:h._({id:"\u540d\u79f0"}),key:"name",isDefault:!0}],w=N(u,y.location.search),C=h._({id:"{pluralizedItemName} List",values:{pluralizedItemName:v}}),S=h._({id:"Please add {pluralizedItemName} to populate this list",values:{pluralizedItemName:v}}),x=h._({id:"No {pluralizedItemName} Found",values:{pluralizedItemName:v}});t=i&&o.length<=0?r.a.createElement(Nr,null):a?r.a.createElement(za,{error:a}):o.length<=0?r.a.createElement(Ir,{title:x,message:S}):r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(Gr,null),r.a.createElement(Er.a,{"aria-label":C},d,r.a.createElement(yr.a,null,o.map(m))));var T=r.a.createElement(Pr,{isCompact:!0,dropDirection:"down",itemCount:s,page:w.page||1,perPage:w.page_size,perPageOptions:_?[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50}]:[],onSetPage:O,onPerPageSelect:j});return r.a.createElement(n.Fragment,null,r.a.createElement(xr,{itemCount:s,renderToolbar:E,emptyStateControls:l,searchColumns:k,searchableKeys:b,relatedSearchableKeys:f,qsConfig:u,pagination:T}),t,o.length?r.a.createElement(Pr,{variant:"bottom",itemCount:s,page:w.page||1,perPage:w.page_size,perPageOptions:_?[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50}]:[],onSetPage:O,onPerPageSelect:j}):null)}qr.defaultProps={hasContentLoading:!1,contentError:null,toolbarSearchColumns:[],toolbarSearchableKeys:[],toolbarRelatedSearchableKeys:[],pluralizedItemName:"Items",showPageSizeOptions:!0,renderToolbar:function(e){return r.a.createElement(hr,e)}};var Fr=Object(u.withI18n)()(qr),zr=a(1090),Mr=["children"],Kr=j.b.div.withConfig({displayName:"ActionsTd__ActionsGrid",componentId:"sc-1ys3lw-0"})(["display:grid;grid-gap:16px;align-items:center;",""],(function(e){var t="40px ".repeat(e.numActions||1);return Object(j.a)(["grid-template-columns:",";"],t)}));function Vr(e){var t=e.children,a=Object(o.a)(e,Mr),n=t.length||1,i=40*n;return r.a.createElement(Br,Object.assign({},a,{$_css:i}),r.a.createElement(Kr,{numActions:n},r.a.Children.map(t,(function(e,t){return r.a.cloneElement(e,{column:t+1})}))))}Kr.displayName="ActionsGrid";var Hr,Br=Object(j.b)(zr.a).withConfig({displayName:"ActionsTd___StyledTd",componentId:"sc-1ys3lw-1"})(["text-align:right;--pf-c-table--cell--Width:","px;"],(function(e){return e.$_css})),Wr=a(1091),Jr=a(1025),Yr=a(1026),Xr=Object(j.b)(Wr.a)(Hr||(Hr=Object(v.a)(["\n  --pf-c-table--cell--Overflow: initial;\n"])));function Zr(e){var t,a,n,i=e.qsConfig,l=e.children,o=Object(c.h)(),s=Object(c.g)(),u=N(i,o.search),d=function(e,t){var a=M(u,{order_by:"asc"===t?e:"-".concat(e),page:null}),n=N({},s.location.search),r=P(i,a,n);s.push(r?"".concat(o.pathname,"?").concat(r):o.pathname)},m={index:(null===(t=u.order_by)||void 0===t?void 0:t.replace("-",""))||(null===(a=i.defaultParams)||void 0===a?void 0:a.order_by),direction:(null===(n=u.order_by)||void 0===n?void 0:n.startsWith("-"))?"desc":"asc"};return r.a.createElement(Jr.a,null,r.a.createElement(Yr.a,null,r.a.createElement(Xr,null),r.a.Children.map(l,(function(e){return r.a.cloneElement(e,{onSort:d,sortBy:m,columnIndex:e.props.sortKey})}))))}function $r(e){var t=e.sortKey,a=e.onSort,n=e.sortBy,i=e.columnIndex,l=e.children,o=t?{onSort:function(e,n,r){return a(t,r)},sortBy:n,columnIndex:i}:null;return r.a.createElement(Xr,{sort:o},l)}function Qr(e){var t=e.column,a=e.tooltip,n=e.visible,i=e.children;return n?r.a.createElement(ei,{$_css:t},r.a.createElement(Ea.a,{content:a,position:"top"},i)):null}var ei=Object(j.b)("div").withConfig({displayName:"ActionItem___StyledDiv",componentId:"sc-1x1z9nz-0"})(["grid-column:",";"],(function(e){return e.$_css})),ti=a(29),ai=function(e){return e.toString().padStart(2,0)};function ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cn(navigator);return null===e?null:new Date(e).toLocaleString(t)}function ri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cn(navigator);return null===e?null:new Date(e).toLocaleString(t,{timeZone:"UTC"})}function ii(e){return new Date(1e3*e).toISOString().substr(11,8)}function li(){var e=new Date,t=e.getHours(),a=ai(e.getMinutes()),n=ai(e.getSeconds());return t>12?"".concat(t-12,":").concat(a,":").concat(n," PM"):"".concat(t,":").concat(a,":").concat(n," AM")}function oi(e){var t=e.getFullYear(),a=ai(e.getMonth()+1),n=ai(e.getDate()),r=ai(e.getHours()),i=ai(e.getMinutes()),l=ai(e.getSeconds());return"".concat(t,"-").concat(a,"-").concat(n,"T").concat(r,":").concat(i,":").concat(l)}function ci(e,t){switch(e){case"sunday":return ti.a.SU;case"monday":return ti.a.MO;case"tuesday":return ti.a.TU;case"wednesday":return ti.a.WE;case"thursday":return ti.a.TH;case"friday":return ti.a.FR;case"saturday":return ti.a.SA;case"day":return[ti.a.MO,ti.a.TU,ti.a.WE,ti.a.TH,ti.a.FR,ti.a.SA,ti.a.SU];case"weekday":return[ti.a.MO,ti.a.TU,ti.a.WE,ti.a.TH,ti.a.FR];case"weekendDay":return[ti.a.SA,ti.a.SU];default:throw new Error(t._({id:"Unrecognized day string"}))}}var si,ui,di=a(1033),mi=["children","stacked"],pi=Object(j.b)((function(e){var t=e.children,a=(e.stacked,Object(o.a)(e,mi));return r.a.createElement(Nt.a,Object.assign({component:Nt.b.dl},a),t)}))(si||(si=Object(v.a)(["\n  display: grid;\n  grid-gap: 20px;\n  align-items: start;\n  ","\n"])),(function(e){return e.stacked?"\n    grid-template-columns: auto 1fr;\n  ":"\n    --column-count: 1;\n    grid-template-columns: repeat(var(--column-count), auto minmax(10em, 1fr));\n\n    @media (min-width: 920px) {\n      --column-count: 2;\n    }\n\n    @media (min-width: 1210px) {\n      --column-count: 3;\n    }\n  "})),bi=a(1098),fi=a(1027),vi=["i18n","i18nHash","ariaLabel","content","header","id","maxWidth"],_i=j.b.button(ui||(ui=Object(v.a)(["\n  padding: var(--pf-global--spacer--xs);\n  margin: -(var(--pf-global--spacer--xs));\n  font-size: var(--pf-global--FontSize--sm);\n"])));function hi(e){var t=e.i18n,a=(e.i18nHash,e.ariaLabel),n=e.content,i=e.header,l=e.id,c=e.maxWidth,s=Object(o.a)(e,vi);return n?r.a.createElement(bi.a,Object.assign({bodyContent:n,headerContent:i,hideOnOutsideClick:!0,id:l,"data-cy":l,maxWidth:c},s),r.a.createElement(_i,{"aria-label":null!==a&&void 0!==a?a:t._({id:"More information"}),"aria-haspopup":"true",className:"pf-c-form__group-label-help",onClick:function(e){return e.preventDefault()},type:"button"},r.a.createElement(fi.a,{noVerticalAlign:!0}))):null}hi.defaultProps={ariaLabel:null,content:null,header:null,id:"",maxWidth:""};var Ei,yi,gi=Object(u.withI18n)()(hi),Oi=["fullWidth"],ji=["fullWidth","isEncrypted","isNotConfigured"],ki=Object(j.b)((function(e){e.fullWidth;var t=Object(o.a)(e,Oi);return r.a.createElement(Dt.a,t)}))(Ei||(Ei=Object(v.a)(["\n  font-weight: var(--pf-global--FontWeight--bold);\n  ","\n"])),(function(e){return e.fullWidth&&"\n    grid-column: 1;\n  "})),wi=Object(j.b)((function(e){e.fullWidth,e.isEncrypted,e.isNotConfigured;var t=Object(o.a)(e,ji);return r.a.createElement(Dt.a,t)}))(yi||(yi=Object(v.a)(["\n  word-break: break-all;\n  ","\n  ","\n"])),(function(e){return e.fullWidth&&"\n    grid-column: 2 / -1;\n  "}),(function(e){return(e.isEncrypted||e.isNotConfigured)&&"\n    color: var(--pf-global--Color--400);\n  "})),Ci=function(e){var t=e.label,a=e.value,n=e.fullWidth,i=e.className,l=e.dataCy,o=e.alwaysVisible,c=e.helpText,s=e.isEncrypted,u=e.isNotConfigured;if(!a&&"number"!==typeof a&&!o)return null;var d=l?"".concat(l,"-label"):null,m=l?"".concat(l,"-value"):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ki,{className:i,component:Dt.b.dt,fullWidth:n,"data-cy":d,id:l},t,c&&r.a.createElement(gi,{header:t,content:c,id:l})),r.a.createElement(wi,{className:i,component:Dt.b.dd,fullWidth:n,"data-cy":m,isEncrypted:s,isNotConfigured:u},a))};Ci.defaultProps={value:null,fullWidth:!1,alwaysVisible:!1,helpText:null};var Si,xi=Ci,Ti=Object(j.b)(xi)(Si||(Si=Object(v.a)(["\n  dd& {\n    color: red;\n  }\n"])));var Ii,Ai=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.label;return r.a.createElement(Ti,{label:a,value:t._({id:"Deleted"})})})),Ri=Object(j.b)(xi)(Ii||(Ii=Object(v.a)(["\n  word-break: break-word;\n"])));function Ni(e){var t=e.label,a=e.date,n=e.user,i=e.dataCy,l=void 0===i?null:i,o=ni(a),c=n?n.username:"";return r.a.createElement(Ri,{label:t,dataCy:l,value:n?r.a.createElement(u.Trans,{id:"{dateStr} by <0>{username}</0>",values:{dateStr:o,username:c},components:[r.a.createElement(s.b,{to:"/users/".concat(n.id)})]}):o})}Ni.defaultProps={user:null};var Di,Li=Ni,Pi=a(1028),Ui=Object(j.b)(xi)(Di||(Di=Object(v.a)(["\n  word-break: break-word;\n"])));var Gi=function(e){var t=e.label,a=e.content,n=e.dataCy,i=void 0===n?null:n;return r.a.createElement(Ui,{label:t,dataCy:i,value:r.a.createElement(Pi.a,{isRead:!0},a)})},qi=Object(j.b)(wi).withConfig({displayName:"ArrayDetail__Value",componentId:"sc-klzohf-0"})(["margin-top:var(--pf-global--spacer--xs);padding:var(--pf-global--spacer--xs);border:1px solid var(--pf-global--BorderColor--100);max-height:5.5em;overflow:auto;"]);var Fi,zi=function(e){var t=e.label,a=e.value,n=e.dataCy,i=n?"".concat(n,"-label"):null,l=n?"".concat(n,"-value"):null,o=Array.isArray(a)?a:[a];return r.a.createElement(Mi,null,r.a.createElement(ki,{component:Dt.b.dt,"data-cy":i},t),r.a.createElement(qi,{component:Dt.b.dd,"data-cy":l},o.map((function(e){return r.a.createElement("div",null,e)}))))},Mi=Object(j.b)("div").withConfig({displayName:"ArrayDetail___StyledDiv",componentId:"sc-klzohf-1"})(["grid-column:span 2"]),Ki=a(497),Vi=(a(745),a(746),a(747),a(748),a(749),Object(j.b)(Ki.Controlled)(Fi||(Fi=Object(v.a)(["\n  && {\n    height: initial;\n    padding: 0;\n  }\n\n  & > .CodeMirror {\n    height: ",";\n    font-family: var(--pf-global--FontFamily--monospace);\n  }\n\n  ","\n\n  ","\n  ","\n"])),(function(e){return e.fullHeight?"auto":"".concat(24*e.rows+12,"px")}),(function(e){return e.hasErrors&&"\n    && {\n      --pf-c-form-control--PaddingRight: var(--pf-c-form-control--invalid--PaddingRight);\n      --pf-c-form-control--BorderBottomColor: var(--pf-c-form-control--invalid--BorderBottomColor);\n      padding-right: 24px;\n      padding-bottom: var(--pf-c-form-control--invalid--PaddingBottom);\n      background: var(--pf-c-form-control--invalid--Background);\n      border-bottom-width: var(--pf-c-form-control--invalid--BorderBottomWidth);\n    }"}),(function(e){return e.options&&e.options.readOnly&&"\n    &,\n    &:hover {\n      --pf-c-form-control--BorderBottomColor: var(--pf-global--BorderColor--300);\n    }\n\n    .CodeMirror-cursors {\n      display: none;\n    }\n\n    .CodeMirror-lines {\n      cursor: default;\n    }\n\n    .CodeMirror-scroll {\n      background-color: var(--pf-c-form-control--disabled--BackgroundColor);\n    }\n  "}),(function(e){return e.options&&e.options.placeholder&&"\n    .CodeMirror-empty {\n      pre.CodeMirror-placeholder {\n        color: var(--pf-c-form-control--placeholder--Color);\n        height: 100% !important;\n      }\n    }\n  "})));function Hi(e){var t=e.value,a=e.onChange,i=e.mode,l=e.readOnly,o=e.hasErrors,c=e.rows,s=e.fullHeight,u=e.className,d=e.placeholder,m=Object(n.useState)(!1),p=Object(f.a)(m,2),b=p[0],v=p[1];return Object(n.useEffect)((function(){b||v(!0)}),[b]),b?r.a.createElement(Vi,{className:"pf-c-form-control ".concat(u),value:t,onBeforeChange:function(e,t,n){return a(n)},mode:i,hasErrors:o,options:{smartIndent:!1,lineNumbers:!0,lineWrapping:!0,placeholder:d,readOnly:l},fullHeight:s,rows:c}):r.a.createElement("div",null)}Hi.defaultProps={readOnly:!1,onChange:function(){},rows:6,fullHeight:!1,hasErrors:!1,className:""};var Bi=Hi,Wi=a(1107),Ji=["id","name","label","tooltip","helperText","validate","isRequired","mode"];function Yi(e){var t=e.id,a=e.name,n=e.label,i=e.tooltip,l=e.helperText,c=e.validate,s=e.isRequired,u=e.mode,d=Object(o.a)(e,Ji),m=Object(Va.b)({name:a,validate:c}),p=Object(f.a)(m,3),b=p[0],v=p[1],_=p[2],h=!(v.touched&&v.error);return r.a.createElement(Wi.a,{id:"".concat(t,"-field"),fieldId:t,helperText:l,helperTextInvalid:v.error,isRequired:s,validated:h?"default":"error",label:n,labelIcon:r.a.createElement(gi,{content:i})},r.a.createElement(Bi,Object.assign({id:t},d,b,{onChange:function(e){_.setValue(e)},mode:u})))}Yi.defaultProps={helperText:"",validate:function(){},isRequired:!1,tooltip:null,rows:5};var Xi,Zi=Yi,$i=a(1029),Qi=a(1030),el=j.b.div(Xi||(Xi=Object(v.a)(["\n  display: inline-flex;\n\n  & > .pf-c-button:not(:last-child) {\n    &,\n    &::after {\n      border-top-right-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n\n  & > .pf-c-button:not(:first-child) {\n    &,\n    &::after {\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n    }\n  }\n"])));var tl,al=function(e){var t=e.children;return r.a.createElement(el,null,t)},nl=Object(j.b)(O.a)(tl||(tl=Object(v.a)(["\n  padding: 3px 8px;\n  font-size: var(--pf-global--FontSize--xs);\n"])));var rl=function(e){var t=e.buttons,a=e.value,n=e.onChange;return r.a.createElement(al,null,t&&t.map((function(e){var t=Object(f.a)(e,2),i=t[0],l=t[1];return r.a.createElement(nl,{"aria-label":l,key:l,onClick:function(){var e;a!==(e=i)&&n(e)},variant:i===a?"primary":"secondary"},l)})))},il=a(114),ll=a.n(il);function ol(e){var t=ll.a.safeLoad(e);if(!t)return"{}";if("object"!==typeof t)throw new Error("yaml is not in object format");return JSON.stringify(t,null,2)}function cl(e){if(""===e.trim())return"---\n";var t=JSON.parse(e);return 0===Object.entries(t).length?"---\n":ll.a.safeDump(t)}function sl(e){return"object"===typeof e&&null!==e}function ul(e){if("string"!==typeof e)return!1;var t;try{t=JSON.parse(e)}catch(a){return!1}return"object"===typeof t&&null!==t}function dl(e){return"---"===e||"{}"===e?{}:(ul(e)||(e=ol(e)),e=JSON.parse(e))}var ml="javascript";function pl(e,t){return e?ul(e)===(t===ml)?e:"yaml"===t?cl(e):ol(e):t===ml?"{}":"---"}function bl(e){var t=e.dataCy,a=e.helpText,i=e.value,l=e.label,o=e.rows,c=e.fullHeight,s=Object(n.useState)(sl(i)||ul(i)?ml:"yaml"),u=Object(f.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(sl(i)?JSON.stringify(i,null,2):i||"---"),b=Object(f.a)(p,2),v=b[0],_=b[1],h=Object(n.useState)(null),E=Object(f.a)(h,2),y=E[0],g=E[1];Object(n.useEffect)((function(){_(pl(sl(i)?JSON.stringify(i,null,2):i,d))}),[i]);var O=t?"".concat(t,"-label"):null,j=t?"".concat(t,"-value"):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(hl,{"data-cy":O,id:t,component:Dt.b.dt,fullWidth:!0},r.a.createElement($i.a,{hasGutter:!0},r.a.createElement(Qi.a,null,r.a.createElement("div",{className:"pf-c-form__label"},r.a.createElement(El,{className:"pf-c-form__label-text"},l),a&&r.a.createElement(gi,{header:l,content:a,id:t}))),r.a.createElement(Qi.a,null,r.a.createElement(rl,{buttons:[["yaml","YAML"],[ml,"JSON"]],value:d,onChange:function(e){try{_(pl(v,e)),m(e)}catch(t){g(t)}}})))),r.a.createElement(yl,{"data-cy":j,component:Dt.b.dd,fullWidth:!0},r.a.createElement(gl,{mode:d,value:v,readOnly:!0,rows:o,fullHeight:c}),y&&r.a.createElement(Ol,null,"Error: ",y.message)))}bl.defaultProps={rows:null,dataCy:"",helpText:""};var fl,vl,_l=bl,hl=Object(j.b)(ki).withConfig({displayName:"VariablesDetail___StyledDetailName",componentId:"sc-126yzyl-0"})(["grid-column:1 / -1"]),El=Object(j.b)("span").withConfig({displayName:"VariablesDetail___StyledSpan",componentId:"sc-126yzyl-1"})(["font-weight:var(--pf-global--FontWeight--bold)"]),yl=Object(j.b)(wi).withConfig({displayName:"VariablesDetail___StyledDetailValue",componentId:"sc-126yzyl-2"})(["grid-column:1 / -1;margin-top:-20px"]),gl=Object(j.b)(Bi).withConfig({displayName:"VariablesDetail___StyledCodeMirrorInput",componentId:"sc-126yzyl-3"})(["margin-top:10px"]),Ol=Object(j.b)("div").withConfig({displayName:"VariablesDetail___StyledDiv",componentId:"sc-126yzyl-4"})(["color:var(--pf-global--danger-color--100);font-size:var(--pf-global--FontSize--sm"]);var jl=Object(j.b)(Qi.a)(fl||(fl=Object(v.a)(["\n  margin-bottom: 5px;\n"])));function kl(e){var t,a=e.id,i=e.label,l=e.readOnly,o=e.rows,c=e.error,s=e.onError,u=e.className,d=ul(e.value)?(t=e.value,JSON.stringify(JSON.parse(t),null,2)):e.value,m=Object(n.useState)(d),p=Object(f.a)(m,2),b=p[0],v=p[1],_=Object(n.useState)(ul(b)?ml:"yaml"),h=Object(f.a)(_,2),E=h[0],y=h[1],g=!!e.onChange,O=function(t){g&&e.onChange(t),v(t)};return r.a.createElement("div",{className:"pf-c-form__group ".concat(u||"")},r.a.createElement($i.a,{hasGutter:!0},r.a.createElement(Qi.a,null,r.a.createElement("label",{htmlFor:a,className:"pf-c-form__label"},i)),r.a.createElement(jl,null,r.a.createElement(rl,{buttons:[["yaml","YAML"],[ml,"JSON"]],value:E,onChange:function(e){try{O(E===ml?cl(b):ol(b)),y(e)}catch(t){s(t.message)}}}))),r.a.createElement(Bi,{mode:E,readOnly:l,value:b,onChange:O,rows:o,hasErrors:!!c}),c?r.a.createElement("div",{className:"pf-c-form__helper-text pf-m-error","aria-live":"polite"},c):null)}kl.defaultProps={readOnly:!1,onChange:null,rows:6,error:null,onError:function(){}};var wl=Object(j.b)(kl)(vl||(vl=Object(v.a)(["\n  --pf-c-form__label--FontSize: var(--pf-global--FontSize--sm);\n"]))),Cl=a(957),Sl=["id","helperText","name","label","tooltip","tooltipMaxWidth","validate","isRequired","type"];function xl(e){var t=e.id,a=e.helperText,n=e.name,i=e.label,l=e.tooltip,c=e.tooltipMaxWidth,s=e.validate,u=e.isRequired,d=e.type,m=Object(o.a)(e,Sl),p=Object(Va.b)({name:n,validate:s}),b=Object(f.a)(p,2),v=b[0],_=b[1],h=!(_.touched&&_.error);return r.a.createElement(r.a.Fragment,null,"textarea"===d&&r.a.createElement(Wi.a,{fieldId:t,helperText:a,helperTextInvalid:_.error,isRequired:u,validated:h?"default":"error",label:i,labelIcon:r.a.createElement(gi,{content:l,maxWidth:c})},r.a.createElement(Cl.b,Object.assign({id:t,isRequired:u,validated:h?"default":"error",resizeOrientation:"vertical"},m,v,{onChange:function(e,t){v.onChange(t)}})))||r.a.createElement(Wi.a,{fieldId:t,helperText:a,helperTextInvalid:_.error,isRequired:u,validated:h?"default":"error",label:i,labelIcon:r.a.createElement(gi,{content:l,maxWidth:c})},r.a.createElement(Rn.a,Object.assign({id:t,isRequired:u,validated:h?"default":"error"},m,v,{type:d,onChange:function(e,t){v.onChange(t)}}))))}xl.defaultProps={helperText:"",type:"text",validate:function(){},isRequired:!1,tooltip:null,tooltipMaxWidth:""};var Tl=xl,Il=["id","name","label","tooltip","validate","isDisabled"];function Al(e){var t=e.id,a=e.name,n=e.label,i=e.tooltip,l=e.validate,c=e.isDisabled,s=Object(o.a)(e,Il),u=Object(Va.b)({name:a,validate:l}),d=Object(f.a)(u,1)[0];return r.a.createElement(En.a,Object.assign({isDisabled:c,"aria-label":n,label:r.a.createElement("span",null,n,"\xa0",i&&r.a.createElement(gi,{content:i})),id:t},s,{isChecked:d.value},d,{onChange:function(e,t){d.onChange(t)}}))}Al.defaultProps={validate:function(){},tooltip:""};var Rl=Al,Nl=a(1031),Dl=a(1032);function Ll(e){var t=e.autocomplete,a=e.id,i=e.name,l=e.validate,o=e.isRequired,c=e.isDisabled,s=e.i18n,u=Object(n.useState)("password"),d=Object(f.a)(u,2),m=d[0],p=d[1],b=Object(Va.b)({name:i,validate:l}),v=Object(f.a)(b,2),_=v[0],h=v[1],E=!(h.touched&&h.error);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{content:"password"===m?s._({id:"Show"}):s._({id:"Hide"})},r.a.createElement(O.a,{variant:O.b.control,"aria-label":s._({id:"Toggle Password"}),onClick:function(){p("text"===m?"password":"text")},isDisabled:c},"password"===m&&r.a.createElement(Nl.a,null),"text"===m&&r.a.createElement(Dl.a,null))),r.a.createElement(Rn.a,Object.assign({autoComplete:t,id:a,placeholder:"$encrypted$"===_.value?"ENCRYPTED":void 0},_,{value:"$encrypted$"===_.value?"":_.value,isDisabled:c,isRequired:o,validated:E?"default":"error",type:m,onChange:function(e,t){_.onChange(t)}})))}Ll.defaultProps={autocomplete:"new-password",validate:function(){},isRequired:!1,isDisabled:!1};var Pl=Object(u.withI18n)()(Ll);function Ul(e){var t=e.id,a=e.name,n=e.label,i=e.validate,l=e.isRequired,o=e.helperText,c=Object(Va.b)({name:a,validate:i}),s=Object(f.a)(c,2)[1],u=!(s.touched&&s.error);return r.a.createElement(Wi.a,{fieldId:t,helperTextInvalid:s.error,isRequired:l,validated:u?"default":"error",label:n,labelIcon:o&&r.a.createElement(gi,{content:o})},r.a.createElement(An.a,null,r.a.createElement(Pl,e)))}Ul.defaultProps={validate:function(){},isRequired:!1,isDisabled:!1};var Gl,ql,Fl,zl,Ml=Ul,Kl=a(1104),Vl=j.b.div(Gl||(Gl=Object(v.a)(["\n  width: 100%;\n  grid-column: 1 / -1;\n  display: grid;\n  grid-gap: var(--pf-c-form--GridGap);\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n\n  @media (min-width: 1210px) {\n    grid-template-columns: repeat(3, 1fr);\n  }\n"]))),Hl=j.b.div(ql||(ql=Object(v.a)(["\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-gap: var(--pf-c-form--GridGap);\n"]))),Bl=j.b.div(Fl||(Fl=Object(v.a)(["\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  margin-bottom: -10px;\n  margin-right: -30px !important;\n\n  & > * {\n    margin-bottom: 10px;\n    margin-right: 30px;\n  }\n"]))),Wl=j.b.div(zl||(zl=Object(v.a)(["\n  grid-column: 1 / -1;\n  background-color: #f5f5f5;\n  margin-right: calc(var(--pf-c-card--child--PaddingRight) * -1);\n  margin-left: calc(var(--pf-c-card--child--PaddingLeft) * -1);\n  padding: var(--pf-c-card--child--PaddingRight);\n\n  & > .pf-c-title {\n    --pf-c-title--m-md--FontWeight: 700;\n    grid-column: 1 / -1;\n    margin-bottom: 20px;\n  }\n"])));function Jl(e,t){var a={},n=[];return Object.keys(e).forEach((function(r){var i=e[r];if("string"===typeof i)"undefined"===typeof t[r]?n.push(i):a[r]=i;else if(Array.isArray(i))"undefined"===typeof t[r]?n=n.concat(i):a[r]=i.join("; ");else if("object"===typeof i){var l=Jl(i,t[r]||{});Object.keys(l.fieldErrors).length&&(a=Object(d.a)(Object(d.a)({},a),{},Object(gr.a)({},r,l.fieldErrors))),n=n.concat(l.formErrors)}})),{fieldErrors:a,formErrors:n}}var Yl=function(e){var t=e.error,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],o=i[1],c=Object(Va.c)(),s=c.values,u=c.setErrors;return Object(n.useEffect)((function(){var e=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};if((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)&&"object"===typeof e.response.data&&Object.keys(e.response.data).length>0){var n=Jl(e.response.data,a);return{formError:n.formErrors.join("; "),fieldErrors:Object.keys(n.fieldErrors).length?n.fieldErrors:null}}return console.error(e),{formError:e.message,fieldErrors:null}}(t,s),a=e.formError,n=e.fieldErrors;a&&o(a),n&&u(n)}),[t,u,s]),l?r.a.createElement(Hl,null,r.a.createElement(Kl.a,{variant:"danger",isInline:!0,title:Array.isArray(l)?l.map((function(e){return r.a.createElement("div",{key:e},e)})):l})):null},Xl=["id","helperText","name","label","tooltip","tooltipMaxWidth","validate","isRequired","type"];function Zl(e){var t=e.id,a=e.helperText,n=e.name,i=e.label,l=e.tooltip,c=e.tooltipMaxWidth,s=e.validate,u=e.isRequired,d=(e.type,Object(o.a)(e,Xl)),m=Object(Va.b)({name:n,validate:s}),p=Object(f.a)(m,3),b=p[0],v=p[1],_=p[2],h=!(v.touched&&v.error),E=b.value||[];return r.a.createElement(Wi.a,{fieldId:t,helperText:a,helperTextInvalid:v.error,isRequired:u,validated:h?"default":"error",label:i,labelIcon:r.a.createElement(gi,{content:l,maxWidth:c})},r.a.createElement(Cl.b,Object.assign({id:t,isRequired:u,validated:h?"default":"error",resizeOrientation:"vertical"},d,b,{value:E.join("\n"),onChange:function(e){_.setValue(e.split("\n").map((function(e){return e.trim()})))}})))}Zl.defaultProps={helperText:"",validate:function(){},isRequired:!1,tooltip:null,tooltipMaxWidth:""};var $l,Ql,eo=Zl,to=j.b.div($l||($l=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding-bottom: var(--pf-c-form__group-label--PaddingBottom);\n"]))),ao=Object(j.b)(Rl)(Ql||(Ql=Object(v.a)(["\n  --pf-c-check__label--FontSize: var(--pf-c-form__label--FontSize);\n"])));function no(e){var t=e.i18n,a=e.id,i=e.name,l=e.label,o=e.readOnly,c=e.promptId,s=e.tooltip,u=Object(Va.b)(i),d=Object(f.a)(u,3),m=d[0],p=d[1],b=d[2],v=Object(n.useState)(ul(m.value)?ml:"yaml"),_=Object(f.a)(v,2),h=_[0],E=_[1];return r.a.createElement("div",{className:"pf-c-form__group"},r.a.createElement(to,null,r.a.createElement($i.a,{hasGutter:!0},r.a.createElement(Qi.a,null,r.a.createElement("label",{htmlFor:a,className:"pf-c-form__label"},r.a.createElement("span",{className:"pf-c-form__label-text"},l)),s&&r.a.createElement(gi,{content:s,id:a})),r.a.createElement(Qi.a,null,r.a.createElement(rl,{buttons:[["yaml","YAML"],[ml,"JSON"]],value:h,onChange:function(e){try{var t="yaml"===e?cl(m.value):ol(m.value);b.setValue(t),E(e)}catch(a){b.setError(a.message)}}}))),c&&r.a.createElement(ao,{id:"template-ask-variables-on-launch",label:t._({id:"Prompt on launch"}),name:"ask_variables_on_launch"})),r.a.createElement(Bi,Object.assign({mode:h,readOnly:o},m,{onChange:function(e){b.setValue(e)},hasErrors:!!p.error})),p.error?r.a.createElement("div",{className:"pf-c-form__helper-text pf-m-error","aria-live":"polite"},p.error):null)}no.defaultProps={readOnly:!1,promptId:null};var ro=Object(u.withI18n)()(no),io=Bi;var lo=Object(u.withI18n)()((function(e){var t,a,i,l=e.i18n,o=e.streamItem,c=e.user,s=e.description,u=Object(n.useState)(!1),d=Object(f.a)(u,2),m=d[0],p=d[1],b=null===o||void 0===o||null===(t=o.summary_fields)||void 0===t?void 0:t.setting,v=Math.max(Object.keys((null===o||void 0===o?void 0:o.changes)||[]).length+2,6);return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{"aria-label":l._({id:"View event details"}),variant:"plain",component:"button",onClick:function(){return p(!0)}},r.a.createElement(di.a,null)),r.a.createElement(Ft.a,{variant:"large",isOpen:m,title:l._({id:"Event detail"}),"aria-label":l._({id:"Event detail modal"}),onClose:function(){return p(!1)}},r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:l._({id:"Time"}),value:ni(o.timestamp)}),r.a.createElement(xi,{label:l._({id:"Initiated by"}),value:c}),r.a.createElement(xi,{label:l._({id:"Setting category"}),value:b&&(null===(a=b[0])||void 0===a?void 0:a.category)}),r.a.createElement(xi,{label:l._({id:"Setting name"}),value:b&&(null===(i=b[0])||void 0===i?void 0:i.name)}),r.a.createElement(xi,{fullWidth:!0,label:l._({id:"Action"}),value:s}),(null===o||void 0===o?void 0:o.changes)&&r.a.createElement(_l,{label:l._({id:"Changes"}),rows:v,value:null===o||void 0===o?void 0:o.changes}))))})),oo=function(e,t,a){var n,i;try{if(!a.summary_fields[t])throw new Error("The referenced resource no longer exists");switch(t){case"custom_inventory_script":n="/inventory_scripts/".concat(e.id,"/");break;case"group":if("create"===a.operation||"delete"===a.operation){var l=a.changes.inventory.split("-").slice(-1),o=Object(f.a)(l,1)[0];n="/inventories/inventory/".concat(o,"/groups/").concat(a.changes.id,"/details/")}else n="/inventories/inventory/".concat(a.summary_fields.inventory[0].id,"/groups/").concat(a.changes.id||a.changes.object1_pk,"/details/");break;case"host":n="/hosts/".concat(e.id,"/");break;case"job":n="/jobs/".concat(e.id,"/");break;case"inventory":n="smart"===(null===e||void 0===e?void 0:e.kind)?"/inventories/smart_inventory/".concat(e.id,"/"):"/inventories/inventory/".concat(e.id,"/");break;case"schedule":if(a.summary_fields.job_template){var c=a.summary_fields.job_template[0].id;n="/templates/job_template/".concat(c,"/schedules/").concat(e.id,"/")}else if(a.summary_fields.workflow_job_template){var u=a.summary_fields.workflow_job_template[0].id;n="/templates/workflow_job_template/".concat(u,"/schedules/").concat(e.id,"/")}else if(a.summary_fields.project)n="/projects/".concat(a.summary_fields.project[0].id,"/schedules/").concat(e.id,"/");else{if(!a.summary_fields.system_job_template)throw new Error("activity.summary_fields to build this url not implemented yet");n=null}break;case"setting":n="/settings/";break;case"notification_template":n="/notification_templates/".concat(e.id,"/");break;case"role":throw new Error("role object management is not consolidated to a single UI view");case"job_template":n="/templates/job_template/".concat(e.id,"/");break;case"workflow_job_template":n="/templates/workflow_job_template/".concat(e.id,"/");break;case"workflow_job_template_node":var d=a.summary_fields.workflow_job_template[0],m=d.id,p=d.name;n="/templates/workflow_job_template/".concat(m,"/"),i=p;break;case"workflow_job":n="/jobs/workflow/".concat(e.id,"/");break;case"label":n=null;break;case"inventory_source":var b=(e.inventory||"").split("-").reverse()[0];n="/inventories/inventory/".concat(b,"/sources/").concat(e.id,"/details/");break;case"o_auth2_application":n="/applications/".concat(e.id,"/");break;case"workflow_approval":n="/jobs/workflow/".concat(a.summary_fields.workflow_job[0].id,"/output/"),i="".concat(a.summary_fields.workflow_job[0].name," | ").concat(a.summary_fields.workflow_approval[0].name);break;case"workflow_approval_template":n="/templates/workflow_job_template/".concat(a.summary_fields.workflow_job_template[0].id,"/visualizer/"),i="".concat(a.summary_fields.workflow_job_template[0].name," | ").concat(a.summary_fields.workflow_approval_template[0].name);break;default:n="/".concat(t,"s/").concat(e.id,"/")}return i=i||e.name||e.username,n?r.a.createElement(s.b,{to:n},i):r.a.createElement("span",null,i)}catch(v){return r.a.createElement("span",null,e.name||e.username||"")}},co=function(e){return/e$/.test(e)?"".concat(e,"d"):"".concat(e,"ed")},so=function(e){return"group"===e.object1&&"group"===e.object2&&e.summary_fields.group.length>1},uo=function(e,t){return r.a.createElement("span",null,e," ",t)};var mo=Object(u.withI18n)()((function(e){var t,a,n=e.i18n,i=e.activity,l=[];try{switch(i.object_association){case"role":var o=i.object1,c=i.object2;switch(i.object_type===o&&(o=i.object2,c=i.object1),i.operation){case"disassociate":so(i)?(l.push(uo(co(i.operation),oo(i.summary_fields.group[1],c,i))),l.push(uo("".concat(i.summary_fields.role[0].role_field," from"),oo(i.summary_fields.group[0],o,i)))):(l.push(uo(co(i.operation),oo(i.summary_fields[c][0],c,i))),l.push(uo("".concat(i.summary_fields.role[0].role_field," from"),oo(i.summary_fields[o][0],o,i))));break;case"associate":so(i)?(l.push(uo(co(i.operation),oo(i.summary_fields.group[1],c,i))),l.push(uo("".concat(i.summary_fields.role[0].role_field," to"),oo(i.summary_fields.group[0],o,i)))):(l.push(uo(co(i.operation),oo(i.summary_fields[c][0],c,i))),l.push(uo("".concat(i.summary_fields.role[0].role_field," to"),oo(i.summary_fields[o][0],o,i))))}break;case"parents":switch(i.operation){case"disassociate":so(i)?(l.push(uo("".concat(co(i.operation)," ").concat(i.object2),oo(i.summary_fields.group[1],i.object2,i))),l.push(uo("from ".concat(i.object1),oo(i.summary_fields.group[0],i.object1,i)))):(l.push(uo(co(i.operation),oo(i.summary_fields[i.object2][0],i.object2,i))),l.push(uo("".concat(i.summary_fields.role[0].role_field," from"),oo(i.summary_fields[i.object1][0],i.object1,i))));break;case"associate":so(i)?(l.push(uo("".concat(co(i.operation)," ").concat(i.object1),oo(i.summary_fields.group[0],i.object1,i))),l.push(uo("to ".concat(i.object2),oo(i.summary_fields.group[1],i.object2,i)))):(l.push(uo(co(i.operation),oo(i.summary_fields[i.object2][0],i.object2,i))),l.push(uo("".concat(i.summary_fields.role[0].role_field," to"),oo(i.summary_fields[i.object1][0],i.object1,i))))}break;default:switch(i.operation){case"disassociate":so(i)?(l.push(uo("".concat(co(i.operation)," ").concat(i.object2),oo(i.summary_fields.group[1],i.object2,i))),l.push(uo("from ".concat(i.object1),oo(i.summary_fields.group[0],i.object1,i)))):"workflow_job_template_node"===i.object1&&"workflow_job_template_node"===i.object2?l.push(uo("".concat(co(i.operation)," two nodes on workflow"),oo(i.summary_fields[i.object1[0]],i.object1,i))):(l.push(uo("".concat(co(i.operation)," ").concat(i.object2),oo(i.summary_fields[i.object2][0],i.object2,i))),l.push(uo("from ".concat(i.object1),oo(i.summary_fields[i.object1][0],i.object1,i))));break;case"associate":so(i)?(l.push(uo("".concat(co(i.operation)," ").concat(i.object1),oo(i.summary_fields.group[0],i.object1,i))),l.push(uo("to ".concat(i.object2),oo(i.summary_fields.group[1],i.object2,i)))):"workflow_job_template_node"===i.object1&&"workflow_job_template_node"===i.object2?l.push(uo("".concat(co(i.operation)," two nodes on workflow"),oo(i.summary_fields[i.object1[0]],i.object1,i))):(l.push(uo("".concat(co(i.operation)," ").concat(i.object1),oo(i.summary_fields[i.object1][0],i.object1,i))),l.push(uo("to ".concat(i.object2),oo(i.summary_fields[i.object2][0],i.object2,i))));break;case"delete":l.push(uo("".concat(co(i.operation)," ").concat(i.object1),oo(i.changes,i.object1,i)));break;case"update":if("workflow_approval"===i.object1&&2===(null===i||void 0===i||null===(t=i.changes)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.length)){var s="";s="successful"===i.changes.status[1]?n._({id:"approved"}):"failed"===i.changes.status[1]?i.changes.timed_out&&!0===i.changes.timed_out[1]?n._({id:"timed out"}):n._({id:"denied"}):n._({id:"updated"}),l.push(uo("".concat(s," ").concat(i.object1),oo(i.summary_fields[i.object1][0],i.object1,i)))}else l.push(uo("".concat(co(i.operation)," ").concat(i.object1),oo(i.summary_fields[i.object1][0],i.object1,i)));break;case"create":l.push(uo("".concat(co(i.operation)," ").concat(i.object1),oo(i.changes,i.object1,i)))}}}catch(u){return r.a.createElement("span",null,n._({id:"Event summary not available"}))}return r.a.createElement("span",null,l.reduce((function(e,t){return null===e?t:r.a.createElement(r.a.Fragment,null,e," ",t)}),null))}));var po=Object(u.withI18n)()((function(e){var t=e.streamItem,a=e.i18n,n="check-action-".concat(t.id),i=function(e){var t,n,i;return(null===e||void 0===e||null===(t=e.summary_fields)||void 0===t||null===(n=t.actor)||void 0===n?void 0:n.id)?r.a.createElement(s.b,{to:"/users/".concat(e.summary_fields.actor.id,"/details")},e.summary_fields.actor.username):(null===e||void 0===e||null===(i=e.summary_fields)||void 0===i?void 0:i.actor)?a._({id:"{0} (deleted)",values:{0:e.summary_fields.actor.username}}):a._({id:"system"})}(t),l=r.a.createElement(mo,{activity:t});return r.a.createElement(Yr.a,{id:t.id,"aria-labelledby":n},r.a.createElement(zr.a,null),r.a.createElement(zr.a,{dataLabel:a._({id:"Time"})},t.timestamp?ni(t.timestamp):""),r.a.createElement(zr.a,{dataLabel:a._({id:"Initiated By"})},i),r.a.createElement(zr.a,{id:n,dataLabel:a._({id:"Event"})},l),r.a.createElement(Vr,{dataLabel:a._({id:"Actions"})},r.a.createElement(Qr,{visible:!0,tooltip:a._({id:"View event details"})},r.a.createElement(lo,{streamItem:t,user:i,description:l}))))}));var bo,fo=Object(u.withI18n)()((function(e){var t=e.i18n,a=La.b.light,i=Object(n.useState)(!1),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(c.h)(),m=Object(c.g)(),v=new URLSearchParams(u.search),_=v.get("type")||"all",h={};"all"!==_&&(h={or__object1__in:_,or__object2__in:_});var E=R("activity_stream",{page:1,page_size:20,order_by:"-timestamp"},["id","page","page_size"]),y=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(E,u.search),e.next=3,Promise.all([Fe.read(Object(d.a)(Object(d.a)({},n),h)),Fe.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0],o=i[1],e.abrupt("return",{results:l.data.results,count:l.data.count,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[u]),{results:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),g=y.result,O=g.results,j=g.count,k=g.relatedSearchableKeys,w=g.searchableKeys,C=y.error,S=y.isLoading,x=y.request;return Object(n.useEffect)((function(){x()}),[x]),r.a.createElement(n.Fragment,null,r.a.createElement(La.a,{variant:a,className:"pf-m-condensed",style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(qt.a,{size:"2xl",headingLevel:"h2"},t._({id:"\u6d3b\u52a8\u6d41"})),r.a.createElement("span",{id:"grouped-type-select-id",hidden:!0},t._({id:"Activity Stream type selector"})),r.a.createElement(dn.a,{width:"250px",maxHeight:"480px",variant:mn.e.single,"aria-labelledby":"grouped-type-select-id",className:"activityTypeSelect",onToggle:s,onSelect:function(e,t){t&&v.set("type",t),s(!1),function(e){var t=N(E,u.search);t=M(t,{page:1});var a=P(E,t,{type:e.get("type")});m.push(a?"".concat(u.pathname,"?").concat(a):u.pathname)}(v)},selections:_,isOpen:o,isGrouped:!0},r.a.createElement(pn.a,{label:t._({id:"Views"}),key:"views"},r.a.createElement(bn.a,{key:"all_activity",value:"all"},t._({id:"Dashboard (all activity)"})),r.a.createElement(bn.a,{key:"jobs",value:"job"},t._({id:"\u4f5c\u4e1a"})),r.a.createElement(bn.a,{key:"schedules",value:"schedule"},t._({id:"\u8ba1\u5212"})),r.a.createElement(bn.a,{key:"workflow_approvals",value:"workflow_approval"},t._({id:"\u5de5\u4f5c\u6d41\u5ba1\u6279"}))),r.a.createElement(pn.a,{label:t._({id:"Resources"}),key:"resources"},r.a.createElement(bn.a,{key:"templates",value:"job_template,workflow_job_template,workflow_job_template_node"},t._({id:"Templates"})),r.a.createElement(bn.a,{key:"credentials",value:"credential"},t._({id:"Credentials"})),r.a.createElement(bn.a,{key:"projects",value:"project"},t._({id:"Projects"})),r.a.createElement(bn.a,{key:"inventories",value:"inventory"},t._({id:"Inventories"})),r.a.createElement(bn.a,{key:"hosts",value:"host"},t._({id:"Hosts"}))),r.a.createElement(pn.a,{label:t._({id:"Access"}),key:"access"},r.a.createElement(bn.a,{key:"organizations",value:"organization"},t._({id:"Organizations"})),r.a.createElement(bn.a,{key:"users",value:"user"},t._({id:"\u7528\u6237"})),r.a.createElement(bn.a,{key:"teams",value:"team"},t._({id:"\u56e2\u961f"}))),r.a.createElement(pn.a,{label:t._({id:"Adminisration"}),key:"administration"},r.a.createElement(bn.a,{key:"credential_types",value:"credential_type"},t._({id:"Credential Types"})),r.a.createElement(bn.a,{key:"notification_templates",value:"notification_template"},t._({id:"Notification Templates"})),r.a.createElement(bn.a,{key:"instance_groups",value:"instance_group"},t._({id:"Instance Groups"})),r.a.createElement(bn.a,{key:"applications",value:"o_auth2_application,o_auth2_access_token"},t._({id:"Applications & Tokens"}))),r.a.createElement(pn.a,{label:t._({id:"Settings"}),key:"settings"},r.a.createElement(bn.a,{key:"settings",value:"setting"},t._({id:"Settings"}))))),r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Fr,{contentError:C,hasContentLoading:S,items:O,itemCount:j,pluralizedItemName:t._({id:"Events"}),qsConfig:E,toolbarSearchColumns:[{name:t._({id:"Keyword"}),key:"search",isDefault:!0},{name:t._({id:"Initiated by (username)"}),key:"actor__username__icontains"}],toolbarSortColumns:[{name:t._({id:"Time"}),key:"timestamp"},{name:t._({id:"Initiated by"}),key:"actor__username"}],toolbarSearchableKeys:w,toolbarRelatedSearchableKeys:k,headerRow:r.a.createElement(Zr,{qsConfig:E},r.a.createElement($r,{sortKey:"timestamp"},t._({id:"Time"})),r.a.createElement($r,{sortKey:"actor__username"},t._({id:"Initiated by"})),r.a.createElement($r,null,t._({id:"Event"})),r.a.createElement($r,null,t._({id:"Actions"}))),renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{qsConfig:E}))},renderRow:function(e){return r.a.createElement(po,{streamItem:e})}}))))})),vo=a(1101),_o=a(291),ho=a(1105),Eo=a(1035),yo=a(1036),go=a(1034);go.a.displayName="PFDataListCell";var Oo=Object(j.b)(go.a)(bo||(bo=Object(v.a)(["\n  word-break: break-word;\n"])));Oo.displayName="DataListCell";var jo,ko=Oo,wo=Object(j.b)(Rt.a)(jo||(jo=Object(v.a)(["\n  display: grid;\n  grid-template-columns:\n    minmax(70px, max-content)\n    repeat(auto-fit, minmax(60px, max-content));\n  grid-gap: 10px;\n"])));function Co(e){var t=e.item;return r.a.createElement(ho.a,{"aria-labelledby":"items-list-item-".concat(t.id),key:t.id,id:"".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(wo,null,r.a.createElement(s.b,{to:{pathname:t.url}},r.a.createElement("b",{id:"items-list-item-".concat(t.id)},t.name))))]})))}function So(e){var t,a=e.items,i=e.onRowClick,l=e.contentError,o=e.hasContentLoading,s=e.emptyStateControls,u=e.itemCount,d=e.qsConfig,m=e.renderItem,p=e.toolbarSearchColumns,b=e.toolbarSearchableKeys,f=e.toolbarRelatedSearchableKeys,v=e.toolbarSortColumns,_=e.pluralizedItemName,h=e.showPageSizeOptions,E=e.location,y=e.i18n,g=e.renderToolbar,O=Object(c.h)(),j=O.search,k=O.pathname,w=Object(c.g)(),C=function(e,t){var a=N(d,j);x(M(a,{page:t}))},S=function(e,t,a){var n=N(d,j);x(M(n,{page_size:t,page:a}))},x=function(e){var t=N({},w.location.search),a=P(d,e,t);w.push(a?"".concat(k,"?").concat(a):k)},T=p.length?p:[{name:y._({id:"\u540d\u79f0"}),key:"name",isDefault:!0}],I=v.length?v:[{name:y._({id:"\u540d\u79f0"}),key:"name"}],A=N(d,E.search),R=y._({id:"{pluralizedItemName} List",values:{pluralizedItemName:_}}),D=y._({id:"Please add {pluralizedItemName} to populate this list",values:{pluralizedItemName:_}}),L=y._({id:"No {pluralizedItemName} Found",values:{pluralizedItemName:_}});t=o&&a.length<=0?r.a.createElement(Nr,null):l?r.a.createElement(za,{error:l}):a.length<=0?r.a.createElement(Ir,{title:L,message:D}):r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(Gr,null),r.a.createElement(_o.a,{"aria-label":R,onSelectDataListItem:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=a.find((function(t){return t.id===Number(e)}));i(t)}(e)}},a.map(m)));var U=r.a.createElement(Pr,{isCompact:!0,dropDirection:"down",itemCount:u,page:A.page||1,perPage:A.page_size,perPageOptions:h?[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50}]:[],onSetPage:C,onPerPageSelect:S});return r.a.createElement(n.Fragment,null,r.a.createElement(xr,{itemCount:u,renderToolbar:g,emptyStateControls:s,searchColumns:T,sortColumns:I,searchableKeys:b,relatedSearchableKeys:f,qsConfig:d,pagination:U}),t,a.length?r.a.createElement(Pr,{variant:"bottom",itemCount:u,page:A.page||1,perPage:A.page_size,perPageOptions:h?[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50}]:[],onSetPage:C,onPerPageSelect:S}):null)}So.defaultProps={hasContentLoading:!1,contentError:null,toolbarSearchColumns:[],toolbarSearchableKeys:[],toolbarRelatedSearchableKeys:[],toolbarSortColumns:[],pluralizedItemName:"Items",showPageSizeOptions:!0,renderItem:function(e){return r.a.createElement(Co,{key:e.id,item:e})},renderToolbar:function(e){return r.a.createElement(hr,e)},onRowClick:function(){return null}};var xo,To=Object(u.withI18n)()(Object(c.k)(So)),Io=Object(j.b)(Kl.a)(xo||(xo=Object(v.a)(["\n  margin-top: 10px;\n"])));function Ao(e){var t=e.itemsToDelete,a=e.pluralizedItemName,i=e.errorMessage,l=e.onDelete,o=e.warningMessage,c=e.i18n,s=e.cannotDelete,u=Object(n.useContext)(pr),d=u.isKebabified,m=u.onKebabModalChange,p=Object(n.useState)(!1),b=Object(f.a)(p,2),v=b[0],_=b[1],h=function(){_(!v)};Object(n.useEffect)((function(){d&&m(v)}),[d,v,m]);var E=c._({id:"Delete {pluralizedItemName}?",values:{pluralizedItemName:a}}),y=0===t.length||t.some(s);return r.a.createElement(r.a.Fragment,null,d?r.a.createElement(ka.a,{key:"add",isDisabled:y,component:"button",onClick:h},c._({id:"\u5220\u9664"})):r.a.createElement(Ea.a,{content:function(){var e=t.filter(s).map((function(e){return e.name||e.username})).join(", ");return t.some(s)?r.a.createElement("div",null,i.length>0?"".concat(i,": ").concat(e):c._({id:"\u60a8\u65e0\u6743\u5220\u9664 {pluralizedItemName}: {itemsUnableToDelete}",values:{pluralizedItemName:a,itemsUnableToDelete:e}})):t.length?c._({id:"\u5220\u9664"}):c._({id:"\u9009\u62e9\u5220\u9664"})}(),position:"top"},r.a.createElement("div",null,r.a.createElement(O.a,{variant:"secondary","aria-label":c._({id:"\u5220\u9664"}),onClick:h,isDisabled:y},c._({id:"\u5220\u9664"})))),v&&r.a.createElement(Zt,{variant:"danger",title:E,isOpen:v,onClose:h,actions:[r.a.createElement(O.a,{key:"delete",variant:"danger","aria-label":c._({id:"\u786e\u8ba4\u5220\u9664"}),onClick:function(){l(),h()}},c._({id:"\u5220\u9664"})),r.a.createElement(O.a,{key:"cancel",variant:"secondary","aria-label":c._({id:"\u53d6\u6d88\u5220\u9664"}),onClick:h},c._({id:"\u53d6\u6d88"}))]},r.a.createElement("div",null,c._({id:"This action will delete the following:"})),t.map((function(e){return r.a.createElement("span",{key:e.id},r.a.createElement("strong",null,e.name||e.username),r.a.createElement("br",null))})),o&&r.a.createElement(Io,{variant:"warning",isInline:!0,title:o})))}Ao.defaultProps={pluralizedItemName:"Items",errorMessage:"",warningMessage:null,cannotDelete:function(e){return!e.summary_fields.user_capabilities.delete}};var Ro=Object(u.withI18n)()(Ao),No=a(498),Do=a.n(No);function Lo(e){var t=e.linkTo,a=e.onClick,n=e.i18n,i=e.isDisabled,l=e.defaultLabel,o=void 0===l?n._({id:"\u6dfb\u52a0"}):l,c=e.showToggleIndicator,u=fr().isKebabified;if(!t&&!a)throw new Error("ToolbarAddButton requires either `linkTo` or `onClick` prop");return u?r.a.createElement(ka.a,{key:"add",isDisabled:i,component:t?s.b:"button",to:t,onClick:a||void 0},o):t?r.a.createElement(Ea.a,{content:o,position:"top"},r.a.createElement(O.a,{isDisabled:i,component:s.b,to:t,variant:"primary","aria-label":o},o)):r.a.createElement(O.a,{icon:c?r.a.createElement(Do.a,null):null,iconPosition:c?"right":null,variant:"primary","aria-label":o,onClick:a},o)}Lo.defaultProps={linkTo:null,onClick:null};var Po=Object(u.withI18n)()(Lo);function Uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(n.useState)([]),a=Object(f.a)(t,2),r=a[0],i=a[1],l=r.length>0&&r.length===e.length,o=function(e){r.some((function(t){return t.id===e.id}))?i((function(t){return Object(A.a)(t.filter((function(t){return t.id!==e.id})))})):i((function(t){return[].concat(Object(A.a)(t),[e])}))};return{selected:r,isAllSelected:l,handleSelect:o,setSelected:i}}var Go,qo,Fo=a(1037),zo=a(1038),Mo=a(1039),Ko=Object(j.b)(Fo.a)(Go||(Go=Object(v.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 16px;\n  grid-template-columns: 40px;\n"]))),Vo=j.b.b(qo||(qo=Object(v.a)(["\n  margin-right: 20px;\n"])));var Ho=Object(u.withI18n)()((function(e){var t=e.application,a=e.isSelected,n=e.onSelect,i=e.detailUrl,l=e.i18n,o="check-action-".concat(t.id);return r.a.createElement(ho.a,{key:t.id,"aria-labelledby":o,id:"".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-application-".concat(t.id),checked:a,onChange:n,"aria-labelledby":o}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"divider","aria-label":l._({id:"application name"})},r.a.createElement(s.b,{to:"".concat(i)},r.a.createElement("b",null,t.name))),r.a.createElement(ko,{key:"organization","aria-label":l._({id:"organization name"})},r.a.createElement(s.b,{to:"/organizations/".concat(t.summary_fields.organization.id)},r.a.createElement("b",null,t.summary_fields.organization.name))),r.a.createElement(ko,{key:"modified","aria-label":l._({id:"last modified"})},r.a.createElement(Vo,null,l._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"})),r.a.createElement("span",null,ni(t.modified)))]}),r.a.createElement(Ko,{"aria-label":"actions","aria-labelledby":o,id:o},t.summary_fields.user_capabilities.edit?r.a.createElement(Ea.a,{content:l._({id:"\u7f16\u8f91\u5e94\u7528"}),position:"top"},r.a.createElement(O.a,{"aria-label":l._({id:"\u7f16\u8f91\u5e94\u7528"}),variant:"plain",component:s.b,to:"/applications/".concat(t.id,"/edit")},r.a.createElement(Mo.a,null))):"")))})),Bo=R("applications",{page:1,page_size:20,order_by:"name"});var Wo=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(Bo,a.search),e.next=3,Promise.all([Me.read(r),Me.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{applications:o.data.results,itemCount:o.data.count,actions:c.data.actions,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{applications:[],itemCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),o=l.isLoading,s=l.error,u=l.request,d=l.result,m=d.applications,v=d.itemCount,_=d.actions,h=d.relatedSearchableKeys,E=d.searchableKeys;Object(n.useEffect)((function(){u()}),[u]);var y=Uo(m),g=y.selected,O=y.isAllSelected,j=y.handleSelect,k=y.setSelected,w=en(Object(n.useCallback)((function(){return Promise.all(g.map((function(e){var t=e.id;return Me.destroy(t)})))}),[g]),{qsConfig:Bo,allItemsSelected:O,fetchItems:u}),C=w.isLoading,S=w.deletionError,x=w.deleteItems,T=w.clearDeletionError,I=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:k([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=_&&_.POST;return r.a.createElement(r.a.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:s,hasContentLoading:o||C,items:m,itemCount:v,pluralizedItemName:t._({id:"Applications"}),qsConfig:Bo,onRowClick:j,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"},{name:t._({id:"\u5df2\u521b\u5efa"}),key:"created"},{name:t._({id:"\u7ec4\u7ec7"}),key:"organization"},{name:t._({id:"\u63cf\u8ff0"}),key:"description"}],toolbarSearchableKeys:E,toolbarRelatedSearchableKeys:h,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:O,onSelectAll:function(e){return k(e?Object(A.a)(m):[])},qsConfig:Bo,additionalControls:[].concat(Object(A.a)(R?[r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:I,itemsToDelete:g,pluralizedItemName:t._({id:"Applications"})})])}))},renderItem:function(e){return r.a.createElement(Ho,{key:e.id,value:e.name,application:e,detailUrl:"".concat(i.url,"/").concat(e.id,"/details"),onSelect:function(){return j(e)},isSelected:g.some((function(t){return t.id===e.id}))})},emptyStateControls:R&&r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")})}))),r.a.createElement(Zt,{isOpen:S,variant:"error",title:t._({id:"Error!"}),onClose:T},t._({id:"Failed to delete one or more applications."}),r.a.createElement(ua,{error:S})))})),Jo=a(1010);function Yo(e,t){var a=e||t._({id:"This field must not be blank"});return function(e){return"string"!==typeof e||e.trim()?"number"!==typeof e||Number.isNaN(e)?e?void 0:a:void 0:a}}function Xo(e,t){return function(a){if(a.trim().length>e)return t._({id:"This field must not exceed {max} characters",values:{max:e}})}}function Zo(e,t){return function(a){if(a.trim().length<e)return t._({id:"This field must be at least {min} characters",values:{min:e}})}}function $o(e,t,a){return function(n){if(n<e||n>t)return a._({id:"This field must be a number and have a value between {min} and {max}",values:{min:e,max:t}})}}function Qo(e){return function(t){return t?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t)?void 0:e._({id:"Invalid email address"}):e._({id:"This field must not be blank"})}}function ec(e){return function(t){if(/\s/.test(t))return e._({id:"This field must not contain spaces"})}}function tc(e){return function(t){var a=String(t);if(!Number.isInteger(t)&&/[^0-9]/.test(a))return e._({id:"This field must be an integer"})}}function ac(e){return function(t){var a=String(t);if(!/^-?[0-9]*(\.[0-9]*)?$/.test(a)&&!/^-?[0-9]*e[+-][0-9]*$/.test(a))return e._({id:"This field must be a number"})}}function nc(e){return function(t){if(t)return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www\.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w\-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!/\\\w]*))?)/.test(t)?void 0:e._({id:"Please enter a valid URL"})}}function rc(e){return function(t){for(var a=0;a<e.length;a++){var n=e[a],r=n?n(t):null;if(r)return r}}}function ic(e){return function(t){try{RegExp(t)}catch(a){return e._({id:"This field must be a regular expression"})}}}var lc=a(1013),oc=function(e){var t=e.onCancel,a=e.onSubmit,n=e.submitDisabled,i=e.i18n;return r.a.createElement(Hl,null,r.a.createElement(lc.a,null,r.a.createElement(O.a,{"aria-label":i._({id:"Save"}),variant:"primary",type:"button",onClick:a,isDisabled:n},i._({id:"Save"})),r.a.createElement(O.a,{"aria-label":i._({id:"\u53d6\u6d88"}),variant:"secondary",type:"button",onClick:t},i._({id:"\u53d6\u6d88"}))))};oc.defaultProps={submitDisabled:!1};var cc=Object(u.withI18n)()(oc);function sc(e){var t=Object(n.useRef)(!0);return Object(n.useCallback)((function(a){t.current&&1===a.length&&e(a[0]),t.current=!1}),[e])}var uc=a(299),dc=a(956),mc=["i18n","numChips","totalChips","i18nHash"];var pc,bc,fc=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.numChips,n=e.totalChips,i=(e.i18nHash,Object(o.a)(e,mc));return r.a.createElement(dc.a,Object.assign({},i,{numChips:a,expandedText:t._({id:"Show less"}),collapsedText:t._({id:"{0} more",values:{0:n-a}})}))})),vc=Object(j.b)($i.a)(pc||(pc=Object(v.a)(["\n  margin: 20px 0px;\n  align-items: baseline;\n"]))),_c=Object(j.b)(Qi.a)(bc||(bc=Object(v.a)(["\n  font-weight: bold;\n  margin-right: 32px;\n  word-break: initial;\n"]))),hc=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.selected,n=e.onRemove,i=e.displayKey,l=e.isReadOnly,o=e.renderItemChip||function(e){var t=e.item,a=e.removeItem;return r.a.createElement(uc.a,{key:t.id,onClick:a,isReadOnly:l},t[i])};return r.a.createElement(vc,null,r.a.createElement(_c,null,t),r.a.createElement(Qi.a,null,r.a.createElement(fc,{numChips:5,totalChips:a.length},a.map((function(e){return o({item:e,removeItem:function(){return n(e)},canDelete:!l})})))))}}]),a}(n.Component);hc.defaultProps={displayKey:"name",label:"Selected",onRemove:function(){return null},isReadOnly:!1,renderItemChip:null};var Ec,yc=hc,gc=a(1040),Oc=function(e){var t=e.isDisabled,a=void 0!==t&&t,n=e.isRadio,i=void 0!==n&&n,l=e.isSelected,o=void 0!==l&&l,c=e.itemId,s=e.label,u=e.name,d=e.onDeselect,m=e.onSelect,p=i?gc.a:zo.a;return r.a.createElement(ho.a,{key:c,"aria-labelledby":"check-action-item-".concat(c),id:"".concat(c)},r.a.createElement(Eo.a,null,r.a.createElement(p,{"aria-label":"check-action-item-".concat(c),"aria-labelledby":"check-action-item-".concat(c),checked:o,disabled:a,id:"selected-".concat(c),isChecked:o,name:u,onChange:o?d:m,value:c}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement("label",{id:"check-action-item-".concat(c),htmlFor:"selected-".concat(c),className:"check-action-item"},r.a.createElement("b",null,s)))]})))},jc=j.b.div(Ec||(Ec=Object(v.a)(["\n  .pf-c-toolbar__content {\n    padding: 0 !important;\n  }\n"])));function kc(e){var t=e.value,a=e.contentError,n=e.options,i=e.optionCount,l=e.searchColumns,o=e.sortColumns,c=e.searchableKeys,s=e.relatedSearchableKeys,u=e.multiple,d=e.header,m=e.name,p=e.qsConfig,b=e.readOnly,f=e.selectItem,v=e.deselectItem,_=e.renderItemChip,h=e.isLoading,E=e.i18n,y=e.displayKey;return r.a.createElement(jc,null,t.length>0&&r.a.createElement(yc,{label:E._({id:"\u5df2\u9009\u62e9"}),selected:t,onRemove:function(e){return v(e)},isReadOnly:b,renderItemChip:_,displayKey:y}),r.a.createElement(To,{contentError:a,items:n,itemCount:i,pluralizedItemName:d,qsConfig:p,toolbarSearchColumns:l,toolbarSortColumns:o,toolbarSearchableKeys:c,toolbarRelatedSearchableKeys:s,hasContentLoading:h,onRowClick:f,renderItem:function(e){return r.a.createElement(Oc,{key:e.id,itemId:e.id,name:u?e[y]:m,label:e[y],isSelected:t.some((function(t){return t.id===e.id})),onSelect:function(){return f(e)},onDeselect:function(){return v(e)},isRadio:!u})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{fillWidth:!0}))},showPageSizeOptions:!1}))}kc.defaultProps={multiple:!1,renderItemChip:null,searchColumns:[],sortColumns:[],displayKey:"name"};var wc,Cc=Object(u.withI18n)()(kc);function Sc(e,t){switch(t.type){case"SELECT_ITEM":return function(e,t){var a=e.selectedItems;if(!e.multiple)return Object(d.a)(Object(d.a)({},e),{},{selectedItems:[t]});if(a.findIndex((function(e){return e.id===t.id}))>-1)return e;return Object(d.a)(Object(d.a)({},e),{},{selectedItems:[].concat(Object(A.a)(a),[t])})}(e,t.item);case"DESELECT_ITEM":return function(e,t){return Object(d.a)(Object(d.a)({},e),{},{selectedItems:e.selectedItems.filter((function(e){return e.id!==t.id}))})}(e,t.item);case"TOGGLE_MODAL":return function(e){var t=e.isModalOpen,a=e.value,n=e.multiple;if(t)return xc(e);var r=[];n?r=Object(A.a)(a):a&&r.push(a);return Object(d.a)(Object(d.a)({},e),{},{isModalOpen:!t,selectedItems:r})}(e);case"CLOSE_MODAL":return xc(e);case"SET_MULTIPLE":return Object(d.a)(Object(d.a)({},e),{},{multiple:t.value});case"SET_VALUE":return Object(d.a)(Object(d.a)({},e),{},{value:t.value});case"SET_SELECTED_ITEMS":return Object(d.a)(Object(d.a)({},e),{},{selectedItems:t.selectedItems});default:throw new Error("Unrecognized action type: ".concat(t.type))}}function xc(e){return Object(d.a)(Object(d.a)({},e),{},{isModalOpen:!1})}function Tc(e){var t=e.value,a=e.multiple,n=void 0!==a&&a,r=e.required,i=void 0!==r&&r;!function(e,t){if(!t&&Array.isArray(e))throw new Error("Lookup value must not be an array unless `multiple` is set");if(t&&!Array.isArray(e))throw new Error("Lookup value must be an array if `multiple` is set")}(t,n);var l=[];return t&&(l=n?Object(A.a)(t):[t]),{selectedItems:l,value:t,multiple:n,isModalOpen:!1,required:i}}var Ic=j.b.div(wc||(wc=Object(v.a)(["\n  --pf-c-form-control--Height: auto;\n  background-color: ",";\n"])),(function(e){return e.isDisabled?"var(--pf-global--disabled-color--300)":null}));function Ac(e){var t=e.id,a=e.header,i=e.onChange,l=e.onBlur,o=e.isLoading,c=e.value,s=e.multiple,u=e.required,d=e.qsConfig,m=e.renderItemChip,p=e.renderOptionsList,b=e.history,v=e.i18n,_=e.isDisabled,h=Object(n.useReducer)(Sc,{value:c,multiple:s,required:u},Tc),E=Object(f.a)(h,2),y=E[0],g=E[1];Object(n.useEffect)((function(){g({type:"SET_MULTIPLE",value:s})}),[s]),Object(n.useEffect)((function(){g({type:"SET_VALUE",value:c})}),[c]);var j=function(){var e=b.location.search.replace(/^\?/,"").split("&"),t=d.namespace,a=e.filter((function(e){return!e.startsWith("".concat(t,"."))}));b.push("".concat(b.location.pathname,"?").concat(a.join("&")))},k=function(e){i(s?c.filter((function(t){return t.id!==e.id})):null)},w=function(){j(),g({type:"CLOSE_MODAL"})},C=y.isModalOpen,S=y.selectedItems,x=(!u||s&&c.length>1)&&!_,T=[];return s?T=c:c&&T.push(c),r.a.createElement(n.Fragment,null,r.a.createElement(An.a,{onBlur:l},r.a.createElement(O.a,{"aria-label":"Search",id:t,onClick:function(){return g({type:"TOGGLE_MODAL"})},variant:O.b.control,isDisabled:o||_},r.a.createElement(On.a,null)),r.a.createElement(Ic,{isDisabled:_,className:"pf-c-form-control"},r.a.createElement(fc,{numChips:5,totalChips:T.length},T.map((function(e){return m({item:e,removeItem:k,canDelete:x})}))))),r.a.createElement(Ft.a,{variant:"large",title:v._({id:"Select {0}",values:{0:a||v._({id:"Items"})}}),"aria-label":v._({id:"Lookup modal"}),isOpen:C,onClose:w,actions:[r.a.createElement(O.a,{key:"select",variant:"primary",onClick:function(){var e=y.selectedItems,t=s?e:e[0]||null;i(t),j(),g({type:"CLOSE_MODAL"})},isDisabled:u&&0===S.length},v._({id:"\u9009\u62e9"})),r.a.createElement(O.a,{key:"cancel",variant:"secondary",onClick:w},v._({id:"\u53d6\u6d88"}))]},p({state:y,dispatch:g,canDelete:x})))}Ac.defaultProps={id:"lookup-search",header:null,value:null,multiple:!1,required:!1,onBlur:function(){},renderItemChip:function(e){var t=e.item,a=e.removeItem,n=e.canDelete;return r.a.createElement(uc.a,{key:t.id,onClick:function(){return a(t)},isReadOnly:!n},t.name)}};var Rc=Object(u.withI18n)()(Object(c.k)(Ac));var Nc=Object(u.withI18n)()((function(e){var t=e.error,a=e.i18n;return t?r.a.createElement("div",{className:"pf-c-form__helper-text pf-m-error","aria-live":"polite"},t.message||a._({id:"An error occured"})):null})),Dc=R("organizations",{page:1,page_size:5,order_by:"name"});function Lc(e){var t=e.helperTextInvalid,a=e.i18n,i=e.isValid,l=e.onBlur,o=e.onChange,c=e.required,s=e.value,u=e.history,d=e.autoPopulate,m=sc(o),v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(Dc,u.location.search),e.next=3,Promise.all([ct.read(n),ct.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0],o=i[1],d&&m(l.data.results),e.abrupt("return",{organizations:l.data.results,itemCount:l.data.count,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 9:case"end":return e.stop()}}),e)}))),[d,m,u.location.search]),{organizations:[],itemCount:0,relatedSearchableKeys:[],searchableKeys:[]}),_=v.result,h=_.itemCount,E=_.organizations,y=_.relatedSearchableKeys,g=_.searchableKeys,O=v.error,j=v.request;return Object(n.useEffect)((function(){j()}),[j]),r.a.createElement(Wi.a,{fieldId:"organization",helperTextInvalid:t,isRequired:c,validated:i?"default":"error",label:a._({id:"\u7ec4\u7ec7"})},r.a.createElement(Rc,{id:"organization",header:a._({id:"\u7ec4\u7ec7"}),value:s,onBlur:l,onChange:o,qsConfig:Dc,required:c,sortedColumnKey:"name",renderOptionsList:function(e){var t=e.state,n=e.dispatch,i=e.canDelete;return r.a.createElement(Cc,{value:t.selectedItems,options:E,optionCount:h,multiple:t.multiple,header:a._({id:"\u7ec4\u7ec7"}),name:"organization",qsConfig:Dc,searchColumns:[{name:a._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:a._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:a._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:a._({id:"\u540d\u79f0"}),key:"name"}],searchableKeys:g,relatedSearchableKeys:y,readOnly:!i,selectItem:function(e){return n({type:"SELECT_ITEM",item:e})},deselectItem:function(e){return n({type:"DESELECT_ITEM",item:e})}})}}),r.a.createElement(Nc,{error:O}))}Lc.defaultProps={helperTextInvalid:"",isValid:!0,onBlur:function(){},required:!1,value:null,autoPopulate:!1};var Pc=Object(u.withI18n)()(Object(c.k)(Lc)),Uc=a(955),Gc=a(1041);function qc(e){var t=e.id,a=e.data,n=e.i18n,i=e.isValid,l=e.onBlur,o=e.value,c=e.className,s=e.isDisabled,u=e.onChange,d=e.name;return r.a.createElement(Uc.a,{id:t,value:o,onChange:function(e,t){t.target.name=d,u(t,e)},onBlur:l,"aria-label":n._({id:"Select Input"}),validated:i?"default":"error",className:c,isDisabled:s},a.map((function(e){return r.a.createElement(Gc.a,{key:e.key,value:e.value,label:e.label,isDisabled:e.isDisabled})})))}qc.defaultProps={data:[],isValid:!0,onBlur:function(){},className:"",isDisabled:!1};var Fc=Object(u.withI18n)()(qc);function zc(e){var t=e.i18n,a=e.application,i=e.authorizationOptions,l=e.clientTypeOptions,o=Object(c.j)(),s=Object(Va.c)().setFieldValue,u=Object(Va.b)({name:"organization",validate:Yo(null,t)}),d=Object(f.a)(u,3),m=d[0],p=d[1],b=d[2],v=Object(Va.b)({name:"authorization_grant_type",validate:Yo(null,t)}),_=Object(f.a)(v,3),h=_[0],E=_[1],y=_[2],g=Object(Va.b)({name:"client_type",validate:Yo(null,t)}),O=Object(f.a)(g,3),j=O[0],k=O[1],w=O[2],C=Object(n.useCallback)((function(e){s("organization",e)}),[s]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"name",label:t._({id:"\u540d\u79f0"}),name:"name",type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"description",label:t._({id:"\u63cf\u8ff0"}),name:"description",type:"text"}),r.a.createElement(Pc,{helperTextInvalid:p.error,isValid:!p.touched||!p.error,onBlur:function(){return b.setTouched()},onChange:C,value:m.value,required:!0,autoPopulate:!(null===a||void 0===a?void 0:a.id)}),r.a.createElement(Wi.a,{fieldId:"authType",helperTextInvalid:E.error,validated:E.touched&&E.error?"error":"default",isRequired:!0,label:t._({id:"Authorization grant type"}),labelIcon:r.a.createElement(gi,{content:t._({id:"The Grant type the user must use for acquire tokens for this application"})})},r.a.createElement(Fc,Object.assign({},h,{isValid:!E.touched||!E.error,isDisabled:o.url.endsWith("edit"),id:"authType",data:[{label:"",key:1,value:""}].concat(Object(A.a)(i)),onChange:function(e,t){y.setValue(t)}}))),r.a.createElement(Tl,{id:"redirect_uris",label:t._({id:"Redirect URIs"}),name:"redirect_uris",type:"text",isRequired:Boolean("authorization-code"===h.value),validate:"authorization-code"===h.value?Yo(null,t):null,tooltip:t._({id:"Allowed URIs list, space separated"})}),r.a.createElement(Wi.a,{fieldId:"clientType",helperTextInvalid:k.error,validated:k.touched&&k.error?"error":"default",isRequired:!0,label:t._({id:"Client type"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Set to Public or Confidential depending on how secure the client device is."})})},r.a.createElement(Fc,Object.assign({},j,{isValid:!k.touched||!k.error,id:"clientType",data:[{label:"",key:1,value:""}].concat(Object(A.a)(l)),onChange:function(e,t){w.setValue(t)}}))))}var Mc,Kc=Object(u.withI18n)()((function(e){var t,a=e.onCancel,n=e.onSubmit,i=e.i18n,l=e.submitError,o=e.application,c=e.authorizationOptions,s=e.clientTypeOptions,u={name:(null===o||void 0===o?void 0:o.name)||"",description:(null===o||void 0===o?void 0:o.description)||"",organization:(null===o||void 0===o||null===(t=o.summary_fields)||void 0===t?void 0:t.organization)||null,authorization_grant_type:(null===o||void 0===o?void 0:o.authorization_grant_type)||"",redirect_uris:(null===o||void 0===o?void 0:o.redirect_uris)||"",client_type:(null===o||void 0===o?void 0:o.client_type)||""};return r.a.createElement(Va.a,{initialValues:u,onSubmit:function(e){return n(e)}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(zc,{formik:e,application:o,authorizationOptions:c,clientTypeOptions:s,i18n:i}),l&&r.a.createElement(Yl,{error:l}),r.a.createElement(cc,{onCancel:a,onSubmit:e.handleSubmit})))}))})),Vc=Object(j.b)(ra.a)(Mc||(Mc=Object(v.a)(["\n  padding-top: var(--pf-c-card--first-child--PaddingTop);\n"])));ra.a.displayName="PFCardBody";var Hc,Bc=Vc,Wc=a(1042),Jc=j.b.div(Hc||(Hc=Object(v.a)(["\n  margin-top: 20px;\n  --pf-c-card__actions--PaddingLeft: 0;\n"])));var Yc=function(e){var t=e.children;return r.a.createElement(Jc,null,r.a.createElement(Wc.a,null,t))};var Xc=function(e){var t=e.onSuccessfulAdd,a=Object(c.g)(),i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.readOptions();case 2:return t=e.sent,a=t.data.actions.GET,n=a.authorization_grant_type.choices,r=a.client_type.choices,i=n.map((function(e){return{value:e[0],label:e[1],key:e[0]}})),l=r.map((function(e){return{value:e[0],label:e[1],key:e[0]}})),e.abrupt("return",{authorizationOptions:i,clientTypeOptions:l});case 9:case"end":return e.stop()}}),e)}))),[]),{authorizationOptions:[],clientTypeOptions:[]}),d=u.error,m=u.request,v=u.result,_=v.authorizationOptions,h=v.clientTypeOptions,E=function(){var e=Object(b.a)(p.a.mark((function e(n){var r,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object.assign({},n)).organization=r.organization.id,e.prev=2,e.next=5,Me.create(r);case 5:i=e.sent,l=i.data,t(l),a.push("/applications/".concat(l.id,"/details")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),s(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m()}),[m]),d?r.a.createElement(za,{error:d}):r.a.createElement(r.a.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Kc,{onSubmit:E,onCancel:function(){a.push("/applications")},authorizationOptions:_,clientTypeOptions:h,submitError:o})))))},Zc=a(1045);var $c=function(e){var t=e.application,a=e.authorizationOptions,i=e.clientTypeOptions,l=Object(c.g)(),o=Object(c.i)().id,s=Object(n.useState)(null),u=Object(f.a)(s,2),d=u[0],m=u[1],v=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object.assign({},t)).organization=a.organization.id,e.prev=2,e.next=5,Me.update(o,a);case 5:l.push("/applications/".concat(o,"/details")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),m(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Kc,{onSubmit:v,application:t,onCancel:function(){l.push("/applications/".concat(o,"/details"))},authorizationOptions:a,clientTypeOptions:i,submitError:d})))};var Qc=Object(u.withI18n)()((function(e){var t=e.onConfirm,a=e.modalTitle,i=e.name,l=e.i18n,o=e.variant,c=e.children,s=e.isDisabled,u=Object(n.useState)(!1),d=Object(f.a)(u,2),m=d[0],p=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{variant:o||"secondary","aria-label":l._({id:"\u5220\u9664"}),isDisabled:s,onClick:function(){return p(!0)}},c||l._({id:"\u5220\u9664"})),r.a.createElement(Zt,{isOpen:m,title:a,variant:"danger",onClose:function(){return p(!1)},actions:[r.a.createElement(O.a,{key:"delete",variant:"danger","aria-label":l._({id:"\u5220\u9664"}),isDisabled:s,onClick:t},l._({id:"\u5220\u9664"})),r.a.createElement(O.a,{key:"cancel",variant:"secondary","aria-label":l._({id:"\u53d6\u6d88"}),onClick:function(){return p(!1)}},l._({id:"\u53d6\u6d88"}))]},l._({id:"Are you sure you want to delete:"}),r.a.createElement("br",null),r.a.createElement("strong",null,i)))}));var es=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.application,i=e.authorizationOptions,l=e.clientTypeOptions,o=Object(c.g)(),u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.destroy(a.id);case 2:o.push("/applications");case 3:case"end":return e.stop()}}),e)}))),[a.id,o])),d=u.isLoading,m=u.error,f=u.request,v=Qa(m),_=v.error,h=v.dismissError;return r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:t._({id:"\u540d\u79f0"}),value:a.name,dataCy:"app-detail-name"}),r.a.createElement(xi,{label:t._({id:"\u63cf\u8ff0"}),value:a.description,dataCy:"app-detail-description"}),r.a.createElement(xi,{label:t._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(a.summary_fields.organization.id,"/details")},a.summary_fields.organization.name),dataCy:"app-detail-organization"}),r.a.createElement(xi,{label:t._({id:"Authorization grant type"}),value:function(e){var t;return i.filter((function(a){return a.value===e&&(t=a.label),null})),t}(a.authorization_grant_type),dataCy:"app-detail-authorization-grant-type"}),r.a.createElement(xi,{label:t._({id:"Client ID"}),value:a.client_id,dataCy:"app-detail-client-id"}),r.a.createElement(xi,{label:t._({id:"Redirect uris"}),value:a.redirect_uris,dataCy:"app-detail-redirect-uris"}),r.a.createElement(xi,{label:t._({id:"Client type"}),value:function(e){var t;return l.filter((function(a){return a.value===e&&(t=a.label),null})),t}(a.client_type),dataCy:"app-detail-client-type"}),r.a.createElement(Li,{label:t._({id:"\u5df2\u521b\u5efa"}),date:a.created}),r.a.createElement(Li,{label:t._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:a.modified})),r.a.createElement(Yc,null,a.summary_fields.user_capabilities&&a.summary_fields.user_capabilities.edit&&r.a.createElement(O.a,{component:s.b,to:"/applications/".concat(a.id,"/edit"),"aria-label":t._({id:"Edit"})},t._({id:"Edit"})),a.summary_fields.user_capabilities&&a.summary_fields.user_capabilities.delete&&r.a.createElement(Qc,{name:a.name,modalTitle:t._({id:"Delete application"}),onConfirm:f,isDisabled:d},t._({id:"\u5220\u9664"}))),_&&r.a.createElement(Zt,{isOpen:_,variant:"error",title:t._({id:"Error!"}),onClose:h},t._({id:"Failed to delete application."}),r.a.createElement(ua,{error:_})))}));var ts,as=function(e){return e?e.toLowerCase().split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "):""},ns=j.b.b(ts||(ts=Object(v.a)(["\n  margin-right: 20px;\n"])));var rs=Object(u.withI18n)()((function(e){var t=e.token,a=e.isSelected,n=e.onSelect,i=e.detailUrl,l=e.i18n,o="check-action-".concat(t.id);return r.a.createElement(ho.a,{key:t.id,"aria-labelledby":o,id:"".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-token-".concat(t.id),checked:a,onChange:n,"aria-labelledby":o}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"divider","aria-label":l._({id:"token name"})},r.a.createElement(s.b,{to:"".concat(i)},r.a.createElement("b",null,t.summary_fields.user.username))),r.a.createElement(ko,{key:"scope","aria-label":l._({id:"scope"})},r.a.createElement(ns,null,l._({id:"Scope"})),r.a.createElement("span",null,as(t.scope))),r.a.createElement(ko,{key:"expiration","aria-label":l._({id:"expiration"})},r.a.createElement(ns,null,l._({id:"Expiration"})),r.a.createElement("span",null,ni(t.expires)))]})))})),is=R("applications",{page:1,page_size:20,order_by:"user__username"});var ls=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.i)().id,i=Object(c.h)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,l,o,c,s,u,d,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(is,i.search),e.next=3,Promise.all([Me.readTokens(a,r),Me.readTokenOptions(a)]);case 3:return l=e.sent,o=Object(f.a)(l,2),c=o[0].data,s=c.results,u=c.count,d=o[1],m=s.map((function(e){var t;return e.summary_fields={user:e.summary_fields.user,application:e.summary_fields.application,user_capabilities:{delete:!0}},e.name=null===(t=e.summary_fields.user)||void 0===t?void 0:t.username,e})),e.abrupt("return",{tokens:m,itemCount:u,relatedSearchableKeys:((null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=d.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=d.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 11:case"end":return e.stop()}}),e)}))),[a,i.search]),{tokens:[],itemCount:0,relatedSearchableKeys:[],searchableKeys:[]}),o=l.error,s=l.isLoading,u=l.result,d=u.tokens,m=u.itemCount,v=u.relatedSearchableKeys,_=u.searchableKeys,h=l.request;Object(n.useEffect)((function(){h()}),[h]);var E=Uo(d),y=E.selected,g=E.isAllSelected,O=E.handleSelect,j=E.setSelected,k=en(Object(n.useCallback)((function(){return Promise.all(y.map((function(e){var t=e.id;return _t.destroy(t)})))}),[y]),{qsConfig:is,allItemsSelected:g,fetchItems:h}),w=k.isLoading,C=k.deletionError,S=k.deleteItems,x=k.clearDeletionError,T=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:j([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:o,hasContentLoading:s||w,items:d,itemCount:m,pluralizedItemName:t._({id:"Tokens"}),qsConfig:is,onRowClick:O,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"user__username__icontains",isDefault:!0}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"user__username"},{name:t._({id:"Scope"}),key:"scope"},{name:t._({id:"Expiration"}),key:"expires"},{name:t._({id:"\u5df2\u521b\u5efa"}),key:"created"},{name:t._({id:"\u66f4\u6539"}),key:"modified"}],toolbarSearchableKeys:_,toolbarRelatedSearchableKeys:v,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:g,onSelectAll:function(e){return j(e?Object(A.a)(d):[])},qsConfig:is,additionalControls:[r.a.createElement(Ro,{key:"delete",onDelete:T,itemsToDelete:y,pluralizedItemName:t._({id:"Tokens"})})]}))},renderItem:function(e){return r.a.createElement(rs,{key:e.id,value:e.name,token:e,detailUrl:"/users/".concat(e.summary_fields.user.id,"/details"),onSelect:function(){return O(e)},isSelected:y.some((function(t){return t.id===e.id}))})}}),r.a.createElement(Zt,{isOpen:C,variant:"error",title:t._({id:"Error!"}),onClose:x},t._({id:"Failed to delete one or more tokens."}),r.a.createElement(ua,{error:C})))})),os=a(1103),cs=a(1043),ss=a(1044);var us=function(e){var t=e.tabsArray,a=Object(c.g)(),n=Object(c.h)();return r.a.createElement(os.a,{activeKey:function(){var e=t.find((function(e){return e.link===n.pathname}));if(e)return e.id;var a=t.find((function(e){return n.pathname.startsWith(e.link)}));return a?a.id:0}(),onSelect:function(e,n){var r=t.find((function(e){return e.id===n}));r&&a.push(r.link)}},t.map((function(e){return r.a.createElement(cs.a,{"aria-label":"string"===typeof e.name?e.name:"",eventKey:e.id,key:e.id,link:e.link,title:r.a.createElement(ss.a,null,e.name),role:"tab"})})))};var ds,ms=Object(u.withI18n)()((function(e){var t=e.setBreadcrumb,a=e.i18n,i=Object(c.i)().id,l=Object(c.h)().pathname,o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n,r,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Me.readDetail(i),Me.readOptions()]);case 2:return a=e.sent,n=Object(f.a)(a,2),r=n[0],l=n[1],o=l.data.actions.GET.authorization_grant_type.choices.map((function(e){return{value:e[0],label:e[1],key:e[0]}})),c=l.data.actions.GET.client_type.choices.map((function(e){return{value:e[0],label:e[1],key:e[0]}})),t(r.data),e.abrupt("return",{application:r.data,authorizationOptions:o,clientTypeOptions:c});case 10:case"end":return e.stop()}}),e)}))),[t,i]),{authorizationOptions:[],clientTypeOptions:[]}),u=o.isLoading,d=o.error,m=o.result,v=m.application,_=m.authorizationOptions,h=m.clientTypeOptions,E=o.request;Object(n.useEffect)((function(){E()}),[E,l]);var y,g=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),a._({id:"Back to applications"})),link:"/applications",id:0},{name:a._({id:"Details"}),link:"/applications/".concat(i,"/details"),id:1},{name:a._({id:"Tokens"}),link:"/applications/".concat(i,"/tokens"),id:2}],O=r.a.createElement(us,{tabsArray:g});return l.endsWith("edit")&&(O=null),!u&&d?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:d},404===(null===(y=d.response)||void 0===y?void 0:y.status)&&r.a.createElement("span",null,a._({id:"Application not found."})," ",r.a.createElement(s.b,{to:"/applications"},a._({id:"View all applications."})))))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,O,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/applications/:id",to:"/applications/:id/details",exact:!0}),v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{path:"/applications/:id/edit"},r.a.createElement($c,{authorizationOptions:_,clientTypeOptions:h,application:v})),r.a.createElement(c.b,{path:"/applications/:id/details"},r.a.createElement(es,{application:v,authorizationOptions:_,clientTypeOptions:h})),r.a.createElement(c.b,{path:"/applications/:id/tokens"},r.a.createElement(ls,{application:v}))))))})),ps=a(1046),bs=a(1048),fs=a(1047),vs=function e(t){var a,i=t.breadcrumbConfig,l=Object(c.j)(),o=i[l.url];return l.isExact&&(a=r.a.createElement(qt.a,{size:"2xl",headingLevel:"h2"},o)),o||(a=null),r.a.createElement(n.Fragment,null,a,r.a.createElement(c.b,{path:"".concat(l.url,"/:path")},r.a.createElement(e,{breadcrumbConfig:i})))},_s=function e(t){var a=t.breadcrumbConfig,i=t.showDivider,l=Object(c.j)(),o=a[l.url],u=r.a.createElement(bs.a,{key:l.url,showDivider:i},r.a.createElement(s.b,{to:l.url},o));return l.isExact&&(u=null),o||(u=null),r.a.createElement(n.Fragment,null,u,r.a.createElement(c.b,{path:"".concat(l.url,"/:path")},r.a.createElement(e,{breadcrumbConfig:a,showDivider:!0})))},hs=Object(u.withI18n)()((function(e){var t=e.breadcrumbConfig,a=e.i18n,n=e.streamType,i=La.b.light,l=Object(c.j)({path:Object.keys(t)[0],strict:!0}),o=l&&l.isExact;return r.a.createElement(La.a,{variant:i},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("div",null,!o&&r.a.createElement(ps.a,null,r.a.createElement(c.b,{path:"/:path"},r.a.createElement(_s,{breadcrumbConfig:t}))),r.a.createElement("div",{style:{minHeight:"31px"}},r.a.createElement(c.b,{path:"/:path"},r.a.createElement(vs,{breadcrumbConfig:t})))),"none"!==n&&r.a.createElement("div",null,r.a.createElement(Ea.a,{content:a._({id:"View activity stream"}),position:"top"},r.a.createElement(O.a,{"aria-label":a._({id:"View activity stream"}),variant:"plain",component:s.b,to:"/activity_stream".concat(n?"?type=".concat(n):"")},r.a.createElement(fs.a,null))))))})),Es=Object(j.b)(Kl.a)(ds||(ds=Object(v.a)(["\n  margin-bottom: 20px;\n"])));var ys,gs,Os,js,ks=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({"/applications":t._({id:"Applications"}),"/applications/add":t._({id:"Create New Application"})}),u=Object(f.a)(s,2),d=u[0],m=u[1],p=Object(n.useCallback)((function(e){var a;e&&m((a={"/applications":t._({id:"Applications"}),"/applications/add":t._({id:"Create New Application"})},Object(gr.a)(a,"/applications/".concat(e.id),"".concat(e.name)),Object(gr.a)(a,"/applications/".concat(e.id,"/edit"),t._({id:"Edit Details"})),Object(gr.a)(a,"/applications/".concat(e.id,"/details"),t._({id:"Details"})),Object(gr.a)(a,"/applications/".concat(e.id,"/tokens"),t._({id:"Tokens"})),a))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"o_auth2_application,o_auth2_access_token",breadcrumbConfig:d}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/applications/add"},r.a.createElement(Xc,{onSuccessfulAdd:function(e){return o(e)}})),r.a.createElement(c.b,{path:"/applications/:id"},r.a.createElement(ms,{setBreadcrumb:p})),r.a.createElement(c.b,{path:"/applications"},r.a.createElement(Wo,null))),l&&r.a.createElement(Ft.a,{"aria-label":t._({id:"Application information"}),isOpen:!0,variant:"medium",title:t._({id:"Application information"}),onClose:function(){return o(null)}},l.client_secret&&r.a.createElement(Es,{variant:"info",isInline:!0,title:t._({id:"This is the only time the client secret will be shown."})}),r.a.createElement(pi,{stacked:!0},r.a.createElement(xi,{label:t._({id:"\u540d\u79f0"}),value:l.name}),l.client_id&&r.a.createElement(xi,{label:t._({id:"Client ID"}),value:r.a.createElement(vo.a,{isReadOnly:!0,variant:vo.b.expansion},l.client_id)}),l.client_secret&&r.a.createElement(xi,{label:t._({id:"Client secret"}),value:r.a.createElement(vo.a,{isReadOnly:!0,variant:vo.b.expansion},l.client_secret)}))))})),ws=j.b.div(ys||(ys=Object(v.a)(["\n  min-width: 200px;\n  border: 1px solid var(--pf-global--BorderColor--200);\n  border-radius: var(--pf-global--BorderRadius--sm);\n  border: 1px solid;\n  border-color: ",";\n  margin-right: 20px;\n  display: flex;\n  cursor: pointer;\n"])),(function(e){return e.isSelected?"var(--pf-global--active-color--100)":"var(--pf-global--BorderColor--200)"})),Cs=j.b.div(gs||(gs=Object(v.a)(["\n  display: flex;\n  flex: 0 0 5px;\n  background-color: ",";\n"])),(function(e){return e.isSelected?"var(--pf-global--active-color--100)":null})),Ss=j.b.div(Os||(Os=Object(v.a)(["\n  padding: 10px 20px;\n"]))),xs=j.b.p(js||(js=Object(v.a)(["\n  font-size: 14px;\n"])));function Ts(e){var t=e.label,a=e.description,n=e.onClick,i=e.isSelected,l=e.dataCy,o=e.ariaLabel;return r.a.createElement(ws,{onClick:n,onKeyPress:n,role:"button",tabIndex:"0","data-cy":l,isSelected:i,"aria-label":o},r.a.createElement(Cs,{isSelected:i}),r.a.createElement(Ss,null,r.a.createElement("b",null,t),r.a.createElement(xs,null,a)))}Ts.defaultProps={label:"",description:"",isSelected:!1,ariaLabel:""};var Is,As=Ts,Rs=a(1099);Rs.a.displayName="PFWizard";var Ns=Object(j.b)(Rs.a)(Is||(Is=Object(v.a)(["\n  .pf-c-toolbar__content {\n    padding: 0 !important;\n  }\n"]))),Ds=function(e){return R("resource",{page:1,page_size:5,order_by:"".concat(e.filter((function(e){return"name"===e.key})).length?"name":"username")})};function Ls(e){var t=e.searchColumns,a=e.sortColumns,i=e.displayKey,l=e.onRowClick,o=e.selectedLabel,s=e.selectedResourceRows,u=e.fetchItems,d=e.fetchOptions,m=e.i18n,v=Object(c.h)(),_=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c,s,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(Ds(a),v.search),e.next=3,Promise.all([u(r),d()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0].data,c=o.count,s=o.results,m=l[1],e.abrupt("return",{resources:s,itemCount:c,relatedSearchableKeys:((null===m||void 0===m||null===(t=m.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=m.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=m.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 10:case"end":return e.stop()}}),e)}))),[v,u,d,a]),{resources:[],itemCount:0,relatedSearchableKeys:[],searchableKeys:[]}),h=_.isLoading,E=_.error,y=_.request,g=_.result,O=g.resources,j=g.itemCount,k=g.relatedSearchableKeys,w=g.searchableKeys;return Object(n.useEffect)((function(){y()}),[y]),r.a.createElement(n.Fragment,null,r.a.createElement("div",null,m._({id:"Choose the resources that will be receiving new roles.  You'll be able to select the roles to apply in the next step.  Note that the resources chosen here will receive all roles chosen in the next step."})),s.length>0&&r.a.createElement(yc,{displayKey:i,label:o,onRemove:l,selected:s}),r.a.createElement(To,{hasContentLoading:h,contentError:E,items:O,itemCount:j,qsConfig:Ds(a),onRowClick:l,toolbarSearchColumns:t,toolbarSortColumns:a,toolbarSearchableKeys:w,toolbarRelatedSearchableKeys:k,renderItem:function(e){return r.a.createElement(Oc,{isSelected:s.some((function(t){return t.id===e.id})),itemId:e.id,key:e.id,name:e[i],label:e[i],onSelect:function(){return l(e)},onDeselect:function(){return l(e)}})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{fillWidth:!0}))},showPageSizeOptions:!1}))}Ls.defaultProps={searchColumns:null,sortColumns:null,displayKey:"name",onRowClick:function(){},selectedLabel:null,selectedResourceRows:[]};var Ps,Us,Gs=Object(u.withI18n)()(Object(c.k)(Ls)),qs=j.b.div(Ps||(Ps=Object(v.a)(["\n  display: flex;\n  border: 1px solid var(--pf-global--BorderColor--200);\n  border-radius: var(--pf-global--BorderRadius--sm);\n  padding: 10px;\n"]))),Fs=Object(j.b)(En.a)(Us||(Us=Object(v.a)(["\n  width: 100%;\n  & label {\n    width: 100%;\n  }\n"]))),zs=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(){return Object(k.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.description,i=e.isSelected,l=e.onSelect,o=e.itemId;return r.a.createElement(qs,null,r.a.createElement(Fs,{isChecked:i,onChange:l,"aria-label":t,id:"checkbox-card-".concat(o),label:r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{fontWeight:"bold"}},t),r.a.createElement("div",null,a)),value:o}))}}]),a}(n.Component);zs.defaultProps={description:"",isSelected:!1,onSelect:null};var Ms=zs;function Ks(e){var t=e.onRolesClick,a=e.roles,i=e.selectedListKey,l=e.selectedListLabel,o=e.selectedResourceRows,c=e.selectedRoleRows,s=e.i18n;return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,s._({id:"Choose roles to apply to the selected resources.  Note that all selected roles will be applied to all selected resources."})),r.a.createElement("div",null,o.length>0&&r.a.createElement(yc,{displayKey:i,isReadOnly:!0,label:l||s._({id:"\u5df2\u9009\u62e9"}),selected:o})),r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 20px",marginTop:"20px"}},Object.keys(a).map((function(e){return r.a.createElement(Ms,{description:a[e].description,itemId:a[e].id,isSelected:c.some((function(t){return t.id===a[e].id})),key:a[e].id,name:a[e].name,onSelect:function(){return t(a[e])}})}))))}Ks.defaultProps={onRolesClick:function(){},selectedListKey:"name",selectedListLabel:null,selectedResourceRows:[],selectedRoleRows:[]};var Vs=Object(u.withI18n)()(Ks),Hs=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yt.read(Object.assign(t,{is_superuser:!1})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bs=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yt.readOptions());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ws=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vt.read(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Js=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vt.readOptions());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ys(e){var t=e.onSave,a=e.onClose,i=e.roles,l=e.i18n,o=e.resource,c=Object(n.useState)(null),s=Object(f.a)(c,2),u=s[0],m=s[1],v=Object(n.useState)([]),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Object(n.useState)([]),g=Object(f.a)(y,2),O=g[0],j=g[1],k=Object(n.useState)(1),w=Object(f.a)(k,2),C=w[0],S=w[1],x=Object(n.useState)(1),T=Object(f.a)(x,2),I=T[0],R=T[1],N=function(e){var t=h.findIndex((function(t){return t.id===e.id}));t>-1?(h.splice(t,1),0===h.length&&R(C),j(h)):E([].concat(Object(A.a)(h),[e]))},D=function(e){m(e),E([]),j([])},L=function(){var e=Object(b.a)(p.a.mark((function e(){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,a=[],n=0;n<h.length;n++)for(r=0;r<O.length;r++)"users"===u?a.push(yt.associateRole(h[n].id,O[r].id)):"teams"===u&&a.push(vt.associateRole(h[n].id,O[r].id));return e.next=5,Promise.all(a);case 5:t(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=Object(d.a)({},i);"teams"===u&&Object.keys(i).forEach((function(e){P[e].user_only&&delete P[e]}));var U=[{name:l._({id:"\u7528\u6237\u540d"}),key:"username__icontains",isDefault:!0},{name:l._({id:"\u59d3\u540d"}),key:"first_name__icontains"},{name:l._({id:"\u59d3\u6c0f"}),key:"last_name__icontains"}],G=[{name:l._({id:"\u7528\u6237\u540d"}),key:"username"},{name:l._({id:"\u59d3\u540d"}),key:"first_name"},{name:l._({id:"\u59d3\u6c0f"}),key:"last_name"}],q=[{name:l._({id:"\u540d\u79f0"}),key:"name",isDefault:!0},{name:l._({id:"\u521b\u5efa\u8005"}),key:"created_by__username"},{name:l._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username"}],F=[{name:l._({id:"\u540d\u79f0"}),key:"name"}],z="";switch(u){case"users":z=l._({id:"\u6dfb\u52a0\u7528\u6237\u89d2\u8272"});break;case"teams":z=l._({id:"\u6dfb\u52a0\u56e2\u961f\u89d2\u8272"});break;default:z=l._({id:"\u6dfb\u52a0\u89d2\u8272"})}var M=[{id:1,name:l._({id:"\u9009\u62e9\u8d44\u6e90\u7c7b\u578b"}),component:r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement("div",{style:{width:"100%",marginBottom:"10px"}},l._({id:"\u9009\u62e9\u5c06\u63a5\u6536\u65b0\u89d2\u8272\u7684\u8d44\u6e90\u7c7b\u578b\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u60a8\u60f3\u5411\u4e00\u7ec4\u7528\u6237\u6dfb\u52a0\u65b0\u89d2\u8272\uff0c\u8bf7\u9009\u62e9\u7528\u6237\u5e76\u5355\u51fb\u4e0b\u4e00\u6b65\u3002 \u60a8\u5c06\u80fd\u591f\u5728\u4e0b\u4e00\u6b65\u4e2d\u9009\u62e9\u7279\u5b9a\u8d44\u6e90\u3002"})),r.a.createElement(As,{isSelected:"users"===u,label:l._({id:"\u7528\u6237"}),ariaLabel:l._({id:"\u7528\u6237"}),dataCy:"add-role-users",onClick:function(){return D("users")}}),"credential"!==(null===o||void 0===o?void 0:o.type)||(null===o||void 0===o?void 0:o.organization)?r.a.createElement(As,{isSelected:"teams"===u,label:l._({id:"\u56e2\u961f"}),ariaLabel:l._({id:"\u56e2\u961f"}),dataCy:"add-role-teams",onClick:function(){return D("teams")}}):null),enableNext:null!==u},{id:2,name:l._({id:"\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u9879\u76ee"}),component:r.a.createElement(n.Fragment,null,"users"===u&&r.a.createElement(Gs,{searchColumns:U,sortColumns:G,displayKey:"username",onRowClick:N,fetchItems:Hs,fetchOptions:Bs,selectedLabel:l._({id:"\u5df2\u9009\u62e9"}),selectedResourceRows:h,sortedColumnKey:"username"}),"teams"===u&&r.a.createElement(Gs,{searchColumns:q,sortColumns:F,onRowClick:N,fetchItems:Ws,fetchOptions:Js,selectedLabel:l._({id:"\u5df2\u9009\u62e9"}),selectedResourceRows:h})),enableNext:h.length>0,canJumpTo:I>=2},{id:3,name:l._({id:"\u9009\u62e9\u8981\u5e94\u7528\u7684\u89d2\u8272"}),component:r.a.createElement(Vs,{onRolesClick:function(e){var t=O.findIndex((function(t){return t.id===e.id}));t>-1?(O.splice(t,1),j(O)):j([].concat(Object(A.a)(O),[e]))},roles:P,selectedListKey:"users"===u?"username":"name",selectedListLabel:l._({id:"\u5df2\u9009\u62e9"}),selectedResourceRows:h,selectedRoleRows:O}),nextButtonText:l._({id:"Save"}),enableNext:O.length>0,canJumpTo:I>=3}],K=M.find((function(e){return e.id===C}));return r.a.createElement(Ns,{style:{overflow:"scroll"},isOpen:!0,onNext:function(e){S(e.id),R(e.id)},onClose:a,onSave:L,onGoToStep:function(e){return function(e){S(e.id)}(e)},steps:M,title:z,nextButtonText:K.nextButtonText||void 0,backButtonText:l._({id:"\u8fd4\u56de"}),cancelButtonText:l._({id:"\u53d6\u6d88"})})}Ys.defaultProps={roles:{},resource:{}};var Xs=Object(u.withI18n)()(Ys);function Zs(e){var t=e.role,a=e.username,i=e.onCancel,l=e.onConfirm,o=e.i18n,c=function(){return"undefined"!==typeof t.team_id},s=o._({id:"Remove {0} Access",values:{0:c()?o._({id:"Team"}):o._({id:"User"})}});return r.a.createElement(Zt,{variant:"danger",title:s,isOpen:!0,onClose:i,actions:[r.a.createElement(O.a,{key:"delete",variant:"danger","aria-label":o._({id:"Confirm delete"}),onClick:l},o._({id:"\u5220\u9664"})),r.a.createElement(O.a,{key:"cancel",variant:"secondary",onClick:i},o._({id:"\u53d6\u6d88"}))]},c()?r.a.createElement(n.Fragment,null,o._({id:"Are you sure you want to remove {0} access from {1}?  Doing so affects all members of the team.",values:{0:t.name,1:t.team_name}}),r.a.createElement("br",null),r.a.createElement("br",null),o._({id:"If you only want to remove access for this particular user, please remove them from the team."})):r.a.createElement(n.Fragment,null,o._({id:"Are you sure you want to remove {0} access from {username}?",values:{0:t.name,username:a}})))}Zs.defaultProps={username:""};var $s=Object(u.withI18n)()(Zs),Qs=a(1049),eu=Object(j.b)(yo.a).withConfig({displayName:"ResourceAccessListItem__DataListItemCells",componentId:"sc-658iqk-0"})(["align-items:start;"]);var tu=Object(u.withI18n)()((function(e){var t=e.accessRecord,a=e.onRoleDelete,n=e.i18n,i=function(e){return r.a.createElement(uc.a,{key:e.id,onClick:function(){a(e,t)},isReadOnly:!e.user_capabilities.unattach},e.name)},l=function(){var e=[],a=[];function n(t){var n=t.role;n.team_id?e.push(n):a.push(n)}return t.summary_fields.direct_access.map(n),t.summary_fields.indirect_access.map(n),[e,a]}(),o=Object(f.a)(l,2),c=o[0],s=o[1];return r.a.createElement(ho.a,{"aria-labelledby":"access-list-item",key:t.id,id:"".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(eu,{dataListCells:[r.a.createElement(ko,{key:"name"},t.username&&r.a.createElement(Rt.a,null,t.id?r.a.createElement(Qs.a,{component:Qs.b.h6},r.a.createElement(au,{to:{pathname:"/users/".concat(t.id,"/details")}},t.username)):r.a.createElement(nu,{component:Qs.b.h6},t.username)),t.first_name||t.last_name?r.a.createElement(pi,{stacked:!0},r.a.createElement(xi,{label:n._({id:"\u540d\u79f0"}),value:"".concat(t.first_name," ").concat(t.last_name)})):null),r.a.createElement(ko,{key:"roles"},r.a.createElement(pi,{stacked:!0},s.length>0&&r.a.createElement(xi,{label:n._({id:"User Roles"}),value:r.a.createElement(fc,{numChips:5,totalChips:s.length},s.map(i))}),c.length>0&&r.a.createElement(xi,{label:n._({id:"Team Roles"}),value:r.a.createElement(fc,{numChips:5,totalChips:c.length},c.map(i))})))]})))})),au=Object(j.b)(s.b).withConfig({displayName:"ResourceAccessListItem___StyledLink",componentId:"sc-658iqk-1"})(["font-weight:bold"]),nu=Object(j.b)(Qs.a).withConfig({displayName:"ResourceAccessListItem___StyledText",componentId:"sc-658iqk-2"})(["font-weight:bold"]),ru=R("access",{page:1,page_size:5,order_by:"first_name"});var iu=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.apiModel,i=e.resource,l=Object(n.useState)(null),o=Object(f.a)(l,2),s=o[0],u=o[1],d=Object(n.useState)(null),m=Object(f.a)(d,2),v=m[0],_=m[1],h=Object(n.useState)(!1),E=Object(f.a)(h,2),y=E[0],g=E[1],O=Object(n.useState)(!1),j=Object(f.a)(O,2),k=j[0],w=j[1],C=Object(c.h)(),S=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(ru,C.search),e.next=3,Promise.all([a.readAccessList(i.id,r),a.readAccessOptions(i.id)]);case 3:return l=e.sent,o=Object(f.a)(l,2),c=o[0],s=o[1],e.abrupt("return",{accessRecords:c.data.results,itemCount:c.data.count,relatedSearchableKeys:((null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=s.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=s.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a,C,i.id]),{accessRecords:[],itemCount:0,relatedSearchableKeys:[],searchableKeys:[]}),x=S.result,T=x.accessRecords,I=x.itemCount,A=x.relatedSearchableKeys,R=x.searchableKeys,D=S.error,L=S.isLoading,P=S.request;Object(n.useEffect)((function(){P()}),[P]);var U=en(Object(n.useCallback)((function(){return"undefined"!==typeof v.team_id?vt.disassociateRole(v.team_id,v.id):yt.disassociateRole(s.id,v.id)}),[v]),{qsConfig:ru,fetchItems:P}),G=U.isLoading,q=U.deleteItems,F=U.deletionError,z=U.clearDeletionError;return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{error:D,hasContentLoading:L||G,items:T,itemCount:I,pluralizedItemName:t._({id:"Roles"}),qsConfig:ru,toolbarSearchColumns:[{name:t._({id:"Username"}),key:"username__icontains",isDefault:!0},{name:t._({id:"First Name"}),key:"first_name__icontains"},{name:t._({id:"Last Name"}),key:"last_name__icontains"}],toolbarSortColumns:[{name:t._({id:"Username"}),key:"username"},{name:t._({id:"First Name"}),key:"first_name"},{name:t._({id:"Last Name"}),key:"last_name"}],toolbarSearchableKeys:R,toolbarRelatedSearchableKeys:A,renderToolbar:function(e){var t,a;return r.a.createElement(hr,Object.assign({},e,{qsConfig:ru,additionalControls:(null===i||void 0===i||null===(t=i.summary_fields)||void 0===t||null===(a=t.user_capabilities)||void 0===a?void 0:a.edit)?[r.a.createElement(Po,{key:"add",onClick:function(){return g(!0)}})]:[]}))},renderItem:function(e){return r.a.createElement(tu,{key:e.id,accessRecord:e,onRoleDelete:function(e,t){u(t),_(e),w(!0)},i18n:t})}}),y&&r.a.createElement(Xs,{onClose:function(){return g(!1)},onSave:function(){g(!1),P()},roles:i.summary_fields.object_roles,resource:i}),k&&r.a.createElement($s,{role:v,username:s.username,onCancel:function(){u(null),_(null),w(!1)},onConfirm:Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:w(!1),u(null),_(null);case 5:case"end":return e.stop()}}),e)})))}),F&&r.a.createElement(Zt,{isOpen:F,variant:"error",title:t._({id:"Error!"}),onClose:z},t._({id:"Failed to delete role"})))})),lu=a(1004),ou=a(1050),cu=["credential","i18n","i18nHash"];var su,uu,du=Object(u.withI18n)()((function(e){var t,a=e.credential,n=e.i18n,i=(e.i18nHash,Object(o.a)(e,cu));return t=a.cloud?n._({id:"Cloud"}):"aws"===a.kind||"ssh"===a.kind?a.kind.toUpperCase():as(a.kind),r.a.createElement(uc.a,i,r.a.createElement("strong",null,t,": "),function(){var e;return"vault"===a.kind&&(null===(e=a.inputs)||void 0===e?void 0:e.vault_id)?"".concat(a.name," | ").concat(a.inputs.vault_id):"".concat(a.name)}())})),mu=Object(j.b)(io)(su||(su=Object(v.a)(["\n  grid-column: 1 / -1;\n"]))),pu=j.b.p(uu||(uu=Object(v.a)(["\n  margin-top: 10px;\n"])));var bu=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.credential,i=a.id,l=a.name,o=a.description,u=a.inputs,d=a.created,m=a.modified,v=a.summary_fields,_=v.credential_type,h=v.organization,E=v.created_by,y=v.modified_by,g=v.user_capabilities,j=Object(c.g)(),k=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Be.readDetail(_.id),We.readInputSources(i)]);case 2:return t=e.sent,a=Object(f.a)(t,2),n=a[0].data,r=n.inputs,l=n.managed_by_tower,o=a[1].data.results,e.abrupt("return",{fields:r.fields||[],managedByTower:l,inputSources:o.reduce((function(e,t){return e[t.input_field_name]=t,e}),{})});case 9:case"end":return e.stop()}}),e)}))),[i,_.id]),{fields:[],managedByTower:!0,inputSources:{}}),w=k.result,C=w.fields,S=w.managedByTower,x=w.inputSources,T=k.request,I=k.isLoading,A=k.error,R=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.destroy(i);case 2:j.push("/credentials");case 3:case"end":return e.stop()}}),e)}))),[i,j])),N=R.request,D=R.isLoading,L=Qa(R.error),P=L.error,U=L.dismissError;return Object(n.useEffect)((function(){T()}),[T]),I?r.a.createElement(Nr,null):A?r.a.createElement(za,{error:A}):r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{id:"credential-name-detail",label:t._({id:"\u540d\u79f0"}),value:l}),r.a.createElement(xi,{id:"credential-description-detail",label:t._({id:"\u63cf\u8ff0"}),value:o}),h&&r.a.createElement(xi,{id:"credential-organization-detail",label:t._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(h.id,"/details")},h.name)}),r.a.createElement(xi,{id:"credential-credential_type-detail",label:t._({id:"Credential Type"}),value:S?_.name:r.a.createElement(s.b,{to:"/credential_types/".concat(_.id,"/details")},_.name)}),C.map((function(e){return function(e){var a=e.id,i=e.label,l=e.type,o=e.ask_at_runtime;return x[a]?r.a.createElement(n.Fragment,{key:a},r.a.createElement(xi,{id:"credential-".concat(a,"-detail"),fullWidth:!0,label:r.a.createElement("span",null,i," *"),value:r.a.createElement(fc,{numChips:1,totalChips:1},r.a.createElement(du,{credential:x[a].summary_fields.source_credential,isReadOnly:!0}))}),r.a.createElement(mu,{id:"credential-".concat(a,"-metadata"),mode:"javascript",readOnly:!0,value:JSON.stringify(x[a].metadata,null,2),onChange:function(){},rows:5,hasErrors:!1})):"boolean"===l?r.a.createElement(xi,{id:"credential-".concat(a,"-detail"),key:a,label:t._({id:"Options"}),value:r.a.createElement(lu.a,null,u[a]&&r.a.createElement(ou.a,null,i))}):"$encrypted$"===u[a]?r.a.createElement(xi,{id:"credential-".concat(a,"-detail"),key:a,label:i,value:t._({id:"Encrypted"}),isEncrypted:!0}):o&&"ASK"===u[a]?r.a.createElement(xi,{id:"credential-".concat(a,"-detail"),key:a,label:i,value:t._({id:"Prompt on launch"})}):r.a.createElement(xi,{id:"credential-".concat(a,"-detail"),key:a,label:i,value:u[a]})}(e)})),r.a.createElement(Li,{id:"credential-created-detail",label:t._({id:"\u5df2\u521b\u5efa"}),date:d,user:E}),r.a.createElement(Li,{id:"credential-last_modified-detail",label:t._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:m,user:y})),Object.keys(x).length>0&&r.a.createElement(pu,null,t._({id:"* This field will be retrieved from an external secret management system using the specified credential."})),r.a.createElement(Yc,null,g.edit&&r.a.createElement(O.a,{component:s.b,to:"/credentials/".concat(i,"/edit")},t._({id:"Edit"})),g.delete&&r.a.createElement(Qc,{name:l,modalTitle:t._({id:"Delete Credential"}),onConfirm:N,isLoading:D},t._({id:"\u5220\u9664"}))),P&&r.a.createElement(Zt,{isOpen:P,variant:"error",title:t._({id:"Error!"}),onClose:U},t._({id:"Failed to delete credential."}),r.a.createElement(ua,{error:P})))}));function fu(e){var t=e.fieldOptions,a=e.isRequired,i=Object(n.useState)(!1),l=Object(f.a)(i,2),o=l[0],c=l[1],s=Object(n.useState)(["sudo","su","pbrun","pfexec","dzdo","pmrun","runas","enable","doas","ksu","machinectl","sesu"].map((function(e){return{value:e}}))),u=Object(f.a)(s,2),d=u[0],m=u[1],p=Object(Va.b)({name:"inputs.".concat(t.id)}),b=Object(f.a)(p,3),v=b[0],_=b[1],h=b[2];return r.a.createElement(Wi.a,{fieldId:"credential-".concat(t.id),helperTextInvalid:_.error,label:t.label,labelIcon:t.help_text&&r.a.createElement(gi,{content:t.help_text}),isRequired:a,validated:_.touched&&_.error?"error":"default"},r.a.createElement(dn.a,{maxHeight:200,variant:mn.e.typeahead,onToggle:c,onClear:function(){h.setValue("")},onSelect:function(e,t){h.setValue(t),c(!1)},isOpen:o,id:"privilege-escalation-methods",selections:v.value,isCreatable:!0,onCreateOption:function(e){m([].concat(Object(A.a)(d),[{value:e}]))}},d.map((function(e){return r.a.createElement(bn.a,{key:e.value,value:e.value})}))))}fu.defaultProps={isRequired:!1};var vu,_u,hu,Eu=fu,yu=a(1094),gu=a(1051),Ou=j.b.div(vu||(vu=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n  background-color: white;\n  border-bottom-color: var(--pf-global--BorderColor--200);\n"]))),ju=Object(j.b)(du)(_u||(_u=Object(v.a)(["\n  margin: 5px 8px;\n"]))),ku=j.b.p(hu||(hu=Object(v.a)(["\n  margin-top: 5px;\n"])));function wu(e){var t=e.i18n,a=e.credential,n=e.onEditPlugin,i=e.onClearPlugin;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ou,null,r.a.createElement(ju,{onClick:i,credential:a}),r.a.createElement(Ea.a,{content:t._({id:"Edit Credential Plugin Configuration"}),position:"top"},r.a.createElement(O.a,{"aria-label":t._({id:"Edit Credential Plugin Configuration"}),onClick:n,variant:O.b.control},r.a.createElement(gu.a,null)))),r.a.createElement(ku,null,r.a.createElement(u.Trans,{id:"This field will be retrieved from an external secret management system using the specified credential."})))}wu.defaultProps={onEditPlugin:function(){},onClearPlugin:function(){}};var Cu,Su,xu=Object(u.withI18n)()(wu),Tu=j.b.div(Cu||(Cu=Object(v.a)(["\n  display: flex;\n  padding-bottom: var(--pf-c-form__group-label--PaddingBottom);\n"]))),Iu=Object(j.b)(Rl)(Su||(Su=Object(v.a)(["\n  --pf-c-check__label--FontSize: var(--pf-c-form__label--FontSize);\n  margin-left: auto;\n"])));function Au(e){var t=e.children,a=e.fieldId,n=e.i18n,i=e.isRequired,l=e.label,o=e.promptId,c=e.promptName,s=e.tooltip,u=e.isDisabled;return r.a.createElement("div",{className:"pf-c-form__group"},r.a.createElement(Tu,null,r.a.createElement("div",null,r.a.createElement("label",{className:"pf-c-form__label",htmlFor:a},r.a.createElement("span",{className:"pf-c-form__label-text"},l),i&&r.a.createElement("span",{className:"pf-c-form__label-required","aria-hidden":"true"},"*")),s&&r.a.createElement(gi,{content:s,id:a})),r.a.createElement(Iu,{isDisabled:u,id:o,label:n._({id:"Prompt on launch"}),name:c})),t)}Au.defaultProps={isRequired:!1,tooltip:null};var Ru=Object(u.withI18n)()(Au),Nu=a(1052),Du=a(500),Lu=R("credential",{page:1,page_size:5,order_by:"name",credential_type__kind:"external"});var Pu=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(Va.b)("credential"),i=Object(f.a)(a,3),l=i[0],o=i[2],s=Object(c.g)(),u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(Lu,s.location.search),e.next=3,Promise.all([We.read(Object(d.a)({},n)),We.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0].data,o=i[1],e.abrupt("return",{credentials:l.results,count:l.count,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[s.location.search]),{credentials:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),m=u.result,v=m.credentials,_=m.count,h=m.relatedSearchableKeys,E=m.searchableKeys,y=u.error,g=u.isLoading,O=u.request;return Object(n.useEffect)((function(){O()}),[O]),y?r.a.createElement(za,{error:y}):r.a.createElement(To,{contentError:y,hasContentLoading:g,itemCount:_,items:v,onRowClick:function(e){return o.setValue(e)},qsConfig:Lu,renderItem:function(e){var t;return r.a.createElement(Oc,{isSelected:(null===l||void 0===l||null===(t=l.value)||void 0===t?void 0:t.id)===e.id,itemId:e.id,key:e.id,name:e.name,label:e.name,onSelect:function(){return o.setValue(e)},onDeselect:function(){return o.setValue(null)},isRadio:!0})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{fillWidth:!0}))},showPageSizeOptions:!1,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:E,toolbarRelatedSearchableKeys:h})}));var Uu=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(Va.c)(),i=Object(Va.b)("credential"),l=Object(f.a)(i,1)[0],o=Object(Va.b)("inputs"),c=Object(f.a)(o,1)[0],s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.readDetail(l.value.credential_type||l.value.credential_type_id);case 2:return t=e.sent,n=t.data.inputs,r=n.required,(i=n.metadata).forEach((function(e){c.value[e.id]?a.initialValues.inputs[e.id]=c.value[e.id]:"string"===e.type&&e.choices?a.initialValues.inputs[e.id]=e.default||e.choices[0]:a.initialValues.inputs[e.id]="",r&&r.includes(e.id)&&(e.required=!0)})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),[]),[]),u=s.result,d=s.error,m=s.isLoading,v=s.request;return Object(n.useEffect)((function(){v()}),[v]),m?r.a.createElement(Nr,null):d?r.a.createElement(za,{error:d}):r.a.createElement(r.a.Fragment,null,u.length>0&&r.a.createElement(Jo.a,null,r.a.createElement(Hl,null,u.map((function(e){return"string"===e.type?e.choices?r.a.createElement(Wi.a,{key:e.id,fieldId:"credential-".concat(e.id),label:e.label,isRequired:e.required,labelIcon:e.help_text&&r.a.createElement(gi,{content:e.help_text})},r.a.createElement(Fc,{name:"inputs.".concat(e.id),value:a.values.inputs[e.id],id:"credential-".concat(e.id),data:e.choices.map((function(e){return{value:e,key:e,label:e}})),onChange:function(t,n){a.setFieldValue("inputs.".concat(e.id),n)},validate:e.required?Yo(null,t):null})):r.a.createElement(Tl,{key:e.id,id:"credential-".concat(e.id),label:e.label,tooltip:e.help_text,name:"inputs.".concat(e.id),type:e.multiline?"textarea":"text",isRequired:e.required,validate:e.required?Yo(null,t):null}):null})))))}));function Gu(e){var t=e.i18n,a=e.handleSubmit,i=e.onClose,l=Object(Va.b)("credential"),o=Object(f.a)(l,1)[0],c=Object(Va.b)("inputs"),s=Object(f.a)(c,1)[0],u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",We.test(o.value.id,{metadata:s.value}));case 1:case"end":return e.stop()}}),e)}))),[o,s]),null),d=u.result,m=u.error,v=u.request,_=[{id:1,name:t._({id:"Credential"}),key:"credential",component:r.a.createElement(Pu,null),enableNext:!!o.value},{id:2,name:t._({id:"Metadata"}),key:"metadata",component:r.a.createElement(Uu,null),canJumpTo:!!o.value}],h=r.a.createElement(Nu.a,null,r.a.createElement(Du.a,null,(function(e){var a=e.activeStep,n=e.onNext,l=e.onBack;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{id:"credential-plugin-prompt-next",variant:"primary",onClick:n,isDisabled:!o.value},"metadata"===a.key?t._({id:"OK"}):t._({id:"Next"})),a&&"metadata"===a.key&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{content:t._({id:"Click this button to verify connection to the secret management system using the selected credential and specified inputs."}),position:"right"},r.a.createElement(O.a,{id:"credential-plugin-prompt-test",variant:"secondary",onClick:function(){return v()}},t._({id:"Test"}))),r.a.createElement(O.a,{id:"credential-plugin-prompt-back",variant:"secondary",onClick:l},t._({id:"\u8fd4\u56de"}))),r.a.createElement(O.a,{id:"credential-plugin-prompt-cancel",variant:"link",onClick:i},t._({id:"\u53d6\u6d88"})))})));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rs.a,{isOpen:!0,onClose:i,title:t._({id:"External Secret Management System"}),steps:_,onSave:a,footer:h}),o.value&&r.a.createElement(Ju,{credentialName:o.value.name,successResponse:d,errorResponse:m}))}function qu(e){var t=e.i18n,a=e.onClose,n=e.onSubmit,i=e.initialValues;return r.a.createElement(Va.a,{initialValues:{credential:(null===i||void 0===i?void 0:i.credential)||null,inputs:(null===i||void 0===i?void 0:i.inputs)||{}},onSubmit:n},(function(e){var n=e.handleSubmit;return r.a.createElement(Gu,{handleSubmit:n,i18n:t,onClose:a})}))}qu.defaultProps={initialValues:{}};var Fu=Object(u.withI18n)()(qu);function zu(e){var t,a,i=e.children,l=e.i18n,o=e.isDisabled,c=e.isRequired,s=e.isValid,u=e.fieldOptions,m=Object(n.useState)(!1),p=Object(f.a)(m,2),b=p[0],v=p[1],_=Object(Va.b)("inputs.".concat(u.id)),h=Object(f.a)(_,3),E=h[0],y=h[2],g=Object(Va.b)("passwordPrompts.".concat(u.id)),j=Object(f.a)(g,1)[0];return r.a.createElement(r.a.Fragment,null,(null===E||void 0===E||null===(t=E.value)||void 0===t?void 0:t.credential)?r.a.createElement(xu,{credential:null===E||void 0===E||null===(a=E.value)||void 0===a?void 0:a.credential,onClearPlugin:function(){return y.setValue("")},onEditPlugin:function(){return v(!0)}}):r.a.createElement(An.a,null,r.a.cloneElement(i,Object(d.a)(Object(d.a)({},E),{},{isRequired:c,validated:s?"default":"error",isDisabled:!!j.value,onChange:function(e,t){E.onChange(t)}})),r.a.createElement(Ea.a,{content:l._({id:"Populate field from an external secret management system"})},r.a.createElement(O.a,{id:"credential-".concat(u.id,"-external-button"),variant:O.b.control,"aria-label":l._({id:"Populate field from an external secret management system"}),onClick:function(){return v(!0)},isDisabled:o||!!j.value},r.a.createElement(gu.a,null)))),b&&r.a.createElement(Fu,{initialValues:"object"===typeof E.value?E.value:{},onClose:function(){return v(!1)},onSubmit:function(e){e.touched=!0,y.setValue(e),v(!1)}}))}function Mu(e){var t=e.fieldOptions,a=e.isRequired,i=e.isValid,l=Object(Va.b)("inputs.".concat(t.id)),o=Object(f.a)(l,3),c=o[1],s=o[2],u=Object(Va.b)("passwordPrompts.".concat(t.id)),d=Object(f.a)(u,1)[0];return Object(n.useEffect)((function(){d.value&&s.setValue("")}),[d.value]),r.a.createElement(r.a.Fragment,null,t.ask_at_runtime?r.a.createElement(Ru,{fieldId:"credential-".concat(t.id),helperTextInvalid:c.error,isRequired:a,label:t.label,promptId:"credential-prompt-".concat(t.id),promptName:"passwordPrompts.".concat(t.id),tooltip:t.help_text},r.a.createElement(zu,e),c.error&&c.touched&&r.a.createElement("div",{className:"pf-c-form__helper-text pf-m-error",id:"".concat(t.id,"-helper"),"aria-live":"polite"},c.error)):r.a.createElement(Wi.a,{fieldId:"credential-".concat(t.id),helperTextInvalid:c.error,isRequired:a,validated:i?"default":"error",label:t.label,labelIcon:t.help_text&&r.a.createElement(gi,{content:t.help_text})},r.a.createElement(zu,e)))}Mu.defaultProps={isDisabled:!1,isRequired:!1};var Ku=Object(u.withI18n)()(Mu),Vu=a(1111),Hu=a(1053);function Bu(e){var t=e.i18n,a=e.credentialName,i=e.successResponse,l=e.errorResponse,o=Object(n.useState)(""),c=Object(f.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(f.a)(d,2),p=m[0],b=m[1];return Object(n.useEffect)((function(){if(l){var e,a;if(null===l||void 0===l||null===(e=l.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.inputs)if(l.response.data.inputs.startsWith("HTTP")){var n=l.response.data.inputs.split("\n"),r=Object(f.a)(n,2),o=r[0],c=r[1];try{var s=JSON.parse(c);u("".concat(o).concat((null===s||void 0===s?void 0:s.errors[0])?": ".concat(s.errors[0]):""))}catch(d){u(l.response.data.inputs)}}else u(l.response.data.inputs);else u(t._({id:"Something went wrong with the request to test this credential and metadata."}));b("danger")}else i&&(u(t._({id:"Test passed"})),b("success"))}),[t,i,l]),r.a.createElement(Vu.a,{isToast:!0},s&&p&&r.a.createElement(Kl.a,{actionClose:r.a.createElement(Hu.a,{onClose:function(){u(null),b(null)}}),title:r.a.createElement(r.a.Fragment,null,r.a.createElement("b",{id:"credential-plugin-test-name"},a),r.a.createElement("p",{id:"credential-plugin-test-message"},s)),variant:p}))}Bu.defaultProps={successResponse:null,errorResponse:null};var Wu,Ju=Object(u.withI18n)()(Bu),Yu=["fieldOptions","credentialKind"],Xu=Object(j.b)(yu.a)(Wu||(Wu=Object(v.a)(["\n  flex-grow: 1;\n"])));function Zu(e){var t=e.fieldOptions,a=e.credentialKind,i=Object(o.a)(e,Yu),l=Object(n.useState)(""),c=Object(f.a)(l,2),s=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(f.a)(d,2),p=m[0],b=m[1],v=Object(Va.b)("inputs.".concat(t.id)),_=Object(f.a)(v,3),h=_[0],E=_[1],y=_[2],g=!(E.touched&&E.error);if(t.multiline){return r.a.createElement(Xu,Object.assign({},h,{id:"credential-".concat(t.id),type:"text",filename:s,onChange:function(e,t){y.setValue(e),u(t)},onReadStarted:function(){return b(!0)},onReadFinished:function(){return b(!1)},isLoading:p,allowEditingUploadedText:!0,validated:g?"default":"error"}))}if(t.secret){var O=function(){return r.a.createElement(Pl,Object.assign({},h,{id:"credential-".concat(t.id)},i))};return"external"===a?r.a.createElement(An.a,null,O()):O()}return r.a.createElement(Rn.a,Object.assign({},h,{id:"credential-".concat(t.id),onChange:function(e,t){h.onChange(t)},validated:g?"default":"error"}))}function $u(e){var t,a=e.credentialType,n=e.fieldOptions,i=e.i18n,l=Object(Va.c)().values,o=((null===a||void 0===a||null===(t=a.inputs)||void 0===t?void 0:t.required)||[]).includes(n.id),c=Object(Va.b)({name:"inputs.".concat(n.id),validate:o&&!(null===l||void 0===l?void 0:l.passwordPrompts[n.id])?Yo(n.ask_at_runtime?i._({id:"Provide a value for this field or select the Prompt on launch option."}):null,i):null}),s=Object(f.a)(c,3),u=s[0],d=s[1],m=s[2],p=!(d.touched&&d.error);if(n.choices){var b=n.choices.map((function(e){return{value:e,key:e,label:e}}));return r.a.createElement(Wi.a,{fieldId:"credential-".concat(n.id),helperTextInvalid:d.error,label:n.label,isRequired:o,validated:p?"default":"error"},r.a.createElement(Fc,Object.assign({},u,{id:"credential-".concat(n.id),data:b,onChange:function(e,t){m.setValue(t)}})))}return"external"===a.kind?r.a.createElement(Wi.a,{fieldId:"credential-".concat(n.id),helperTextInvalid:d.error,label:n.label,labelIcon:n.help_text&&r.a.createElement(gi,{content:n.help_text}),isRequired:o,validated:p?"default":"error"},r.a.createElement(Zu,{credentialKind:a.kind,fieldOptions:n})):"ssh"===a.kind&&"become_method"===n.id?r.a.createElement(Eu,{fieldOptions:n,isRequired:o}):r.a.createElement(Ku,{fieldOptions:n,isRequired:o,validated:p?"default":"error"},r.a.createElement(Zu,{fieldOptions:n}))}Zu.defaultProps={credentialKind:""},$u.defaultProps={};var Qu=Object(u.withI18n)()($u);var ed=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],o=i[1],c=Object(n.useState)(""),s=Object(f.a)(c,2),u=s[0],d=s[1],m=Object(n.useState)(""),v=Object(f.a)(m,2),_=v[0],h=v[1],E=Object(Va.b)({name:"inputs.username"}),y=Object(f.a)(E,3)[2],g=Object(Va.b)({name:"inputs.project"}),O=Object(f.a)(g,3)[2],j=Object(Va.b)({name:"inputs.ssh_key_data"}),k=Object(f.a)(j,3)[2];return r.a.createElement(Wi.a,{fieldId:"credential-gce-file",validated:l?"error":"default",label:t._({id:"Service account JSON file"}),helperText:t._({id:"Select a JSON formatted service account key to autopopulate the following fields."}),helperTextInvalid:l},r.a.createElement(yu.a,{id:"credential-gce-file",value:_,filename:u,filenamePlaceholder:t._({id:"Choose a .json file"}),onChange:function(){var e=Object(b.a)(p.a.mark((function e(a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.prev=1,h(a),d(a.name),e.next=6,a.text();case 6:n=e.sent,(r=JSON.parse(n)).client_email||r.project_id||r.private_key?(y.setValue(r.client_email||""),O.setValue(r.project_id||""),k.setValue(r.private_key||""),o(null)):o(t._({id:"Expected at least one of client_email, project_id or private_key to be present in the file."})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),o(t._({id:"There was an error parsing the file. Please check the file formatting and try again."}));case 14:e.next=22;break;case 16:h(""),d(""),y.setValue(""),O.setValue(""),k.setValue(""),o(null);case 22:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),dropzoneProps:{accept:".json",onDropRejected:function(){o(t._({id:"File upload rejected. Please select a single .json file."}))}}}))}));function td(e){var t=e.credentialType,a=e.i18n,n=t.inputs.fields.filter((function(e){return"string"===e.type||e.choices})),i=t.inputs.fields.filter((function(e){return"boolean"===e.type}));return r.a.createElement(Wl,null,r.a.createElement(qt.a,{size:"md",headingLevel:"h4"},a._({id:"Type Details"})),r.a.createElement(Vl,null,"gce"===t.namespace&&r.a.createElement(ed,null),n.map((function(e){return e.multiline?r.a.createElement(Hl,{key:e.id},r.a.createElement(Qu,{credentialType:t,fieldOptions:e})):r.a.createElement(Qu,{key:e.id,credentialType:t,fieldOptions:e})})),i.length>0&&r.a.createElement(Hl,null,r.a.createElement(Wi.a,{fieldId:"credential-checkboxes",label:a._({id:"Options"})},r.a.createElement(Bl,null,i.map((function(e){return r.a.createElement(Rl,{id:"credential-".concat(e.id),key:e.id,name:"inputs.".concat(e.id),label:e.label,tooltip:e.help_text})})))))))}td.defaultProps={};var ad=Object(u.withI18n)()(td);function nd(e){var t=e.i18n,a=e.credential,i=e.credentialType,l=e.credentialFormValues,o=e.onClose,c=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={inputs:i.inputs.fields.reduce((function(e,t){return e[t.id]=l.inputs[t.id],e}),{}),metadata:t},!a||a.credential_type!==i.id){e.next=3;break}return e.abrupt("return",We.test(a.id,n));case 3:return e.abrupt("return",Be.test(i.id,n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,i.id,i.inputs.fields,l.inputs]),null),s=c.result,u=c.error,d=c.request,m=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Va.a,{initialValues:i.inputs.metadata.reduce((function(e,t){return"string"===t.type&&t.choices?e[t.id]=t.default||t.choices[0]:e[t.id]="",e}),{}),onSubmit:function(e){return m(e)}},(function(e){var a=e.handleSubmit,n=e.setFieldValue;return r.a.createElement(Ft.a,{title:t._({id:"Test External Credential"}),isOpen:!0,onClose:function(){return o()},variant:"small",actions:[r.a.createElement(O.a,{id:"run-external-credential-test",key:"confirm",variant:"primary",onClick:function(){return a()}},t._({id:"Run"})),r.a.createElement(O.a,{id:"cancel-external-credential-test",key:"cancel",variant:"link",onClick:function(){return o()}},t._({id:"\u53d6\u6d88"}))]},r.a.createElement(Jo.a,null,r.a.createElement(Hl,null,i.inputs.metadata.map((function(e){var a,l=null===(a=i.inputs)||void 0===a?void 0:a.required.includes(e.id);return"string"===e.type?e.choices?r.a.createElement(Wi.a,{key:e.id,fieldId:"credential-".concat(e.id),label:e.label,labelIcon:e.help_text&&r.a.createElement(gi,{content:e.help_text}),isRequired:l},r.a.createElement(Fc,{name:e.id,value:e.default,id:"credential-".concat(e.id),data:e.choices.map((function(e){return{value:e,key:e,label:e}})),onChange:function(t,a){n(e.id,a)},validate:l?Yo(null,t):null})):r.a.createElement(Tl,{key:e.id,id:"credential-".concat(e.id),label:e.label,tooltip:e.help_text,name:e.id,type:e.multiline?"textarea":"text",isRequired:l,validate:l?Yo(null,t):null}):null})))))})),r.a.createElement(Ju,{credentialName:l.name,successResponse:s,errorResponse:u}))}nd.proptype={credential:Object(Nn.shape)({}),credentialType:Object(Nn.shape)({}).isRequired,credentialFormValues:Object(Nn.shape)({}).isRequired,onClose:Nn.func.isRequired},nd.defaultProps={credential:null};var rd=Object(u.withI18n)()(nd),id=["i18n","credential","credentialTypes","inputSources","onSubmit","onCancel","submitError"];function ld(e){var t,a,i=e.i18n,l=e.credentialTypes,o=e.formik,c=e.initialValues,s=Object(Va.c)().setFieldValue,u=Object(Va.b)({name:"credential_type",validate:Yo(i._({id:"Select a value for this field"}),i)}),d=Object(f.a)(u,3),m=d[0],p=d[1],b=d[2],v=!!m.value&&"galaxy"===l[m.value].kind,_=Object(Va.b)({name:"organization",validate:v&&Yo(i._({id:"Galaxy credentials must be owned by an Organization."}),i)}),h=Object(f.a)(_,3),E=h[0],y=h[1],g=h[2],O=Object.keys(l).map((function(e){return{value:l[e].id,key:l[e].id,label:l[e].name}})).sort((function(e,t){return e.label.toLowerCase()>t.label.toLowerCase()?1:-1})),j=Object(n.useCallback)((function(e){s("organization",e)}),[s]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"credential-name",label:i._({id:"\u540d\u79f0"}),name:"name",type:"text",validate:Yo(null,i),isRequired:!0}),r.a.createElement(Tl,{id:"credential-description",label:i._({id:"\u63cf\u8ff0"}),name:"description",type:"text"}),r.a.createElement(Pc,{helperTextInvalid:y.error,isValid:!y.touched||!y.error,onBlur:function(){return g.setTouched()},onChange:j,value:E.value,touched:y.touched,error:y.error,required:v}),r.a.createElement(Wi.a,{fieldId:"credential-Type",helperTextInvalid:p.error,isRequired:!0,validated:p.touched&&p.error?"error":"default",label:i._({id:"Credential Type"})},r.a.createElement(Fc,Object.assign({},m,{id:"credential-type",data:[{value:"",key:"",label:i._({id:"Choose a Credential Type"}),isDisabled:!0}].concat(Object(A.a)(O)),onChange:function(e,t){var a,n;b.setValue(t),n=o,(l[a=t].inputs.fields||[]).forEach((function(e){var t=e.ask_at_runtime,r=e.type,i=e.id,l=e.choices,o=e.default;if(parseInt(a,10)===n.initialValues.credential_type)n.setFieldValue("inputs.".concat(i),c.inputs[i]),t&&n.setFieldValue("passwordPrompts.".concat(i),c.passwordPrompts[i]);else{switch(r){case"string":n.setFieldValue("inputs.".concat(i),o||"");break;case"boolean":n.setFieldValue("inputs.".concat(i),o||!1)}l&&n.setFieldValue("inputs.".concat(i),o),t&&n.setFieldValue("passwordPrompts.".concat(i),!1)}n.setFieldTouched("inputs.".concat(i),!1)}))}}))),void 0!==m.value&&""!==m.value&&(null===(t=l[m.value])||void 0===t||null===(a=t.inputs)||void 0===a?void 0:a.fields)&&r.a.createElement(ad,{credentialType:l[m.value]}))}function od(e){var t,a=e.i18n,i=e.credential,l=void 0===i?{}:i,c=e.credentialTypes,s=e.inputSources,u=e.onSubmit,d=e.onCancel,m=e.submitError,p=Object(o.a)(e,id),b=Object(n.useState)(!1),v=Object(f.a)(b,2),_=v[0],h=v[1],E={name:l.name||"",description:l.description||"",organization:(null===l||void 0===l||null===(t=l.summary_fields)||void 0===t?void 0:t.organization)||null,credential_type:l.credential_type||"",inputs:{},passwordPrompts:{}};return Object.values(c).forEach((function(e){(e.inputs.fields||[]).forEach((function(e){var t=e.ask_at_runtime,a=e.type,n=e.id,r=e.choices,i=e.default;if((null===l||void 0===l?void 0:l.inputs)&&l.inputs[n])t&&(E.passwordPrompts[n]="ASK"===l.inputs[n]||!1),E.inputs[n]=l.inputs[n];else{switch(a){case"string":E.inputs[n]=i||"";break;case"boolean":E.inputs[n]=i||!1}r&&(E.inputs[n]=i),t&&(E.passwordPrompts[n]=!1)}}))})),Object.values(s).forEach((function(e){E.inputs[e.input_field_name]={credential:e.summary_fields.source_credential,inputs:e.metadata}})),r.a.createElement(Va.a,{initialValues:E,onSubmit:function(e){u(e)}},(function(e){var t,n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(ld,Object.assign({formik:e,initialValues:E,credentialTypes:c,i18n:a},p)),r.a.createElement(Yl,{error:m}),r.a.createElement(Hl,null,r.a.createElement(lc.a,null,r.a.createElement(O.a,{id:"credential-form-save-button","aria-label":a._({id:"Save"}),variant:"primary",type:"button",onClick:e.handleSubmit},a._({id:"Save"})),(null===e||void 0===e||null===(t=e.values)||void 0===t?void 0:t.credential_type)&&"external"===(null===(n=c[e.values.credential_type])||void 0===n?void 0:n.kind)&&r.a.createElement(O.a,{id:"credential-form-test-button","aria-label":a._({id:"Test"}),variant:"secondary",type:"button",onClick:function(){return h(!0)},isDisabled:!e.isValid},a._({id:"Test"})),r.a.createElement(O.a,{id:"credential-form-cancel-button","aria-label":a._({id:"\u53d6\u6d88"}),variant:"secondary",type:"button",onClick:d},a._({id:"\u53d6\u6d88"})))))),_&&r.a.createElement(rd,{credential:l,credentialType:c[e.values.credential_type],credentialFormValues:e.values,onClose:function(){return h(!1)}}))}))}od.proptype={handleSubmit:Nn.func.isRequired,handleCancel:Nn.func.isRequired,credentialTypes:Object(Nn.shape)({}).isRequired,credential:Object(Nn.shape)({}),inputSources:Object(Nn.arrayOf)(Nn.object),submitError:Object(Nn.shape)({})},od.defaultProps={credential:{},inputSources:[],submitError:null};var cd=Object(u.withI18n)()(od),sd=["inputs","organization","passwordPrompts"];function ud(e){var t=e.credential,a=e.me,i=Object(n.useState)(null),l=Object(f.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(!0),v=Object(f.a)(m,2),_=v[0],h=v[1],E=Object(n.useState)(null),y=Object(f.a)(E,2),g=y[0],O=y[1],j=Object(n.useState)({}),k=Object(f.a)(j,2),w=k[0],C=k[1],S=Object(c.g)(),x=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(n,r,i){var l,c,s,u,m,b,v,_,h,E,y,g,O;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=r[n.credential_type].inputs,c=n.inputs,s=n.organization,u=n.passwordPrompts,m=Object(o.a)(n,sd),b={},v={},(l.fields||[]).forEach((function(e){var t=c[e.id];(null===t||void 0===t?void 0:t.credential)&&(null===t||void 0===t?void 0:t.inputs)?v[e.id]=t:u[e.id]?b[e.id]="ASK":b[e.id]=t})),_=function(){return Object.entries(v).map((function(e){var a=Object(f.a)(e,2),n=a[0],r=a[1];return i[n]?r.touched?He.update(i[n].id,{metadata:r.inputs,source_credential:r.credential.id}):null:He.create({input_field_name:n,metadata:r.inputs,source_credential:r.credential.id,target_credential:t.id})}))},h=function(){return Object.values(i).map((function(e){var t,a=e.id,n=e.input_field_name;return(null===(t=c[n])||void 0===t?void 0:t.credential)?null:He.destroy(a)}))},E=Object(d.a)({inputs:b},m),(null===s||void 0===s?void 0:s.id)?E.organization=s.id:(null===a||void 0===a?void 0:a.id)&&(E.user=a.id),e.next=12,Promise.all([We.update(t.id,E)].concat(Object(A.a)(h())));case 12:return y=e.sent,g=Object(f.a)(y,1),O=g[0].data,e.next=17,Promise.all(_());case 17:return e.abrupt("return",O);case 18:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),[a,t.id])),T=x.error,I=x.request,R=x.result;Object(n.useEffect)((function(){R&&S.push("/credentials/".concat(R.id,"/details"))}),[R,S]),Object(n.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(){var a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([Be.read(),We.readInputSources(t.id,{page_size:200})]);case 3:a=e.sent,n=Object(f.a)(a,2),r=n[0].data.results,i=n[1].data.results,O(r.reduce((function(e,t){return e[t.id]=t,e}),{})),C(i.reduce((function(e,t){return e[t.input_field_name]=t,e}),{})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),u(e.t0);case 14:return e.prev=14,h(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}})()()}),[t.id]);var N=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,g,w);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s?r.a.createElement(za,{error:s}):_?r.a.createElement(Nr,null):r.a.createElement(Bc,null,r.a.createElement(cd,{onCancel:function(){var e="/credentials/".concat(t.id,"/details");S.push("".concat(e))},onSubmit:N,credential:t,credentialTypes:g,inputSources:w,submitError:T}))}ud.proptype={inventory:Nn.object.isRequired};var dd=ud;var md=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],u=l[1],d=Object(n.useState)(null),m=Object(f.a)(d,2),v=m[0],_=m[1],h=Object(n.useState)(!0),E=Object(f.a)(h,2),y=E[0],g=E[1],O=Object(c.h)().pathname,j=Object(c.j)({path:"/credentials/:id"}),k=Object(c.i)().id;Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We.readDetail(k);case 3:t=e.sent,n=t.data,a(n),u(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),_(e.t0);case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[k,O,a]);var w=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Credentials"})),link:"/credentials",id:99},{name:t._({id:"Details"}),link:"/credentials/".concat(k,"/details"),id:0},{name:t._({id:"Access"}),link:"/credentials/".concat(k,"/access"),id:1}],C=!0;return(O.endsWith("edit")||O.endsWith("add"))&&(C=!1),!y&&v?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:v},v.response&&404===v.response.status&&r.a.createElement("span",null,t._({id:"Credential not found."})," ",r.a.createElement(s.b,{to:"/credentials"},t._({id:"View all Credentials."})))))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,C&&r.a.createElement(us,{tabsArray:w}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/credentials/:id",to:"/credentials/:id/details",exact:!0}),o&&[r.a.createElement(c.b,{key:"details",path:"/credentials/:id/details"},r.a.createElement(bu,{credential:o})),r.a.createElement(c.b,{key:"edit",path:"/credentials/:id/edit"},r.a.createElement(dd,{credential:o})),r.a.createElement(c.b,{key:"access",path:"/credentials/:id/access"},r.a.createElement(iu,{resource:o,apiModel:We})),r.a.createElement(c.b,{key:"not-found",path:"*"},!y&&r.a.createElement(za,{isNotFound:!0},j.params.id&&r.a.createElement(s.b,{to:"/credentials/".concat(j.params.id,"/details")},t._({id:"View Credential Details"}))))],r.a.createElement(c.b,{key:"not-found",path:"*"},!y&&r.a.createElement(za,{isNotFound:!0},k&&r.a.createElement(s.b,{to:"/credentials/".concat(k,"/details")},t._({id:"View Credential Details"})))))))})),pd=["inputs","organization","passwordPrompts"];var bd=function(e){var t=e.me,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],s=i[1],u=Object(n.useState)(!0),m=Object(f.a)(u,2),v=m[0],_=m[1],h=Object(n.useState)(null),E=Object(f.a)(h,2),y=E[0],g=E[1],O=Object(c.g)(),j=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(a,n){var r,i,l,c,s,u,m,b,v,_;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n[a.credential_type].inputs,i=a.inputs,l=a.organization,c=a.passwordPrompts,s=Object(o.a)(a,pd),u={},m={},(r.fields||[]).forEach((function(e){var t=i[e.id];(null===t||void 0===t?void 0:t.credential)&&(null===t||void 0===t?void 0:t.inputs)?m[e.id]=t:c[e.id]?u[e.id]="ASK":u[e.id]=t})),b=Object(d.a)({inputs:u},s),(null===l||void 0===l?void 0:l.id)?b.organization=l.id:(null===t||void 0===t?void 0:t.id)&&(b.user=t.id),e.next=10,We.create(b);case 10:return v=e.sent,_=v.data.id,e.next=14,Promise.all(Object.entries(m).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return He.create({input_field_name:a,metadata:n.inputs,source_credential:n.credential.id,target_credential:_})})));case 14:return e.abrupt("return",_);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[t])),k=j.error,w=j.request,C=j.result;Object(n.useEffect)((function(){C&&O.push("/credentials/".concat(C,"/details"))}),[C,O]),Object(n.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.read();case 3:t=e.sent,a=t.data.results,g(a.reduce((function(e,t){return e[t.id]=t,e}),{})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s(e.t0);case 11:return e.prev=11,_(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var S=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,y);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(za,{error:l})))):v?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Nr,null)))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(cd,{onCancel:function(){O.push("/credentials")},onSubmit:S,credentialTypes:y,submitError:k}))))},fd=a(1054);function vd(e){var t=e.i18n,a=e.copyItem,i=e.isDisabled,l=e.onCopyStart,o=e.onCopyFinish,c=e.helperText,s=$a(a),u=s.isLoading,d=s.error,m=s.request;Object(n.useEffect)((function(){return u?l():o()}),[u,l,o]);var p=Qa(d),b=p.error,f=p.dismissError;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{content:c.tooltip,position:"top"},r.a.createElement(O.a,{isDisabled:u||i,"aria-label":t._({id:"Copy"}),variant:"plain",onClick:m},r.a.createElement(fd.a,null))),r.a.createElement(Zt,{"aria-label":t._({id:"Copy Error"}),isOpen:b,variant:"error",title:t._({id:"Error!"}),onClose:f},c.errorMessage,r.a.createElement(ua,{error:b})))}vd.defaultProps={isDisabled:!1};var _d,hd=Object(u.withI18n)()(vd),Ed=Object(j.b)(Fo.a)(_d||(_d=Object(v.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 16px;\n  grid-template-columns: repeat(2, 40px);\n"])));var yd=Object(u.withI18n)()((function(e){var t=e.credential,a=e.detailUrl,i=e.isSelected,l=e.onSelect,o=e.i18n,c=e.fetchCredentials,u=Object(n.useState)(!1),d=Object(f.a)(u,2),m=d[0],v=d[1],_="check-action-".concat(t.id),h=t.summary_fields.user_capabilities.edit,E=Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.copy(t.id,{name:"".concat(t.name," @ ").concat(li())});case 2:return e.next=4,c();case 4:case"end":return e.stop()}}),e)}))),[t.id,t.name,c]),y=Object(n.useCallback)((function(){v(!0)}),[]),g=Object(n.useCallback)((function(){v(!1)}),[]);return r.a.createElement(ho.a,{key:t.id,"aria-labelledby":_,id:"".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{isDisabled:m,id:"select-credential-".concat(t.id),checked:i,onChange:l,"aria-labelledby":_}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"".concat(a)},r.a.createElement("b",null,t.name))),r.a.createElement(ko,{key:"type"},t.summary_fields.credential_type.name)]}),r.a.createElement(Ed,{"aria-label":"actions","aria-labelledby":_,id:_},h&&r.a.createElement(Ea.a,{content:o._({id:"\u7f16\u8f91\u51ed\u8bc1"}),position:"top"},r.a.createElement(O.a,{isDisabled:m,"aria-label":o._({id:"\u7f16\u8f91\u51ed\u8bc1"}),variant:"plain",component:s.b,to:"/credentials/".concat(t.id,"/edit")},r.a.createElement(Mo.a,null))),t.summary_fields.user_capabilities.copy&&r.a.createElement(hd,{isDisabled:m,onCopyStart:y,onCopyFinish:g,copyItem:E,helperText:{tooltip:o._({id:"\u590d\u5236\u51ed\u8bc1"}),errorMessage:o._({id:"Failed to copy credential."})}}))))})),gd=R("credential",{page:1,page_size:20,order_by:"name"});var Od=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)([]),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(c.h)(),u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(gd,s.search),e.next=3,Promise.all([We.read(n),We.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0],o=i[1],c=Object.keys((null===(t=o.data.actions)||void 0===t?void 0:t.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable})),(u=c.indexOf("type"))&&(c[u]="credential_type__kind"),e.abrupt("return",{credentials:l.data.results,credentialCount:l.data.count,actions:o.data.actions,relatedSearchableKeys:((null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:c});case 11:case"end":return e.stop()}}),e)}))),[s]),{credentials:[],credentialCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),d=u.result,m=d.credentials,v=d.credentialCount,_=d.actions,h=d.relatedSearchableKeys,E=d.searchableKeys,y=u.error,g=u.isLoading,O=u.request;Object(n.useEffect)((function(){O()}),[O]);var j=l.length>0&&l.length===m.length,k=en(Object(n.useCallback)((function(){return Promise.all(l.map((function(e){var t=e.id;return We.destroy(t)})))}),[l]),{qsConfig:gd,allItemsSelected:j,fetchItems:O}),w=k.isLoading,C=k.deleteItems,S=k.deletionError,x=k.clearDeletionError,T=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:o([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){o(e?Object(A.a)(m):[])},R=function(e){l.some((function(t){return t.id===e.id}))?o(l.filter((function(t){return t.id!==e.id}))):o(l.concat(e))},D=_&&Object.prototype.hasOwnProperty.call(_,"POST");return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:y,hasContentLoading:g||w,items:m,itemCount:v,qsConfig:gd,onRowClick:R,toolbarSearchableKeys:E,toolbarRelatedSearchableKeys:h,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],renderItem:function(e){return r.a.createElement(yd,{key:e.id,credential:e,fetchCredentials:O,detailUrl:"/credentials/".concat(e.id,"/details"),isSelected:l.some((function(t){return t.id===e.id})),onSelect:function(){return R(e)}})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:j,onSelectAll:I,qsConfig:gd,additionalControls:[].concat(Object(A.a)(D?[r.a.createElement(Po,{key:"add",linkTo:"/credentials/add"})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:T,itemsToDelete:l,pluralizedItemName:t._({id:"Credentials"})})])}))}})),r.a.createElement(Zt,{"aria-label":t._({id:"Deletion Error"}),isOpen:S,variant:"error",title:t._({id:"Error!"}),onClose:x},t._({id:"Failed to delete one or more credentials."}),r.a.createElement(ua,{error:S})))}));var jd=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)({"/credentials":t._({id:"Credentials"}),"/credentials/add":t._({id:"Create New Credential"})}),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(n.useCallback)((function(e){var a;e&&o((a={"/credentials":t._({id:"Credentials"}),"/credentials/add":t._({id:"Create New Credential"})},Object(gr.a)(a,"/credentials/".concat(e.id),"".concat(e.name)),Object(gr.a)(a,"/credentials/".concat(e.id,"/edit"),t._({id:"Edit Details"})),Object(gr.a)(a,"/credentials/".concat(e.id,"/details"),t._({id:"Details"})),Object(gr.a)(a,"/credentials/".concat(e.id,"/access"),t._({id:"Access"})),a))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"credential",breadcrumbConfig:l}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/credentials/add"},r.a.createElement(xt,null,(function(e){var t=e.me;return r.a.createElement(bd,{me:t||{}})}))),r.a.createElement(c.b,{path:"/credentials/:id"},r.a.createElement(md,{setBreadcrumb:s})),r.a.createElement(c.b,{path:"/credentials"},r.a.createElement(Od,null))))})),kd=["credentialType","onSubmit","onCancel","submitError"];function wd(e){var t=e.i18n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"credential-type-name",label:t._({id:"\u540d\u79f0"}),name:"name",type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"credential-type-description",label:t._({id:"\u63cf\u8ff0"}),name:"description",type:"text"}),r.a.createElement(Hl,null,r.a.createElement(ro,{tooltip:t._({id:"Enter inputs using either JSON or YAML syntax. Refer to the Ansible Tower documentation for example syntax."}),id:"credential-type-inputs-configuration",name:"inputs",label:t._({id:"Input configuration"})})),r.a.createElement(Hl,null,r.a.createElement(ro,{tooltip:t._({id:"Enter injectors using either JSON or YAML syntax. Refer to the Ansible Tower documentation for example syntax."}),id:"credential-type-injectors-configuration",name:"injectors",label:t._({id:"Injector configuration"})})))}function Cd(e){var t=e.credentialType,a=void 0===t?{}:t,n=e.onSubmit,i=e.onCancel,l=e.submitError,c=Object(o.a)(e,kd),s={name:a.name||"",description:a.description||"",inputs:a.inputs?cl(JSON.stringify(a.inputs)):"---",injectors:a.injectors?cl(JSON.stringify(a.injectors)):"---"};return r.a.createElement(Va.a,{initialValues:s,onSubmit:function(e){return n(e)}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(wd,c),l&&r.a.createElement(Yl,{error:l}),r.a.createElement(cc,{onCancel:i,onSubmit:e.handleSubmit})))}))}Cd.defaultProps={credentialType:{},submitError:null};var Sd=Object(u.withI18n)()(Cd);var xd,Td=function(){var e=Object(c.g)(),t=Object(n.useState)(null),a=Object(f.a)(t,2),i=a[0],l=a[1],o=function(){var t=Object(b.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Be.create(Object(d.a)(Object(d.a)({},a),{},{injectors:dl(a.injectors),inputs:dl(a.inputs),kind:"cloud"}));case 3:n=t.sent,r=n.data,e.push("/credential_types/".concat(r.id,"/details")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),l(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Sd,{onSubmit:o,submitError:i,onCancel:function(){e.push("/credential_types")}}))))},Id=Object(j.b)(Fo.a)(xd||(xd=Object(v.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 16px;\n  grid-template-columns: 40px;\n"])));function Ad(e){var t=e.credentialType,a=e.detailUrl,n=e.isSelected,i=e.onSelect,l=e.i18n,o="check-action-".concat(t.id);return r.a.createElement(ho.a,{key:t.id,"aria-labelledby":o,id:"".concat(t.id," ")},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-credential-types-".concat(t.id),checked:n,onChange:i,"aria-labelledby":o}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name","aria-label":l._({id:"credential type name"})},r.a.createElement(s.b,{to:"".concat(a)},r.a.createElement("b",null,t.name)))]}),r.a.createElement(Id,{"aria-label":"actions","aria-labelledby":o,id:o},t.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:l._({id:"Edit credential type"}),position:"top"},r.a.createElement(O.a,{"aria-label":l._({id:"Edit credential type"}),variant:"plain",component:s.b,to:"/credential_types/".concat(t.id,"/edit")},r.a.createElement(Mo.a,null))))))}Ad.prototype={credentialType:Jn.isRequired,detailUrl:Nn.string.isRequired,isSelected:Nn.bool.isRequired,onSelect:Nn.func.isRequired};var Rd=Object(u.withI18n)()(Ad),Nd=R("credential-type",{page:1,page_size:20,managed_by_tower:!1});var Dd=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(Nd,a.search),e.next=3,Promise.all([Be.read(r),Be.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{credentialTypes:o.data.results,credentialTypesCount:o.data.count,actions:c.data.actions,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{credentialTypes:[],credentialTypesCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),o=l.error,s=l.isLoading,u=l.request,d=l.result,m=d.credentialTypes,v=d.credentialTypesCount,_=d.actions,h=d.relatedSearchableKeys,E=d.searchableKeys;Object(n.useEffect)((function(){u()}),[u]);var y=Uo(m),g=y.selected,O=y.isAllSelected,j=y.handleSelect,k=y.setSelected,w=en(Object(n.useCallback)((function(){return Promise.all(g.map((function(e){var t=e.id;return Be.destroy(t)})))}),[g]),{qsConfig:Nd,allItemsSelected:O,fetchItems:u}),C=w.isLoading,S=w.deletionError,x=w.deleteItems,T=w.clearDeletionError,I=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:k([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=_&&_.POST;return r.a.createElement(r.a.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:o,hasContentLoading:s||C,items:m,itemCount:v,pluralizedItemName:t._({id:"Credential Types"}),qsConfig:Nd,onRowClick:j,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSearchableKeys:E,toolbarRelatedSearchableKeys:h,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:O,onSelectAll:function(e){return k(e?Object(A.a)(m):[])},qsConfig:Nd,additionalControls:[].concat(Object(A.a)(R?[r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:I,itemsToDelete:g,pluralizedItemName:t._({id:"Credential Types"})})])}))},renderItem:function(e){return r.a.createElement(Rd,{key:e.id,value:e.name,credentialType:e,detailUrl:"".concat(i.url,"/").concat(e.id,"/details"),onSelect:function(){return j(e)},isSelected:g.some((function(t){return t.id===e.id}))})},emptyStateControls:R&&r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")})}))),r.a.createElement(Zt,{"aria-label":t._({id:"Deletion error"}),isOpen:S,onClose:T,title:t._({id:"Error"}),variant:"error"},t._({id:"Failed to delete one or more credential types."}),r.a.createElement(ua,{error:S})))}));var Ld=Object(u.withI18n)()((function(e){var t=e.credentialType,a=e.i18n,i=t.id,l=t.name,o=t.description,u=t.injectors,d=t.inputs,m=Object(c.g)(),f=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.destroy(i);case 2:m.push("/credential_types");case 3:case"end":return e.stop()}}),e)}))),[i,m])),v=f.request,_=f.isLoading,h=Qa(f.error),E=h.error,y=h.dismissError;return r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:a._({id:"\u540d\u79f0"}),value:l,dataCy:"credential-type-detail-name"}),r.a.createElement(xi,{label:a._({id:"\u63cf\u8ff0"}),value:o}),r.a.createElement(_l,{label:a._({id:"Input configuration"}),value:cl(JSON.stringify(d)),rows:6}),r.a.createElement(_l,{label:a._({id:"Injector configuration"}),value:cl(JSON.stringify(u)),rows:6}),r.a.createElement(Li,{label:a._({id:"\u5df2\u521b\u5efa"}),date:t.created,user:t.summary_fields.created_by}),r.a.createElement(Li,{label:a._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:t.modified,user:t.summary_fields.modified_by})),r.a.createElement(Yc,null,t.summary_fields.user_capabilities&&t.summary_fields.user_capabilities.edit&&r.a.createElement(O.a,{"aria-label":a._({id:"edit"}),component:s.b,to:"/credential_types/".concat(i,"/edit")},a._({id:"Edit"})),t.summary_fields.user_capabilities&&t.summary_fields.user_capabilities.delete&&r.a.createElement(Qc,{name:l,modalTitle:a._({id:"Delete credential type"}),onConfirm:v,isDisabled:_},a._({id:"\u5220\u9664"}))),E&&r.a.createElement(Zt,{isOpen:E,onClose:y,title:a._({id:"Error"}),variant:"error"}))}));var Pd=function(e){var t=e.credentialType,a=Object(c.g)(),i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u="/credential_types/".concat(t.id,"/details"),m=function(){var e=Object(b.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.update(t.id,Object(d.a)(Object(d.a)({},n),{},{injectors:dl(n.injectors),inputs:dl(n.inputs)}));case 3:a.push(u),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(Sd,{credentialType:t,onSubmit:m,submitError:o,onCancel:function(){a.push(u)}}))};var Ud=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Object(c.i)().id,l=Object(c.h)().pathname,o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.readDetail(i);case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[i])),u=o.isLoading,d=o.error,m=o.request,f=o.result;Object(n.useEffect)((function(){m()}),[m,l]),Object(n.useEffect)((function(){f&&a(f)}),[f,a]);var v,_=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to credential types"})),link:"/credential_types",id:99},{name:t._({id:"Details"}),link:"/credential_types/".concat(i,"/details"),id:0}];if(!u&&d)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:d},404===(null===(v=d.response)||void 0===v?void 0:v.status)&&r.a.createElement("span",null,t._({id:"Credential type not found."})," ",r.a.createElement(s.b,{to:"/credential_types"},t._({id:"View all credential types"}))))));var h=r.a.createElement(us,{tabsArray:_});return l.endsWith("edit")&&(h=null),r.a.createElement(La.a,null,r.a.createElement(na.a,null,h,u&&r.a.createElement(Nr,null),!u&&f&&r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/credential_types/:id",to:"/credential_types/:id/details",exact:!0}),f&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{path:"/credential_types/:id/edit"},r.a.createElement(Pd,{credentialType:f})),r.a.createElement(c.b,{path:"/credential_types/:id/details"},r.a.createElement(Ld,{credentialType:f}))))))}));var Gd=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)({"/credential_types":t._({id:"Credential Types"}),"/credential_types/add":t._({id:"Create new credential type"})}),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(n.useCallback)((function(e){var a;e&&o((a={"/credential_types":t._({id:"Credential Types"}),"/credential_types/add":t._({id:"Create new credential Type"})},Object(gr.a)(a,"/credential_types/".concat(e.id),"".concat(e.name)),Object(gr.a)(a,"/credential_types/".concat(e.id,"/edit"),t._({id:"Edit details"})),Object(gr.a)(a,"/credential_types/".concat(e.id,"/details"),t._({id:"Details"})),a))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"credential_type",breadcrumbConfig:l}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/credential_types/add"},r.a.createElement(Td,null)),r.a.createElement(c.b,{path:"/credential_types/:id"},r.a.createElement(Ud,{setBreadcrumb:s})),r.a.createElement(c.b,{path:"/credential_types"},r.a.createElement(Dd,null))))})),qd=a(1058),Fd=a(1056);function zd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=ll.a.safeLoad(e)||{};return Object(d.a)(Object(d.a)({},a),t)}function Md(e){var t={};return Object.keys(e).forEach((function(a){if(a.startsWith("survey_")&&e[a]!==[]){if(Array.isArray(e[a])&&0===e[a].length)return;t[a.substr(7)]=e[a]}})),t}var Kd=R("inventory",{page:1,page_size:5,order_by:"name"});var Vd,Hd,Bd=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(Va.b)({name:"inventory"}),i=Object(f.a)(a,3),l=i[0],o=i[1],s=i[2],u=Object(c.g)(),d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(Kd,u.location.search),e.next=3,Promise.all([Qe.read(n),Qe.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0].data,o=i[1],e.abrupt("return",{inventories:l.results,count:l.count,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[u.location]),{count:0,inventories:[],relatedSearchableKeys:[],searchableKeys:[]}),m=d.isLoading,v=d.error,_=d.result,h=_.inventories,E=_.count,y=_.relatedSearchableKeys,g=_.searchableKeys,O=d.request;return Object(n.useEffect)((function(){O()}),[O]),m?r.a.createElement(Nr,null):v?r.a.createElement(za,{error:v}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Cc,{value:l.value?[l.value]:[],options:h,optionCount:E,searchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],searchableKeys:g,relatedSearchableKeys:y,header:t._({id:"\u6e05\u5355"}),name:"inventory",qsConfig:Kd,readOnly:!0,selectItem:s.setValue,deselectItem:function(){return l.onChange(null)}}),o.touched&&o.error&&r.a.createElement(Kl.a,{variant:"danger",isInline:!0,title:o.error}))})),Wd=j.b.div(Vd||(Vd=Object(v.a)(["\n  color: var(--pf-global--danger-color--200);\n  font-weight: var(--pf-global--FontWeight--bold);\n"]))),Jd=Object(j.b)(zt.a)(Hd||(Hd=Object(v.a)(["\n  margin-left: 10px;\n"])));var Yd=Object(u.withI18n)()((function(e){var t=e.hasErrors,a=e.children,n=e.i18n,i=e.id;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Wd,{id:i},a,r.a.createElement(Ea.a,{position:"right",content:n._({id:"This step contains errors"}),trigger:"click mouseenter focus"},r.a.createElement(Jd,{css:"color: var(--pf-global--danger-color--100)"})))):r.a.createElement("div",{id:i},a)}));function Xd(e,t,a,n){var r=Object(Va.b)("inventory"),i=Object(f.a)(r,3),l=i[1],o=i[2],c=!(!t||"workflow_job_template"===(null===t||void 0===t?void 0:t.type))&&(Object.keys(n).includes("inventory")&&l.touched&&!l.value);return{step:Zd(e,a,c),initialValues:$d(e,t),isReady:!0,contentError:null,hasError:e.ask_inventory_on_launch&&c,setTouched:function(e){e("inventory",!0,!1)},validate:function(){l.touched&&!l.value&&"job_template"===t.type&&o.setError(a._({id:"An inventory must be selected"}))}}}function Zd(e,t,a){return e.ask_inventory_on_launch?{id:"inventory",name:r.a.createElement(Yd,{hasErrors:a,id:"inventory-step"},t._({id:"\u6e05\u5355"})),component:r.a.createElement(Bd,{i18n:t}),enableNext:!0}:null}function $d(e,t){var a;return e.ask_inventory_on_launch?{inventory:(null===t||void 0===t||null===(a=t.summary_fields)||void 0===a?void 0:a.inventory)||null}:{}}var Qd=R("credential",{page:1,page_size:5,order_by:"name"});var em=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(Va.b)({name:"credentials",validate:Yo(null,t)}),i=Object(f.a)(a,3),l=i[0],o=i[2],s=Object(n.useState)(null),u=Object(f.a)(s,2),m=u[0],v=u[1],_=Object(c.g)(),h=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.loadAllTypes();case 2:return(t=e.sent).length&&(a=t.find((function(e){return"ssh"===e.kind}))||t[0],v(a)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),[]),[]),E=h.result,y=h.error,g=h.isLoading,O=h.request;Object(n.useEffect)((function(){O()}),[O]);var j=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return",{credentials:[],count:0});case 2:return n=N(Qd,_.location.search),e.next=5,Promise.all([We.read(Object(d.a)(Object(d.a)({},n),{},{credential_type:m.id})),We.readOptions()]);case 5:return r=e.sent,i=Object(f.a)(r,2),l=i[0].data,o=i[1],e.abrupt("return",{credentials:l.results,count:l.count,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 10:case"end":return e.stop()}}),e)}))),[m,_.location.search]),{credentials:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),k=j.result,w=k.credentials,C=k.count,S=k.relatedSearchableKeys,x=k.searchableKeys,T=j.error,I=j.isLoading,A=j.request;if(Object(n.useEffect)((function(){A()}),[A]),g)return r.a.createElement(Nr,null);if(y||T)return r.a.createElement(za,{error:y||T});var R="vault"===(null===m||void 0===m?void 0:m.kind);return r.a.createElement(r.a.Fragment,null,E&&E.length>0&&r.a.createElement(tm,null,r.a.createElement(am,null,t._({id:"Selected Category"})),r.a.createElement(nm,{id:"multiCredentialsLookUp-select",label:t._({id:"Selected Category"}),data:E.map((function(e){return{key:e.id,value:e.id,label:e.name,isDisabled:!1}})),value:m&&m.id,onChange:function(e,t){v(E.find((function(e){return e.id===parseInt(t,10)})))}})),!I&&r.a.createElement(Cc,{value:l.value||[],options:w,optionCount:C,searchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],searchableKeys:x,relatedSearchableKeys:S,multiple:R,header:t._({id:"Credentials"}),name:"credentials",qsConfig:Qd,readOnly:!1,selectItem:function(e){var t=l.value.filter((function(t){return R?!function(t){var a,n,r;return void 0!==(null===t||void 0===t||null===(a=t.inputs)||void 0===a?void 0:a.vault_id)&&(null===t||void 0===t||null===(n=t.inputs)||void 0===n?void 0:n.vault_id)===(null===e||void 0===e||null===(r=e.inputs)||void 0===r?void 0:r.vault_id)}(t):!(t.kind===e.kind)}));t.push(e),o.setValue(t)},deselectItem:function(e){o.setValue(l.value.filter((function(t){return t.id!==e.id})))},renderItemChip:function(e){var t=e.item,a=e.removeItem,n=e.canDelete;return r.a.createElement(du,{key:t.id,onClick:function(){return a(t)},isReadOnly:!n,credential:t})}}))})),tm=Object(j.b)(hn.a).withConfig({displayName:"CredentialsStep___StyledToolbarItem",componentId:"sc-793b5t-0"})([" display:flex;align-items:center;"]),am=Object(j.b)("div").withConfig({displayName:"CredentialsStep___StyledDiv",componentId:"sc-793b5t-1"})(["flex:0 0 25%;margin-right:32px"]),nm=Object(j.b)(Fc).withConfig({displayName:"CredentialsStep___StyledAnsibleSelect",componentId:"sc-793b5t-2"})(["flex:1 1 75%;"]);function rm(e,t,a){return{step:im(e,a),initialValues:lm(e,t),isReady:!0,contentError:null,hasError:!1,setTouched:function(e){e("credentials",!0,!1)},validate:function(){}}}function im(e,t){return e.ask_credential_on_launch?{id:"credentials",key:4,name:r.a.createElement(Yd,{hasErrors:!1,id:"credentials-step"},t._({id:"Credentials"})),component:r.a.createElement(em,{i18n:t}),enableNext:!0}:null}function lm(e,t){var a;return e.ask_credential_on_launch?{credentials:(null===t||void 0===t||null===(a=t.summary_fields)||void 0===a?void 0:a.credentials)||[]}:{}}var om=Object(u.withI18n)()((function(e){var t=e.launchConfig,a=e.i18n,n=Object(Va.c)().values.credentials,i=[],l=!1,o=!1,c=!1;return!t.ask_credential_on_launch&&t.passwords_needed_to_start?t.passwords_needed_to_start.forEach((function(e){if("ssh_password"===e)l=!0;else if("become_password"===e)o=!0;else if("ssh_key_unlock"===e)c=!0;else if(e.startsWith("vault_password")){var t=e.split(/\.(.+)/)[1]||"";i.push(t)}})):n&&n.forEach((function(e){if(e.inputs){var a,n,r,s;"ASK"===(null===e||void 0===e||null===(a=e.inputs)||void 0===a?void 0:a.password)&&(l=!0),"ASK"===(null===e||void 0===e||null===(n=e.inputs)||void 0===n?void 0:n.become_password)&&(o=!0),"ASK"===(null===e||void 0===e||null===(r=e.inputs)||void 0===r?void 0:r.ssh_key_unlock)&&(c=!0),"ASK"===(null===e||void 0===e||null===(s=e.inputs)||void 0===s?void 0:s.vault_password)&&i.push(e.inputs.vault_id)}else{var u=t.defaults.credentials.find((function(t){return t.id===e.id}));if((null===u||void 0===u?void 0:u.passwords_needed.length)>0){u.passwords_needed.includes("ssh_password")&&(l=!0),u.passwords_needed.includes("become_password")&&(o=!0),u.passwords_needed.includes("ssh_key_unlock")&&(c=!0);var d=u.passwords_needed.filter((function(e){return e.startsWith("vault_password")})).map((function(e){return e.split(/\.(.+)/)[1]||""}));i.push.apply(i,Object(A.a)(d))}}})),r.a.createElement(Jo.a,null,l&&r.a.createElement(Ml,{id:"launch-ssh-password",label:a._({id:"SSH password"}),name:"credential_passwords.ssh_password",isRequired:!0}),c&&r.a.createElement(Ml,{id:"launch-private-key-passphrase",label:a._({id:"Private key passphrase"}),name:"credential_passwords.ssh_key_unlock",isRequired:!0}),o&&r.a.createElement(Ml,{id:"launch-privilege-escalation-password",label:a._({id:"Privilege escalation password"}),name:"credential_passwords.become_password",isRequired:!0}),i.map((function(e){return r.a.createElement(Ml,{id:"launch-vault-password-".concat(e),key:e,label:""===e?a._({id:"Vault password"}):a._({id:"Vault password | {credId}",values:{credId:e}}),name:"credential_passwords['vault_password".concat(""!==e?".".concat(e):"","']"),isRequired:!0})})))})),cm=function(e){return!e||""===e};function sm(e,t,a,n){var i=Object(Va.c)(),l=i.values,o=i.setFieldError,c=Object.keys(n).includes("credentialPasswords")&&function(e,t){var a=!1;!e.ask_credential_on_launch&&e.passwords_needed_to_start?e.passwords_needed_to_start.forEach((function(e){cm(t.credential_passwords[e])&&(a=!0)})):t.credentials&&t.credentials.forEach((function(n){if(n.inputs){var r,i,l,o;"ASK"===(null===n||void 0===n||null===(r=n.inputs)||void 0===r?void 0:r.password)&&cm(t.credential_passwords.ssh_password)&&(a=!0),"ASK"===(null===n||void 0===n||null===(i=n.inputs)||void 0===i?void 0:i.become_password)&&cm(t.credential_passwords.become_password)&&(a=!0),"ASK"===(null===n||void 0===n||null===(l=n.inputs)||void 0===l?void 0:l.ssh_key_unlock)&&cm(t.credential_passwords.ssh_key_unlock)&&(a=!0),"ASK"===(null===n||void 0===n||null===(o=n.inputs)||void 0===o?void 0:o.vault_password)&&cm(t.credential_passwords["vault_password".concat(""!==n.inputs.vault_id?".".concat(n.inputs.vault_id):"")])&&(a=!0)}else{var c=e.defaults.credentials.find((function(e){return e.id===n.id}));(null===c||void 0===c?void 0:c.passwords_needed.length)>0&&c.passwords_needed.forEach((function(e){cm(t.credential_passwords[e])&&(a=!0)}))}}));return a}(e,l);return{step:a?{id:"credentialPasswords",name:r.a.createElement(Yd,{hasErrors:c,id:"credential-passwords-step"},t._({id:"Credential passwords"})),component:r.a.createElement(om,{launchConfig:e,i18n:t}),enableNext:!0}:null,initialValues:um(e,l.credentials),isReady:!0,contentError:null,hasError:c,setTouched:function(e){Object.keys(l.credential_passwords).forEach((function(t){return e("credential_passwords['".concat(t,"']"),!0,!1)}))},validate:function(){var a=function(e){o(e,t._({id:"This field may not be blank"}))};!e.ask_credential_on_launch&&e.passwords_needed_to_start?e.passwords_needed_to_start.forEach((function(e){cm(l.credential_passwords[e])&&a("credential_passwords['".concat(e,"']"))})):l.credentials&&l.credentials.forEach((function(t){if(t.inputs){var n,r,i,o;"ASK"===(null===t||void 0===t||null===(n=t.inputs)||void 0===n?void 0:n.password)&&cm(l.credential_passwords.ssh_password)&&a("credential_passwords.ssh_password"),"ASK"===(null===t||void 0===t||null===(r=t.inputs)||void 0===r?void 0:r.become_password)&&cm(l.credential_passwords.become_password)&&a("credential_passwords.become_password"),"ASK"===(null===t||void 0===t||null===(i=t.inputs)||void 0===i?void 0:i.ssh_key_unlock)&&cm(l.credential_passwords.ssh_key_unlock)&&a("credential_passwords.ssh_key_unlock"),"ASK"===(null===t||void 0===t||null===(o=t.inputs)||void 0===o?void 0:o.vault_password)&&cm(l.credential_passwords["vault_password".concat(""!==t.inputs.vault_id?".".concat(t.inputs.vault_id):"")])&&a("credential_passwords['vault_password".concat(""!==t.inputs.vault_id?".".concat(t.inputs.vault_id):"","']"))}else{var c=e.defaults.credentials.find((function(e){return e.id===t.id}));(null===c||void 0===c?void 0:c.passwords_needed.length)>0&&c.passwords_needed.forEach((function(e){cm(l.credential_passwords[e])&&a("credential_passwords['".concat(e,"']"))}))}}))}}}function um(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={credential_passwords:{}};return e?!e.ask_credential_on_launch&&e.passwords_needed_to_start?(e.passwords_needed_to_start.forEach((function(e){a.credential_passwords[e]=""})),a):(t.forEach((function(t){if(t.inputs){var n,r,i,l;"ASK"===(null===t||void 0===t||null===(n=t.inputs)||void 0===n?void 0:n.password)&&(a.credential_passwords.ssh_password=""),"ASK"===(null===t||void 0===t||null===(r=t.inputs)||void 0===r?void 0:r.become_password)&&(a.credential_passwords.become_password=""),"ASK"===(null===t||void 0===t||null===(i=t.inputs)||void 0===i?void 0:i.ssh_key_unlock)&&(a.credential_passwords.ssh_key_unlock=""),"ASK"===(null===t||void 0===t||null===(l=t.inputs)||void 0===l?void 0:l.vault_password)&&(t.inputs.vault_id&&""!==t.inputs.vault_id?a.credential_passwords["vault_password.".concat(t.inputs.vault_id)]="":a.credential_passwords.vault_password="")}else{var o=e.defaults.credentials.find((function(e){return e.id===t.id}));(null===o||void 0===o?void 0:o.passwords_needed.length)>0&&o.passwords_needed.forEach((function(e){a.credential_passwords[e]=""}))}})),a):a}var dm=a(1055);var mm,pm=function(e){var t=e.onChange,a=function(e){return e.split(",").filter((function(e){return!!e}))}(e.value),i=Object(n.useState)(a),l=Object(f.a)(i,2),o=l[0],c=l[1],s=Object(n.useState)(!1),u=Object(f.a)(s,2),d=u[0],m=u[1],p=function(e){return e.map((function(e){return r.a.createElement(bn.a,{key:e,value:e},e)}))};return r.a.createElement(dn.a,{variant:mn.e.typeaheadMulti,onToggle:function(e){m(e)},onSelect:function(e,n){var r;r=a.includes(n)?a.filter((function(e){return e!==n})):a.concat(n),t(function(e){return e.join(",")}(r))},onClear:function(){return t("")},onFilter:function(e){var t=e.target.value.toLowerCase(),a=o.filter((function(e){return e.toLowerCase().includes(t)}));return p(a)},isCreatable:!0,onCreateOption:function(e){return e=e.trim(),o.includes(e)||c(o.concat(e)),e},selections:a,isOpen:d,"aria-labelledby":"tag-select"},p(o))};function bm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){e.toString=fm})),e}function fm(){return String(this.id)}var vm=j.b.div(mm||(mm=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding-bottom: var(--pf-c-form__label--PaddingBottom);\n\n  label {\n    --pf-c-form__label--PaddingBottom: 0px;\n  }\n"])));function _m(e){var t=e.i18n,a=Object(Va.b)("job_type"),n=Object(f.a)(a,3),i=n[0],l=n[1],o=n[2],c=[{value:"",key:"",label:t._({id:"Choose a job type"}),isDisabled:!0},{value:"run",key:"run",label:t._({id:"Run"}),isDisabled:!1},{value:"check",key:"check",label:t._({id:"Check"}),isDisabled:!1}],s=!(l.touched&&l.error);return r.a.createElement(Wi.a,{fieldId:"propmt-job-type",label:t._({id:"\u4f5c\u4e1a\u7c7b\u578b"}),labelIcon:r.a.createElement(gi,{content:t._({id:"For job templates, select run to execute the playbook. Select check to only check playbook syntax, test environment setup, and report problems without executing the playbook."})}),isRequired:!0,validated:s?"default":"error"},r.a.createElement(Fc,Object.assign({id:"prompt-job-type",data:c},i,{onChange:function(e,t){return o.setValue(t)}})))}function hm(e){var t=e.i18n,a=Object(Va.b)("verbosity"),n=Object(f.a)(a,3),i=n[0],l=n[1],o=n[2],c=[{value:"0",key:"0",label:t._({id:"0 (Normal)"})},{value:"1",key:"1",label:t._({id:"1 (Verbose)"})},{value:"2",key:"2",label:t._({id:"2 (More Verbose)"})},{value:"3",key:"3",label:t._({id:"3 (Debug)"})},{value:"4",key:"4",label:t._({id:"4 (Connection Debug)"})}],s=!(l.touched&&l.error);return r.a.createElement(Wi.a,{fieldId:"prompt-verbosity",validated:s?"default":"error",label:t._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Control the level of output ansible will produce as the playbook executes."})})},r.a.createElement(Fc,Object.assign({id:"prompt-verbosity",data:c},i,{onChange:function(e,t){return o.setValue(t)}})))}function Em(e){var t=e.i18n,a=Object(Va.b)("diff_mode"),n=Object(f.a)(a,3),i=n[0],l=n[2];return r.a.createElement(Wi.a,{fieldId:"prompt-show-changes"},r.a.createElement(vm,null," ",r.a.createElement("label",{className:"pf-c-form__label",htmlFor:"prompt-show-changes"},r.a.createElement("span",{className:"pf-c-form__label-text"},t._({id:"Show Changes"}),r.a.createElement(gi,{content:t._({id:"If enabled, show the changes made by Ansible tasks, where supported. This is equivalent to Ansible\u2019s --diff mode."})})))),r.a.createElement(dm.a,{"aria-label":i.value?t._({id:"On"}):t._({id:"Off"}),id:"prompt-show-changes",label:t._({id:"On"}),labelOff:t._({id:"Off"}),isChecked:i.value,onChange:l.setValue}))}function ym(e){var t=e.id,a=e.name,n=e.label,i=e.tooltip,l=Object(Va.b)(a),o=Object(f.a)(l,3),c=o[0],s=o[2];return r.a.createElement(Wi.a,{fieldId:t,label:n,labelIcon:r.a.createElement(gi,{content:i})},r.a.createElement(pm,{value:c.value,onChange:s.setValue}))}var gm=Object(u.withI18n)()((function(e){var t=e.launchConfig,a=e.i18n;return r.a.createElement(Jo.a,null,t.ask_job_type_on_launch&&r.a.createElement(_m,{i18n:a}),t.ask_limit_on_launch&&r.a.createElement(Tl,{id:"prompt-limit",name:"limit",label:a._({id:"\u8303\u56f4"}),tooltip:a._({id:"Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns are allowed. Refer to Ansible documentation for more information and examples on patterns."})}),t.ask_scm_branch_on_launch&&r.a.createElement(Tl,{id:"prompt-scm-branch",name:"scm_branch",label:a._({id:"Source Control Branch"}),tooltip:a._({id:"Select a branch for the workflow. This branch is applied to all job template nodes that prompt for a branch"})}),t.ask_verbosity_on_launch&&r.a.createElement(hm,{i18n:a}),t.ask_diff_mode_on_launch&&r.a.createElement(Em,{i18n:a}),t.ask_tags_on_launch&&r.a.createElement(ym,{id:"prompt-job-tags",name:"job_tags",label:a._({id:"Job Tags"}),"aria-label":a._({id:"Job Tags"}),tooltip:a._({id:"Tags are useful when you have a large playbook, and you want to run a specific part of a play or task. Use commas to separate multiple tags. Refer to Ansible Tower documentation for details on the usage of tags."})}),t.ask_skip_tags_on_launch&&r.a.createElement(ym,{id:"prompt-skip-tags",name:"skip_tags",label:a._({id:"Skip Tags"}),"aria-label":a._({id:"Skip Tags"}),tooltip:a._({id:"Skip tags are useful when you have a large playbook, and you want to skip specific parts of a play or task. Use commas to separate multiple tags. Refer to Ansible Tower documentation for details on the usage of tags."})}),t.ask_variables_on_launch&&r.a.createElement(ro,{id:"prompt-variables",name:"extra_vars",label:a._({id:"\u53d8\u91cf"})}))}));function Om(e,t,a){return{step:jm(e,a),initialValues:km(e,t),isReady:!0,contentError:null,hasError:!1,setTouched:function(e){["job_type","limit","verbosity","diff_mode","job_tags","skip_tags","extra_vars"].forEach((function(t){return e(t,!0,!1)}))},validate:function(){}}}function jm(e,t){return function(e){return e.ask_job_type_on_launch||e.ask_limit_on_launch||e.ask_verbosity_on_launch||e.ask_tags_on_launch||e.ask_skip_tags_on_launch||e.ask_variables_on_launch||e.ask_scm_branch_on_launch||e.ask_diff_mode_on_launch}(e)?{id:"other",key:5,name:r.a.createElement(Yd,{hasErrors:!1,id:"other-prompts-step"},t._({id:"Other prompts"})),component:r.a.createElement(gm,{launchConfig:e,i18n:t}),enableNext:!0}:null}function km(e,t){var a={};return e?(e.ask_job_type_on_launch&&(a.job_type=(null===t||void 0===t?void 0:t.job_type)||""),e.ask_limit_on_launch&&(a.limit=(null===t||void 0===t?void 0:t.limit)||""),e.ask_verbosity_on_launch&&(a.verbosity=(null===t||void 0===t?void 0:t.verbosity)||0),e.ask_tags_on_launch&&(a.job_tags=(null===t||void 0===t?void 0:t.job_tags)||""),e.ask_skip_tags_on_launch&&(a.skip_tags=(null===t||void 0===t?void 0:t.skip_tags)||""),e.ask_variables_on_launch&&(a.extra_vars=function(e){return(null===e||void 0===e?void 0:e.extra_data)?cl(JSON.stringify(e.extra_data)):(null===e||void 0===e?void 0:e.extra_vars)&&"---"!==(null===e||void 0===e?void 0:e.extra_vars)?cl(JSON.stringify(dl(e.extra_vars))):"---"}(t)),e.ask_scm_branch_on_launch&&(a.scm_branch=(null===t||void 0===t?void 0:t.scm_branch)||""),e.ask_diff_mode_on_launch&&(a.diff_mode=(null===t||void 0===t?void 0:t.diff_mode)||!1),a):a}function wm(e){var t=e.question,a=e.i18n,n=[t.required?Yo(null,a):null,t.min?Zo(t.min,a):null,t.max?Xo(t.max,a):null];return r.a.createElement(Tl,{id:"survey-question-".concat(t.variable),name:"survey_".concat(t.variable),label:t.question_name,tooltip:t.question_description,isRequired:t.required,validate:rc(n),type:t.type,minLength:t.min,maxLength:t.max})}function Cm(e){var t=e.question,a=e.i18n,n=[t.required?Yo(null,a):null,$o(t.min,t.max,a),"integer"===t.type?tc(a):null];return r.a.createElement(Tl,{id:"survey-question-".concat(t.variable),name:"survey_".concat(t.variable),label:t.question_name,tooltip:t.question_description,isRequired:t.required,validate:rc(n),type:"number",min:t.min,max:t.max})}function Sm(e){var t=e.question,a=Object(Va.b)("survey_".concat(t.variable)),n=Object(f.a)(a,2),i=n[0],l=n[1],o="survey-question-".concat(t.variable),c=!(l.touched&&l.error);return r.a.createElement(Wi.a,{fieldId:o,helperTextInvalid:l.error,isRequired:t.required,validated:c?"default":"error",label:t.question_name,labelIcon:r.a.createElement(gi,{content:t.question_description})},r.a.createElement(Fc,Object.assign({id:o,isValid:c},i,{data:t.choices.split("\n").map((function(e){return{key:e,value:e,label:e}}))})))}function xm(e){var t,a=e.question,i=e.i18n,l=Object(n.useState)(!1),o=Object(f.a)(l,2),c=o[0],s=o[1],u=Object(Va.b)({name:"survey_".concat(a.variable),validate:a.isrequired?Yo(null,i):null}),d=Object(f.a)(u,3),m=d[0],p=d[1],b=d[2],v="survey-question-".concat(a.variable),_=!a.required||(null===(t=p.value)||void 0===t?void 0:t.length)>0,h=!p.touched||!p.error&&_;return r.a.createElement(Wi.a,{fieldId:v,helperTextInvalid:p.error||i._({id:"At least one value must be selected for this field."}),isRequired:a.required,validated:h?"default":"error",label:a.question_name,labelIcon:r.a.createElement(gi,{content:a.question_description})},r.a.createElement(dn.a,{variant:mn.e.typeaheadMulti,id:v,onToggle:s,onSelect:function(e,t){var a;(null===m||void 0===m||null===(a=m.value)||void 0===a?void 0:a.includes(t))?b.setValue(m.value.filter((function(e){return e!==t}))):b.setValue(m.value.concat(t)),b.setTouched(!0)},isOpen:c,selections:m.value,onClear:function(){b.setTouched(!0),b.setValue([])}},a.choices.split("\n").map((function(e){return r.a.createElement(bn.a,{key:e,value:e})}))))}var Tm=Object(u.withI18n)()((function(e){var t=e.surveyConfig,a=e.i18n,n={text:wm,textarea:wm,password:wm,multiplechoice:Sm,multiselect:xm,integer:Cm,float:Cm};return r.a.createElement(Jo.a,null,t.spec.map((function(e){var t=n[e.type];return r.a.createElement(t,{key:e.variable,question:e,i18n:a})})))}));function Im(e,t,a,n,i){var l=Object(Va.c)(),o=l.setFieldError,c=l.values,s=Object.keys(i).includes("survey")&&function(e,t,a){var n=!1;e.survey_enabled&&t.spec&&t.spec.forEach((function(e){var t=a["survey_".concat(e.variable)],r=["text","textarea"].includes(e.type),i=["integer","float"].includes(e.type);r&&(t||0===t)&&(e.min&&t.length<e.min||e.max&&t.length>e.max)&&(n=!0),i&&(t||0===t)&&(t<e.min||t>e.max)&&(n=!0),e.required&&!t&&0!==t&&(n=!0)}));return n}(e,t,c);return{step:e.survey_enabled?{id:"survey",name:r.a.createElement(Yd,{hasErrors:s,id:"survey-step"},n._({id:"Survey"})),component:r.a.createElement(Tm,{surveyConfig:t,i18n:n}),enableNext:!0}:null,initialValues:Am(e,t,a),surveyConfig:t,isReady:!0,contentError:null,hasError:s,setTouched:function(e){(null===t||void 0===t?void 0:t.spec)&&t.spec.forEach((function(t){e("survey_".concat(t.variable),!0,!1)}))},validate:function(){e.survey_enabled&&t.spec&&t.spec.forEach((function(e){var t=function(e,t,a){var n=["text","textarea"].includes(e.type),r=["integer","float"].includes(e.type);if(n&&(t||0===t)){if(e.min&&t.length<e.min)return a._({id:"This field must be at least {0} characters",values:{0:e.min}});if(e.max&&t.length>e.max)return a._({id:"This field must not exceed {0} characters",values:{0:e.max}})}if(r&&(t||0===t)&&(t<e.min||t>e.max))return a._({id:"This field must be a number and have a value between {0} and {1}",values:{0:e.min,1:e.max}});if(e.required&&!t&&0!==t)return a._({id:"This field must not be blank"});return null}(e,c["survey_".concat(e.variable)],n);t&&o("survey_".concat(e.variable),t)}))}}}function Am(e,t,a){if(!e.survey_enabled||!t)return{};var n={};return(null===t||void 0===t?void 0:t.spec)&&t.spec.forEach((function(e){"multiselect"===e.type?n["survey_".concat(e.variable)]=e.default?e.default.split("\n"):[]:"multiplechoice"===e.type?n["survey_".concat(e.variable)]=e.default||e.choices.split("\n")[0]:n["survey_".concat(e.variable)]=e.default||"",(null===a||void 0===a?void 0:a.extra_data)&&Object.entries(a.extra_data).forEach((function(t){var a=Object(f.a)(t,2),r=a[0],i=a[1];r===e.variable&&(e.type,n["survey_".concat(e.variable)]=i)}))})),n}var Rm=a(151);var Nm=Object(u.withI18n)()((function(e){var t,a=e.i18n,n=e.resource,i=n.allow_override,l=n.custom_virtualenv,o=n.local_path,c=n.scm_branch,u=n.scm_clean,d=n.scm_delete_on_update,m=n.scm_refspec,p=n.scm_type,b=n.scm_update_on_launch,f=n.scm_update_cache_timeout,v=n.scm_url,_=n.summary_fields,h="";return(u||d||b||i)&&(h=r.a.createElement(lu.a,null,u&&r.a.createElement(ou.a,null,a._({id:"Clean"})),d&&r.a.createElement(ou.a,null,a._({id:"Delete on Update"})),b&&r.a.createElement(ou.a,null,a._({id:"Update Revision on Launch"})),i&&r.a.createElement(ou.a,null,a._({id:"Allow Branch Override"})))),r.a.createElement(r.a.Fragment,null,(null===_||void 0===_?void 0:_.organization)?r.a.createElement(xi,{label:a._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(_.organization.id,"/details")},null===_||void 0===_?void 0:_.organization.name)}):r.a.createElement(Ai,{label:a._({id:"\u7ec4\u7ec7"})}),r.a.createElement(xi,{label:a._({id:"Source Control Type"}),value:""===p?a._({id:"Manual"}):as(p)}),r.a.createElement(xi,{label:a._({id:"Source Control URL"}),value:v}),r.a.createElement(xi,{label:a._({id:"Source Control Branch"}),value:c}),r.a.createElement(xi,{label:a._({id:"Source Control Refspec"}),value:m}),(null===_||void 0===_||null===(t=_.credential)||void 0===t?void 0:t.id)&&r.a.createElement(xi,{label:a._({id:"Source Control Credential"}),value:r.a.createElement(du,{key:n.summary_fields.credential.id,credential:n.summary_fields.credential,isReadOnly:!0})}),h&&r.a.createElement(xi,{label:a._({id:"Options"}),value:h}),r.a.createElement(xi,{label:a._({id:"Cache Timeout"}),value:"".concat(f," ").concat(a._({id:"Seconds"}))}),r.a.createElement(xi,{label:a._({id:"Ansible Environment"}),value:l}),r.a.createElement(xt,null,(function(e){var t=e.project_base_dir;return r.a.createElement(xi,{label:a._({id:"Project Base Path"}),value:t})})),r.a.createElement(xi,{label:a._({id:"Playbook Directory"}),value:o}))}));var Dm,Lm,Pm,Um,Gm,qm,Fm,zm,Mm,Km,Vm,Hm,Bm,Wm,Jm,Ym,Xm,Zm=Object(u.withI18n)()((function(e){var t,a,n,i,l,o=e.i18n,c=e.resource,u=c.custom_virtualenv,d=c.group_by,m=c.instance_filters,p=c.overwrite,b=c.overwrite_vars,f=c.source,v=c.source_regions,_=c.source_vars,h=c.source_path,E=c.summary_fields,y=c.update_cache_timeout,g=c.update_on_launch,O=c.update_on_project_update,j=c.verbosity,k={0:o._({id:"0 (Normal)"}),1:o._({id:"1 (Verbose)"}),2:o._({id:"2 (More Verbose)"}),3:o._({id:"3 (Debug)"}),4:o._({id:"4 (Connection Debug)"})},w="";return(p||b||g||O)&&(w=r.a.createElement(lu.a,null,p&&r.a.createElement(ou.a,null,o._({id:"Overwrite"})),b&&r.a.createElement(ou.a,null,o._({id:"Overwrite Variables"})),g&&r.a.createElement(ou.a,null,o._({id:"Update on Launch"})),O&&r.a.createElement(ou.a,null,o._({id:"Update on Project Update"})))),r.a.createElement(r.a.Fragment,null,(null===E||void 0===E?void 0:E.organization)?r.a.createElement(xi,{label:o._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(E.organization.id,"/details")},null===E||void 0===E?void 0:E.organization.name)}):r.a.createElement(Ai,{label:o._({id:"\u7ec4\u7ec7"})}),(null===E||void 0===E?void 0:E.inventory)&&r.a.createElement(xi,{label:o._({id:"\u6e05\u5355"}),value:r.a.createElement(s.b,{to:"/inventories/".concat(null===(t=E.inventory)||void 0===t?void 0:t.id,"/details")},null===E||void 0===E||null===(a=E.inventory)||void 0===a?void 0:a.name)}),r.a.createElement(xi,{label:o._({id:"Source"}),value:f}),r.a.createElement(xi,{label:o._({id:"Ansible Environment"}),value:u}),(null===E||void 0===E?void 0:E.source_project)&&r.a.createElement(xi,{label:o._({id:"\u9879\u76ee"}),value:r.a.createElement(s.b,{to:"/projects/".concat(null===(n=E.source_project)||void 0===n?void 0:n.id,"/details")},null===(i=E.source_project)||void 0===i?void 0:i.name)}),r.a.createElement(xi,{label:o._({id:"Inventory File"}),value:h}),r.a.createElement(xi,{label:o._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),value:k[j]}),r.a.createElement(xi,{label:o._({id:"Cache Timeout"}),value:"".concat(y," ").concat(o._({id:"Seconds"}))}),(null===E||void 0===E||null===(l=E.credentials)||void 0===l?void 0:l.length)>0&&r.a.createElement(xi,{fullWidth:!0,label:o._({id:"Credential"}),value:E.credentials.map((function(e){return r.a.createElement(du,{key:null===e||void 0===e?void 0:e.id,credential:e,isReadOnly:!0})}))}),v&&r.a.createElement(xi,{fullWidth:!0,label:o._({id:"Regions"}),value:r.a.createElement(fc,{numChips:5,totalChips:v.split(",").length},v.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),m&&r.a.createElement(xi,{fullWidth:!0,label:o._({id:"Instance Filters"}),value:r.a.createElement(fc,{numChips:5,totalChips:m.split(",").length},m.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),d&&r.a.createElement(xi,{fullWidth:!0,label:o._({id:"Only Group By"}),value:r.a.createElement(fc,{numChips:5,totalChips:d.split(",").length},d.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),w&&r.a.createElement(xi,{label:o._({id:"Options"}),value:w}),_&&r.a.createElement(_l,{label:o._({id:"Source Variables"}),rows:4,value:_}))})),$m=["status"],Qm=Object(j.c)(Dm||(Dm=Object(v.a)(["\n  from {\n    -webkit-transform:scale(1);\n  }\n  to {\n    -webkit-transform:scale(0);\n  }\n"]))),ep=j.b.div(Lm||(Lm=Object(v.a)(["\n  align-items: center;\n  display: flex;\n  flex-flow: column nowrap;\n  height: 14px;\n  margin: 5px 0;\n  width: 14px;\n"]))),tp=j.b.div(Pm||(Pm=Object(v.a)(["\n  border: 1px solid #b7b7b7;\n  border-bottom: 0;\n  background: #ffffff;\n"]))),ap=j.b.div(Um||(Um=Object(v.a)(["\n  border: 1px solid #b7b7b7;\n  border-top: 0;\n  background: #ffffff;\n"]))),np=Object(j.b)(ep)(Gm||(Gm=Object(v.a)(["\n  background-color: #5cb85c;\n  padding-right: 0px;\n  text-shadow: -1px -1px 0 #ffffff, 1px -1px 0 #ffffff, -1px 1px 0 #ffffff,\n    1px 1px 0 #ffffff;\n  animation: "," 1.5s linear infinite alternate;\n"])),Qm),rp=Object(j.b)(ep)(qm||(qm=Object(v.a)(["\n  border: 1px solid #d7d7d7;\n"]))),ip=Object(j.b)(ep)(Fm||(Fm=Object(v.a)(["\n  flex: 0 1 auto;\n  > * {\n    width: 14px;\n    height: 7px;\n  }\n"]))),lp=j.b.div(zm||(zm=Object(v.a)(["\n  background-color: #5cb85c;\n"]))),op=Object(j.b)(ap)(Mm||(Mm=Object(v.a)([""]))),cp=Object(j.b)(tp)(Km||(Km=Object(v.a)([""]))),sp=j.b.div(Vm||(Vm=Object(v.a)(["\n  background-color: #d9534f;\n"]))),up=Object(j.b)(tp)(Hm||(Hm=Object(v.a)([""]))),dp=j.b.div(Bm||(Bm=Object(v.a)(["\n  background-color: #ff0000;\n"]))),mp=Object(j.b)(tp)(Wm||(Wm=Object(v.a)([""]))),pp=j.b.div(Jm||(Jm=Object(v.a)(["\n  background-color: #ff9900;\n"]))),bp=Object(j.b)(tp)(Ym||(Ym=Object(v.a)([""]))),fp=j.b.div(Xm||(Xm=Object(v.a)(["\n  background-color: #2dbaba;\n"])));np.displayName="RunningJob",rp.displayName="WaitingJob",ip.displayName="FinishedJob",lp.displayName="SuccessfulTop",op.displayName="SuccessfulBottom",cp.displayName="FailedTop",sp.displayName="FailedBottom",up.displayName="UnreachableTop",dp.displayName="UnreachableBottom",mp.displayName="ChangedTop",pp.displayName="ChangedBottom",bp.displayName="SkippedTop",fp.displayName="SkippedBottom";var vp,_p,hp=function(e){var t=e.status,a=Object(o.a)(e,$m);return r.a.createElement("div",Object.assign({},a,{"data-job-status":t,"aria-label":t}),"running"===t&&r.a.createElement(np,{"aria-hidden":"true"}),("new"===t||"pending"===t||"waiting"===t||"never updated"===t)&&r.a.createElement(rp,{"aria-hidden":"true"}),("failed"===t||"error"===t||"canceled"===t)&&r.a.createElement(ip,{"aria-hidden":"true"},r.a.createElement(cp,null),r.a.createElement(sp,null)),("successful"===t||"ok"===t)&&r.a.createElement(ip,{"aria-hidden":"true"},r.a.createElement(lp,null),r.a.createElement(op,null)),"changed"===t&&r.a.createElement(ip,{"aria-hidden":"true"},r.a.createElement(mp,null),r.a.createElement(pp,null)),"skipped"===t&&r.a.createElement(ip,{"aria-hidden":"true"},r.a.createElement(bp,null),r.a.createElement(fp,null)),"unreachable"===t&&r.a.createElement(ip,{"aria-hidden":"true"},r.a.createElement(up,null),r.a.createElement(dp,null)),r.a.createElement("span",{className:"pf-screen-reader"}," ",t," "))},Ep=Object(j.b)((function(e){return r.a.createElement(s.b,e)}))(vp||(vp=Object(v.a)(["\n  margin-right: 5px;\n"]))),yp=j.b.div(_p||(_p=Object(v.a)(["\n  display: inline-flex;\n  flex-wrap: wrap;\n"]))),gp=function(e){var t=e.i18n,a=e.jobs,i=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,t._({id:"JOB ID:"})," ",e.id),r.a.createElement("div",null,t._({id:"STATUS:"})," ",e.status.toUpperCase()),e.finished&&r.a.createElement("div",null,t._({id:"FINISHED:"})," ",ni(e.finished)))},l=a.map((function(e){return r.a.createElement(Ea.a,{position:"top",content:i(e),key:e.id},r.a.createElement(Ep,{"aria-label":t._({id:"View job {0}",values:{0:e.id}}),to:"/jobs/".concat(I[e.type],"/").concat(e.id)},r.a.createElement(hp,{status:e.status})))}));return r.a.createElement(yp,null,l)};gp.defaultProps={jobs:[]};var Op=Object(u.withI18n)()(gp);var jp=Object(u.withI18n)()((function(e){var t,a,n,i,l,o,c,u,m,p,b,f=e.i18n,v=e.resource,_=v.allow_simultaneous,h=v.ask_inventory_on_launch,E=v.become_enabled,y=v.diff_mode,g=v.extra_vars,O=v.forks,j=v.host_config_key,k=v.instance_groups,w=v.job_slice_count,C=v.job_tags,S=v.job_type,x=v.limit,T=v.playbook,I=v.related,A=v.scm_branch,R=v.skip_tags,N=v.summary_fields,D=v.use_fact_cache,L=v.verbosity,P=v.webhook_key,U=v.webhook_service,G={0:f._({id:"0 (Normal)"}),1:f._({id:"1 (Verbose)"}),2:f._({id:"2 (More Verbose)"}),3:f._({id:"3 (Debug)"}),4:f._({id:"4 (Connection Debug)"})},q="";(E||j||_||D)&&(q=r.a.createElement(lu.a,null,E&&r.a.createElement(ou.a,null,f._({id:"Enable Privilege Escalation"})),j&&r.a.createElement(ou.a,null,f._({id:"Allow Provisioning Callbacks"})),_&&r.a.createElement(ou.a,null,f._({id:"Enable Concurrent Jobs"})),D&&r.a.createElement(ou.a,null,f._({id:"Use Fact Storage"}))));var F="smart"===(null===N||void 0===N||null===(t=N.inventory)||void 0===t?void 0:t.kind)?"smart_inventory":"inventory",z=null===N||void 0===N||null===(a=N.recent_jobs)||void 0===a?void 0:a.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"job"})}));return r.a.createElement(r.a.Fragment,null,(null===(n=N.recent_jobs)||void 0===n?void 0:n.length)>0&&r.a.createElement(xi,{value:r.a.createElement(Op,{jobs:z}),label:f._({id:"Activity"})}),r.a.createElement(xi,{label:f._({id:"\u4f5c\u4e1a\u7c7b\u578b"}),value:as(S)}),(null===N||void 0===N?void 0:N.organization)?r.a.createElement(xi,{label:f._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(N.organization.id,"/details")},null===N||void 0===N?void 0:N.organization.name)}):r.a.createElement(Ai,{label:f._({id:"\u7ec4\u7ec7"})}),(null===N||void 0===N?void 0:N.inventory)?r.a.createElement(xi,{label:f._({id:"\u6e05\u5355"}),value:r.a.createElement(s.b,{to:"/".concat(F,"/").concat(null===(i=N.inventory)||void 0===i?void 0:i.id,"/details")},null===(l=N.inventory)||void 0===l?void 0:l.name)}):!h&&r.a.createElement(Ai,{label:f._({id:"\u6e05\u5355"})}),(null===N||void 0===N?void 0:N.project)?r.a.createElement(xi,{label:f._({id:"\u9879\u76ee"}),value:r.a.createElement(s.b,{to:"/projects/".concat(null===(o=N.project)||void 0===o?void 0:o.id,"/details")},null===(c=N.project)||void 0===c?void 0:c.name)}):r.a.createElement(Ai,{label:f._({id:"\u9879\u76ee"})}),r.a.createElement(xi,{label:f._({id:"Source Control Branch"}),value:A}),r.a.createElement(xi,{label:f._({id:"\u5267\u672c"}),value:T}),r.a.createElement(xi,{label:f._({id:"Forks"}),value:O||"0"}),r.a.createElement(xi,{label:f._({id:"\u8303\u56f4"}),value:x}),r.a.createElement(xi,{label:f._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),value:G[L]}),"boolean"===typeof y&&r.a.createElement(xi,{label:f._({id:"Show Changes"}),value:y?f._({id:"On"}):f._({id:"Off"})}),r.a.createElement(xi,{label:f._({id:"Job Slicing"}),value:w}),r.a.createElement(xi,{label:f._({id:"Host Config Key"}),value:j}),(null===I||void 0===I?void 0:I.callback)&&r.a.createElement(xi,{label:f._({id:"Provisioning Callback URL"}),value:"".concat(window.location.origin).concat(I.callback)}),r.a.createElement(xi,{label:f._({id:"Webhook Service"}),value:as(U)}),(null===I||void 0===I?void 0:I.webhook_receiver)&&r.a.createElement(xi,{label:f._({id:"Webhook URL"}),value:"".concat(window.location.origin).concat(I.webhook_receiver)}),r.a.createElement(xi,{label:f._({id:"Webhook Key"}),value:P}),(null===N||void 0===N?void 0:N.webhook_credential)&&r.a.createElement(xi,{fullWidth:!0,label:f._({id:"Webhook Credential"}),value:r.a.createElement(du,{key:null===(u=N.webhook_credential)||void 0===u?void 0:u.id,credential:N.webhook_credential,isReadOnly:!0})}),q&&r.a.createElement(xi,{label:f._({id:"Options"}),value:q}),(null===N||void 0===N||null===(m=N.credentials)||void 0===m?void 0:m.length)>0&&r.a.createElement(xi,{fullWidth:!0,label:f._({id:"Credentials"}),value:r.a.createElement(fc,{numChips:5,totalChips:N.credentials.length},N.credentials.map((function(e){return r.a.createElement(du,{key:e.id,credential:e,isReadOnly:!0})})))}),(null===N||void 0===N||null===(p=N.labels)||void 0===p||null===(b=p.results)||void 0===b?void 0:b.length)>0&&r.a.createElement(xi,{fullWidth:!0,label:f._({id:"Labels"}),value:r.a.createElement(fc,{numChips:5,totalChips:N.labels.results.length},N.labels.results.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),(null===k||void 0===k?void 0:k.length)>0&&r.a.createElement(xi,{fullWidth:!0,label:f._({id:"Instance Groups"}),value:r.a.createElement(fc,{numChips:5,totalChips:k.length},k.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),(null===C||void 0===C?void 0:C.length)>0&&r.a.createElement(xi,{fullWidth:!0,label:f._({id:"Job Tags"}),value:r.a.createElement(fc,{numChips:5,totalChips:C.split(",").length},C.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),(null===R||void 0===R?void 0:R.length)>0&&r.a.createElement(xi,{fullWidth:!0,label:f._({id:"Skip Tags"}),value:r.a.createElement(fc,{numChips:5,totalChips:R.split(",").length},R.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),g&&r.a.createElement(_l,{label:f._({id:"\u53d8\u91cf"}),rows:4,value:g}))}));var kp=Object(u.withI18n)()((function(e){var t,a,n,i,l,o,c,u,m=e.i18n,p=e.resource,b=p.allow_simultaneous,f=p.extra_vars,v=p.limit,_=p.related,h=p.scm_branch,E=p.summary_fields,y=p.webhook_key,g=p.webhook_service,O="";(b||g)&&(O=r.a.createElement(lu.a,null,b&&r.a.createElement(ou.a,null,m._({id:"Enable Concurrent Jobs"})),g&&r.a.createElement(ou.a,null,m._({id:"Enable Webhooks"}))));var j="smart"===(null===E||void 0===E||null===(t=E.inventory)||void 0===t?void 0:t.kind)?"smart_inventory":"inventory",k=null===E||void 0===E||null===(a=E.recent_jobs)||void 0===a?void 0:a.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"job"})}));return r.a.createElement(r.a.Fragment,null,(null===E||void 0===E||null===(n=E.recent_jobs)||void 0===n?void 0:n.length)>0&&r.a.createElement(xi,{value:r.a.createElement(Op,{jobs:k}),label:m._({id:"Activity"})}),(null===E||void 0===E?void 0:E.organization)&&r.a.createElement(xi,{label:m._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(E.organization.id,"/details")},null===E||void 0===E?void 0:E.organization.name)}),(null===E||void 0===E?void 0:E.inventory)&&r.a.createElement(xi,{label:m._({id:"\u6e05\u5355"}),value:r.a.createElement(s.b,{to:"/".concat(j,"/").concat(null===(i=E.inventory)||void 0===i?void 0:i.id,"/details")},null===(l=E.inventory)||void 0===l?void 0:l.name)}),r.a.createElement(xi,{label:m._({id:"Source Control Branch"}),value:h}),r.a.createElement(xi,{label:m._({id:"\u8303\u56f4"}),value:v}),r.a.createElement(xi,{label:m._({id:"Webhook Service"}),value:as(g)}),r.a.createElement(xi,{label:m._({id:"Webhook Key"}),value:y}),(null===_||void 0===_?void 0:_.webhook_receiver)&&r.a.createElement(xi,{label:m._({id:"Webhook URL"}),value:"".concat(window.location.origin).concat(_.webhook_receiver)}),O&&r.a.createElement(xi,{label:m._({id:"Options"}),value:O}),(null===E||void 0===E?void 0:E.webhook_credential)&&r.a.createElement(xi,{fullWidth:!0,label:m._({id:"Webhook Credential"}),value:r.a.createElement(du,{key:null===(o=E.webhook_credential)||void 0===o?void 0:o.id,credential:E.webhook_credential,isReadOnly:!0})}),(null===E||void 0===E||null===(c=E.labels)||void 0===c||null===(u=c.results)||void 0===u?void 0:u.length)>0&&r.a.createElement(xi,{fullWidth:!0,label:m._({id:"Labels"}),value:r.a.createElement(fc,{numChips:5,totalChips:E.labels.results.length},E.labels.results.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),f&&r.a.createElement(_l,{label:m._({id:"\u53d8\u91cf"}),rows:4,value:f}))})),wp=j.b.h2.withConfig({displayName:"PromptDetail__PromptHeader",componentId:"sc-14gnqym-0"})(["font-weight:bold;margin:var(--pf-global--spacer--lg) 0;"]);function Cp(e){if("undefined"===typeof e||null===e)return null;var t=Math.floor(e/60),a=e-60*Math.floor(e/60);return r.a.createElement(u.Trans,{id:"{minutes} min {seconds} sec",values:{minutes:t,seconds:a}})}function Sp(e){var t={job_template:"/templates/job_template/".concat(e.id,"/details"),project:"/projects/".concat(e.id,"/details"),inventory_source:"/inventories/inventory/".concat(e.inventory,"/sources/").concat(e.id,"/details"),workflow_job_template:"/templates/workflow_job_template/".concat(e.id,"/details")};return t[null===e||void 0===e?void 0:e.type]?r.a.createElement(s.b,{to:t[e.type]},e.name):e.name}function xp(e){var t,a,n,i=e.i18n,l=e.resource,o=e.launchConfig,c=void 0===o?{}:o,s=e.overrides,u=void 0===s?{}:s,m={0:i._({id:"0 (Normal)"}),1:i._({id:"1 (Verbose)"}),2:i._({id:"2 (More Verbose)"}),3:i._({id:"3 (Debug)"}),4:i._({id:"4 (Connection Debug)"})},p=function(e,t,a){var n=Object(d.a)(Object(d.a)({},e),{},{summary_fields:Object(d.a)({},e.summary_fields)},a);return Object.keys(t).forEach((function(e){delete n[e],null===n||void 0===n||delete n.summary_fields[e]})),n}(l,u,c.defaults);p.type=(null===u||void 0===u?void 0:u.nodeType)||p.type;var b,f=Object.keys(u).length>0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:i._({id:"\u540d\u79f0"}),value:Sp(l)}),r.a.createElement(xi,{label:i._({id:"\u63cf\u8ff0"}),value:p.description}),r.a.createElement(xi,{label:i._({id:"\u7c7b\u578b"}),value:as(p.unified_job_type||p.type)}),r.a.createElement(xi,{label:i._({id:"Timeout"}),value:Cp(null===p||void 0===p?void 0:p.timeout)}),"project"===(null===p||void 0===p?void 0:p.type)&&r.a.createElement(Nm,{resource:p}),"inventory_source"===(null===p||void 0===p?void 0:p.type)&&r.a.createElement(Zm,{resource:p}),"job_template"===(null===p||void 0===p?void 0:p.type)&&r.a.createElement(jp,{resource:p}),"workflow_job_template"===(null===p||void 0===p?void 0:p.type)&&r.a.createElement(kp,{resource:p}),(null===p||void 0===p?void 0:p.created)&&r.a.createElement(Li,{label:i._({id:"\u5df2\u521b\u5efa"}),date:p.created,user:null===p||void 0===p||null===(t=p.summary_fields)||void 0===t?void 0:t.created_by}),(null===p||void 0===p?void 0:p.modified)&&r.a.createElement(Li,{label:i._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:null===p||void 0===p?void 0:p.modified,user:null===p||void 0===p||null===(a=p.summary_fields)||void 0===a?void 0:a.modified_by})),((b=c).survey_enabled||b.ask_credential_on_launch||b.ask_diff_mode_on_launch||b.ask_inventory_on_launch||b.ask_job_type_on_launch||b.ask_limit_on_launch||b.ask_scm_branch_on_launch||b.ask_skip_tags_on_launch||b.ask_tags_on_launch||b.ask_variables_on_launch||b.ask_verbosity_on_launch)&&f&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Rp,null),r.a.createElement(wp,null,i._({id:"Prompted Values"})),r.a.createElement(pi,{"aria-label":"Prompt Overrides"},c.ask_job_type_on_launch&&r.a.createElement(xi,{label:i._({id:"\u4f5c\u4e1a\u7c7b\u578b"}),value:as(u.job_type)}),c.ask_credential_on_launch&&r.a.createElement(xi,{fullWidth:!0,label:i._({id:"Credentials"}),rows:4,value:r.a.createElement(fc,{numChips:5,totalChips:u.credentials.length},u.credentials.map((function(e){return r.a.createElement(du,{key:e.id,credential:e,isReadOnly:!0})})))}),c.ask_inventory_on_launch&&r.a.createElement(xi,{label:i._({id:"\u6e05\u5355"}),value:null===(n=u.inventory)||void 0===n?void 0:n.name}),c.ask_scm_branch_on_launch&&r.a.createElement(xi,{label:i._({id:"Source Control Branch"}),value:u.scm_branch}),c.ask_limit_on_launch&&r.a.createElement(xi,{label:i._({id:"\u8303\u56f4"}),value:u.limit}),Object.prototype.hasOwnProperty.call(u,"verbosity")&&c.ask_verbosity_on_launch?r.a.createElement(xi,{label:i._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),value:m[u.verbosity]}):null,c.ask_tags_on_launch&&r.a.createElement(xi,{fullWidth:!0,label:i._({id:"Job Tags"}),value:r.a.createElement(fc,{numChips:5,totalChips:u.job_tags&&""!==u.job_tags?u.job_tags.split(",").length:0},u.job_tags.length>0&&u.job_tags.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),c.ask_skip_tags_on_launch&&r.a.createElement(xi,{fullWidth:!0,label:i._({id:"Skip Tags"}),value:r.a.createElement(fc,{numChips:5,totalChips:u.skip_tags&&""!==u.skip_tags?u.skip_tags.split(",").length:0},u.skip_tags.length>0&&u.skip_tags.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),c.ask_diff_mode_on_launch&&r.a.createElement(xi,{label:i._({id:"Show Changes"}),value:!0===u.diff_mode?i._({id:"On"}):i._({id:"Off"})}),(c.survey_enabled||c.ask_variables_on_launch)&&r.a.createElement(_l,{label:i._({id:"\u53d8\u91cf"}),rows:4,value:u.extra_vars}))))}xp.defaultProps={launchConfig:{defaults:{}}};var Tp,Ip,Ap=Object(u.withI18n)()(xp),Rp=Object(j.b)(Rm.a).withConfig({displayName:"PromptDetail___StyledDivider",componentId:"sc-14gnqym-1"})(["margin-top:var(--pf-global--spacer--lg)"]),Np=Object(j.b)(zt.a)(Tp||(Tp=Object(v.a)(["\n  margin-left: 10px;\n  margin-top: -2px;\n"]))),Dp=j.b.div(Ip||(Ip=Object(v.a)(["\n  align-items: center;\n  color: var(--pf-global--danger-color--200);\n  display: flex;\n  font-weight: var(--pf-global--FontWeight--bold);\n  margin-bottom: 10px;\n"])));var Lp=Object(u.withI18n)()((function(e){var t=e.resource,a=e.launchConfig,i=e.surveyConfig,l=e.formErrors,o=e.i18n,c=Object(Va.c)().values,s=Md(c),u=Object(d.a)({},c);if(a.ask_variables_on_launch||a.survey_enabled){var m=a.ask_variables_on_launch&&(u.extra_vars||"---");if(null===i||void 0===i?void 0:i.spec){var p=function(e,t){var a=Object(d.a)({},e);return t.forEach((function(e){"undefined"!==typeof a[e]&&(a[e]="\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7")})),a}(s,i.spec.filter((function(e){return"password"===e.type})).map((function(e){return e.variable})));u.extra_vars=ll.a.safeDump(zd(m,p))}else u.extra_vars=ll.a.safeDump(zd(m,{}))}return r.a.createElement(n.Fragment,null,l&&r.a.createElement(Dp,null,o._({id:"Some of the previous step(s) have errors"}),r.a.createElement(Ea.a,{position:"right",content:o._({id:"See errors on the left"}),trigger:"click mouseenter focus"},r.a.createElement(Np,null))),r.a.createElement(Ap,{resource:t,launchConfig:a,overrides:u}))}));function Pp(e,t,a,n,i,l){return{step:l?{id:"preview",name:r.a.createElement(Yd,{hasErrors:!1,id:"preview-step"},t._({id:"Preview"})),component:r.a.createElement(Lp,{launchConfig:e,resource:a,surveyConfig:n,formErrors:i}),enableNext:!i,nextButtonText:t._({id:"\u8fd0\u884c"})}:null,initialValues:{},isReady:!0,error:null,setTouched:function(){},validate:function(){}}}function Up(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!(null===t||void 0===t?void 0:t.ask_credential_on_launch)&&(null===t||void 0===t?void 0:t.passwords_needed_to_start))return t.passwords_needed_to_start.length>0;var a=!1;return e.forEach((function(e){var n,r,i,l;if(e.inputs)"ASK"!==(null===e||void 0===e||null===(n=e.inputs)||void 0===n?void 0:n.password)&&"ASK"!==(null===e||void 0===e||null===(r=e.inputs)||void 0===r?void 0:r.become_password)&&"ASK"!==(null===e||void 0===e||null===(i=e.inputs)||void 0===i?void 0:i.ssh_key_unlock)&&"ASK"!==(null===e||void 0===e||null===(l=e.inputs)||void 0===l?void 0:l.vault_password)||(a=!0);else{var o=t.defaults.credentials.find((function(t){return t.id===e.id}));(null===o||void 0===o?void 0:o.passwords_needed.length)>0&&(a=!0)}})),a}function Gp(e){var t=e.launchConfig,a=e.i18n,i=e.onCancel,l=e.onSubmit,o=e.resource,c=e.surveyConfig,s=Object(Va.c)(),u=s.setFieldTouched,m=s.values,v=function(e,t,a,r){var i=Object(n.useState)({}),l=Object(f.a)(i,2),o=l[0],c=l[1],s=Object(n.useState)(!1),u=Object(f.a)(s,2),m=u[0],p=u[1],b=Object(Va.c)(),v=b.touched,_=b.values,h=[Xd(e,a,r,o),rm(e,a,r),sm(e,r,Up(_.credentials,e),o),Om(e,a,r),Im(e,t,a,r,o)],E=Object(Va.c)().resetForm,y=h.some((function(e){return e.hasError}));h.push(Pp(e,r,a,t,y,!0));var g=h.map((function(e){return e.step})).filter((function(e){return null!=e})),O=!h.some((function(e){return!e.isReady}));Object(n.useEffect)((function(){if(O){var e=h.reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),t.initialValues)}),{}),t=Object(d.a)({},e);Object.keys(_).forEach((function(e){if("credential_passwords"===e&&Object.prototype.hasOwnProperty.call(t,"credential_passwords")){var a=_.credential_passwords;Object.keys(a).forEach((function(e){Object.prototype.hasOwnProperty.call(t.credential_passwords,e)&&(t.credential_passwords[e]=a[e])}))}else Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=_[e])})),E({values:t,touched:v}),p(!0)}}),[_.credentials,O]);var j=h.find((function(e){return e.contentError}));return{steps:g,isReady:m,validateStep:function(e){h.find((function(t){var a;return(null===t||void 0===t||null===(a=t.step)||void 0===a?void 0:a.id)===e})).validate()},visitStep:function(e,t){c(Object(d.a)(Object(d.a)({},o),{},Object(gr.a)({},e,!0))),h.find((function(t){var a;return(null===t||void 0===t||null===(a=t.step)||void 0===a?void 0:a.id)===e})).setTouched(t)},visitAllSteps:function(e){c({inventory:!0,credentials:!0,credentialPasswords:!0,other:!0,survey:!0,preview:!0}),h.forEach((function(t){return t.setTouched(e)}))},contentError:j?j.contentError:null}}(t,c,o,a),_=v.steps,h=v.isReady,E=v.validateStep,y=v.visitStep,g=v.visitAllSteps,O=Qa(v.contentError),j=O.error,k=O.dismissError;return j?r.a.createElement(Zt,{isOpen:j,variant:"error",title:a._({id:"Error!"}),onClose:function(){k()}},r.a.createElement(za,{error:j})):r.a.createElement(Rs.a,{isOpen:!0,onClose:i,onSave:function(){var e,a,n={},r=function(e,t){"undefined"!==typeof t&&null!==t&&(n[e]=t)},i=Md(m);r("credential_passwords",m.credential_passwords),r("inventory_id",null===(e=m.inventory)||void 0===e?void 0:e.id),r("credentials",null===(a=m.credentials)||void 0===a?void 0:a.map((function(e){return e.id}))),r("job_type",m.job_type),r("limit",m.limit),r("job_tags",m.job_tags),r("skip_tags",m.skip_tags),r("extra_vars",zd(t.ask_variables_on_launch?m.extra_vars||"---":o.extra_vars,i)),r("scm_branch",m.scm_branch),l(n)},onBack:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(t.id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onNext:function(){var e=Object(b.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"preview"===t.id?g(u):(y(a.prevId,u),E(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),onGoToStep:function(){var e=Object(b.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"preview"===t.id?g(u):(y(a.prevId,u),E(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),title:a._({id:"Prompts"}),steps:h?_:[{name:a._({id:"Content Loading"}),component:r.a.createElement(Nr,null)}],backButtonText:a._({id:"\u8fd4\u56de"}),cancelButtonText:a._({id:"\u53d6\u6d88"}),nextButtonText:a._({id:"Next"})})}var qp=Object(u.withI18n)()((function(e){var t=e.launchConfig,a=e.i18n,n=e.onCancel,i=e.onLaunch,l=e.resource,o=void 0===l?{}:l,c=e.surveyConfig;return r.a.createElement(Va.a,{initialValues:{},onSubmit:function(e){return i(e)}},r.a.createElement(Gp,{onSubmit:function(e){return i(e)},onCancel:n,i18n:a,launchConfig:t,surveyConfig:c,resource:o}))}));var Fp,zp=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).state={showLaunchPrompt:!1,launchConfig:null,launchError:!1,surveyConfig:null},n.handleLaunch=n.handleLaunch.bind(Object(Z.a)(n)),n.launchWithParams=n.launchWithParams.bind(Object(Z.a)(n)),n.handleRelaunch=n.handleRelaunch.bind(Object(Z.a)(n)),n.handleLaunchErrorClose=n.handleLaunchErrorClose.bind(Object(Z.a)(n)),n.handlePromptErrorClose=n.handlePromptErrorClose.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"handleLaunchErrorClose",value:function(){this.setState({launchError:null})}},{key:"handlePromptErrorClose",value:function(){this.setState({showLaunchPrompt:!1})}},{key:"handleLaunch",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.resource,a="workflow_job_template"===t.type?kt.readLaunch(t.id):at.readLaunch(t.id),n="workflow_job_template"===t.type?kt.readSurvey(t.id):at.readSurvey(t.id),e.prev=3,e.next=6,a;case 6:if(r=e.sent,i=r.data,l=null,!i.survey_enabled){e.next=15;break}return e.next=12,n;case 12:o=e.sent,c=o.data,l=c;case 15:!(s=i).can_start_without_user_input||s.ask_inventory_on_launch||s.ask_variables_on_launch||s.ask_limit_on_launch||s.ask_scm_branch_on_launch||s.survey_enabled||s.passwords_needed_to_start&&0!==s.passwords_needed_to_start.length||s.variables_needed_to_start&&0!==s.variables_needed_to_start.length?this.setState({showLaunchPrompt:!0,launchConfig:i,surveyConfig:l}):this.launchWithParams({}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),this.setState({launchError:e.t0});case 21:case"end":return e.stop()}var s}),e,this,[[3,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"launchWithParams",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this.props,n=a.history,"job_template"===(r=a.resource).type?i=at.launch(r.id,t||{}):"workflow_job_template"===r.type?i=kt.launch(r.id,t||{}):"job"===r.type?i=nt.relaunch(r.id,t||{}):"workflow_job"===r.type&&(i=wt.relaunch(r.id,t||{})),e.next=5,i;case 5:l=e.sent,o=l.data,n.push("/jobs/".concat(o.id,"/output")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.setState({launchError:e.t0});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleRelaunch",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.history,"inventory_update"===(n=t.resource).type?r=et.readLaunchUpdate(n.inventory_source):"project_update"===n.type?r=ut.readLaunchUpdate(n.project):"workflow_job"===n.type?r=wt.readRelaunch(n.id):"ad_hoc_command"===n.type?r=ze.readRelaunch(n.id):"job"===n.type&&(r=nt.readRelaunch(n.id)),e.prev=2,e.next=5,r;case 5:if(l=e.sent,(o=l.data).passwords_needed_to_start&&0!==o.passwords_needed_to_start.length){e.next=16;break}return"inventory_update"===n.type?i=et.launchUpdate(n.inventory_source):"project_update"===n.type?i=ut.launchUpdate(n.project):"workflow_job"===n.type?i=wt.relaunch(n.id):"ad_hoc_command"===n.type?i=ze.relaunch(n.id):"job"===n.type&&(i=nt.relaunch(n.id)),e.next=11,i;case 11:c=e.sent,s=c.data,a.push("/jobs/".concat(s.id,"/output")),e.next=17;break;case 16:this.setState({showLaunchPrompt:!0,launchConfig:o});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),this.setState({launchError:e.t0});case 22:case"end":return e.stop()}}),e,this,[[2,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.launchError,i=t.showLaunchPrompt,l=t.launchConfig,o=t.surveyConfig,c=this.props,s=c.resource,u=c.i18n,d=c.children;return r.a.createElement(n.Fragment,null,d({handleLaunch:this.handleLaunch,handleRelaunch:this.handleRelaunch}),a&&r.a.createElement(Zt,{isOpen:a,variant:"error",title:u._({id:"Error!"}),onClose:this.handleLaunchErrorClose},u._({id:"Failed to launch job."}),r.a.createElement(ua,{error:a})),i&&r.a.createElement(qp,{launchConfig:l,surveyConfig:o,resource:s,onLaunch:this.launchWithParams,onCancel:function(){return e.setState({showLaunchPrompt:!1})}}))}}]),a}(r.a.Component),Mp=Object(u.withI18n)()(Object(c.k)(zp)),Kp=Object(j.b)(Fo.a)(Fp||(Fp=Object(v.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 16px;\n  grid-template-columns: 40px;\n"])));var Vp=Object(u.withI18n)()((function(e){var t,a,n=e.i18n,i=e.job,l=e.isSelected,o=e.onSelect,c=e.showTypeColumn,u=void 0!==c&&c,d="check-action-".concat(i.id),m={project_update:n._({id:"Source Control Update"}),inventory_update:n._({id:"Inventory Sync"}),job:n._({id:"Playbook Run"}),ad_hoc_command:n._({id:"Command"}),management_job:n._({id:"Management Job"}),workflow_job:n._({id:"Workflow Job"})};return r.a.createElement(ho.a,{"aria-labelledby":d,id:"".concat(i.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-job-".concat(i.id),checked:l,onChange:o,"aria-labelledby":d}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"status",isFilled:!1},i.status&&r.a.createElement(hp,{status:i.status})),r.a.createElement(ko,{key:"name"},r.a.createElement("span",null,r.a.createElement(s.b,{to:"/jobs/".concat(I[i.type],"/").concat(i.id)},r.a.createElement("b",null,i.id," \u2014 ",i.name))))].concat(Object(A.a)(u?[r.a.createElement(ko,{key:"type","aria-label":"type"},m[i.type])]:[]),[r.a.createElement(ko,{key:"finished"},i.finished?ni(i.finished):"")])}),r.a.createElement(Kp,{"aria-label":"actions","aria-labelledby":d,id:d},"system_job"!==i.type&&(null===(t=i.summary_fields)||void 0===t||null===(a=t.user_capabilities)||void 0===a?void 0:a.start)?r.a.createElement(Ea.a,{content:n._({id:"Relaunch Job"}),position:"top"},r.a.createElement(Mp,{resource:i},(function(e){var t=e.handleRelaunch;return r.a.createElement(O.a,{variant:"plain",onClick:t,"aria-label":n._({id:"\u91cd\u8fd0\u884c"})},r.a.createElement(Fd.a,null))}))):"")))}));function Hp(e){return!e.summary_fields.user_capabilities.start&&["pending","waiting","running"].includes(e.status)}function Bp(e){return!["pending","waiting","running"].includes(e.status)}function Wp(e){var t=e.i18n,a=e.jobsToCancel,i=e.onCancel,l=Object(n.useContext)(pr),o=l.isKebabified,c=l.onKebabModalChange,s=Object(n.useState)(!1),u=Object(f.a)(s,2),d=u[0],m=u[1],p=a.length,b=p<2,v=function(){m(!d)};Object(n.useEffect)((function(){o&&c(d)}),[o,d,c]);var _=0===a.length||a.some(Hp)||a.some(Bp),h=t._("{zeroOrOneJobSelected, plural, one {\u53d6\u6d88\u4f5c\u4e1a} other {\u53d6\u6d88\u591a\u4e2a\u4f5c\u4e1a}}",{zeroOrOneJobSelected:b});return r.a.createElement(r.a.Fragment,null,o?r.a.createElement(ka.a,{key:"cancel-job",isDisabled:_,component:"button",onClick:v},h):r.a.createElement(Ea.a,{content:function(){var e=a.filter(Hp).map((function(e){return e.name})),n=a.filter(Bp).map((function(e){return e.name}));return e.concat(n).length>0?r.a.createElement("div",null,e.length>0&&r.a.createElement("div",null,t._("{numJobsUnableToCancel, plural, one {\u60a8\u65e0\u6743\u53d6\u6d88\u4ee5\u4e0b\u4f5c\u4e1a} other {\u60a8\u65e0\u6743\u53d6\u6d88\u4ee5\u4e0b\u4f5c\u4e1a}}",{numJobsUnableToCancel:e.length})," ".concat(e.join(", "))),n.length>0&&r.a.createElement("div",null,t._("{numJobsUnableToCancel, plural, one {\u60a8\u65e0\u6cd5\u53d6\u6d88\u4ee5\u4e0b\u4f5c\u4e1a\uff0c\u56e0\u4e3a\u5b83\u6ca1\u6709\u8fd0\u884c} other {\u60a8\u65e0\u6cd5\u53d6\u6d88\u4ee5\u4e0b\u4f5c\u4e1a\uff0c\u56e0\u4e3a\u5b83\u4eec\u6ca1\u6709\u8fd0\u884c}}",{numJobsUnableToCancel:n.length})," ".concat(n.join(", ")))):p>0?t._("{numJobsToCancel, plural, one {\u53d6\u6d88\u9009\u62e9\u4f5c\u4e1a} other {\u53d6\u6d88\u9009\u62e9\u591a\u4e2a\u4f5c\u4e1a}}",{numJobsToCancel:p}):t._({id:"\u9009\u62e9\u53d6\u6d88"})}(),position:"top"},r.a.createElement("div",null,r.a.createElement(O.a,{variant:"secondary","aria-label":h,onClick:v,isDisabled:_},h))),d&&r.a.createElement(Zt,{variant:"danger",title:h,isOpen:d,onClose:v,actions:[r.a.createElement(O.a,{id:"cancel-job-confirm-button",key:"delete",variant:"danger","aria-label":h,onClick:function(){i(),v()}},h),r.a.createElement(O.a,{id:"cancel-job-return-button",key:"cancel",variant:"secondary","aria-label":t._({id:"Return"}),onClick:v},t._({id:"Return"}))]},r.a.createElement("div",null,t._("{numJobsToCancel, plural, one {This action will cancel the following job:} other {This action will cancel the following jobs:}}",{numJobsToCancel:p})),a.map((function(e){return r.a.createElement("span",{key:e.id},r.a.createElement("strong",null,e.name),r.a.createElement("br",null))}))))}Wp.defaultProps={jobsToCancel:[],onCancel:function(){}};var Jp=Object(u.withI18n)()(Wp);function Yp(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),r=a[0],i=a[1],l=Object(n.useRef)(null);return Object(n.useEffect)((function(){l.current=new WebSocket("".concat("http:"===window.location.protocol?"ws:":"wss:","//").concat(window.location.host,"/websocket/"));var t=function(){var t="; ".concat(document.cookie).split("; csrftoken=").pop().split(";").shift();l.current.send(JSON.stringify({xrftoken:t,groups:e}))};return l.current.onopen=t,l.current.onmessage=function(e){i(JSON.parse(e.data))},l.current.onclose=function(e){console.debug("Socket closed. Reconnecting...",e),setTimeout((function(){t()}),1e3)},l.current.onerror=function(e){console.debug("Socket error: ",e,"Disconnecting..."),l.current.close()},function(){l.current.close()}}),[]),r}function Xp(e,t){var a=Object(n.useState)(e),r=Object(f.a)(a,2),i=r[0],l=r[1],o=Object(n.useRef)(Date.now()),c=Object(n.useRef)(e);return Object(n.useEffect)((function(){if(e!==c.current)return l(e),function(){};var a=setTimeout((function(){Date.now()-o.current>=t&&(o.current=Date.now(),l(e))}),t-(Date.now()-o.current));return function(){clearTimeout(a)}}),[e,t]),i}var Zp={finished:function(e,t){if(!e.finished)return 1;if(!t.finished)return-1;return Qp(new Date(e.finished),new Date(t.finished))},id:function(e,t){return Qp(e.id,t.id)},name:function(e,t){return Qp(e.name,t.name)},created_by__id:function(e,t){var a,n,r,i,l=null===(a=e.summary_fields)||void 0===a||null===(n=a.created_by)||void 0===n?void 0:n.id,o=null===(r=t.summary_fields)||void 0===r||null===(i=r.created_by)||void 0===i?void 0:i.id;return-1*Qp(l,o)},unified_job_template__project__id:function(e,t){return Qp(e.unified_job_template,t.unified_job_template)},started:function(e,t){if(!e.started)return 1;if(!t.started)return-1;return Qp(new Date(e.started),new Date(t.started))}};function $p(e,t){var a=t.order_by,n=void 0===a?"-finished":a,r=t.page_size,i=void 0===r?20:r,l=n.replace("-",""),o=Zp[l];return o?("-"===n[0]?e.sort(function(e){return function(t,a){return-1*e(t,a)}}(o)):e.sort(o)).slice(0,i):e.slice(0,i)}function Qp(e,t){return e?t?e<t?-1:e>t?1:0:1:-1}function eb(e,t,a){var r=Object(c.h)(),i=Object(n.useState)(e),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(n.useState)([]),m=Object(f.a)(u,2),v=m[0],_=m[1],h=Xp(v,5e3),E=Yp({jobs:["status_changed"],schedules:["changed"],control:["limit_reached_1"]});Object(n.useEffect)((function(){s(e)}),[e]);return Object(n.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var n,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.length){e.next=2;break}return e.abrupt("return");case 2:return _([]),e.next=5,t(h);case 5:n=e.sent,(i=n.filter((function(e){return!o.find((function(t){return t.id===e.id}))}))).length&&(l=N(a,r.search),s($p([].concat(Object(A.a)(i),Object(A.a)(o)),l)));case 8:case"end":return e.stop()}}),e)})))()}),[h,t]),Object(n.useEffect)((function(){if(E&&E.unified_job_id){var e=N(a,r.search);if(!(Object.keys(e).length>4)||["completed","failed","error"].includes(E.status)){var t,n=E.unified_job_id,i=o.findIndex((function(e){return e.id===n}));i>-1?s($p(function(e,t,a){var n=Object(d.a)(Object(d.a)({},e[t]),{},{status:a.status,finished:a.finished});return[].concat(Object(A.a)(e.slice(0,t)),[n],Object(A.a)(e.slice(t+1)))}(o,i,E),e)):(t=E.unified_job_id,v.includes(t)||_((function(e){return e.concat(t)})))}}}),[E]),o}var tb=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.defaultParams,i=e.showTypeColumn,l=void 0!==i&&i,o=R("job",Object(d.a)({page:1,page_size:20,order_by:"-finished",not__launch_type:"sync"},a),["id","page","page_size"]),s=Object(n.useState)([]),u=Object(f.a)(s,2),m=u[0],v=u[1],_=Object(c.h)(),h=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(o,_.search),e.next=3,Promise.all([Et.read(Object(d.a)({},n)),Et.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0],c=i[1],e.abrupt("return",{results:l.data.results,count:l.data.count,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=c.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[_]),{results:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),E=h.result,y=E.results,g=E.count,O=E.relatedSearchableKeys,j=E.searchableKeys,k=h.error,w=h.isLoading,C=h.request;Object(n.useEffect)((function(){C()}),[C]);var S=eb(y,Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=N(o,_.search)).id__in=t.join(","),e.next=4,Et.read(a);case 4:return n=e.sent,r=n.data,e.abrupt("return",r.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[_.search]),o),x=m.length===S.length&&m.length>0,T=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(m.map((function(e){return["new","pending","waiting","running"].includes(e.status)?nt.cancel(e.id,e.type):Promise.resolve()}))));case 1:case"end":return e.stop()}}),e)}))),[m]),{}),I=T.error,D=T.isLoading,L=T.request,P=Qa(I),U=P.error,G=P.dismissError,q=en(Object(n.useCallback)((function(){return Promise.all(m.map((function(e){var t=e.type,a=e.id;switch(t){case"job":return nt.destroy(a);case"ad_hoc_command":return ze.destroy(a);case"system_job":return ft.destroy(a);case"project_update":return st.destroy(a);case"inventory_update":return tt.destroy(a);case"workflow_job":return wt.destroy(a);default:return null}})))}),[m]),{qsConfig:o,allItemsSelected:x,fetchItems:C}),F=q.isLoading,z=q.deleteItems,M=q.deletionError,K=q.clearDeletionError,V=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:v([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:v([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){v(e?Object(A.a)(S):[])},W=function(e){m.some((function(t){return t.id===e.id}))?v(m.filter((function(t){return t.id!==e.id}))):v(m.concat(e))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:k,hasContentLoading:w||F||D,items:S,itemCount:g,pluralizedItemName:t._({id:"\u4f5c\u4e1a"}),qsConfig:o,onRowClick:W,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"ID"}),key:"id"},{name:t._({id:"\u6807\u7b7e\u540d\u79f0"}),key:"labels__name__icontains"},{name:t._({id:"\u4f5c\u4e1a\u7c7b\u578b"}),key:"or__type",options:[["project_update",t._({id:"Source Control Update"})],["inventory_update",t._({id:"Inventory Sync"})],["job",t._({id:"Playbook Run"})],["ad_hoc_command",t._({id:"Command"})],["system_job",t._({id:"Management Job"})],["workflow_job",t._({id:"Workflow Job"})]]},{name:t._({id:"\u53d1\u8d77\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u72b6\u6001"}),key:"status",options:[["new",t._({id:"New"})],["pending",t._({id:"Pending"})],["waiting",t._({id:"Waiting"})],["running",t._({id:"Running"})],["successful",t._({id:"Successful"})],["failed",t._({id:"Failed"})],["error",t._({id:"Error"})],["canceled",t._({id:"Canceled"})]]},{name:t._({id:"\u8303\u56f4"}),key:"job__limit"}],toolbarSortColumns:[{name:t._({id:"\u7ed3\u675f\u65f6\u95f4"}),key:"finished"},{name:t._({id:"ID"}),key:"id"},{name:t._({id:"\u53d1\u8d77\u8005"}),key:"created_by__id"},{name:t._({id:"\u540d\u79f0"}),key:"name"},{name:t._({id:"\u9879\u76ee"}),key:"unified_job_template__project__id"},{name:t._({id:"\u5f00\u59cb\u65f6\u95f4"}),key:"started"}],toolbarSearchableKeys:j,toolbarRelatedSearchableKeys:O,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:x,onSelectAll:B,qsConfig:o,additionalControls:[r.a.createElement(Ro,{key:"delete",onDelete:H,itemsToDelete:m,pluralizedItemName:"Jobs"}),r.a.createElement(Jp,{key:"cancel",onCancel:V,jobsToCancel:m})]}))},renderItem:function(e){return r.a.createElement(Vp,{key:e.id,job:e,showTypeColumn:l,onSelect:function(){return W(e)},isSelected:m.some((function(t){return t.id===e.id}))})}})),M&&r.a.createElement(Zt,{isOpen:!0,variant:"error",title:t._({id:"Error!"}),onClose:K},t._({id:"Failed to delete one or more jobs."}),r.a.createElement(ua,{error:M})),U&&r.a.createElement(Zt,{isOpen:!0,variant:"error",title:t._({id:"Error!"}),onClose:G},t._({id:"Failed to cancel one or more jobs."}),r.a.createElement(ua,{error:U})))})),ab=a(30),nb=function(){function e(t){var a=this;Object(k.a)(this,e),this.handleMouseOver=function(e){var t=0,n=0,r=0,i=ab.d.pageX-ab.l(a.svg).node().getBoundingClientRect().x+10,l=ab.d.pageY-ab.l(a.svg).node().getBoundingClientRect().y-10,o=ab.n("%m/%d");if(e){var c=a.toolTipBase.node().getBoundingClientRect().width,s=ab.l("".concat(a.svg,"> svg")).node().getBoundingClientRect().width,u=100-c/s*100<i/s*100;e&&(t=e.RAN||0,n=e.FAIL||0,r=e.TOTAL||0,a.date.text(o(e.DATE||null))),e&&e.data&&(t=e.data.RAN||0,n=e.data.FAIL||0,r=e.data.TOTAL||0,a.date.text(o(e.data.DATE||null))),a.jobs.text("".concat(r," ").concat(a.label)),a.jobsWidth=a.jobs.node().getComputedTextLength(),a.failed.text("".concat(n)),a.successful.text("".concat(t)),a.successTextWidth=a.successful.node().getComputedTextLength(),a.failTextWidth=a.failed.node().getComputedTextLength();var d,m=a.jobsWidth/a.boxWidth*100,p=m/40;d=m>40?a.boxWidth*p:a.boxWidth,a.boundingBox.attr("width",d),a.toolTipBase.attr("transform","translate(".concat(i,", ").concat(l,")")),u?(a.toolTipPoint.attr("transform","translate(-20, -10) rotate(45)"),a.boundingBox.attr("x",-d-20),a.circleGreen.attr("cx",-d),a.circleRed.attr("cx",-d),a.icon.attr("x",-d-2),a.successText.attr("x",17-d),a.failText.attr("x",17-d),a.successful.attr("x",-a.successTextWidth-20-12),a.failed.attr("x",-a.failTextWidth-20-12),a.date.attr("x",-d-5),a.jobs.attr("x",-a.jobsWidth/2-14)):(a.toolTipPoint.attr("transform","translate(10, -10) rotate(45)"),a.boundingBox.attr("x",10),a.circleGreen.attr("cx",26),a.circleRed.attr("cx",26),a.icon.attr("x",24),a.successText.attr("x",43),a.failText.attr("x",43),a.successful.attr("x",d-a.successTextWidth),a.failed.attr("x",d-a.failTextWidth),a.date.attr("x",20),a.jobs.attr("x",d)),a.toolTipBase.style("opacity",1),a.toolTipBase.interrupt()}},this.handleMouseOut=function(){a.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")},this.label=t.label,this.svg=t.svg,this.colors=t.colors,this.i18n=t.i18n,this.draw()}return Object(S.a)(e,[{key:"draw",value:function(){this.toolTipBase=ab.l("".concat(this.svg," > svg")).append("g"),this.toolTipBase.attr("id","chart-tooltip"),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=145,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-41).attr("rx",2).attr("height",82).attr("width",this.boxWidth).attr("fill","#393f44"),this.circleGreen=this.toolTipBase.append("circle").attr("cx",26).attr("cy",0).attr("r",7).attr("stroke","white").attr("fill",this.colors(1)),this.circleRed=this.toolTipBase.append("circle").attr("cx",26).attr("cy",26).attr("r",7).attr("stroke","white").attr("fill",this.colors(0)),this.successText=this.toolTipBase.append("text").attr("x",43).attr("y",4).attr("font-size",12).attr("fill","white").text(this.i18n._({id:"Successful"})),this.failText=this.toolTipBase.append("text").attr("x",43).attr("y",28).attr("font-size",12).attr("fill","white").text(this.i18n._({id:"Failed"})),this.icon=this.toolTipBase.append("text").attr("fill","white").attr("stroke","white").attr("x",24).attr("y",30).attr("font-size",12).text("!"),this.jobs=this.toolTipBase.append("text").attr("fill","white").attr("x",137).attr("y",-21).attr("font-size",12).attr("text-anchor","end").text(this.i18n._({id:"No Jobs"})),this.successful=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",4).attr("id","successful-count").text("0"),this.failed=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",28).attr("id","failed-count").text("0"),this.date=this.toolTipBase.append("text").attr("fill","white").attr("stroke","white").attr("x",20).attr("y",-21).attr("font-size",12).text(this.i18n._({id:"Never"}))}}]),e}();var rb,ib,lb,ob=Object(u.withI18n)()((rb=function(e){var t=e.id,a=e.data,i=e.height,l=e.i18n,o=e.pageContext.isNavOpen,c=Object(n.useCallback)((function(){var e=15,n=15,r=35,o=70;ab.m("#".concat(t," > *")).remove();var c=function(){var e;try{e=parseInt(ab.l("#".concat(t)).style("width"),10)-o-n||700}catch(a){e=700}return e}();function s(e){e.transition().duration(1e3).attrTween("stroke-dasharray",u)}function u(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t[2][t[1]].getTotalLength(),r=ab.g("0,".concat(n),"".concat(n,",").concat(n));return function(e){return r(e)}}var d=ab.k().rangeRound([0,c]),m=ab.i().range([i,0]),p=ab.j(["#6EC664","#A30000","#06C"]),b=ab.l("#".concat(t)).append("svg").attr("width",c+o+n).attr("height",i+e+r).attr("z",100).append("g").attr("id","chart-container").attr("transform","translate(".concat(o,", ").concat(e,")")),f=new nb({svg:"#".concat(t),colors:p,label:l._({id:"\u4f5c\u4e1a"}),i18n:l}),v=ab.o("%Y-%m-%d"),_=a.reduce((function(e,t){var a=t.created,n=t.successful,r=t.failed,i=v(a)||new Date,l=+n||0,o=+r||0,c=+n+r||0;return e.concat({DATE:i,RAN:l,FAIL:o,TOTAL:c})}),[]),h=_.reduce((function(e,t){var a=Math.max(t.RAN>t.FAIL?t.RAN:t.FAIL);return e>a?e:a}),0);d.domain(ab.e(_,(function(e){return e.DATE}))),m.domain([0,h>4?h+Math.max(h/10,1):5]).nice();var E,y=ab.h().curve(ab.c).x((function(e){return d(e.DATE)})).y((function(e){return m(e.RAN)})),g=ab.h().defined((function(e){return"number"===typeof e.FAIL})).curve(ab.c).x((function(e){return d(e.DATE)})).y((function(e){return m(e.FAIL)}));b.append("g").attr("class","y-axis").call(ab.b(m).ticks(h>3?Math.min(h+Math.max(h/10,1),10):5).tickSize(-c).tickFormat(ab.f("d"))).selectAll("line").attr("stroke","#d7d7d7"),b.selectAll(".y-axis .tick text").attr("x",-5),b.append("text").attr("transform","rotate(-90)").attr("y",0-o).attr("x",0-i/2).attr("dy","1em").style("text-anchor","middle").text("\u4f5c\u4e1a");var O=Math.round(_.length/(_.length/2));E=_.map((function(e){return e.DATE})),31===_.length&&(E=_.map((function(e,t){return t%O===0?e.DATE:void 0})).filter((function(e){return e}))),b.select(".domain").attr("stroke","#d7d7d7"),b.append("g").attr("class","x-axis").attr("transform","translate(0, ".concat(i,")")).call(ab.a(d).tickValues(E).tickSize(-i).tickFormat(ab.n("%-m/%-d"))).selectAll("line").attr("stroke","#d7d7d7"),b.selectAll(".x-axis .tick text").attr("y",10),b.append("text").attr("transform","translate(".concat(c/2," , ").concat(i+e+20,")")).style("text-anchor","middle").text("Date");var j=b.append("path").attr("class","mouse-line").style("stroke","black").style("stroke-width","3px").style("stroke-dasharray","3, 3").style("opacity","0"),k=function(e){f.handleMouseOver(e),j.transition().style("opacity","1")},w=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t[2][t[1]].cx.baseVal.value;j.attr("d",(function(){return"M".concat(n,",").concat(i," ").concat(n,",",0)}))},C=function(){f.handleMouseOut(),j.transition().style("opacity",0)};b.append("path").data([_]).attr("class","line").style("fill","none").style("stroke",(function(){return p(1)})).attr("stroke-width",2).attr("d",y).call(s),b.append("path").data([_]).attr("class","line").style("fill","none").style("stroke",(function(){return p(0)})).attr("stroke-width",2).attr("d",g).call(s);var S=ab.n("%-m-%-d");b.selectAll("dot").data(_).enter().append("circle").attr("r",3).style("stroke",(function(){return p(1)})).style("fill",(function(){return p(1)})).attr("cx",(function(e){return d(e.DATE)})).attr("cy",(function(e){return m(e.RAN)})).attr("id",(function(e){return"success-dot-".concat(S(e.DATE))})).on("mouseover",k).on("mousemove",w).on("mouseout",C),b.selectAll("dot").data(_).enter().append("circle").attr("r",3).style("stroke",(function(){return p(0)})).style("fill",(function(){return p(0)})).attr("cx",(function(e){return d(e.DATE)})).attr("cy",(function(e){return m(e.FAIL)})).attr("id",(function(e){return"success-dot-".concat(S(e.DATE))})).on("mouseover",k).on("mousemove",w).on("mouseout",C)}),[a,i,l,t]);return Object(n.useEffect)((function(){c()}),[c,o]),Object(n.useEffect)((function(){function e(){c()}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[c]),r.a.createElement("div",{id:t})},function(e){return r.a.createElement(g.b,null,(function(t){return r.a.createElement(rb,Object.assign({},e,{pageContext:t}))}))})),cb=Object(j.b)(na.a)(ib||(ib=Object(v.a)(["\n  padding: var(--pf-global--spacer--md);\n  display: flex;\n  align-items: center;\n  padding-top: var(--pf-global--spacer--sm);\n  cursor: pointer;\n  text-align: center;\n  color: var(--pf-global--palette--black-1000);\n  text-decoration: none;\n\n  & h2 {\n    font-size: var(--pf-global--FontSize--4xl);\n    color: var(--pf-global--palette--blue-400);\n    text-decoration: none;\n  }\n\n  & h2.failed {\n    color: var(--pf-global--palette--red-200);\n  }\n"]))),sb=Object(j.b)(s.b)(lb||(lb=Object(v.a)(["\n  display: contents;\n  &:hover {\n    text-decoration: none;\n  }\n"])));var ub=function(e){var t=e.failed,a=e.link,n=e.data,i=e.label;return r.a.createElement(sb,{to:a},r.a.createElement(cb,{isHoverable:!0},r.a.createElement("h2",{className:t&&"failed"},n||0),i))};function db(e){var t=Object(n.useState)(e),a=Object(f.a)(t,2),r=a[0],i=a[1],l=Yp({jobs:["status_changed"],control:["limit_reached_1"]});return Object(n.useEffect)((function(){i(e)}),[e]),Object(n.useEffect)((function(){if(null===l||void 0===l?void 0:l.unified_job_id){var e=r.findIndex((function(e){return e.id===l.unified_job_template_id}));if(-1!==e){var t=r[e],a=Object(A.a)(r);a[e]=function(e,t){var a=Object(A.a)(e.summary_fields.recent_jobs||[]),n={id:t.unified_job_id,status:t.status,finished:t.finished||null,type:t.type},r=a.findIndex((function(e){return e.id===n.id}));r>-1?a[r]=Object(d.a)(Object(d.a)({},a[r]),n):a.unshift(n);return Object(d.a)(Object(d.a)({},e),{},{summary_fields:Object(d.a)(Object(d.a)({},e.summary_fields),{},{recent_jobs:a.slice(0,10)})})}(t,l),i(a)}}}),[l]),r}var mb=Object(u.withI18n)()((function(e){var t=e.dropdownItems,a=e.i18n,i=fr().isKebabified,l=Object(n.useState)(!1),o=Object(f.a)(l,2),c=o[0],s=o[1],u=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=function(e){i||u&&u.current.contains(e.target)||s(!1)};return document.addEventListener("click",e,!1),function(){document.removeEventListener("click",e)}}),[i]),i?r.a.createElement(n.Fragment,null,t):r.a.createElement("div",{ref:u,key:"add"},r.a.createElement(ga.a,{isPlain:!0,isOpen:c,position:Oa.d.right,toggle:r.a.createElement(Po,{"aria-label":a._({id:"\u6dfb\u52a0"}),showToggleIndicator:!0,onClick:function(){return s(!c)}}),dropdownItems:t}))})),pb=a(1057),bb=Object(j.b)(Fo.a).withConfig({displayName:"DashboardTemplateListItem__DataListAction",componentId:"sc-nimvxs-0"})(["align-items:center;display:grid;grid-gap:16px;grid-template-columns:repeat(4,40px);"]);var fb=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.template,i=e.isSelected,l=e.onSelect,o=e.detailUrl,c=e.fetchTemplates,u=Object(n.useState)(!1),d=Object(f.a)(u,2),m=d[0],v=d[1],_="check-action-".concat(a.id),h=Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("job_template"!==a.type){e.next=5;break}return e.next=3,at.copy(a.id,{name:"".concat(a.name," @ ").concat(li())});case 3:e.next=7;break;case 5:return e.next=7,kt.copy(a.id,{name:"".concat(a.name," @ ").concat(li())});case 7:return e.next=9,c();case 9:case"end":return e.stop()}}),e)}))),[c,a.id,a.name,a.type]),E=Object(n.useCallback)((function(){v(!0)}),[]),y=Object(n.useCallback)((function(){v(!1)}),[]),g="job_template"===a.type&&(!a.summary_fields.project||!a.summary_fields.inventory&&!a.ask_inventory_on_launch);return r.a.createElement(ho.a,{"aria-labelledby":_,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{isDisabled:m,id:"select-jobTemplate-".concat(a.id),checked:i,onChange:l,"aria-labelledby":_}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name",id:_},r.a.createElement("span",null,r.a.createElement(s.b,{to:"".concat(o)},r.a.createElement("b",null,a.name))),g&&r.a.createElement("span",null,r.a.createElement(Ea.a,{content:t._({id:"\u6b64\u6a21\u677f\u4e2d\u7f3a\u5c11\u8d44\u6e90\u3002"}),position:"right"},r.a.createElement(vb,null)))),r.a.createElement(ko,{key:"type"},as(a.type)),r.a.createElement(ko,{key:"sparkline"},r.a.createElement(Op,{jobs:a.summary_fields.recent_jobs}))]}),r.a.createElement(bb,{"aria-label":"actions","aria-labelledby":_},"workflow_job_template"===a.type&&r.a.createElement(Ea.a,{content:t._({id:"\u53ef\u89c6\u5316"}),position:"top"},r.a.createElement(_b,{isDisabled:m,"aria-label":t._({id:"\u53ef\u89c6\u5316"}),variant:"plain",component:s.b,to:"/templates/workflow_job_template/".concat(a.id,"/visualizer")},r.a.createElement(pb.a,null))),a.summary_fields.user_capabilities.start&&r.a.createElement(Ea.a,{content:t._({id:"\u542f\u52a8\u6a21\u677f"}),position:"top"},r.a.createElement(Mp,{resource:a},(function(e){var a=e.handleLaunch;return r.a.createElement(hb,{isDisabled:m,"aria-label":t._({id:"\u542f\u52a8\u6a21\u677f"}),variant:"plain",onClick:a},r.a.createElement(Fd.a,null))}))),a.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:t._({id:"\u7f16\u8f91\u6a21\u677f"}),position:"top"},r.a.createElement(Eb,{isDisabled:m,"aria-label":t._({id:"\u7f16\u8f91\u6a21\u677f"}),variant:"plain",component:s.b,to:"/templates/".concat(a.type,"/").concat(a.id,"/edit")},r.a.createElement(Mo.a,null))),a.summary_fields.user_capabilities.copy&&r.a.createElement(hd,{helperText:{tooltip:t._({id:"\u590d\u5236\u6a21\u677f"}),errorMessage:t._({id:"\u590d\u5236\u6a21\u677f\u5931\u8d25\u3002"})},isDisabled:m,onCopyStart:E,onCopyFinish:y,copyItem:h}))))})),vb=Object(j.b)(Ht.a).withConfig({displayName:"DashboardTemplateListItem___StyledExclamationTriangleIcon",componentId:"sc-nimvxs-1"})(["color:#c9190b;margin-left:20px;"]),_b=Object(j.b)(O.a).withConfig({displayName:"DashboardTemplateListItem___StyledButton",componentId:"sc-nimvxs-2"})(["grid-column:1"]),hb=Object(j.b)(O.a).withConfig({displayName:"DashboardTemplateListItem___StyledButton2",componentId:"sc-nimvxs-3"})(["grid-column:2"]),Eb=Object(j.b)(O.a).withConfig({displayName:"DashboardTemplateListItem___StyledButton3",componentId:"sc-nimvxs-4"})(["grid-column:3"]),yb=R("template",{page:1,page_size:5,order_by:"name",type:"job_template,workflow_job_template"},["id","page","page_size"]);var gb,Ob,jb,kb,wb=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(n.useState)([]),l=Object(f.a)(i,2),o=l[0],u=l[1],d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=N(yb,a.search),e.next=3,Promise.all([ht.read(i),at.readOptions(),kt.readOptions(),ht.readOptions()]);case 3:return l=e.sent,e.abrupt("return",{results:l[0].data.results,count:l[0].data.count,jtActions:l[1].data.actions,wfjtActions:l[2].data.actions,relatedSearchableKeys:((null===(t=l[3])||void 0===t||null===(n=t.data)||void 0===n?void 0:n.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(r=l[3].data.actions)||void 0===r?void 0:r.GET)||{}).filter((function(e){var t;return null===(t=l[3].data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 5:case"end":return e.stop()}}),e)}))),[a]),{results:[],count:0,jtActions:{},wfjtActions:{},relatedSearchableKeys:[],searchableKeys:[]}),m=d.result,v=m.results,_=m.count,h=m.jtActions,E=m.wfjtActions,y=m.relatedSearchableKeys,g=m.searchableKeys,O=d.error,j=d.isLoading,k=d.request;Object(n.useEffect)((function(){k()}),[k]);var w=db(v),C=o.length===w.length&&o.length>0,S=en(Object(n.useCallback)((function(){return Promise.all(o.map((function(e){var t=e.type,a=e.id;return"job_template"===t?at.destroy(a):"workflow_job_template"===t&&kt.destroy(a)})))}),[o]),{qsConfig:yb,allItemsSelected:C,fetchItems:k}),x=S.isLoading,T=S.deleteItems,I=S.deletionError,R=S.clearDeletionError,D=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:u([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){u(e?Object(A.a)(w):[])},P=function(e){o.some((function(t){return t.id===e.id}))?u(o.filter((function(t){return t.id!==e.id}))):u(o.concat(e))},U=h&&Object.prototype.hasOwnProperty.call(h,"POST"),G=E&&Object.prototype.hasOwnProperty.call(E,"POST"),q=t._({id:"Add job template"}),F=t._({id:"Add workflow template"}),z=r.a.createElement(mb,{key:"add",dropdownItems:[r.a.createElement(ka.a,{key:q,component:s.b,to:"/templates/job_template/add/","aria-label":q},q),r.a.createElement(ka.a,{component:s.b,to:"/templates/workflow_job_template/add/",key:F,"aria-label":F},F)]});return r.a.createElement(n.Fragment,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:O,hasContentLoading:j||x,items:w,itemCount:_,pluralizedItemName:t._({id:"Templates"}),qsConfig:yb,onRowClick:P,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"\u7c7b\u578b"}),key:"or__type",options:[["job_template",t._({id:"\u4f5c\u4e1a\u6a21\u677f"})],["workflow_job_template",t._({id:"Workflow Template"})]]},{name:t._({id:"\u5267\u672c\u540d\u79f0"}),key:"job_template__playbook__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u6e05\u5355"}),key:"job_template__inventory__id"},{name:t._({id:"\u6700\u540e\u8fd0\u884c"}),key:"last_job_run"},{name:t._({id:"\u66f4\u6539"}),key:"modified"},{name:t._({id:"\u540d\u79f0"}),key:"name"},{name:t._({id:"\u9879\u76ee"}),key:"jobtemplate__project__id"},{name:t._({id:"\u7c7b\u578b"}),key:"type"}],toolbarSearchableKeys:g,toolbarRelatedSearchableKeys:y,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:C,onSelectAll:L,qsConfig:yb,additionalControls:[].concat(Object(A.a)(U||G?[z]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:D,itemsToDelete:o,pluralizedItemName:"Templates"})])}))},renderItem:function(e){return r.a.createElement(fb,{key:e.id,value:e.name,template:e,detailUrl:"/templates/".concat(e.type,"/").concat(e.id),onSelect:function(){return P(e)},isSelected:o.some((function(t){return t.id===e.id})),fetchTemplates:k})},emptyStateControls:(U||G)&&z})),r.a.createElement(Zt,{"aria-label":t._({id:"Deletion Error"}),isOpen:I,variant:"error",title:t._({id:"Error!"}),onClose:R},t._({id:"Failed to delete one or more templates."}),r.a.createElement(ua,{error:I})))})),Cb=j.b.div(gb||(gb=Object(v.a)(["\n  display: grid;\n  grid-template-columns: repeat(6, 1fr);\n  grid-gap: var(--pf-global--spacer--lg);\n\n  @media (max-width: 900px) {\n    grid-template-columns: repeat(3, 1fr);\n    grid-auto-rows: 1fr;\n  }\n"]))),Sb=Object(j.b)(La.a)(Ob||(Ob=Object(v.a)(["\n  padding-top: 0;\n  padding-bottom: 0;\n\n  & .spacer {\n    margin-bottom: var(--pf-global--spacer--lg);\n  }\n"]))),xb=Object(j.b)(qd.a)(jb||(jb=Object(v.a)(["\n  margin-top: var(--pf-global--spacer--lg);\n"]))),Tb=Object(j.b)(Wc.a)(kb||(kb=Object(v.a)(["\n  margin-left: initial;\n  padding-left: 0;\n"])));var Ib=Object(u.withI18n)()((function(e){var t,a,i,l,o,c,s=e.i18n,u=Object(n.useState)(!1),d=Object(f.a)(u,2),m=d[0],v=d[1],_=Object(n.useState)(!1),h=Object(f.a)(_,2),E=h[0],y=h[1],g=Object(n.useState)("month"),O=Object(f.a)(g,2),j=O[0],k=O[1],w=Object(n.useState)("all"),C=Object(f.a)(w,2),S=C[0],x=C[1],T=Object(n.useState)(0),I=Object(f.a)(T,2),A=I[0],R=I[1],N=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Je.readJobGraph({period:j,job_type:S}),Je.read()]);case 2:return t=e.sent,a=Object(f.a)(t,2),n=a[0].data,r=a[1].data,i={},n.jobs.successful.forEach((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];i[a]||(i[a]={}),i[a].successful=n})),n.jobs.failed.forEach((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];i[a]||(i[a]={}),i[a].failed=n})),l=Object.keys(i).map((function(e){var t=new Date(1e3*e).toISOString().split("T"),a=Object(f.a)(t,1)[0];return i[e].created=a,i[e]})),e.abrupt("return",{jobGraphData:l,countData:r});case 11:case"end":return e.stop()}}),e)}))),[j,S]),{jobGraphData:[],countData:{}}),D=N.isLoading,L=N.result,P=L.jobGraphData,U=L.countData,G=N.request;return Object(n.useEffect)((function(){G()}),[G,j,S]),D?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Nr,null))):r.a.createElement(n.Fragment,null,r.a.createElement(hs,{streamType:"all",breadcrumbConfig:{"/home":s._({id:"\u4eea\u8868\u76d8"})}}),r.a.createElement(La.a,null,r.a.createElement(Cb,null,r.a.createElement(ub,{link:"/hosts",data:null===U||void 0===U||null===(t=U.hosts)||void 0===t?void 0:t.total,label:s._({id:"\u4e3b\u673a"})}),r.a.createElement(ub,{failed:!0,link:"/hosts?host.last_job_host_summary__failed=true",data:null===U||void 0===U||null===(a=U.hosts)||void 0===a?void 0:a.failed,label:s._({id:"\u5931\u8d25\u7684\u4e3b\u673a"})}),r.a.createElement(ub,{link:"/inventories",data:null===U||void 0===U||null===(i=U.inventories)||void 0===i?void 0:i.total,label:s._({id:"\u6e05\u5355"})}),r.a.createElement(ub,{failed:!0,link:"/inventories?inventory.inventory_sources_with_failures__gt=0",data:null===U||void 0===U||null===(l=U.inventories)||void 0===l?void 0:l.inventory_failed,label:s._({id:"\u6e05\u5355\u540c\u6b65\u5931\u8d25"})}),r.a.createElement(ub,{link:"/projects",data:null===U||void 0===U||null===(o=U.projects)||void 0===o?void 0:o.total,label:s._({id:"\u9879\u76ee"})}),r.a.createElement(ub,{failed:!0,link:"/projects?project.status__in=failed,canceled",data:null===U||void 0===U||null===(c=U.projects)||void 0===c?void 0:c.failed,label:s._({id:"\u9879\u76ee\u540c\u6b65\u5931\u8d25"})}))),r.a.createElement(Sb,null,r.a.createElement("div",{className:"spacer"},r.a.createElement(na.a,{id:"dashboard-main-container"},r.a.createElement(os.a,{"aria-label":s._({id:"Tabs"}),activeKey:A,onSelect:function(e,t){return R(t)}},r.a.createElement(cs.a,{"aria-label":s._({id:"Job status graph tab"}),eventKey:0,title:r.a.createElement(ss.a,null,s._({id:"\u4f5c\u4e1a\u72b6\u6001"}))}),r.a.createElement(cs.a,{"aria-label":s._({id:"Recent Jobs list tab"}),eventKey:1,title:r.a.createElement(ss.a,null,s._({id:"\u6700\u8fd1\u4f5c\u4e1a"}))}),r.a.createElement(cs.a,{"aria-label":s._({id:"Recent Templates list tab"}),eventKey:2,title:r.a.createElement(ss.a,null,s._({id:"\u6700\u8fd1\u6a21\u677f"}))})),0===A&&r.a.createElement(n.Fragment,null,r.a.createElement(xb,null,r.a.createElement(Tb,null,r.a.createElement(dn.a,{variant:mn.e.single,placeholderText:s._({id:"Select period"}),"aria-label":s._({id:"Select period"}),className:"periodSelect",onToggle:v,onSelect:function(e,t){return k(t)},selections:j,isOpen:m},r.a.createElement(bn.a,{key:"month",value:"month"},s._({id:"\u8fd1\u4e00\u6708"})),r.a.createElement(bn.a,{key:"two_weeks",value:"two_weeks"},s._({id:"\u8fd1\u4e24\u5468"})),r.a.createElement(bn.a,{key:"week",value:"week"},s._({id:"\u8fd1\u4e00\u5468"}))),r.a.createElement(dn.a,{variant:mn.e.single,placeholderText:s._({id:"Select job type"}),"aria-label":s._({id:"Select job type"}),className:"jobTypeSelect",onToggle:y,onSelect:function(e,t){return x(t)},selections:S,isOpen:E},r.a.createElement(bn.a,{key:"all",value:"all"},s._({id:"\u6240\u6709"})),r.a.createElement(bn.a,{key:"inv_sync",value:"inv_sync"},s._({id:"\u6e05\u5355\u540c\u6b65"})),r.a.createElement(bn.a,{key:"scm_update",value:"scm_update"},s._({id:"SCM \u66f4\u65b0"})),r.a.createElement(bn.a,{key:"playbook_run",value:"playbook_run"},s._({id:"\u5267\u672c\u8fd0\u884c"}))))),r.a.createElement(ra.a,null,r.a.createElement(ob,{height:390,id:"d3-line-chart-root",data:P}))),1===A&&r.a.createElement(tb,{defaultParams:{page_size:5}}),2===A&&r.a.createElement(wb,null)))))}));var Ab=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.className,i=e.host,l=e.isDisabled,o=void 0!==l&&l,c=e.onToggle,s=e.tooltip,u=void 0===s?t._({id:"Indicates if a host is available and should be included in running jobs.  For hosts that are part of an external inventory, this may be reset by the inventory sync process."}):s,d=Object(n.useState)(i.enabled),m=Object(f.a)(d,2),v=m[0],_=m[1],h=Object(n.useState)(!1),E=Object(f.a)(h,2),y=E[0],g=E[1],O=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe.update(i.id,{enabled:!v});case 2:return e.abrupt("return",!v);case 3:case"end":return e.stop()}}),e)}))),[i,v]),i.enabled),j=O.result,k=O.isLoading,w=O.error,C=O.request;return Object(n.useEffect)((function(){j!==v&&(_(j),c&&c(j))}),[j,v,c]),Object(n.useEffect)((function(){w&&g(!0)}),[w]),r.a.createElement(n.Fragment,null,r.a.createElement(Ea.a,{content:u,position:"top"},r.a.createElement(Rb,{className:a,id:"host-".concat(i.id,"-toggle"),label:t._({id:"On"}),labelOff:t._({id:"Off"}),isChecked:v,isDisabled:k||o||!i.summary_fields.user_capabilities.edit,onChange:C,"aria-label":t._({id:"Toggle host"})})),y&&w&&!k&&r.a.createElement(Zt,{variant:"error",title:t._({id:"Error!"}),isOpen:w&&!k,onClose:function(){return g(!1)}},t._({id:"Failed to toggle host."}),r.a.createElement(ua,{error:w})))})),Rb=Object(j.b)(dm.a).withConfig({displayName:"HostToggle___StyledSwitch",componentId:"sc-oscq6d-0"})(["display:inline-flex;"]),Nb=Object(j.b)(Fo.a).withConfig({displayName:"HostListItem__DataListAction",componentId:"sc-wxexdj-0"})(["align-items:center;display:grid;grid-gap:24px;grid-template-columns:92px 40px;"]);var Db=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.host,i=e.isSelected,l=e.onSelect,o=e.detailUrl,c="check-action-".concat(a.id);return r.a.createElement(ho.a,{key:a.id,"aria-labelledby":c,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-host-".concat(a.id),checked:i,onChange:l,"aria-labelledby":c}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"".concat(o)},r.a.createElement("b",null,a.name))),r.a.createElement(ko,{key:"recentJobs"},r.a.createElement(Op,{jobs:a.summary_fields.recent_jobs})),r.a.createElement(ko,{key:"inventory"},a.summary_fields.inventory&&r.a.createElement(n.Fragment,null,r.a.createElement(Lb,null,t._({id:"\u6e05\u5355"})),r.a.createElement(s.b,{to:"/inventories/inventory/".concat(a.summary_fields.inventory.id,"/details")},a.summary_fields.inventory.name)))]}),r.a.createElement(Nb,{"aria-label":"actions","aria-labelledby":c,id:c},r.a.createElement(Ab,{host:a}),a.summary_fields.user_capabilities.edit?r.a.createElement(Ea.a,{content:t._({id:"\u7f16\u8f91\u4e3b\u673a"}),position:"top"},r.a.createElement(O.a,{"aria-label":t._({id:"\u7f16\u8f91\u4e3b\u673a"}),variant:"plain",component:s.b,to:"/hosts/".concat(a.id,"/edit")},r.a.createElement(Mo.a,null))):"")))})),Lb=Object(j.b)("b").withConfig({displayName:"HostListItem___StyledB",componentId:"sc-wxexdj-1"})(["margin-right:24px"]);var Pb=Object(u.withI18n)()((function(e){var t=e.onClick,a=e.i18n,n=e.isDisabled;return fr().isKebabified?r.a.createElement(ka.a,{key:"add",isDisabled:n,component:"button",onClick:t},a._({id:"Smart Inventory"})):r.a.createElement(Ea.a,{key:"smartInventory",content:n?a._({id:"Enter at least one search filter to create a new Smart Inventory"}):a._({id:"Create a new Smart Inventory with the applied filter"}),position:"top"},r.a.createElement("div",null,r.a.createElement(O.a,{onClick:t,"aria-label":a._({id:"Smart Inventory"}),variant:"secondary",isDisabled:n},a._({id:"Smart Inventory"}))))})),Ub=R("host",{page:1,page_size:20,order_by:"name"});var Gb=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.g)(),i=Object(c.h)(),l=Object(c.j)(),o=Object(n.useState)([]),s=Object(f.a)(o,2),u=s[0],d=s[1],m=N(Ub,i.search),v={};Object.keys(m).forEach((function(e){Ub.defaultParams[e]||(v[e]=m[e])}));var _=Object.keys(v).length>0,h=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(Ub,i.search),e.next=3,Promise.all([Xe.read(r),Xe.readOptions()]);case 3:return l=e.sent,e.abrupt("return",{hosts:l[0].data.results,count:l[0].data.count,actions:l[1].data.actions,relatedSearchableKeys:((null===(t=l[1])||void 0===t||null===(a=t.data)||void 0===a?void 0:a.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=l[1].data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=l[1].data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 5:case"end":return e.stop()}}),e)}))),[i]),{hosts:[],count:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),E=h.result,y=E.hosts,g=E.count,O=E.actions,j=E.relatedSearchableKeys,k=E.searchableKeys,w=h.error,C=h.isLoading,S=h.request;Object(n.useEffect)((function(){S()}),[S]);var x=u.length===y.length&&u.length>0,T=en(Object(n.useCallback)((function(){return Promise.all(u.map((function(e){return Xe.destroy(e.id)})))}),[u]),{qsConfig:Ub,allItemsSelected:x,fetchItems:S}),I=T.isLoading,R=T.deleteItems,D=T.deletionError,P=T.clearDeletionError,U=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:d([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){d(e?Object(A.a)(y):[])},q=function(e){u.some((function(t){return t.id===e.id}))?d(u.filter((function(t){return t.id!==e.id}))):d(u.concat(e))},F=O&&Object.prototype.hasOwnProperty.call(O,"POST");return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:w,hasContentLoading:C||I,items:y,itemCount:g,pluralizedItemName:t._({id:"Hosts"}),qsConfig:Ub,onRowClick:q,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:k,toolbarRelatedSearchableKeys:j,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:x,onSelectAll:G,qsConfig:Ub,additionalControls:[].concat(Object(A.a)(F?[r.a.createElement(Po,{key:"add",linkTo:"".concat(l.url,"/add")})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:U,itemsToDelete:u,pluralizedItemName:t._({id:"Hosts"})})],Object(A.a)(F?[r.a.createElement(Pb,{isDisabled:!_,onClick:function(){a.push("/inventories/smart_inventory/add?host_filter=".concat(encodeURIComponent(L(v))))}})]:[]))}))},renderItem:function(e){return r.a.createElement(Db,{key:e.id,host:e,detailUrl:"".concat(l.url,"/").concat(e.id,"/details"),isSelected:u.some((function(t){return t.id===e.id})),onSelect:function(){return q(e)}})},emptyStateControls:F?r.a.createElement(Po,{key:"add",linkTo:"".concat(l.url,"/add")}):null})),D&&r.a.createElement(Zt,{isOpen:D,variant:"error",title:t._({id:"Error!"}),onClose:P},t._({id:"Failed to delete one or more hosts."}),r.a.createElement(ua,{error:D})))})),qb=R("instance-groups",{page:1,page_size:5,order_by:"name"});function Fb(e){var t=e.value,a=e.onChange,i=e.tooltip,l=e.className,o=e.required,c=e.history,s=e.i18n,u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(qb,c.location.search),e.next=3,Promise.all([Ze.read(n),Ze.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0].data,o=i[1],e.abrupt("return",{instanceGroups:l.results,count:l.count,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[c.location]),{instanceGroups:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),d=u.result,m=d.instanceGroups,v=d.count,_=d.relatedSearchableKeys,h=d.searchableKeys,E=u.request,y=u.error,g=u.isLoading;return Object(n.useEffect)((function(){E()}),[E]),r.a.createElement(Wi.a,{className:l,label:s._({id:"Instance Groups"}),labelIcon:i&&r.a.createElement(gi,{content:i}),fieldId:"org-instance-groups"},r.a.createElement(Rc,{id:"org-instance-groups",header:s._({id:"Instance Groups"}),value:t,onChange:a,qsConfig:qb,multiple:!0,required:o,isLoading:g,renderOptionsList:function(e){var t=e.state,a=e.dispatch,n=e.canDelete;return r.a.createElement(Cc,{value:t.selectedItems,options:m,optionCount:v,searchColumns:[{name:s._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:s._({id:"Credential Name"}),key:"credential__name__icontains"}],sortColumns:[{name:s._({id:"\u540d\u79f0"}),key:"name"}],searchableKeys:h,relatedSearchableKeys:_,multiple:t.multiple,header:s._({id:"Instance Groups"}),name:"instanceGroups",qsConfig:qb,readOnly:!n,selectItem:function(e){return a({type:"SELECT_ITEM",item:e})},deselectItem:function(e){return a({type:"DESELECT_ITEM",item:e})}})}}),r.a.createElement(Nc,{error:y}))}Fb.defaultProps={tooltip:"",className:"",required:!1};var zb=Object(u.withI18n)()(Object(c.k)(Fb)),Mb=R("inventory",{page:1,page_size:5,order_by:"name",role_level:"use_role"});function Kb(e){var t=e.value,a=e.onChange,i=e.onBlur,l=e.i18n,o=e.history,c=e.required,s=e.isPromptableField,u=e.fieldId,d=e.promptId,m=e.promptName,v=e.isOverrideDisabled,_=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(Mb,o.location.search),e.next=3,Promise.all([Qe.read(n),Qe.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0].data,c=i[1],e.abrupt("return",{inventories:l.results,count:l.count,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=c.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable})),canEdit:Boolean(c.data.actions.POST)||v});case 8:case"end":return e.stop()}}),e)}))),[o.location]),{inventories:[],count:0,relatedSearchableKeys:[],searchableKeys:[],canEdit:!1}),h=_.result,E=h.inventories,y=h.count,g=h.relatedSearchableKeys,O=h.searchableKeys,j=h.canEdit,k=_.request,w=_.error,C=_.isLoading;return Object(n.useEffect)((function(){k()}),[k]),s?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ru,{fieldId:u,isRequired:c,label:l._({id:"\u6e05\u5355"}),promptId:d,promptName:m,isDisabled:!j,tooltip:l._({id:"Select the inventory containing the hosts you want this job to manage."})},r.a.createElement(Rc,{id:"inventory-lookup",header:l._({id:"\u6e05\u5355"}),value:t,onChange:a,onBlur:i,required:c,isLoading:C,isDisabled:!j,qsConfig:Mb,renderOptionsList:function(e){var t=e.state,a=e.dispatch,n=e.canDelete;return r.a.createElement(Cc,{value:t.selectedItems,options:E,optionCount:y,searchColumns:[{name:l._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:l._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:l._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:l._({id:"\u540d\u79f0"}),key:"name"}],searchableKeys:O,relatedSearchableKeys:g,multiple:t.multiple,header:l._({id:"\u6e05\u5355"}),name:"inventory",qsConfig:Mb,readOnly:!n,selectItem:function(e){return a({type:"SELECT_ITEM",item:e})},deselectItem:function(e){return a({type:"DESELECT_ITEM",item:e})}})}}),r.a.createElement(Nc,{error:w}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Rc,{id:"inventory-lookup",header:l._({id:"\u6e05\u5355"}),value:t,onChange:a,onBlur:i,required:c,isLoading:C,isDisabled:!j,qsConfig:Mb,renderOptionsList:function(e){var t=e.state,a=e.dispatch,n=e.canDelete;return r.a.createElement(Cc,{value:t.selectedItems,options:E,optionCount:y,searchColumns:[{name:l._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:l._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:l._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:l._({id:"\u540d\u79f0"}),key:"name"}],searchableKeys:O,relatedSearchableKeys:g,multiple:t.multiple,header:l._({id:"\u6e05\u5355"}),name:"inventory",qsConfig:Mb,readOnly:!n,selectItem:function(e){return a({type:"SELECT_ITEM",item:e})},deselectItem:function(e){return a({type:"DESELECT_ITEM",item:e})}})}}),r.a.createElement(Nc,{error:w}))}Kb.defaultProps={value:null,required:!1,isOverrideDisabled:!1};var Vb=Object(u.withI18n)()(Object(c.k)(Kb)),Hb=R("project",{page:1,page_size:5,order_by:"name",role_level:"use_role"});function Bb(e){var t=e.helperTextInvalid,a=e.autoPopulate,i=e.i18n,l=e.isValid,o=e.onChange,c=e.required,s=e.tooltip,u=e.value,d=e.onBlur,m=e.history,v=e.isOverrideDisabled,_=sc(o),h=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(Hb,m.location.search),e.next=3,Promise.all([ut.read(r),ut.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0].data,c=l[1],a&&_(o.results),e.abrupt("return",{count:o.count,projects:o.results,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable})),canEdit:Boolean(c.data.actions.POST)||v});case 9:case"end":return e.stop()}}),e)}))),[a,_,m.location.search]),{count:0,projects:[],relatedSearchableKeys:[],searchableKeys:[],canEdit:!1}),E=h.result,y=E.projects,g=E.count,O=E.relatedSearchableKeys,j=E.searchableKeys,k=E.canEdit,w=h.request,C=h.error,S=h.isLoading;return Object(n.useEffect)((function(){w()}),[w]),r.a.createElement(Wi.a,{fieldId:"project",helperTextInvalid:t,isRequired:c,validated:l?"default":"error",label:i._({id:"\u9879\u76ee"}),labelIcon:s&&r.a.createElement(gi,{content:s})},r.a.createElement(Rc,{id:"project",header:i._({id:"\u9879\u76ee"}),name:"project",value:u,onBlur:d,onChange:o,required:c,isLoading:S,isDisabled:!k,qsConfig:Hb,renderOptionsList:function(e){var t=e.state,a=e.dispatch,n=e.canDelete;return r.a.createElement(Cc,{value:t.selectedItems,searchColumns:[{name:i._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:i._({id:"\u7c7b\u578b"}),key:"or__scm_type",options:[["",i._({id:"Manual"})],["git",i._({id:"Git"})],["svn",i._({id:"Subversion"})],["archive",i._({id:"Remote Archive"})],["insights",i._({id:"Red Hat Insights"})]]},{name:i._({id:"Source Control URL"}),key:"scm_url__icontains"},{name:i._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"},{name:i._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"}],sortColumns:[{name:i._({id:"\u540d\u79f0"}),key:"name"}],searchableKeys:j,relatedSearchableKeys:O,options:y,optionCount:g,multiple:t.multiple,header:i._({id:"\u9879\u76ee"}),name:"project",qsConfig:Hb,readOnly:!n,selectItem:function(e){return a({type:"SELECT_ITEM",item:e})},deselectItem:function(e){return a({type:"DESELECT_ITEM",item:e})}})}}),r.a.createElement(Nc,{error:C}))}Bb.defaultProps={autoPopulate:!1,helperTextInvalid:"",isValid:!0,onBlur:function(){},required:!1,tooltip:"",value:null,isOverrideDisabled:!1};var Wb=Object(u.withI18n)()(Object(c.k)(Bb)),Jb=R("credentials",{page:1,page_size:5,order_by:"name"});function Yb(e,t){return Xb.apply(this,arguments)}function Xb(){return(Xb=Object(b.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.credential_type=a||1,e.next=3,We.read(t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zb(e){var t=e.value,a=e.onChange,i=e.onError,l=e.history,o=e.i18n,c=Object(n.useState)(null),s=Object(f.a)(c,2),u=s[0],d=s[1],m=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.loadAllTypes();case 2:return t=e.sent,a=t.find((function(e){return"ssh"===e.kind}))||t[0],d(a),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),[]),[]),v=m.result,_=m.request,h=m.error,E=m.isLoading;Object(n.useEffect)((function(){_()}),[_]);var y=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,o,c,s,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return",{credentials:[],count:0});case 2:return n=N(Jb,l.location.search),e.next=5,Promise.all([Yb(n,u.id),We.readOptions()]);case 5:return r=e.sent,i=Object(f.a)(r,2),o=i[0],c=o.results,s=o.count,d=i[1],c.map((function(e){var t;return"vault"===e.kind&&(null===(t=e.inputs)||void 0===t?void 0:t.vault_id)?(e.label="".concat(e.name," | ").concat(e.inputs.vault_id),e):(e.label="".concat(e.name),e)})),e.abrupt("return",{credentials:c,credentialsCount:s,relatedSearchableKeys:((null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=d.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=d.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 13:case"end":return e.stop()}}),e)}))),[u,l.location]),{credentials:[],credentialsCount:0,relatedSearchableKeys:[],searchableKeys:[]}),g=y.result,O=g.credentials,j=g.credentialsCount,k=g.relatedSearchableKeys,w=g.searchableKeys,C=y.request,S=y.error,x=y.isLoading;Object(n.useEffect)((function(){C()}),[C]),Object(n.useEffect)((function(){(h||S)&&i(h||S)}),[h,S,i]);var T=function(e){var t=e.item,a=e.removeItem,n=e.canDelete;return r.a.createElement(du,{key:t.id,onClick:function(){return a(t)},isReadOnly:!n,credential:t})},I="vault"===(null===u||void 0===u?void 0:u.kind);return r.a.createElement(Rc,{id:"multiCredential",header:o._({id:"Credentials"}),value:t,multiple:!0,onChange:a,qsConfig:Jb,isLoading:E||x,renderItemChip:T,renderOptionsList:function(e){var t=e.state,a=e.dispatch,i=e.canDelete;return r.a.createElement(n.Fragment,null,I&&r.a.createElement(Qb,{variant:"info",isInline:!0,title:o._({id:"You cannot select multiple vault credentials with the same vault ID. Doing so will automatically deselect the other with the same vault ID."})}),v&&v.length>0&&r.a.createElement(ef,null,r.a.createElement(tf,null,o._({id:"Selected Category"})),r.a.createElement(af,{id:"multiCredentialsLookUp-select",label:o._({id:"Selected Category"}),data:v.map((function(e){return{key:e.id,value:e.id,label:e.name,isDisabled:!1}})),value:u&&u.id,onChange:function(e,t){d(v.find((function(e){return e.id===parseInt(t,10)})))}})),r.a.createElement(Cc,{value:t.selectedItems,options:O,optionCount:j,searchColumns:[{name:o._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:o._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:o._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:o._({id:"\u540d\u79f0"}),key:"name"}],searchableKeys:w,relatedSearchableKeys:k,multiple:I,header:o._({id:"Credentials"}),displayKey:I?"label":"name",name:"credentials",qsConfig:Jb,readOnly:!i,selectItem:function(e){var n=t.selectedItems.filter((function(t){return I?!function(t){var a,n,r;return void 0!==(null===t||void 0===t||null===(a=t.inputs)||void 0===a?void 0:a.vault_id)&&(null===t||void 0===t||null===(n=t.inputs)||void 0===n?void 0:n.vault_id)===(null===e||void 0===e||null===(r=e.inputs)||void 0===r?void 0:r.vault_id)}(t):!(t.credential_type===e.credential_type)}));return n.push(e),a({type:"SET_SELECTED_ITEMS",selectedItems:n})},deselectItem:function(e){return a({type:"DESELECT_ITEM",item:e})},renderItemChip:T}))}})}Zb.defaultProps={value:[]};var $b=Object(u.withI18n)()(Object(c.k)(Zb)),Qb=Object(j.b)(Kl.a).withConfig({displayName:"MultiCredentialsLookup___StyledAlert",componentId:"sc-3dhbe8-0"})(["margin-bottom:20px;"]),ef=Object(j.b)(hn.a).withConfig({displayName:"MultiCredentialsLookup___StyledToolbarItem",componentId:"sc-3dhbe8-1"})([" display:flex;align-items:center;"]),tf=Object(j.b)("div").withConfig({displayName:"MultiCredentialsLookup___StyledDiv",componentId:"sc-3dhbe8-2"})(["flex:0 0 25%;margin-right:32px"]),af=Object(j.b)(Fc).withConfig({displayName:"MultiCredentialsLookup___StyledAnsibleSelect",componentId:"sc-3dhbe8-3"})(["flex:1 1 75%;"]),nf=R("credentials",{page:1,page_size:5,order_by:"name"});function rf(e){var t=e.helperTextInvalid,a=e.label,i=e.isValid,l=e.onBlur,o=e.onChange,s=e.required,u=e.credentialTypeId,m=e.credentialTypeKind,v=e.credentialTypeNamespace,_=e.value,h=e.i18n,E=e.tooltip,y=e.isDisabled,g=e.autoPopulate,O=e.multiple,j=Object(c.g)(),k=sc(o),w=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,s,b,_,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(nf,j.location.search),r=u?{credential_type:u}:{},i=m?{credential_type__kind:m}:{},l=v?{credential_type__namespace:v}:{},e.next=6,Promise.all([We.read(F(n,Object(d.a)(Object(d.a)(Object(d.a)({},r),i),l))),We.readOptions()]);case 6:return o=e.sent,c=Object(f.a)(o,2),s=c[0].data,b=c[1],g&&k(s.results),_=Object.keys((null===(t=b.data.actions)||void 0===t?void 0:t.GET)||{}).filter((function(e){var t;return null===(t=b.data.actions)||void 0===t?void 0:t.GET[e].filterable})),(h=_.indexOf("type"))&&(_[h]="credential_type__kind"),e.abrupt("return",{count:s.count,credentials:s.results,relatedSearchableKeys:((null===b||void 0===b||null===(a=b.data)||void 0===a?void 0:a.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:_});case 15:case"end":return e.stop()}}),e)}))),[g,k,u,m,v,j.location.search]),{count:0,credentials:[],relatedSearchableKeys:[],searchableKeys:[]}),C=w.result,S=C.count,x=C.credentials,T=C.relatedSearchableKeys,I=C.searchableKeys,A=w.error,R=w.request;return Object(n.useEffect)((function(){R()}),[R]),r.a.createElement(Wi.a,{fieldId:"credential",isRequired:s,validated:i?"default":"error",label:a,labelIcon:E&&r.a.createElement(gi,{content:E}),helperTextInvalid:t},r.a.createElement(Rc,{id:"credential",header:a,value:_,onBlur:l,onChange:o,required:s,qsConfig:nf,isDisabled:y,multiple:O,renderOptionsList:function(e){var t=e.state,n=e.dispatch,i=e.canDelete;return r.a.createElement(Cc,{value:t.selectedItems,options:x,optionCount:S,header:a,qsConfig:nf,searchColumns:[{name:h._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:h._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:h._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:h._({id:"\u540d\u79f0"}),key:"name"}],searchableKeys:I,relatedSearchableKeys:T,readOnly:!i,name:"credential",selectItem:function(e){return n({type:"SELECT_ITEM",item:e})},deselectItem:function(e){return n({type:"DESELECT_ITEM",item:e})},multiple:O})}}),r.a.createElement(Nc,{error:A}))}rf.defaultProps={credentialTypeId:"",credentialTypeKind:"",helperTextInvalid:"",isValid:!0,multiple:!1,onBlur:function(){},required:!1,value:null,isDisabled:!1,autoPopulate:!1};var lf=Object(u.withI18n)()(rf),of=R("applications",{page:1,page_size:5,order_by:"name"});function cf(e){var t=e.i18n,a=e.onChange,i=e.value,l=e.label,o=Object(c.h)(),s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,c,s,u,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(of,o.search),e.next=3,Promise.all([Me.read(r),Me.readOptions]);case 3:return i=e.sent,l=Object(f.a)(i,2),c=l[0].data,s=c.results,u=c.count,d=l[1],e.abrupt("return",{applications:s,itemCount:u,relatedSearchableKeys:((null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===d||void 0===d||null===(a=d.data)||void 0===a||null===(n=a.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=d.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 10:case"end":return e.stop()}}),e)}))),[o]),{applications:[],itemCount:0,relatedSearchableKeys:[],searchableKeys:[]}),u=s.error,d=s.result,m=d.applications,v=d.itemCount,_=d.relatedSearchableKeys,h=d.searchableKeys,E=s.request;return Object(n.useEffect)((function(){E()}),[E]),r.a.createElement(Wi.a,{fieldId:"application",label:l},r.a.createElement(Rc,{id:"application",header:t._({id:"Application"}),value:i,onChange:a,qsConfig:of,renderOptionsList:function(e){var a=e.state,n=e.dispatch,i=e.canDelete;return r.a.createElement(Cc,{value:a.selectedItems,options:m,optionCount:v,header:t._({id:"Applications"}),qsConfig:of,searchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"}],sortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"},{name:t._({id:"\u5df2\u521b\u5efa"}),key:"created"},{name:t._({id:"\u7ec4\u7ec7"}),key:"organization"},{name:t._({id:"\u63cf\u8ff0"}),key:"description"}],searchableKeys:h,relatedSearchableKeys:_,readOnly:!i,name:"application",selectItem:function(e){return n({type:"SELECT_ITEM",item:e})},deselectItem:function(e){return n({type:"DESELECT_ITEM",item:e})}})}}),r.a.createElement(Nc,{error:u}))}cf.defaultProps={value:null};var sf=Object(u.withI18n)()(Object(c.k)(cf));var uf,df,mf=Object(u.withI18n)()((function(e){var t=e.item,a=e.i18n;return r.a.createElement(ho.a,{"aria-labelledby":"items-list-item-".concat(t.id),key:t.id,id:"".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name","aria-label":a._({id:"name"})},r.a.createElement(Rt.a,null,r.a.createElement(s.b,{to:{pathname:t.url}},r.a.createElement("b",{id:"items-list-item-".concat(t.id)},t.name)))),r.a.createElement(ko,{key:"inventory","aria-label":a._({id:"inventory"})},t.summary_fields.inventory.name)]})))}));function pf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===e?{}:e.replace(/^\?/,"").replace(/&/g," and ").split(/ and | or /).map((function(e){return e.split("=")})).reduce((function(e,t){var a=Object(f.a)(t,2),n=a[0],r=a[1],i=decodeURIComponent(n),l=decodeURIComponent(r);return void 0===e[i]?e[i]=l:Array.isArray(e[i])?e[i]=[].concat(Object(A.a)(e[i]),[l]):e[i]=[e[i],l],e}),{})}function bf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).flatMap((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"=").concat(e)})):"".concat(t,"=").concat(e[t])})).join(" and ")}var ff=j.b.div(uf||(uf=Object(v.a)(["\n  --pf-c-form-control--Height: auto;\n  .pf-c-chip-group {\n    margin-right: 8px;\n  }\n"]))),vf=j.b.div(df||(df=Object(v.a)(["\n  .pf-c-toolbar__content {\n    padding: 0 !important;\n  }\n"]))),_f=R("smart_hosts",{page:1,page_size:5,order_by:"name"},["id","page","page_size","inventory"]);function hf(e){var t=e.helperTextInvalid,a=e.i18n,i=e.isValid,l=e.isDisabled,o=e.onBlur,s=e.onChange,u=e.organizationId,m=e.value,v=Object(c.g)(),_=Object(c.h)(),h=Object(n.useState)({}),E=Object(f.a)(h,2),y=E[0],g=E[1],j=Object(n.useState)(""),k=Object(f.a)(j,2),w=k[0],C=k[1],S=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],r=t[1];return{isModalOpen:a,toggleModal:function(){r(!a)},closeModal:function(){r(!1)}}}(),x=S.isModalOpen,T=S.toggleModal,I=S.closeModal,A=function(e){return[{name:e._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:e._({id:"ID"}),key:"id"},{name:e._({id:"Group"}),key:"groups__name__icontains"},{name:e._({id:"Inventory ID"}),key:"inventory"},{name:e._({id:"Enabled"}),key:"enabled",isBoolean:!0},{name:e._({id:"Instance ID"}),key:"instance_id"},{name:e._({id:"Last job"}),key:"last_job"},{name:e._({id:"Insights system ID"}),key:"insights_system_id"}]}(a),R=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=N(_f,_.search),e.next=3,Promise.all([Xe.read(F(a,{inventory__organization:t})),Xe.readOptions()]);case 3:return n=e.sent,r=Object(f.a)(n,2),i=r[0].data,l=r[1].data,e.abrupt("return",{count:i.count,hosts:i.results,relatedSearchableKeys:((null===l||void 0===l?void 0:l.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===l||void 0===l?void 0:l.actions.GET)||{}).filter((function(e){var t;return null===(t=l.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[_.search]),{count:0,hosts:[],relatedSearchableKeys:[],searchableKeys:[]}),D=R.result,L=D.count,P=D.hosts,U=D.relatedSearchableKeys,G=D.searchableKeys,q=R.error,z=R.request,M=R.isLoading,K=Qa(q),V=K.error,H=K.dismissError;function B(e){var t=pf(e),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.assign({},t),n={};return Object.keys(a).forEach((function(t){var r=t;t.startsWith(e.namespace)&&(r=t.substr(e.namespace.length+1)),n[r]=a[t]})),n}(_f,t);return bf(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.assign({},t),n=Object.keys(e.defaultParams);return n.forEach((function(e){delete a[e]})),a}(_f,a))}Object(n.useEffect)((function(){x&&u&&(H(),z(u))}),[z,u,x]),Object(n.useEffect)((function(){var e=pf(m);C(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return 0===Object.keys(t).length?"":Object.keys(t).flatMap((function(a){return Array.isArray(t[a])?t[a].map((function(t){return"".concat(e.namespace,".").concat(encodeURIComponent(a),"=").concat(encodeURIComponent(t))})):"".concat(e.namespace,".").concat(encodeURIComponent(a),"=").concat(encodeURIComponent(t[a]))})).join("&")}(_f,e)),g(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).reduce((function(t,a){var n=a.replace("or__",""),r=[];return Array.isArray(e[a])?e[a].forEach((function(e){return r.push({key:"".concat(a,":").concat(e),node:"".concat(e)})})):r.push({key:"".concat(a,":").concat(e[a]),node:"".concat(e[a])}),t[n]={key:n,label:e[a],chips:[].concat(r)},t}),{});return t}(e))}),[m]);var W=function(){v.replace({pathname:"".concat(_.pathname),search:w}),T()},J=function(){I(),v.replace({pathname:"".concat(_.pathname),search:""})},Y=function(){return r.a.createElement(An.a,{onBlur:o},r.a.createElement(O.a,{"aria-label":a._({id:"Search"}),id:"host-filter",isDisabled:l,onClick:W,variant:O.b.control},r.a.createElement(On.a,null)),r.a.createElement(ff,{className:"pf-c-form-control"},A.map((function(e){var t,a,n,i,l=e.name,o=e.key;return r.a.createElement(fc,{categoryName:l,key:l,numChips:5,totalChips:(null===(t=y[o])||void 0===t||null===(a=t.chips)||void 0===a?void 0:a.length)||0},null===(n=y[o])||void 0===n||null===(i=n.chips)||void 0===i?void 0:i.map((function(e){return r.a.createElement(uc.a,{key:e.key,isReadOnly:!0},e.node)})))}))))};return r.a.createElement(Wi.a,{fieldId:"host-filter",helperTextInvalid:t,isRequired:!0,label:a._({id:"Smart host filter"}),validated:i?"default":"error",labelIcon:r.a.createElement(gi,{content:a._({id:'Populate the hosts for this inventory by using a search filter. Example: ansible_facts.ansible_distribution:"RedHat". Refer to the Ansible Tower documentation for further syntax and examples.'})})},l?r.a.createElement(Ea.a,{content:a._({id:"Please select an organization before editing the host filter"})},Y()):Y(),r.a.createElement(Ft.a,{"aria-label":a._({id:"Lookup modal"}),isOpen:x,onClose:J,title:a._({id:"Perform a search to define a host filter"}),variant:"large",actions:[r.a.createElement(O.a,{isDisabled:!_.search,key:"select",onClick:function(){var e=B(_.search);s(e),I(),v.replace({pathname:"".concat(_.pathname),search:""})},variant:"primary"},a._({id:"\u9009\u62e9"})),r.a.createElement(O.a,{key:"cancel",variant:"link",onClick:J},a._({id:"\u53d6\u6d88"}))]},r.a.createElement(vf,null,r.a.createElement(To,{contentError:V,hasContentLoading:M,itemCount:L,items:P,onRowClick:function(){},pluralizedItemName:a._({id:"hosts"}),qsConfig:_f,renderItem:function(e){return r.a.createElement(mf,{key:e.id,item:Object(d.a)(Object(d.a)({},e),{},{url:"/hosts/".concat(e.id,"/details")})})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{fillWidth:!0}))},toolbarSearchColumns:A,toolbarSortColumns:[{name:a._({id:"\u540d\u79f0"}),key:"name"},{name:a._({id:"\u5df2\u521b\u5efa"}),key:"created"},{name:a._({id:"\u66f4\u6539"}),key:"modified"}],toolbarSearchableKeys:G,toolbarRelatedSearchableKeys:U}))),r.a.createElement(Nc,{error:V}))}hf.defaultProps={isValid:!0,onBlur:function(){},onChange:function(){},organizationId:null,value:""};var Ef=Object(u.withI18n)()(Object(c.k)(hf)),yf=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.host,i=Object(n.useState)(a?a.summary_fields.inventory:""),l=Object(f.a)(i,2),o=l[0],c=l[1],s=Object(Va.b)({name:"inventory",validate:Yo(t._({id:"Select a value for this field"}),t)}),u=Object(f.a)(s,3),d=u[1],m=u[2];return r.a.createElement(Wi.a,{label:t._({id:"\u6e05\u5355"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Select the inventory that this host will belong to."})}),isRequired:!0,fieldId:"inventory-lookup",validated:d.touched&&d.error?"error":"default",helperTextInvalid:d.error},r.a.createElement(Vb,{fieldId:"inventory-lookup",value:o,onBlur:function(){return m.setTouched()},tooltip:t._({id:"Select the inventory that this host will belong to."}),isValid:!d.touched||!d.error,helperTextInvalid:d.error,onChange:function(e){m.setValue(e.id),c(e)},required:!0,touched:d.touched,error:d.error}))})),gf=function(e){var t=e.handleCancel,a=e.handleSubmit,n=e.host,i=e.isInventoryVisible,l=e.i18n,o=e.submitError;return r.a.createElement(Va.a,{initialValues:{name:n.name,description:n.description,inventory:n.inventory||"",variables:n.variables},onSubmit:a},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(Tl,{id:"host-name",name:"name",type:"text",label:l._({id:"\u540d\u79f0"}),validate:Yo(null,l),isRequired:!0}),r.a.createElement(Tl,{id:"host-description",name:"description",type:"text",label:l._({id:"\u63cf\u8ff0"})}),i&&r.a.createElement(yf,{host:n}),r.a.createElement(Hl,null,r.a.createElement(ro,{id:"host-variables",name:"variables",label:l._({id:"\u53d8\u91cf"})})),o&&r.a.createElement(Yl,{error:o}),r.a.createElement(cc,{onCancel:t,onSubmit:e.handleSubmit})))}))};gf.defaultProps={host:{name:"",description:"",inventory:void 0,variables:"---\n",summary_fields:{inventory:null}},isInventoryVisible:!0,submitError:null};var Of=Object(u.withI18n)()(gf);var jf=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],i=t[1],l=Object(c.g)(),o=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe.create(t);case 3:a=e.sent,n=a.data,l.push("/hosts/".concat(n.id,"/details")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Of,{handleSubmit:o,handleCancel:function(){l.push("/hosts")},submitError:a}))))};var kf=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.host,i=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xe.readFacts(a.id)]);case 2:return t=e.sent,n=Object(f.a)(t,1),r=n[0].data,e.abrupt("return",JSON.stringify(r,null,4));case 6:case"end":return e.stop()}}),e)}))),[a]),"{}"),l=i.result,o=i.isLoading,c=i.error,s=i.request;return Object(n.useEffect)((function(){s()}),[s]),o?r.a.createElement(Nr,null):c?r.a.createElement(za,{error:c}):r.a.createElement(Bc,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(_l,{label:t._({id:"Facts"}),fullHeight:!0,value:l})))}));var wf=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.host,i=a.created,l=a.description,o=a.id,u=a.modified,m=a.name,v=a.variables,_=a.summary_fields,h=_.inventory,E=_.recent_jobs,y=_.created_by,g=_.modified_by,j=_.user_capabilities,k=Object(n.useState)(!1),w=Object(f.a)(k,2),C=w[0],S=w[1],x=Object(n.useState)(!1),T=Object(f.a)(x,2),I=T[0],A=T[1],R=Object(c.g)(),N=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,Xe.destroy(o);case 4:R.push("/hosts"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),A(e.t0);case 10:return e.prev=10,S(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(){return e.apply(this,arguments)}}();if(!C&&I)return r.a.createElement(Zt,{isOpen:I,variant:"error",title:t._({id:"Error!"}),onClose:function(){return A(!1)}},t._({id:"Failed to delete {name}.",values:{name:m}}),r.a.createElement(ua,{error:I}));var D=E.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"job"})}));return r.a.createElement(Bc,null,r.a.createElement(Cf,{host:a}),r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:t._({id:"\u540d\u79f0"}),value:m,dataCy:"host-name"}),(null===D||void 0===D?void 0:D.length)>0&&r.a.createElement(xi,{label:t._({id:"Activity"}),value:r.a.createElement(Op,{jobs:D})}),r.a.createElement(xi,{label:t._({id:"\u63cf\u8ff0"}),value:l}),r.a.createElement(xi,{label:t._({id:"\u6e05\u5355"}),dataCy:"host-inventory",value:r.a.createElement(s.b,{to:"/inventories/inventory/".concat(h.id,"/details")},h.name)}),r.a.createElement(Li,{date:i,label:t._({id:"\u5df2\u521b\u5efa"}),user:y,dataCy:"host-created-by"}),r.a.createElement(Li,{date:u,label:t._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),user:g,dataCy:"host-last-modified-by"}),r.a.createElement(_l,{label:t._({id:"\u53d8\u91cf"}),rows:4,value:v})),r.a.createElement(Yc,null,(null===j||void 0===j?void 0:j.edit)&&r.a.createElement(O.a,{"aria-label":t._({id:"edit"}),component:s.b,to:"/hosts/".concat(o,"/edit")},t._({id:"Edit"})),(null===j||void 0===j?void 0:j.delete)&&r.a.createElement(Qc,{onConfirm:function(){return N()},modalTitle:t._({id:"Delete Host"}),name:m})),I&&r.a.createElement(Zt,{isOpen:I,variant:"error",title:t._({id:"Error!"}),onClose:function(){return A(null)}},t._({id:"Failed to delete host."}),r.a.createElement(ua,{error:I})))})),Cf=Object(j.b)(Ab).withConfig({displayName:"HostDetail___StyledHostToggle",componentId:"sc-1jquccm-0"})(["padding-bottom:40px"]);var Sf=function(e){var t=e.host,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],o=i[1],s="/hosts/".concat(t.id,"/details"),u=Object(c.g)(),d=function(){var e=Object(b.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe.update(t.id,a);case 3:u.push(s),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(Of,{host:t,handleSubmit:d,handleCancel:function(){u.push(s)},submitError:l}))},xf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name";return R("associate",{page:1,page_size:5,order_by:e})};var Tf,If=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.header,i=void 0===a?t._({id:"Items"}):a,l=e.title,o=void 0===l?t._({id:"Select Items"}):l,s=e.onClose,u=e.onAssociate,d=e.fetchRequest,m=e.optionsRequest,v=e.isModalOpen,_=void 0!==v&&v,h=e.displayKey,E=void 0===h?"name":h,y=Object(c.g)(),g=Uo([]),j=g.selected,k=g.handleSelect,w=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(xf(E),y.location.search),e.next=3,Promise.all([d(n),m()]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0].data,o=l.count,c=l.results,s=i[1],e.abrupt("return",{items:c,itemCount:o,relatedSearchableKeys:((null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=s.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=s.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 10:case"end":return e.stop()}}),e)}))),[d,m,y.location.search,E]),{items:[],itemCount:0,relatedSearchableKeys:[],searchableKeys:[]}),C=w.request,S=w.result,x=S.items,T=S.itemCount,I=S.relatedSearchableKeys,A=S.searchableKeys,R=w.error,D=w.isLoading;Object(n.useEffect)((function(){C()}),[C]);var L=function(){var e=y.location.search.replace(/^\?/,"").split("&"),t=xf(E).namespace,a=e.filter((function(e){return!e.startsWith("".concat(t,"."))}));y.replace("".concat(y.location.pathname,"?").concat(a.join("&")))},P=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(j);case 2:L(),s();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){L(),s()};return r.a.createElement(n.Fragment,null,r.a.createElement(Ft.a,{variant:"large",title:o,"aria-label":t._({id:"Association modal"}),isOpen:_,onClose:U,actions:[r.a.createElement(O.a,{"aria-label":t._({id:"Save"}),key:"select",variant:"primary",onClick:P,isDisabled:0===j.length},t._({id:"Save"})),r.a.createElement(O.a,{"aria-label":t._({id:"\u53d6\u6d88"}),key:"cancel",variant:"secondary",onClick:U},t._({id:"\u53d6\u6d88"}))]},r.a.createElement(Cc,{displayKey:E,contentError:R,deselectItem:k,header:i,isLoading:D,multiple:!0,optionCount:T,options:x,qsConfig:xf(E),readOnly:!1,selectItem:k,value:j,searchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"".concat(E,"__icontains"),isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"".concat(E)}],searchableKeys:A,relatedSearchableKeys:I})))})),Af=j.b.div(Tf||(Tf=Object(v.a)(["\n  margin-bottom: var(--pf-global--spacer--xl);\n"])));function Rf(e){var t=e.i18n,a=e.itemsToDisassociate,i=void 0===a?[]:a,l=e.modalNote,o=void 0===l?"":l,c=e.modalTitle,s=void 0===c?t._({id:"Disassociate?"}):c,u=e.onDisassociate,d=e.verifyCannotDisassociate,m=void 0===d||d,p=Object(n.useState)(!1),b=Object(f.a)(p,2),v=b[0],_=b[1],h=Object(n.useContext)(pr),E=h.isKebabified,y=h.onKebabModalChange;function g(e){var t,a;return!(null===(t=e.summary_fields)||void 0===t||null===(a=t.user_capabilities)||void 0===a?void 0:a.delete)}Object(n.useEffect)((function(){E&&y(v)}),[E,v,y]);var j=!1;return j=m?0===i.length||i.some(g):0===i.length,r.a.createElement(r.a.Fragment,null,E?r.a.createElement(ka.a,{key:"add","aria-label":t._({id:"disassociate"}),isDisabled:j,component:"button",onClick:function(){return _(!0)}},t._({id:"Disassociate"})):r.a.createElement(Ea.a,{content:function(){if(m){var e=i.filter(g).map((function(e){return e.name})).join(", ");if(i.some(g))return r.a.createElement("div",null,t._({id:"You do not have permission to disassociate the following: {itemsUnableToDisassociate}",values:{itemsUnableToDisassociate:e}}))}return i.length?t._({id:"Disassociate"}):t._({id:"Select a row to disassociate"})}(),position:"top"},r.a.createElement("div",null,r.a.createElement(O.a,{variant:"secondary","aria-label":t._({id:"Disassociate"}),onClick:function(){return _(!0)},isDisabled:j},t._({id:"Disassociate"})))),v&&r.a.createElement(Zt,{isOpen:v,title:s,variant:"warning",onClose:function(){return _(!1)},actions:[r.a.createElement(O.a,{key:"disassociate",variant:"danger","aria-label":t._({id:"confirm disassociate"}),onClick:function(){u(),_(!1)}},t._({id:"Disassociate"})),r.a.createElement(O.a,{key:"cancel",variant:"secondary","aria-label":t._({id:"\u53d6\u6d88"}),onClick:function(){return _(!1)}},t._({id:"\u53d6\u6d88"}))]},o&&r.a.createElement(Af,null,o),r.a.createElement("div",null,t._({id:"This action will disassociate the following:"})),i.map((function(e){return r.a.createElement("span",{key:e.id},r.a.createElement("strong",null,e.hostname?e.hostname:e.name),r.a.createElement("br",null))}))))}Rf.defaultProps={itemsToDisassociate:[],modalNote:"",modalTitle:""};var Nf=Object(u.withI18n)()(Rf);var Df=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.group,n=e.inventoryId,i=e.isSelected,l=e.onSelect,o="check-action-".concat(a.id),c="/inventories/inventory/".concat(n,"/groups/").concat(a.id,"/details"),u="/inventories/inventory/".concat(n,"/groups/").concat(a.id,"/edit");return r.a.createElement(ho.a,{key:a.id,"aria-labelledby":o,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{"aria-labelledby":o,id:"select-group-".concat(a.id),checked:i,onChange:l}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"".concat(c),id:o},r.a.createElement("b",null,a.name)))]}),r.a.createElement(Fo.a,{"aria-label":"actions","aria-labelledby":o,id:o},a.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:t._({id:"Edit Group"}),position:"top"},r.a.createElement(O.a,{variant:"plain",component:s.b,to:u},r.a.createElement(Mo.a,null))))))})),Lf=R("group",{page:1,page_size:20,order_by:"name"});var Pf=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.host,i=Object(n.useState)(!1),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(c.i)().id,d=Object(c.h)().search,m=a.summary_fields.inventory.id,v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(Lf,d),e.next=3,Promise.all([Xe.readAllGroups(u,n),Xe.readGroupsOptions(u)]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0].data,o=l.count,c=l.results,s=i[1],e.abrupt("return",{groups:c,itemCount:o,actions:s.data.actions,relatedSearchableKeys:((null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=s.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=s.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 10:case"end":return e.stop()}}),e)}))),[u,d]),{groups:[],itemCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),_=v.result,h=_.groups,E=_.itemCount,y=_.actions,g=_.relatedSearchableKeys,O=_.searchableKeys,j=v.error,k=v.isLoading,w=v.request;Object(n.useEffect)((function(){w()}),[w]);var C=Uo(h),S=C.selected,x=C.isAllSelected,T=C.handleSelect,I=C.setSelected,R=en(Object(n.useCallback)((function(){return Promise.all(S.map((function(e){return Xe.disassociateGroup(u,e)})))}),[u,S]),{qsConfig:Lf,allItemsSelected:x,fetchItems:w}),D=R.isLoading,L=R.deleteItems,P=R.deletionError,U=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:I([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=Object(n.useCallback)((function(e){return Qe.readGroups(m,F(e,{not__hosts:u}))}),[m,u]),q=Object(n.useCallback)((function(){return Qe.readGroupsOptions(m)}),[m]),z=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return Xe.associateGroup(u,e.id)})));case 2:w();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,w])),M=z.request,K=z.error,V=Qa(K||P),H=V.error,B=V.dismissError,W=y&&Object.prototype.hasOwnProperty.call(y,"POST");return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:j,hasContentLoading:k||D,items:h,itemCount:E,qsConfig:Lf,onRowClick:T,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:O,toolbarRelatedSearchableKeys:g,renderItem:function(e){return r.a.createElement(Df,{key:e.id,group:e,hostId:u,inventoryId:e.summary_fields.inventory.id,isSelected:S.some((function(t){return t.id===e.id})),onSelect:function(){return T(e)}})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:x,onSelectAll:function(e){return I(e?Object(A.a)(h):[])},qsConfig:Lf,additionalControls:[].concat(Object(A.a)(W?[r.a.createElement(Po,{key:"add",onClick:function(){return s(!0)}})]:[]),[r.a.createElement(Nf,{key:"disassociate",onDisassociate:U,itemsToDisassociate:S,modalTitle:t._({id:"Disassociate group from host?"}),modalNote:t._({id:"Note that you may still see the group in the list after disassociating if the host is also a member of that group\u2019s  children.  This list shows all groups the host is associated  with directly and indirectly."})})])}))},emptyStateControls:W?r.a.createElement(Po,{key:"add",onClick:function(){return s(!0)}}):null}),o&&r.a.createElement(If,{header:t._({id:"Groups"}),fetchRequest:G,optionsRequest:q,isModalOpen:o,onAssociate:M,onClose:function(){return s(!1)},title:t._({id:"Select Groups"})}),H&&r.a.createElement(Zt,{isOpen:H,onClose:B,title:t._({id:"Error!"}),variant:"error"},K?t._({id:"Failed to associate."}):t._({id:"Failed to disassociate one or more groups."}),r.a.createElement(ua,{error:H})))}));var Uf=Object(u.withI18n)()((function(e){var t=e.host;return r.a.createElement(c.d,null,r.a.createElement(c.b,{key:"list",path:"/hosts/:id/groups"},r.a.createElement(Pf,{host:t})))}));var Gf=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Object(c.h)(),l=Object(c.j)("/hosts/:id"),o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe.readDetail(l.params.id);case 2:return t=e.sent,n=t.data,a(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),[l.params.id,a])),u=o.error,d=o.isLoading,m=o.result,f=o.request;Object(n.useEffect)((function(){f()}),[f,i]);var v,_=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Hosts"})),link:"/hosts",id:99},{name:t._({id:"Details"}),link:"".concat(l.url,"/details"),id:0},{name:t._({id:"Facts"}),link:"".concat(l.url,"/facts"),id:1},{name:t._({id:"Groups"}),link:"".concat(l.url,"/groups"),id:2},{name:t._({id:"Completed Jobs"}),link:"".concat(l.url,"/completed_jobs"),id:3}];if(d)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Nr,null)));if(u)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:u},404===(null===u||void 0===u||null===(v=u.response)||void 0===v?void 0:v.status)&&r.a.createElement("span",null,t._({id:"Host not found."})," ",r.a.createElement(s.b,{to:"/hosts"},t._({id:"View all Hosts."}))))));var h=!0;return i.pathname.endsWith("edit")&&(h=!1),r.a.createElement(La.a,null,r.a.createElement(na.a,null,h&&r.a.createElement(us,{tabsArray:_}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/hosts/:id",to:"/hosts/:id/details",exact:!0}),m&&[r.a.createElement(c.b,{path:"/hosts/:id/details",key:"details"},r.a.createElement(wf,{host:m})),r.a.createElement(c.b,{path:"/hosts/:id/edit",key:"edit"},r.a.createElement(Sf,{host:m})),r.a.createElement(c.b,{key:"facts",path:"/hosts/:id/facts"},r.a.createElement(kf,{host:m})),r.a.createElement(c.b,{path:"/hosts/:id/groups",key:"groups"},r.a.createElement(Uf,{host:m})),r.a.createElement(c.b,{path:"/hosts/:id/completed_jobs",key:"completed-jobs"},r.a.createElement(tb,{defaultParams:{job__hosts:m.id}}))],r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(l.url,"/details")},t._({id:"View Host Details"})))))))}));var qf=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)({"/hosts":t._({id:"Hosts"}),"/hosts/add":t._({id:"Create New Host"})}),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(n.useCallback)((function(e){var a;e&&o((a={"/hosts":t._({id:"Hosts"}),"/hosts/add":t._({id:"Create New Host"})},Object(gr.a)(a,"/hosts/".concat(e.id),"".concat(e.name)),Object(gr.a)(a,"/hosts/".concat(e.id,"/edit"),t._({id:"Edit Details"})),Object(gr.a)(a,"/hosts/".concat(e.id,"/details"),t._({id:"Details"})),Object(gr.a)(a,"/hosts/".concat(e.id,"/facts"),t._({id:"Facts"})),Object(gr.a)(a,"/hosts/".concat(e.id,"/groups"),t._({id:"Groups"})),Object(gr.a)(a,"/hosts/".concat(e.id,"/completed_jobs"),t._({id:"Completed Jobs"})),a))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"host",breadcrumbConfig:l}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/hosts/add"},r.a.createElement(jf,null)),r.a.createElement(c.b,{path:"/hosts/:id"},r.a.createElement(xt,null,(function(e){var t=e.me;return r.a.createElement(Gf,{setBreadcrumb:s,me:t||{}})}))),r.a.createElement(c.b,{path:"/hosts"},r.a.createElement(Gb,null))))})),Ff=["instanceGroup","onSubmit","onCancel","submitError"];function zf(e){var t=e.i18n,a=Object(Va.b)("name"),n=Object(f.a)(a,2)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{name:"name",id:"instance-group-name",label:t._({id:"\u540d\u79f0"}),type:"text",validate:Yo(null,t),isRequired:!0,isDisabled:"tower"===n.value}),r.a.createElement(Tl,{id:"instance-group-policy-instance-minimum",label:t._({id:"Policy instance minimum"}),name:"policy_instance_minimum",type:"number",min:"0",validate:$o(0,2147483647,t),tooltip:t._({id:"Minimum number of instances that will be automatically assigned to this group when new instances come online."})}),r.a.createElement(Tl,{id:"instance-group-policy-instance-percentage",label:t._({id:"Policy instance percentage"}),name:"policy_instance_percentage",type:"number",min:"0",max:"100",tooltip:t._({id:"Minimum percentage of all instances that will be automatically assigned to this group when new instances come online."}),validate:$o(0,100,t)}))}function Mf(e){var t=e.instanceGroup,a=void 0===t?{}:t,n=e.onSubmit,i=e.onCancel,l=e.submitError,c=Object(o.a)(e,Ff),s={name:a.name||"",policy_instance_minimum:a.policy_instance_minimum||0,policy_instance_percentage:a.policy_instance_percentage||0};return r.a.createElement(Va.a,{initialValues:s,onSubmit:function(e){return n(e)}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(zf,c),l&&r.a.createElement(Yl,{error:l}),r.a.createElement(cc,{onCancel:i,onSubmit:e.handleSubmit})))}))}Mf.defaultProps={instanceGroup:{},submitError:null};var Kf=Object(u.withI18n)()(Mf);var Vf=function(){var e=Object(c.g)(),t=Object(n.useState)(null),a=Object(f.a)(t,2),i=a[0],l=a[1],o=function(){var t=Object(b.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ze.create(a);case 3:n=t.sent,r=n.data,e.push("/instance_groups/".concat(r.id,"/details")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),l(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Kf,{onSubmit:o,submitError:i,onCancel:function(){e.push("/instance_groups")}}))))},Hf=a(1059),Bf=a(356),Wf=a(1060),Jf=Object(j.b)(ko).withConfig({displayName:"InstanceGroupListItem__DataListCell",componentId:"sc-s7a61m-0"})(["white-space:nowrap;"]),Yf=Object(j.b)(Pi.a).withConfig({displayName:"InstanceGroupListItem__Badge",componentId:"sc-s7a61m-1"})(["margin-left:8px;"]),Xf=j.b.span.withConfig({displayName:"InstanceGroupListItem__ListGroup",componentId:"sc-s7a61m-2"})(["margin-left:12px;&:first-of-type{margin-left:0;}"]),Zf=Object(j.b)(Fo.a).withConfig({displayName:"InstanceGroupListItem__DataListAction",componentId:"sc-s7a61m-3"})(["align-items:center;display:grid;grid-gap:16px;grid-template-columns:40px;"]),$f=j.b.span.withConfig({displayName:"InstanceGroupListItem__Unavailable",componentId:"sc-s7a61m-4"})(["color:var(--pf-global--danger-color--200);"]);function Qf(e){var t=e.instanceGroup,a=e.detailUrl,n=e.isSelected,i=e.onSelect,l=e.i18n,o="check-action-".concat(t.id),c=function(e){return e.is_containerized};var u;return r.a.createElement(ho.a,{key:t.id,"aria-labelledby":o,id:"".concat(t.id," ")},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-instance-groups-".concat(t.id),checked:n,onChange:i,"aria-labelledby":o}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(Jf,{key:"name","aria-label":l._({id:"instance group name"})},r.a.createElement("span",{id:o},r.a.createElement(s.b,{to:"".concat(a)},r.a.createElement("b",null,t.name))),(u=t,u.is_isolated?r.a.createElement(tv,null,r.a.createElement(Wf.a,{"aria-label":l._({id:"isolated instance"})},l._({id:"Isolated"}))):u.is_controller?r.a.createElement(av,null,r.a.createElement(Wf.a,{"aria-label":l._({id:"controller instance"})},l._({id:"Controller"}))):null)),r.a.createElement(Jf,{key:"type","aria-label":l._({id:"instance group type"})},r.a.createElement(nv,null,l._({id:"\u7c7b\u578b"})),r.a.createElement("span",{id:o},c(t)?l._({id:"Container group"}):l._({id:"Instance group"}))),r.a.createElement(Jf,{key:"related-field-counts","aria-label":l._({id:"instance counts"}),width:2},r.a.createElement(Xf,null,r.a.createElement("b",null,l._({id:"Running jobs"})),r.a.createElement(Yf,{isRead:!0},t.jobs_running)),r.a.createElement(Xf,null,r.a.createElement("b",null,l._({id:"Total jobs"})),r.a.createElement(Yf,{isRead:!0},t.jobs_total)),t.is_containerized?null:r.a.createElement(Xf,null,r.a.createElement("b",null,l._({id:"Instances"})),r.a.createElement(Yf,{isRead:!0},t.instances))),r.a.createElement(Jf,{key:"capacity","aria-label":l._({id:"instance group used capacity"})},function(e){return c(e)?null:e.capacity?r.a.createElement(Hf.a,{value:Math.round(100-e.percent_capacity_remaining),measureLocation:Bf.b.top,size:Hf.b.sm,title:l._({id:"Used capacity"})}):r.a.createElement($f,null," ",l._({id:"Unavailable"}))}(t))]}),r.a.createElement(Zf,{"aria-label":"actions","aria-labelledby":o,id:o},t.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:l._({id:"\u7f16\u8f91\u5b9e\u4f8b\u7ec4"}),position:"top"},r.a.createElement(O.a,{"aria-label":l._({id:"\u7f16\u8f91\u5b9e\u4f8b\u7ec4"}),variant:"plain",component:s.b,to:c(t)?"/instance_groups/container_group/".concat(t.id,"/edit"):"/instance_groups/".concat(t.id,"/edit")},r.a.createElement(Mo.a,null))))))}Qf.prototype={instanceGroup:qn.isRequired,detailUrl:Nn.string.isRequired,isSelected:Nn.bool.isRequired,onSelect:Nn.func.isRequired};var ev=Object(u.withI18n)()(Qf),tv=Object(j.b)("span").withConfig({displayName:"InstanceGroupListItem___StyledSpan",componentId:"sc-s7a61m-5"})(["margin-left:12px"]),av=Object(j.b)("span").withConfig({displayName:"InstanceGroupListItem___StyledSpan2",componentId:"sc-s7a61m-6"})(["margin-left:12px"]),nv=Object(j.b)("b").withConfig({displayName:"InstanceGroupListItem___StyledB",componentId:"sc-s7a61m-7"})(["margin-right:24px"]),rv=R("instance-group",{page:1,page_size:20});var iv,lv=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(rv,a.search),e.next=3,Promise.all([Ze.read(r),Ze.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{instanceGroups:o.data.results,instanceGroupsCount:o.data.count,actions:c.data.actions,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{instanceGroups:[],instanceGroupsCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),o=l.error,u=l.isLoading,m=l.request,v=l.result,_=v.instanceGroups,h=v.instanceGroupsCount,E=v.actions,y=v.relatedSearchableKeys,g=v.searchableKeys;Object(n.useEffect)((function(){m()}),[m]);var O=Uo(_),j=O.selected,k=O.isAllSelected,w=O.handleSelect,C=O.setSelected,S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var t=Object(d.a)(Object(d.a)({},e),{},{summary_fields:Object(d.a)(Object(d.a)({},e.summary_fields),{},{user_capabilities:Object(d.a)({},e.summary_fields.user_capabilities)})});return"tower"===t.name&&(t.summary_fields.user_capabilities.delete=!1),t}))}(j),x=en(Object(n.useCallback)((function(){return Promise.all(j.map((function(e){var t=e.id;return Ze.destroy(t)})))}),[j]),{qsConfig:rv,allItemsSelected:k,fetchItems:m}),T=x.isLoading,I=x.deletionError,R=x.deleteItems,D=x.clearDeletionError,L=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:C([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=E&&E.POST;function U(e){return!e.summary_fields.user_capabilities.delete}var G=t._({id:"Instance Groups"}),q="";if(S.some((function(e){return"tower"===e.name}))){var F=S.filter(U).filter((function(e){return"tower"!==e.name})).map((function(e){return e.name})).join(", ");F&&S.some(U)&&(q=t._({id:"You do not have permission to delete {pluralizedItemName}: {itemsUnableToDelete}.",values:{pluralizedItemName:G,itemsUnableToDelete:F}})),q.length>0&&(q=q.concat("\n")),q=q.concat(t._({id:"The tower instance group cannot be deleted."}))}var z=t._({id:"Add container group"}),M=t._({id:"Add instance group"}),K=r.a.createElement(mb,{key:"add",dropdownItems:[r.a.createElement(ka.a,{to:"/instance_groups/container_group/add",component:s.b,key:z,"aria-label":z},z),r.a.createElement(ka.a,{to:"/instance_groups/add",component:s.b,key:M,"aria-label":M},M)]});return r.a.createElement(r.a.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:o,hasContentLoading:u||T,items:_,itemCount:h,pluralizedItemName:G,qsConfig:rv,onRowClick:w,toolbarSearchableKeys:g,toolbarRelatedSearchableKeys:y,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:k,onSelectAll:function(e){return C(e?Object(A.a)(_):[])},qsConfig:rv,additionalControls:[].concat(Object(A.a)(P?[K]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:L,itemsToDelete:S,pluralizedItemName:t._({id:"Instance Groups"}),errorMessage:q})])}))},renderItem:function(e){return r.a.createElement(ev,{key:e.id,value:e.name,instanceGroup:e,detailUrl:(t=e,t.is_containerized?"".concat(i.url,"/container_group/").concat(t.id,"/details"):"".concat(i.url,"/").concat(t.id,"/details")),onSelect:function(){return w(e)},isSelected:j.some((function(t){return t.id===e.id}))});var t},emptyStateControls:P&&K}))),r.a.createElement(Zt,{"aria-label":t._({id:"Deletion error"}),isOpen:I,onClose:D,title:t._({id:"Error"}),variant:"error"},t._({id:"Failed to delete one or more instance groups."}),r.a.createElement(ua,{error:I})))})),ov=j.b.span(iv||(iv=Object(v.a)(["\n  color: var(--pf-global--danger-color--200);\n"])));var cv=Object(u.withI18n)()((function(e){var t,a=e.instanceGroup,i=e.i18n,l=a.id,o=a.name,u=Object(c.g)(),d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze.destroy(l);case 2:u.push("/instance_groups");case 3:case"end":return e.stop()}}),e)}))),[l,u])),m=d.request,f=d.isLoading,v=Qa(d.error),_=v.error,h=v.dismissError;return r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:i._({id:"\u540d\u79f0"}),value:(t=a,t.is_isolated?r.a.createElement($i.a,{hasGutter:!0},r.a.createElement(Qi.a,null,t.name),r.a.createElement(Qi.a,null,r.a.createElement(Wf.a,{"aria-label":i._({id:"isolated instance"})},i._({id:"Isolated"})))):t.is_controller?r.a.createElement($i.a,{hasGutter:!0},r.a.createElement(Qi.a,null,t.name),r.a.createElement(Qi.a,null,r.a.createElement(Wf.a,{"aria-label":i._({id:"controller instance"})},i._({id:"Controller"})))):r.a.createElement(r.a.Fragment,null,t.name)),dataCy:"instance-group-detail-name"}),r.a.createElement(xi,{label:i._({id:"\u7c7b\u578b"}),value:a.is_containerized?i._({id:"Container group"}):i._({id:"Instance group"}),dataCy:"instance-group-type"}),r.a.createElement(Gi,{label:i._({id:"Policy instance minimum"}),dataCy:"instance-group-policy-instance-minimum",content:a.policy_instance_minimum}),r.a.createElement(Gi,{label:i._({id:"Policy instance percentage"}),dataCy:"instance-group-policy-instance-percentage",content:"".concat(a.policy_instance_percentage," %")}),a.capacity?r.a.createElement(Gi,{label:i._({id:"Used capacity"}),content:"".concat(Math.round(100-a.percent_capacity_remaining)," %"),dataCy:"instance-group-used-capacity"}):r.a.createElement(xi,{label:i._({id:"Used capacity"}),value:r.a.createElement(ov,null,i._({id:"Unavailable"})),dataCy:"instance-group-used-capacity"}),r.a.createElement(Li,{label:i._({id:"\u5df2\u521b\u5efa"}),date:a.created,user:a.summary_fields.created_by}),r.a.createElement(Li,{label:i._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:a.modified,user:a.summary_fields.modified_by})),r.a.createElement(Yc,null,a.summary_fields.user_capabilities&&a.summary_fields.user_capabilities.edit&&r.a.createElement(O.a,{"aria-label":i._({id:"edit"}),component:s.b,to:"/instance_groups/".concat(l,"/edit")},i._({id:"Edit"})),"tower"!==o&&a.summary_fields.user_capabilities&&a.summary_fields.user_capabilities.delete&&r.a.createElement(Qc,{name:o,modalTitle:i._({id:"Delete instance group"}),onConfirm:m,isDisabled:f},i._({id:"\u5220\u9664"}))),_&&r.a.createElement(Zt,{isOpen:_,onClose:h,title:i._({id:"Error"}),variant:"error"}))}));var sv=function(e){var t=e.instanceGroup,a=Object(c.g)(),i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u="/instance_groups/".concat(t.id,"/details"),d=function(){var e=Object(b.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ze.update(t.id,n);case 3:a.push(u),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(Kf,{instanceGroup:t,onSubmit:d,submitError:o,onCancel:function(){a.push(u)}}))};var uv=Object(u.withI18n)()((function(e){var t=e.className,a=e.fetchInstances,i=e.instance,l=e.onToggle,o=e.i18n,c=Tt().me,s=void 0===c?{}:c,u=Object(n.useState)(i.enabled),d=Object(f.a)(u,2),m=d[0],v=d[1],_=Object(n.useState)(!1),h=Object(f.a)(_,2),E=h[0],y=h[1],g=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e.update(i.id,{enabled:!m});case 2:return e.next=4,a();case 4:return e.abrupt("return",!m);case 5:case"end":return e.stop()}}),e)}))),[i,m,a]),i.enabled),O=g.result,j=g.isLoading,k=g.error,w=g.request;return Object(n.useEffect)((function(){O!==m&&(v(O),l&&l(O))}),[O,m,l]),Object(n.useEffect)((function(){k&&y(!0)}),[k]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{content:o._({id:"Set the instance online or offline. If offline, jobs will not be assigned to this instance."}),position:"top"},r.a.createElement(dm.a,{className:t,css:"display: inline-flex;",id:"host-".concat(i.id,"-toggle"),label:o._({id:"On"}),labelOff:o._({id:"Off"}),isChecked:m,isDisabled:j||!(null===s||void 0===s?void 0:s.is_superuser),onChange:w,"aria-label":o._({id:"Toggle instance"})})),E&&k&&!j&&r.a.createElement(Zt,{variant:"error",title:o._({id:"Error!"}),isOpen:k&&!j,onClose:function(){return y(!1)}},o._({id:"Failed to toggle instance."}),r.a.createElement(ua,{error:k})))})),dv=j.b.span.withConfig({displayName:"InstanceListItem__Unavailable",componentId:"sc-fxonez-0"})(["color:var(--pf-global--danger-color--200);"]),mv=Object(j.b)(ko).withConfig({displayName:"InstanceListItem__DataListCell",componentId:"sc-fxonez-1"})(["white-space:nowrap;"]),pv=Object(j.b)(Pi.a).withConfig({displayName:"InstanceListItem__Badge",componentId:"sc-fxonez-2"})(["margin-left:8px;"]),bv=j.b.span.withConfig({displayName:"InstanceListItem__ListGroup",componentId:"sc-fxonez-3"})(["margin-left:12px;&:first-of-type{margin-left:0;}"]);function fv(e){var t,a=e.instance,n=e.isSelected,i=e.onSelect,l=e.fetchInstances,o=e.i18n,c="check-action-".concat(a.id);return r.a.createElement(ho.a,{"aria-labelledby":c,id:"".concat(a.id),key:a.id},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{"aria-labelledby":c,checked:n,id:"instances-".concat(a.id),onChange:i}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(mv,{key:"name","aria-label":o._({id:"instance host name"})},r.a.createElement("b",null,a.hostname)),r.a.createElement(mv,{key:"type","aria-label":o._({id:"instance type"})},r.a.createElement(_v,null,o._({id:"\u7c7b\u578b"})),r.a.createElement("span",{id:c},a.managed_by_policy?o._({id:"Auto"}):o._({id:"Manual"}))),r.a.createElement(mv,{key:"related-field-counts","aria-label":o._({id:"instance counts"}),width:2},r.a.createElement(bv,null,r.a.createElement("b",null,o._({id:"Running jobs"})),r.a.createElement(pv,{isRead:!0},a.jobs_running)),r.a.createElement(bv,null,r.a.createElement("b",null,o._({id:"Total jobs"})),r.a.createElement(pv,{isRead:!0},a.jobs_total))),r.a.createElement(mv,{key:"capacity","aria-label":o._({id:"instance group used capacity"})},(t=a,t.enabled?r.a.createElement(Hf.a,{value:Math.round(100-t.percent_capacity_remaining),measureLocation:Bf.b.top,size:Hf.b.sm,title:o._({id:"Used capacity"})}):r.a.createElement(dv,null,o._({id:"Unavailable"}))))]}),r.a.createElement(Fo.a,{"aria-label":"actions","aria-labelledby":c,id:c},r.a.createElement(hv,{fetchInstances:l,instance:a}))))}fv.prototype={instance:Fn.isRequired,isSelected:Nn.bool.isRequired,onSelect:Nn.func.isRequired};var vv=Object(u.withI18n)()(fv),_v=Object(j.b)("b").withConfig({displayName:"InstanceListItem___StyledB",componentId:"sc-fxonez-4"})(["margin-right:24px"]),hv=Object(j.b)(uv).withConfig({displayName:"InstanceListItem___StyledInstanceToggle",componentId:"sc-fxonez-5"})(["display:inline-flex;"]),Ev=R("instance",{page:1,page_size:20,order_by:"hostname"});var yv=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)(!1),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(c.h)(),u=Object(c.i)().id,d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(Ev,s.search),e.next=3,Promise.all([Ze.readInstances(u,n),Ze.readInstanceOptions(u)]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0],o=i[1],e.abrupt("return",{instances:l.data.results,count:l.data.count,actions:o.data.actions,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[s.search,u]),{instances:[],count:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),m=d.result,v=m.instances,_=m.count,h=m.actions,E=m.relatedSearchableKeys,y=m.searchableKeys,g=d.error,O=d.isLoading,j=d.request,k=Uo(v),w=k.selected,C=k.isAllSelected,S=k.handleSelect,x=k.setSelected;Object(n.useEffect)((function(){j()}),[j]);var T=en(Object(n.useCallback)((function(){return Promise.all(w.map((function(e){return Ze.disassociateInstance(u,e.id)})))}),[u,w]),{qsConfig:Ev,allItemsSelected:C,fetchItems:j}),I=T.isLoading,R=T.deleteItems,D=T.deletionError,L=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return Ze.associateInstance(u,e.id)})));case 2:j();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,j])),P=L.request,U=L.error,G=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:x([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=Qa(U||D),z=q.error,M=q.dismissError,K=h&&Object.prototype.hasOwnProperty.call(h,"POST"),V=Object(n.useCallback)((function(e){return $e.read(F(e,{not__rampart_groups__id:u}))}),[u]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:g,hasContentLoading:O||I,items:v,itemCount:_,pluralizedItemName:t._({id:"Instances"}),qsConfig:Ev,onRowClick:S,toolbarSearchableKeys:y,toolbarRelatedSearchableKeys:E,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"hostname",isDefault:!0}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"hostname"}],renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:C,onSelectAll:function(e){return x(e?Object(A.a)(v):[])},qsConfig:Ev,additionalControls:[].concat(Object(A.a)(K?[r.a.createElement(Po,{key:"associate",onClick:function(){return o(!0)},defaultLabel:t._({id:"Associate"})})]:[]),[r.a.createElement(Nf,{verifyCannotDisassociate:!1,key:"disassociate",onDisassociate:G,itemsToDisassociate:w,modalTitle:t._({id:"Disassociate instance from instance group?"})})]),emptyStateControls:K?r.a.createElement(Po,{key:"add",onClick:function(){return o(!0)}}):null}))},renderItem:function(e){return r.a.createElement(vv,{key:e.id,value:e.hostname,instance:e,onSelect:function(){return S(e)},isSelected:w.some((function(t){return t.id===e.id})),fetchInstances:j})}}),l&&r.a.createElement(If,{header:t._({id:"Instances"}),fetchRequest:V,isModalOpen:l,onAssociate:P,onClose:function(){return o(!1)},title:t._({id:"Select Instances"}),optionsRequest:function(){return Ze.readInstanceOptions(u)},displayKey:"hostname"}),z&&r.a.createElement(Zt,{isOpen:z,onClose:M,title:t._({id:"Error!"}),variant:"error"},U?t._({id:"Failed to associate."}):t._({id:"Failed to disassociate one or more instances."}),r.a.createElement(ua,{error:z})))}));var gv=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Object(c.i)().id,l=Object(c.h)().pathname,o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze.readDetail(i);case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[i])),u=o.isLoading,d=o.error,m=o.request,f=o.result;Object(n.useEffect)((function(){m()}),[m,l]),Object(n.useEffect)((function(){f&&a(f)}),[f,a]);var v,_=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to instance groups"})),link:"/instance_groups",id:99},{name:t._({id:"Details"}),link:"/instance_groups/".concat(i,"/details"),id:0},{name:t._({id:"Instances"}),link:"/instance_groups/".concat(i,"/instances"),id:1},{name:t._({id:"\u4f5c\u4e1a"}),link:"/instance_groups/".concat(i,"/jobs"),id:2}];if(!u&&d)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:d},404===(null===(v=d.response)||void 0===v?void 0:v.status)&&r.a.createElement("span",null,t._({id:"Instance group not found."}),"",r.a.createElement(s.b,{to:"/instance_groups"},t._({id:"View all instance groups"}))))));var h=r.a.createElement(us,{tabsArray:_});return l.endsWith("edit")&&(h=null),r.a.createElement(La.a,null,r.a.createElement(na.a,null,h,u&&r.a.createElement(Nr,null),!u&&f&&r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/instance_groups/:id",to:"/instance_groups/:id/details",exact:!0}),f&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{path:"/instance_groups/:id/edit"},r.a.createElement(sv,{instanceGroup:f})),r.a.createElement(c.b,{path:"/instance_groups/:id/details"},r.a.createElement(cv,{instanceGroup:f})),r.a.createElement(c.b,{path:"/instance_groups/:id/instances"},r.a.createElement(yv,null)),r.a.createElement(c.b,{path:"/instance_groups/:id/jobs"},r.a.createElement(tb,{showTypeColumn:!0,defaultParams:{instance_group:f.id}}))))))})),Ov=["initialPodSpec","instanceGroup","onSubmit","onCancel","submitError"];function jv(e){var t=e.i18n,a=e.instanceGroup,i=Object(Va.c)().setFieldValue,l=Object(Va.b)({name:"credential",validate:Yo(t._({id:"Select a value for this field"}),t)}),o=Object(f.a)(l,3),c=o[0],s=o[1],u=o[2],d=Object(Va.b)("override"),m=Object(f.a)(d,1)[0],p=Object(n.useCallback)((function(e){i("credential",e)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{name:"name",id:"container-group-name",label:t._({id:"\u540d\u79f0"}),type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(lf,{label:t._({id:"Credential"}),credentialTypeKind:"kubernetes",helperTextInvalid:s.error,isValid:!s.touched||!s.error,onBlur:function(){return u.setTouched()},onChange:p,value:c.value,required:!0,tooltip:t._({id:'Credential to authenticate with Kubernetes or OpenShift.  Must be of type "Kubernetes/OpenShift API Bearer Token\u201d.'}),autoPopulate:!(null===a||void 0===a?void 0:a.id)}),r.a.createElement(Wi.a,{fieldId:"container-groups-option-checkbox",label:t._({id:"Options"})},r.a.createElement(Bl,null,r.a.createElement(Rl,{name:"override","aria-label":t._({id:"Customize pod specification"}),label:t._({id:"Customize pod specification"}),id:"container-groups-override-pod-specification"}))),m.value&&r.a.createElement(Wl,null,r.a.createElement(Hl,null,r.a.createElement(ro,{tooltip:t._({id:"Field for passing a custom Kubernetes or OpenShift Pod specification."}),id:"custom-pod-spec",name:"pod_spec_override",label:t._({id:"Custom pod spec"})}))))}function kv(e){var t,a=e.initialPodSpec,n=e.instanceGroup,i=e.onSubmit,l=e.onCancel,c=e.submitError,s=Object(o.a)(e,Ov),u=Boolean(null===n||void 0===n?void 0:n.pod_spec_override)||!1,d={name:(null===n||void 0===n?void 0:n.name)||"",credential:null===n||void 0===n||null===(t=n.summary_fields)||void 0===t?void 0:t.credential,pod_spec_override:u?null===n||void 0===n?void 0:n.pod_spec_override:cl(JSON.stringify(a)),override:u};return r.a.createElement(Va.a,{initialValues:d,onSubmit:function(e){i(e)}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(jv,Object.assign({instanceGroup:n},s)),c&&r.a.createElement(Yl,{error:c}),r.a.createElement(cc,{onCancel:l,onSubmit:e.handleSubmit})))}))}kv.defaultProps={instanceGroup:{},submitError:null,initialPodSpec:{}};var wv=Object(u.withI18n)()(kv);var Cv=function(){var e=Object(c.g)(),t=Object(n.useState)(null),a=Object(f.a)(t,2),i=a[0],l=a[1],o=function(){var t=Object(b.a)(p.a.mark((function t(a){var n,r,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ze.create({name:a.name,credential:null===a||void 0===a||null===(n=a.credential)||void 0===n?void 0:n.id,pod_spec_override:a.override?(o=a.pod_spec_override,ul(o)&&(o=cl(o)),o!==cl(JSON.stringify(v))?o:null):null});case 3:r=t.sent,i=r.data,e.push("/instance_groups/container_group/".concat(i.id,"/details")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),l(t.t0);case 11:case"end":return t.stop()}var o}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze.readOptions();case 2:return t=e.sent,a=t.data,e.abrupt("return",a.actions.POST.pod_spec_override.default);case 5:case"end":return e.stop()}}),e)}))),[]),{initialPodSpec:{}}),u=s.error,d=s.isLoading,m=s.request,v=s.result;return Object(n.useEffect)((function(){m()}),[m]),u?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(za,{error:u})))):d?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Nr,null)))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(wv,{initialPodSpec:v,onSubmit:o,submitError:i,onCancel:function(){e.push("/instance_groups")}}))))};var Sv=Object(u.withI18n)()((function(e){var t,a=e.instanceGroup,i=e.i18n,l=a.id,o=a.name,u=Object(c.g)(),d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze.destroy(l);case 2:u.push("/instance_groups");case 3:case"end":return e.stop()}}),e)}))),[l,u])),m=d.request,f=d.isLoading,v=Qa(d.error),_=v.error,h=v.dismissError;return r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:i._({id:"\u540d\u79f0"}),value:a.name,dataCy:"container-group-detail-name"}),r.a.createElement(xi,{label:i._({id:"\u7c7b\u578b"}),value:i._({id:"Container group"}),dataCy:"container-group-type"}),a.summary_fields.credential&&r.a.createElement(xi,{label:i._({id:"Credential"}),value:r.a.createElement(Wf.a,{variant:"outline",color:"blue"},null===(t=a.summary_fields.credential)||void 0===t?void 0:t.name),dataCy:"container-group-credential"}),r.a.createElement(Li,{label:i._({id:"\u5df2\u521b\u5efa"}),date:a.created,user:a.summary_fields.created_by}),r.a.createElement(Li,{label:i._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:a.modified,user:a.summary_fields.modified_by}),a.pod_spec_override&&r.a.createElement(_l,{label:i._({id:"Pod spec override"}),value:ul(a.pod_spec_override)?cl(a.pod_spec_override):a.pod_spec_override,rows:6})),r.a.createElement(Yc,null,a.summary_fields.user_capabilities&&a.summary_fields.user_capabilities.edit&&r.a.createElement(O.a,{"aria-label":i._({id:"edit"}),component:s.b,to:"/instance_groups/container_group/".concat(l,"/edit")},i._({id:"Edit"})),a.summary_fields.user_capabilities&&a.summary_fields.user_capabilities.delete&&r.a.createElement(Qc,{name:o,modalTitle:i._({id:"Delete instance group"}),onConfirm:m,isDisabled:f},i._({id:"\u5220\u9664"}))),_&&r.a.createElement(Zt,{isOpen:_,onClose:h,title:i._({id:"Error"}),variant:"error"}))}));var xv=function(e){var t=e.instanceGroup,a=Object(c.g)(),i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u="/instance_groups/container_group/".concat(t.id,"/details"),d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze.readOptions();case 2:return t=e.sent,a=t.data,e.abrupt("return",a.actions.POST.pod_spec_override.default);case 5:case"end":return e.stop()}}),e)}))),[]),{initialPodSpec:{}}),m=d.error,v=d.isLoading,_=d.request,h=d.result;Object(n.useEffect)((function(){_()}),[_]);var E=function(){var e=Object(b.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ze.update(t.id,{name:n.name,credential:n.credential.id,pod_spec_override:n.override?n.pod_spec_override:null});case 3:a.push(u),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return m?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(za,{error:m})))):v?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Nr,null)))):r.a.createElement(Bc,null,r.a.createElement(wv,{instanceGroup:t,initialPodSpec:h,onSubmit:E,submitError:o,onCancel:function(){a.push(u)}}))};var Tv=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Object(c.i)().id,l=Object(c.h)().pathname,o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze.readDetail(i);case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[i])),u=o.isLoading,d=o.error,m=o.request,f=o.result;Object(n.useEffect)((function(){m()}),[m,l]),Object(n.useEffect)((function(){f&&a(f)}),[f,a]);var v,_=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to instance groups"})),link:"/instance_groups",id:99},{name:t._({id:"Details"}),link:"/instance_groups/container_group/".concat(i,"/details"),id:0},{name:t._({id:"\u4f5c\u4e1a"}),link:"/instance_groups/container_group/".concat(i,"/jobs"),id:1}];if(!u&&d)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:d},404===(null===(v=d.response)||void 0===v?void 0:v.status)&&r.a.createElement("span",null,t._({id:"Container group not found."}),"",r.a.createElement(s.b,{to:"/instance_groups"},t._({id:"View all instance groups"}))))));var h=r.a.createElement(us,{tabsArray:_});return l.endsWith("edit")&&(h=null),r.a.createElement(La.a,null,r.a.createElement(na.a,null,h,u&&r.a.createElement(Nr,null),!u&&f&&r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/instance_groups/container_group/:id",to:"/instance_groups/container_group/:id/details",exact:!0}),f&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{path:"/instance_groups/container_group/:id/edit"},r.a.createElement(xv,{instanceGroup:f})),r.a.createElement(c.b,{path:"/instance_groups/container_group/:id/details"},r.a.createElement(Sv,{instanceGroup:f})),r.a.createElement(c.b,{path:"/instance_groups/container_group/:id/jobs"},r.a.createElement(tb,{showTypeColumn:!0,defaultParams:{instance_group:f.id}}))))))}));var Iv=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)({"/instance_groups":t._({id:"Instance groups"}),"/instance_groups/add":t._({id:"Create instance group"}),"/instance_groups/container_group/add":t._({id:"Create container group"})}),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(n.useCallback)((function(e){var a;e&&o((a={"/instance_groups":t._({id:"Instance group"}),"/instance_groups/add":t._({id:"Create instance group"}),"/instance_groups/container_group/add":t._({id:"Create container group"})},Object(gr.a)(a,"/instance_groups/".concat(e.id,"/details"),t._({id:"Details"})),Object(gr.a)(a,"/instance_groups/".concat(e.id,"/instances"),t._({id:"Instances"})),Object(gr.a)(a,"/instance_groups/".concat(e.id,"/jobs"),t._({id:"\u4f5c\u4e1a"})),Object(gr.a)(a,"/instance_groups/".concat(e.id,"/edit"),t._({id:"Edit details"})),Object(gr.a)(a,"/instance_groups/".concat(e.id),"".concat(e.name)),Object(gr.a)(a,"/instance_groups/container_group/".concat(e.id,"/details"),t._({id:"Details"})),Object(gr.a)(a,"/instance_groups/container_group/".concat(e.id,"/jobs"),t._({id:"Jobs"})),Object(gr.a)(a,"/instance_groups/container_group/".concat(e.id,"/edit"),t._({id:"Edit details"})),Object(gr.a)(a,"/instance_groups/container_group/".concat(e.id),"".concat(e.name)),a))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"instance_group",breadcrumbConfig:l}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/instance_groups/container_group/add"},r.a.createElement(Cv,null)),r.a.createElement(c.b,{path:"/instance_groups/container_group/:id"},r.a.createElement(Tv,{setBreadcrumb:s})),r.a.createElement(c.b,{path:"/instance_groups/add"},r.a.createElement(Vf,null)),r.a.createElement(c.b,{path:"/instance_groups/:id"},r.a.createElement(gv,{setBreadcrumb:s})),r.a.createElement(c.b,{path:"/instance_groups"},r.a.createElement(lv,null))))}));function Av(e,t,a,r){var i=Object(c.h)(),l=Object(c.g)(),o=Object(n.useState)(e),s=Object(f.a)(o,2),u=s[0],m=s[1],v=Object(n.useState)([]),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Xp(h,5e3),g=Yp({inventories:["status_changed"],jobs:["status_changed"],control:["limit_reached_1"]});Object(n.useEffect)((function(){m(e)}),[e]);return Object(n.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.length){e.next=2;break}return e.abrupt("return");case 2:return E([]),e.next=5,a(y);case 5:t=e.sent,n=Object(A.a)(u),t.forEach((function(e){var t=u.findIndex((function(t){return t.id===e.id}));-1!==t&&(n[t]=e)})),m(n);case 9:case"end":return e.stop()}}),e)})))()}),[y,a]),Object(n.useEffect)((function(){if((null===g||void 0===g?void 0:g.inventory_id)&&("inventory_update"===g.type||"inventories"===g.group_name)){var e=u.findIndex((function(e){return e.id===g.inventory_id}));if(-1!==e){var a=N(r,i.search),n=u[e],o=Object(d.a)({},n);if("inventories"===g.group_name&&"deleted"===g.status&&1===u.length&&a.page>1){var c=P(r,M(a,{page:a.page-1}));l.push("".concat(i.pathname,"?").concat(c))}else if("inventories"!==g.group_name||"deleted"!==g.status){if(!["pending","waiting","running","pending_deletion"].includes(g.status))return s=g.inventory_id,void(h.includes(s)||E((function(e){return e.concat(s)})));var s;"inventories"===g.group_name&&"pending_deletion"===g.status&&(o.pending_deletion=!0),"inventories"!==g.group_name&&(o.isSourceSyncRunning=!0),m([].concat(Object(A.a)(u.slice(0,e)),[o],Object(A.a)(u.slice(e+1))))}else t()}}}),[g]),u}var Rv=a(1061),Nv=a(1062),Dv=a(1063),Lv=Object(j.c)(["from{transform:rotate(0);}to{transform:rotate(1turn);}"]),Pv=Object(j.b)(Rv.a).withConfig({displayName:"StatusLabel__RunningIcon",componentId:"sc-425pml-0"})(["animation:"," 1.75s linear infinite;"],Lv),Uv={success:"green",successful:"green",failed:"red",error:"red",running:"blue",pending:"blue",waiting:"grey",disabled:"grey",canceled:"orange"},Gv={success:Vt.a,successful:Vt.a,failed:zt.a,error:zt.a,running:Pv,pending:Nv.a,waiting:Nv.a,disabled:Dv.a,canceled:Ht.a};function qv(e){var t=e.status,a=t.charAt(0).toUpperCase()+t.slice(1),n=Uv[t]||"grey",i=Gv[t];return r.a.createElement(Wf.a,{variant:"outline",color:n,icon:i?r.a.createElement(i,null):null},a)}var Fv=Object(u.withI18n)()((function(e){var t,a,i,l,o=e.inventory,c=e.rowIndex,u=e.isSelected,d=e.onSelect,m=e.detailUrl,v=e.i18n,_=e.fetchInventories,h=Object(n.useState)(!1),E=Object(f.a)(h,2),y=E[0],g=E[1],j=Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.copy(o.id,{name:"".concat(o.name," @ ").concat(li())});case 2:return e.next=4,_();case 4:case"end":return e.stop()}}),e)}))),[o.id,o.name,_]),k=Object(n.useCallback)((function(){g(!0)}),[]),w=Object(n.useCallback)((function(){g(!1)}),[]),C="check-action-".concat(o.id),S="disabled";return o.isSourceSyncRunning?S="syncing":o.has_inventory_sources&&(S=o.inventory_sources_with_failures>0?"error":"success"),r.a.createElement(Yr.a,{id:o.id,"aria-labelledby":C},r.a.createElement(zr.a,{select:{rowIndex:c,isSelected:u,onSelect:d},dataLabel:v._({id:"\u5df2\u9009\u62e9"})}),r.a.createElement(zr.a,{id:C,dataLabel:v._({id:"\u540d\u79f0"})},o.pending_deletion?r.a.createElement("b",null,o.name):r.a.createElement(s.b,{to:"".concat(m)},r.a.createElement("b",null,o.name))),r.a.createElement(zr.a,{dataLabel:v._({id:"\u72b6\u6001"})},"smart"!==o.kind&&r.a.createElement(qv,{status:S})),r.a.createElement(zr.a,{dataLabel:v._({id:"\u7c7b\u578b"})},"smart"===o.kind?v._({id:"Smart Inventory"}):v._({id:"\u6e05\u5355"})),r.a.createElement(zr.a,{key:"organization",dataLabel:v._({id:"\u7ec4\u7ec7"})},r.a.createElement(s.b,{to:"/organizations/".concat(null===o||void 0===o||null===(t=o.summary_fields)||void 0===t||null===(a=t.organization)||void 0===a?void 0:a.id,"/details")},null===o||void 0===o||null===(i=o.summary_fields)||void 0===i||null===(l=i.organization)||void 0===l?void 0:l.name)),r.a.createElement(zr.a,{dataLabel:v._({id:"Groups"})},o.total_groups),r.a.createElement(zr.a,{dataLabel:v._({id:"Hosts"})},o.total_hosts),r.a.createElement(zr.a,{dataLabel:v._({id:"Sources"})},o.total_inventory_sources),o.pending_deletion?r.a.createElement(zr.a,{dataLabel:v._({id:"Groups"})},r.a.createElement(Wf.a,{color:"red"},v._({id:"Pending delete"}))):r.a.createElement(Vr,{dataLabel:v._({id:"Actions"})},r.a.createElement(Qr,{visible:o.summary_fields.user_capabilities.edit,tooltip:v._({id:"\u7f16\u8f91\u6e05\u5355"})},r.a.createElement(O.a,{isDisabled:y,"aria-label":v._({id:"\u7f16\u8f91\u6e05\u5355"}),variant:"plain",component:s.b,to:"/inventories/".concat("smart"===o.kind?"smart_inventory":"inventory","/").concat(o.id,"/edit")},r.a.createElement(Mo.a,null))),r.a.createElement(Qr,{visible:o.summary_fields.user_capabilities.copy,tooltip:v._({id:"\u590d\u5236\u6e05\u5355"})},r.a.createElement(hd,{copyItem:j,isDisabled:y,onCopyStart:k,onCopyFinish:w,helperText:{tooltip:v._({id:"\u590d\u5236\u6e05\u5355"}),errorMessage:v._({id:"Failed to copy inventory."})}}))))})),zv=R("inventory",{page:1,page_size:20,order_by:"name"});var Mv=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l=Object(n.useState)([]),o=Object(f.a)(l,2),u=o[0],m=o[1],v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(zv,a.search),e.next=3,Promise.all([Qe.read(r),Qe.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{results:o.data.results,itemCount:o.data.count,actions:c.data.actions,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{results:[],itemCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),_=v.result,h=_.results,E=_.itemCount,y=_.actions,g=_.relatedSearchableKeys,O=_.searchableKeys,j=v.error,k=v.isLoading,w=v.request;Object(n.useEffect)((function(){w()}),[w]);var C=Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(d.a)({},N(zv,a.search))).id__in=t.join(","),e.next=4,Qe.read(n);case 4:return r=e.sent,i=r.data,e.abrupt("return",i.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a.search]),S=Av(h,w,C,zv),x=u.length===S.length&&u.length>0,T=en(Object(n.useCallback)((function(){return Promise.all(u.map((function(e){return Qe.destroy(e.id)})))}),[u]),{allItemsSelected:x}),I=T.isLoading,R=T.deleteItems,D=T.deletionError,L=T.clearDeletionError,P=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:m([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=I||k,G=y&&y.POST,q=function(e){m(e?Object(A.a)(S):[])},F=t._({id:"Add inventory"}),z=t._({id:"Add smart inventory"}),M=r.a.createElement(mb,{key:"add",dropdownItems:[r.a.createElement(ka.a,{to:"".concat(i.url,"/inventory/add/"),component:s.b,key:F,"aria-label":F},F),r.a.createElement(ka.a,{to:"".concat(i.url,"/smart_inventory/add/"),component:s.b,key:z,"aria-label":z},z)]});return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Fr,{contentError:j,hasContentLoading:U,items:S,itemCount:E,pluralizedItemName:t._({id:"Inventories"}),qsConfig:zv,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:O,toolbarRelatedSearchableKeys:g,headerRow:r.a.createElement(Zr,{qsConfig:zv},r.a.createElement($r,{sortKey:"name"},t._({id:"\u540d\u79f0"})),r.a.createElement($r,null,t._({id:"\u72b6\u6001"})),r.a.createElement($r,null,t._({id:"\u7c7b\u578b"})),r.a.createElement($r,null,t._({id:"\u7ec4\u7ec7"})),r.a.createElement($r,null,t._({id:"Groups"})),r.a.createElement($r,null,t._({id:"Hosts"})),r.a.createElement($r,null,t._({id:"Sources"})),r.a.createElement($r,null,t._({id:"Actions"}))),renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:x,onSelectAll:q,qsConfig:zv,additionalControls:[].concat(Object(A.a)(G?[M]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:P,itemsToDelete:u,pluralizedItemName:t._({id:"Inventories"}),warningMessage:t._("{numItemsToDelete, plural, one {The inventory will be in a pending status until the final delete is processed.} other {The inventories will be in a pending status until the final delete is processed.}}",{numItemsToDelete:u.length})})])}))},renderRow:function(e,t){return r.a.createElement(Fv,{key:e.id,value:e.name,inventory:e,rowIndex:t,fetchInventories:w,detailUrl:"smart"===e.kind?"".concat(i.url,"/smart_inventory/").concat(e.id,"/details"):"".concat(i.url,"/inventory/").concat(e.id,"/details"),onSelect:function(){var t;(t=e).pending_deletion||(u.some((function(e){return e.id===t.id}))?m(u.filter((function(e){return e.id!==t.id}))):m(u.concat(t)))},isSelected:u.some((function(t){return t.id===e.id}))})},emptyStateControls:G&&M})),r.a.createElement(Zt,{isOpen:D,variant:"error","aria-label":t._({id:"Deletion Error"}),title:t._({id:"Error!"}),onClose:L},t._({id:"Failed to delete one or more inventories."}),r.a.createElement(ua,{error:D})))}));var Kv=Object(u.withI18n)()((function(e){var t=e.inventory,a=e.i18n,i=Object(c.g)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.readInstanceGroups(t.id);case 2:return a=e.sent,n=a.data,e.abrupt("return",n.results);case 5:case"end":return e.stop()}}),e)}))),[t.id]),[]),o=l.result,u=l.isLoading,d=l.error,m=l.request;Object(n.useEffect)((function(){m()}),[m]);var f=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.destroy(t.id);case 2:i.push("/inventories");case 3:case"end":return e.stop()}}),e)}))),[t.id,i])),v=f.request,_=Qa(f.error),h=_.error,E=_.dismissError,y=t.summary_fields,g=y.organization,j=y.user_capabilities;return u?r.a.createElement(Nr,null):d?r.a.createElement(za,{error:d}):r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:a._({id:"\u540d\u79f0"}),value:t.name,dataCy:"inventory-detail-name"}),r.a.createElement(xi,{label:a._({id:"\u63cf\u8ff0"}),value:t.description}),r.a.createElement(xi,{label:a._({id:"\u7c7b\u578b"}),value:a._({id:"\u6e05\u5355"})}),r.a.createElement(xi,{label:a._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(g.id,"/details")},g.name)}),o&&o.length>0&&r.a.createElement(xi,{fullWidth:!0,label:a._({id:"Instance Groups"}),value:r.a.createElement(fc,{numChips:5,totalChips:o.length},o.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),r.a.createElement(_l,{label:a._({id:"\u53d8\u91cf"}),value:t.variables,rows:4}),r.a.createElement(Li,{label:a._({id:"\u5df2\u521b\u5efa"}),date:t.created,user:t.summary_fields.created_by}),r.a.createElement(Li,{label:a._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:t.modified,user:t.summary_fields.modified_by})),r.a.createElement(Yc,null,j.edit&&r.a.createElement(O.a,{component:s.b,to:"/inventories/inventory/".concat(t.id,"/edit")},a._({id:"Edit"})),j.delete&&r.a.createElement(Qc,{name:t.name,modalTitle:a._({id:"Delete Inventory"}),onConfirm:v},a._({id:"\u5220\u9664"}))),h&&r.a.createElement(Zt,{isOpen:h,variant:"error",title:a._({id:"Error!"}),onClose:E},a._({id:"Failed to delete inventory."}),r.a.createElement(ua,{error:h})))})),Vv=["inventory","onSubmit","onCancel","submitError","instanceGroups"];function Hv(e){var t=e.i18n,a=e.credentialTypeId,i=e.inventory,l=Object(Va.c)().setFieldValue,o=Object(Va.b)({name:"organization",validate:Yo(t._({id:"Select a value for this field"}),t)}),c=Object(f.a)(o,3),s=c[0],u=c[1],d=c[2],m=Object(Va.b)("instanceGroups"),p=Object(f.a)(m,3),b=p[0],v=p[2],_=Object(Va.b)("insights_credential"),h=Object(f.a)(_,1)[0],E=Object(n.useCallback)((function(e){l("organization",e)}),[l]),y=Object(n.useCallback)((function(e){l("insights_credential",e)}),[l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"inventory-name",label:t._({id:"\u540d\u79f0"}),name:"name",type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"inventory-description",label:t._({id:"\u63cf\u8ff0"}),name:"description",type:"text"}),r.a.createElement(Pc,{helperTextInvalid:u.error,isValid:!u.touched||!u.error,onBlur:function(){return d.setTouched()},onChange:E,value:s.value,touched:u.touched,error:u.error,required:!0,autoPopulate:!(null===i||void 0===i?void 0:i.id)}),r.a.createElement(lf,{label:t._({id:"Insights Credential"}),credentialTypeId:a,onChange:y,value:h.value}),r.a.createElement(zb,{value:b.value,onChange:function(e){v.setValue(e)}}),r.a.createElement(Hl,null,r.a.createElement(ro,{tooltip:t._({id:"Enter inventory variables using either JSON or YAML syntax. Use the radio button to toggle between the two. Refer to the Ansible Tower documentation for example syntax"}),id:"inventory-variables",name:"variables",label:t._({id:"\u53d8\u91cf"})})))}function Bv(e){var t=e.inventory,a=void 0===t?{}:t,n=e.onSubmit,i=e.onCancel,l=e.submitError,c=e.instanceGroups,s=Object(o.a)(e,Vv),u={name:a.name||"",description:a.description||"",variables:a.variables||"---",organization:a.summary_fields&&a.summary_fields.organization||null,instanceGroups:c||[],insights_credential:a.summary_fields&&a.summary_fields.insights_credential||null};return r.a.createElement(Va.a,{initialValues:u,onSubmit:function(e){n(e)}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(Hv,Object.assign({},s,{inventory:a})),r.a.createElement(Yl,{error:l}),r.a.createElement(cc,{onCancel:i,onSubmit:e.handleSubmit})))}))}Bv.proptype={handleSubmit:Nn.func.isRequired,handleCancel:Nn.func.isRequired,instanceGroups:Object(Nn.shape)(),inventory:Object(Nn.shape)(),credentialTypeId:Nn.number.isRequired,submitError:Object(Nn.shape)()},Bv.defaultProps={inventory:{},instanceGroups:[],submitError:null};var Wv=Object(u.withI18n)()(Bv);function Jv(e,t){t=t||[];var a=[],n=[];return(e=e||[]).forEach((function(e){t.find((function(t){return t.id===e.id}))||n.push(e)})),t.forEach((function(t){e.find((function(e){return e.id===t.id}))||a.push(t)})),{added:a,removed:n}}var Yv=["instanceGroups","insights_credential","organization"];function Xv(e){var t=e.inventory,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],s=i[1],u=Object(n.useState)(null),m=Object(f.a)(u,2),v=m[0],_=m[1],h=Object(n.useState)(!0),E=Object(f.a)(h,2),y=E[0],g=E[1],O=Object(n.useState)(null),j=Object(f.a)(O,2),k=j[0],w=j[1],C=Object(c.g)(),S=Object(n.useRef)(null);Object(n.useEffect)((function(){return S.current=!0,function(){var e=Object(b.a)(p.a.mark((function e(){var a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([Qe.readInstanceGroups(t.id),Be.read({kind:"insights"})]);case 3:if(a=e.sent,n=Object(f.a)(a,2),r=n[0].data.results,i=n[1].data.results,S.current){e.next=9;break}return e.abrupt("return");case 9:_(r),w(i[0].id),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),s(e.t0);case 16:return e.prev=16,S.current&&g(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(){return e.apply(this,arguments)}}()(),function(){S.current=!1}}),[t.id,y,t,k]);var x=function(){var e=Object(b.a)(p.a.mark((function e(a){var n,r,i,l,c,u,m,f,_,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.instanceGroups,r=a.insights_credential,i=a.organization,l=Object(o.a)(a,Yv),e.prev=1,e.next=4,Qe.update(t.id,Object(d.a)({insights_credential:r?r.id:null,organization:i.id},l));case 4:if(!n){e.next=10;break}return c=Jv(v,n),u=c.added,m=c.removed,f=u.map(function(){var e=Object(b.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.associateInstanceGroup(t.id,a.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=m.map(function(){var e=Object(b.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.disassociateInstanceGroup(t.id,a.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=10,Promise.all([].concat(Object(A.a)(f),Object(A.a)(_)));case 10:h=C.location.pathname.search("smart")>-1?"/inventories/smart_inventory/".concat(t.id,"/details"):"/inventories/inventory/".concat(t.id,"/details"),C.push("".concat(h)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),s(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return y?r.a.createElement(Nr,null):r.a.createElement(Bc,null,r.a.createElement(Wv,{onCancel:function(){var e="smart"===t.kind?"/inventories/smart_inventory/".concat(t.id,"/details"):"/inventories/inventory/".concat(t.id,"/details");C.push("".concat(e))},onSubmit:x,inventory:t,instanceGroups:v,credentialTypeId:k,submitError:l}))}Xv.proptype={inventory:Nn.object.isRequired};var Zv=Xv;var $v=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.error,n=e.group,i=void 0===n?{}:n,l=e.handleSubmit,o=e.handleCancel,c={name:i.name||"",description:i.description||"",variables:i.variables||"---"};return r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Va.a,{initialValues:c,onSubmit:l},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(Tl,{id:"inventoryGroup-name",name:"name",type:"text",label:t._({id:"\u540d\u79f0"}),validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"inventoryGroup-description",name:"description",type:"text",label:t._({id:"\u63cf\u8ff0"})}),r.a.createElement(Hl,null,r.a.createElement(ro,{id:"host-variables",name:"variables",label:t._({id:"\u53d8\u91cf"})})),r.a.createElement(cc,{onCancel:o,onSubmit:e.handleSubmit}),a&&r.a.createElement(Yl,{error:a})))}))))}));var Qv=Object(u.withI18n)()((function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],i=t[1],l=Object(c.i)().id,o=Object(c.g)(),s=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.inventory=l,e.prev=1,e.next=4,Ye.create(t);case 4:a=e.sent,n=a.data,o.push("/inventories/inventory/".concat(l,"/groups/").concat(n.id)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),i(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(na.a,null,r.a.createElement($v,{error:a,handleCancel:function(){o.push("/inventories/inventory/".concat(l,"/groups"))},handleSubmit:s}))}));var e_=Object(u.withI18n)()((function(e){var t=e.inventoryGroup,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(c.i)(),u=s.id,d=s.groupId,m=Object(c.g)(),v=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ye.update(d,t);case 3:m.push("/inventories/inventory/".concat(u,"/groups/").concat(d)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement($v,{error:l,group:t,handleCancel:function(){m.push("/inventories/inventory/".concat(u,"/groups/").concat(d))},handleSubmit:v})})),t_=j.b.li.withConfig({displayName:"InventoryGroupsDeleteModal__ListItem",componentId:"sc-1pp5qa2-0"})(["display:flex;font-weight:600;color:var(--pf-global--danger-color--100);"]),a_=function(e){var t=e.onAfterDelete,a=e.isDisabled,i=e.groups,l=e.i18n,o=Object(n.useState)(null),s=Object(f.a)(o,2),u=s[0],d=s[1],m=Object(n.useState)(!1),v=Object(f.a)(m,2),_=v[0],h=v[1],E=Object(n.useState)(!1),y=Object(f.a)(E,2),g=y[0],j=y[1],k=Object(n.useState)(null),w=Object(f.a)(k,2),C=w[0],S=w[1],x=Object(c.i)().id,T=Object(n.useContext)(pr),I=T.isKebabified,A=T.onKebabModalChange;Object(n.useEffect)((function(){I&&A(_)}),[I,_,A]);var R=function(){var e=Object(b.a)(p.a.mark((function e(a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(!0),e.prev=1,n=0;case 3:if(!(n<i.length)){e.next=16;break}if(r=i[n],"delete"!==a){e.next=10;break}return e.next=8,Ye.destroy(+r.id);case 8:e.next=13;break;case 10:if("promote"!==a){e.next=13;break}return e.next=13,Qe.promoteGroup(x,+r.id);case 13:n++,e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),S(e.t0);case 21:return e.prev=21,h(!1),j(!1),t(),e.finish(21);case 26:case"end":return e.stop()}}),e,null,[[1,18,21,26]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,I?r.a.createElement(ka.a,{key:"delete",isDisabled:a||g,component:"button","aria-label":l._({id:"\u5220\u9664"}),onClick:function(){return h(!0)}},l._({id:"\u5220\u9664"})):r.a.createElement(O.a,{variant:"secondary","aria-label":l._({id:"\u5220\u9664"}),onClick:function(){return h(!0)},isDisabled:a||g},l._({id:"\u5220\u9664"})),_&&r.a.createElement(Zt,{isOpen:_,variant:"danger",title:i.length>1?l._({id:"Delete Groups?"}):l._({id:"Delete Group?"}),onClose:function(){return h(!1)},actions:[r.a.createElement(O.a,{"aria-label":l._({id:"Confirm Delete"}),onClick:function(){return R(u)},variant:"danger",key:"delete",isDisabled:null===u},l._({id:"\u5220\u9664"})),r.a.createElement(O.a,{"aria-label":l._({id:"Close"}),onClick:function(){return h(!1)},variant:"secondary",key:"cancel"},l._({id:"\u53d6\u6d88"}))]},l._({id:"Are you sure you want to delete the {0} below?",values:{0:i.length>1?l._({id:"groups"}):l._({id:"group"})}}),r.a.createElement(r_,null,i.map((function(e){return r.a.createElement(t_,{key:e.id},e.name)}))),r.a.createElement("div",null,r.a.createElement(gc.a,{id:"radio-delete",key:"radio-delete",label:l._({id:"Delete All Groups and Hosts"}),name:"option",onChange:function(){return d("delete")}}),r.a.createElement(i_,{id:"radio-promote",key:"radio-promote",label:l._({id:"Promote Child Groups and Hosts"}),name:"option",onChange:function(){return d("promote")}}))),C&&r.a.createElement(Zt,{isOpen:C,variant:"error","aria-label":l._({id:"deletion error"}),title:l._({id:"Error!"}),onClose:function(){return S(null)}},l._({id:"Failed to delete one or more groups."}),r.a.createElement(ua,{error:C})))};a_.defaultProps={groups:[]};var n_=Object(u.withI18n)()(a_),r_=Object(j.b)("div").withConfig({displayName:"InventoryGroupsDeleteModal___StyledDiv",componentId:"sc-1pp5qa2-1"})(["padding:24px 0;"]),i_=Object(j.b)(gc.a).withConfig({displayName:"InventoryGroupsDeleteModal___StyledRadio",componentId:"sc-1pp5qa2-2"})(["margin-top:5px;"]);var l_=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.inventoryGroup,i=a.summary_fields,l=i.created_by,o=i.modified_by,s=i.user_capabilities,u=a.created,d=a.modified,m=a.name,p=a.description,b=a.variables,v=Object(n.useState)(!1),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Object(c.g)(),g=Object(c.i)();return r.a.createElement(Bc,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:t._({id:"\u540d\u79f0"}),value:m,dataCy:"inventory-group-detail-name"}),r.a.createElement(xi,{label:t._({id:"\u63cf\u8ff0"}),value:p}),r.a.createElement(_l,{label:t._({id:"\u53d8\u91cf"}),value:b,rows:4}),r.a.createElement(Li,{label:t._({id:"\u5df2\u521b\u5efa"}),date:u,user:l}),r.a.createElement(Li,{label:t._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:d,user:o})),r.a.createElement(Yc,null,(null===s||void 0===s?void 0:s.edit)&&r.a.createElement(O.a,{variant:"primary","aria-label":t._({id:"Edit"}),onClick:function(){return y.push("/inventories/inventory/".concat(g.id,"/groups/").concat(g.groupId,"/edit"))}},t._({id:"Edit"})),(null===s||void 0===s?void 0:s.delete)&&r.a.createElement(n_,{groups:[a],isDisabled:!1,onAfterDelete:function(){return y.push("/inventories/inventory/".concat(g.id,"/groups"))}})),h&&r.a.createElement(Zt,{variant:"error",title:t._({id:"Error!"}),isOpen:h,onClose:function(){return E(!1)}},t._({id:"Failed to delete group {0}.",values:{0:a.name}}),r.a.createElement(ua,{error:h})))}));var o_=function(e){var t=e.inventoryGroup,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],o=i[1],s="/inventories/inventory/".concat(t.inventory),u=Object(c.g)(),m=function(){var e=Object(b.a)(p.a.mark((function e(a){var n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(d.a)(Object(d.a)({},a),{},{inventory:t.inventory}),e.next=4,Ye.createHost(t.id,n);case 4:r=e.sent,i=r.data,u.push("".concat(s,"/hosts/").concat(i.id,"/details")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),o(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(Of,{handleSubmit:m,handleCancel:function(){u.push("".concat(s,"/groups/").concat(t.id,"/nested_hosts"))},isInventoryVisible:!1,submitError:l}))},c_=R("credentials",{page:1,page_size:5,order_by:"name"});var s_,u_=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.credentialTypeId,i=e.onEnableLaunch,l=Object(c.g)(),o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(c_,l.location.search),e.next=3,We.read(F(t,{credential_type:a}));case 3:return n=e.sent,r=n.data,i=r.results,o=r.count,e.abrupt("return",{credentials:i,credentialCount:o});case 8:case"end":return e.stop()}}),e)}))),[a,l.location.search]),{credentials:[],credentialCount:0}),s=o.error,u=o.isLoading,d=o.request,m=o.result,v=m.credentials,_=m.credentialCount;Object(n.useEffect)((function(){d()}),[d]);var h=Object(Va.b)({name:"credential",validate:Yo(null,t)}),E=Object(f.a)(h,3),y=E[0],g=E[1],O=E[2];return s?r.a.createElement(za,{error:s}):u?r.a.createElement(Nr,null):r.a.createElement(Jo.a,null,r.a.createElement(Wi.a,{fieldId:"credential",label:t._({id:"Machine Credential"}),"aria-label":t._({id:"Machine Credential"}),isRequired:!0,validated:g.touched&&g.error?"error":"default",helperTextInvalid:g.error,labelIcon:r.a.createElement(gi,{content:t._({id:"Select the credential you want to use when accessing the remote hosts to run the command. Choose the credential containing the username and SSH key or password that Ansible will need to log into the remote hosts."})})},r.a.createElement(Cc,{value:y.value||[],options:v,optionCount:_,header:t._({id:"Machine Credential"}),readOnly:!0,qsConfig:c_,searchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name",isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username"}],sortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],name:"credential",selectItem:function(e){O.setValue([e]),i()},deselectItem:function(){O.setValue([])}})))})),d_=j.b.div(s_||(s_=Object(v.a)(["\n  text-align: left;\n"])));var m_,p_,b_=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.verbosityOptions,n=e.moduleOptions,i=Object(Va.b)({name:"module_name",validate:Yo(null,t)}),l=Object(f.a)(i,3),o=l[0],c=l[1],s=l[2],u=Object(Va.b)("extra_vars"),d=Object(f.a)(u,1)[0],m=Object(Va.b)("diff_mode"),p=Object(f.a)(m,3),b=p[0],v=p[2],_=Object(Va.b)("become_enabled"),h=Object(f.a)(_,3),E=h[0],y=h[2],g=Object(Va.b)({name:"verbosity",validate:Yo(null,t)}),O=Object(f.a)(g,3),j=O[0],k=O[1],w=O[2],C="command"===o.value||"shell"===o.value,S=Object(Va.b)({name:"module_args",validate:C&&Yo(null,t)}),x=Object(f.a)(S,3),T=x[1],I=x[2],R=!T.error||!T.touched;return r.a.createElement(Jo.a,null,r.a.createElement(Vl,null,r.a.createElement(Hl,null,r.a.createElement(Wi.a,{fieldId:"module_name","aria-label":t._({id:"select module"}),label:t._({id:"Module"}),isRequired:!0,helperTextInvalid:c.error,validated:c.touched&&c.error?"error":"default",labelIcon:r.a.createElement(gi,{content:t._({id:"These are the modules that {brandName} supports running commands against.",values:{brandName:"AWX"}})})},r.a.createElement(Fc,Object.assign({},o,{placeHolder:t._({id:"Select a module"}),isValid:!c.touched||!c.error,id:"module_name",data:[{value:"",key:"",label:t._({id:"Choose a module"}),isDisabled:!0}].concat(Object(A.a)(n.map((function(e){return{value:e[0],label:e[0],key:e[0]}})))),onChange:function(e,t){"command"!==t&&"shell"!==t&&I.setTouched(!1),s.setValue(t)}}))),r.a.createElement(Tl,{id:"module_args",name:"module_args","aria-label":t._({id:"Arguments"}),type:"text",label:t._({id:"Arguments"}),validated:R?"default":"error",onBlur:function(){return I.setTouched(!0)},isRequired:"command"===o.value||"shell"===o.value,tooltip:o.value?r.a.createElement(r.a.Fragment,null,t._({id:"These arguments are used with the specified module. You can find information about {0} by clicking",values:{0:o.value}}),r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/modules/".concat(o.value,"_module.html"),target:"_blank",rel:"noopener noreferrer"}," ",t._({id:"here."}))):t._({id:"These arguments are used with the specified module."})}),r.a.createElement(Wi.a,{fieldId:"verbosity","aria-label":t._({id:"select verbosity"}),label:t._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),isRequired:!0,validated:k.touched&&k.error?"error":"default",helperTextInvalid:k.error,labelIcon:r.a.createElement(gi,{content:t._({id:"These are the verbosity levels for standard out of the command run that are supported."})})},r.a.createElement(Fc,Object.assign({},j,{isValid:!k.touched||!k.error,id:"verbosity",data:a||[],onChange:function(e,t){w.setValue(parseInt(t,10))}}))),r.a.createElement(Tl,{id:"limit",name:"limit",type:"text",label:t._({id:"\u8303\u56f4"}),"aria-label":t._({id:"\u8303\u56f4"}),tooltip:r.a.createElement("span",null,t._({id:"The pattern used to target hosts in the inventory. Leaving the field blank, all, and * will all target all hosts in the inventory. You can find more information about Ansible's host patterns"})," ",r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/user_guide/intro_patterns.html",target:"_blank",rel:"noopener noreferrer"},t._({id:"here"})))}),r.a.createElement(Tl,{id:"template-forks",name:"forks",type:"number",min:"0",label:t._({id:"Forks"}),"aria-label":t._({id:"Forks"}),tooltip:r.a.createElement("span",null,t._({id:"The number of parallel or simultaneous processes to use while executing the playbook. Inputting no value will use the default value from the ansible configuration file.  You can find more information"})," ",r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/installation_guide/intro_configuration.html#the-ansible-configuration-file",target:"_blank",rel:"noopener noreferrer"},t._({id:"here."})))}),r.a.createElement(Vl,null,r.a.createElement(Wi.a,{label:t._({id:"Show changes"}),"aria-label":t._({id:"Show changes"}),labelIcon:r.a.createElement(gi,{content:t._({id:"If enabled, show the changes made by Ansible tasks, where supported. This is equivalent to Ansible\u2019s --diff mode."})})},r.a.createElement(dm.a,{css:"display: inline-flex;",id:"diff_mode",label:t._({id:"On"}),labelOff:t._({id:"Off"}),isChecked:b.value,onChange:function(){v.setValue(!b.value)},"aria-label":t._({id:"toggle changes"})})),r.a.createElement(Wi.a,{name:"become_enabled",fieldId:"become_enabled"},r.a.createElement(Bl,null,r.a.createElement(En.a,{"aria-label":t._({id:"Enable privilege escalation"}),label:r.a.createElement("span",null,t._({id:"Enable privilege escalation"}),"\xa0",r.a.createElement(gi,{content:r.a.createElement("p",null,t._({id:"Enables creation of a provisioning callback URL. Using the URL a host can contact {brandName} and request a configuration update using this job template",values:{brandName:"AWX"}}),"\xa0",r.a.createElement("code",null,"--become "),t._({id:"option to the"})," \xa0",r.a.createElement("code",null,"ansible "),t._({id:"command"}))})),id:"become_enabled",isChecked:E.value,onChange:function(e){y.setValue(e)}})))),r.a.createElement(ro,{css:"margin: 20px 0",id:"extra_vars",name:"extra_vars",value:JSON.stringify(d.value),rows:4,labelIcon:!0,tooltip:r.a.createElement(d_,null,r.a.createElement("p",null,t._({id:"Pass extra command line changes. There are two ansible command line parameters:"}),r.a.createElement("br",null),r.a.createElement("code",null,"-e"),", ",r.a.createElement("code",null,"--extra-vars "),r.a.createElement("br",null),t._({id:"Provide key/value pairs using either YAML or JSON."})),"JSON:",r.a.createElement("br",null),r.a.createElement("code",null,r.a.createElement("pre",null,"{","\n  ",'"somevar": "somevalue",',"\n  ",'"password": "magic"',"\n","}")),"YAML:",r.a.createElement("br",null),r.a.createElement("code",null,r.a.createElement("pre",null,"---","\n","somevar: somevalue","\n","password: magic"))),label:t._({id:"Extra variables"}),"aria-label":t._({id:"Extra variables"})}))))})),f_=j.b.div(m_||(m_=Object(v.a)(["\n  color: var(--pf-global--danger-color--200);\n  font-weight: var(--pf-global--FontWeight--bold);\n"]))),v_=Object(j.b)(zt.a)(p_||(p_=Object(v.a)(["\n  margin-left: 10px;\n  color: var(--pf-global--danger-color--100);\n"])));var __=Object(Va.d)({mapPropsToValues:function(e){var t=e.adHocItems,a=e.verbosityOptions;return{limit:t.map((function(e){return e.name})).join(", ")||"all",credential:[],module_args:"",verbosity:a[0].value,forks:0,diff_mode:!1,become_enabled:"",module_name:"",extra_vars:"---",job_type:"run"}}})((function(e){var t=e.onLaunch,a=e.i18n,i=e.moduleOptions,l=e.verbosityOptions,o=e.onCloseWizard,c=e.credentialTypeId,s=Object(n.useState)(1),u=Object(f.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(!1),b=Object(f.a)(p,2),v=b[0],_=b[1],h=Object(Va.c)(),E=h.values,y=h.errors,g=h.touched,O=[{id:1,key:1,name:y.module_args&&g.module_args?r.a.createElement(f_,null,a._({id:"Details"}),r.a.createElement(Ea.a,{position:"right",content:a._({id:"This step contains errors"}),trigger:"click mouseenter focus"},r.a.createElement(v_,null))):a._({id:"Details"}),component:r.a.createElement(b_,{moduleOptions:i,verbosityOptions:l}),enableNext:!!E.module_name&&("shell"===E.module_name||"command"===E.module_name?!!E.module_args:void 0),nextButtonText:a._({id:"Next"})},{id:2,key:2,name:a._({id:"Machine credential"}),component:r.a.createElement(u_,{credentialTypeId:c,onEnableLaunch:function(){return _(!0)}}),enableNext:v&&0===Object.values(y).length,nextButtonText:a._({id:"\u8fd0\u884c"}),canJumpTo:d>=2}],j=O.find((function(e){return e.id===d}));return r.a.createElement(Ns,{style:{overflow:"scroll"},isOpen:!0,onNext:function(e){return m(e.id)},onClose:function(){return o()},onSave:function(){t(E)},steps:O,title:a._({id:"Run command"}),nextButtonText:j.nextButtonText||void 0,backButtonText:a._({id:"\u8fd4\u56de"}),cancelButtonText:a._({id:"\u53d6\u6d88"})})}));__.propTypes={onLaunch:Dn.a.func.isRequired,moduleOptions:Dn.a.arrayOf(Dn.a.array).isRequired,verbosityOptions:Dn.a.arrayOf(Dn.a.object).isRequired,onCloseWizard:Dn.a.func.isRequired,credentialTypeId:Dn.a.number.isRequired};var h_=Object(u.withI18n)()(__),E_=["credential"];var y_=Object(u.withI18n)()((function(e){var t=e.adHocItems,a=e.i18n,i=e.hasListItems,l=Object(c.g)(),s=Object(c.i)().id,u=Object(n.useState)(!1),m=Object(f.a)(u,2),v=m[0],_=m[1],h=Object(n.useContext)(pr),E=h.isKebabified,y=h.onKebabModalChange,g=[{value:"0",key:"0",label:a._({id:"0 (Normal)"})},{value:"1",key:"1",label:a._({id:"1 (Verbose)"})},{value:"2",key:"2",label:a._({id:"2 (More Verbose)"})},{value:"3",key:"3",label:a._({id:"3 (Debug)"})},{value:"4",key:"4",label:a._({id:"4 (Connection Debug)"})}];Object(n.useEffect)((function(){E&&y(v)}),[E,v,y]);var j=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Qe.readAdHocOptions(s),Be.read({namespace:"ssh"})]);case 2:return t=e.sent,a=Object(f.a)(t,2),n=a[0],r=a[1],e.abrupt("return",{moduleOptions:n.data.actions.GET.module_name.choices,credentialTypeId:r.data.results[0].id,isAdHocDisabled:!n.data.actions.POST});case 7:case"end":return e.stop()}}),e)}))),[s]),{moduleOptions:[],isAdHocDisabled:!0}),k=j.result,w=k.moduleOptions,C=k.credentialTypeId,S=k.isAdHocDisabled,x=j.request,T=j.error;Object(n.useEffect)((function(){x()}),[x]);var I=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.launchAdHocCommands(s,t);case 2:a=e.sent,n=a.data,l.push("/jobs/command/".concat(n.id,"/output"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,l])),A=I.isLoading,R=I.error,N=I.request,D=Qa(R||T),L=D.error,P=D.dismissError,U=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.credential,n=Object(o.a)(t,E_),r=a[0].id,i=Object(d.a)({credential:r},n),e.next=5,N(i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return A?r.a.createElement(Nr,null):L&&v?r.a.createElement(Zt,{isOpen:L,variant:"error",title:a._({id:"Error!"}),onClose:function(){P(),_(!1)}},R?r.a.createElement(r.a.Fragment,null,a._({id:"Failed to launch job."}),r.a.createElement(ua,{error:L})):r.a.createElement(za,{error:L})):r.a.createElement(r.a.Fragment,null,E?r.a.createElement(ka.a,{key:"cancel-job",isDisabled:S||!i,component:"button","aria-label":a._({id:"Run Command"}),onClick:function(){return _(!0)}},a._({id:"Run Command"})):r.a.createElement(O.a,{variant:"secondary","aria-label":a._({id:"Run Command"}),onClick:function(){return _(!0)},isDisabled:S||!i},a._({id:"Run Command"})),v&&r.a.createElement(h_,{adHocItems:t,moduleOptions:w,verbosityOptions:g,credentialTypeId:C,onCloseWizard:function(){return _(!1)},onLaunch:U,onDismissError:function(){return P()}}))})),g_=Object(j.b)(Fo.a).withConfig({displayName:"InventoryGroupHostListItem__DataListAction",componentId:"sc-jzyn4f-0"})(["align-items:center;display:grid;grid-gap:24px;grid-template-columns:min-content 40px;"]);var O_=Object(u.withI18n)()((function(e){var t,a=e.i18n,n=e.detailUrl,i=e.editUrl,l=e.host,o=e.isSelected,c=e.onSelect,u=l.summary_fields.recent_jobs.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"job"})})),m="check-action-".concat(l.id);return r.a.createElement(ho.a,{key:l.id,"aria-labelledby":m,id:"".concat(l.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-host-".concat(l.id),checked:o,onChange:c,"aria-labelledby":m}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"".concat(n)},r.a.createElement("b",null,l.name))),r.a.createElement(ko,{key:"recentJobs"},r.a.createElement(Op,{jobs:u}))]}),r.a.createElement(g_,{"aria-label":"actions","aria-labelledby":m,id:m},r.a.createElement(j_,{host:l}),(null===(t=l.summary_fields.user_capabilities)||void 0===t?void 0:t.edit)&&r.a.createElement(Ea.a,{content:a._({id:"\u7f16\u8f91\u4e3b\u673a"}),position:"top"},r.a.createElement(k_,{"aria-label":a._({id:"\u7f16\u8f91\u4e3b\u673a"}),variant:"plain",component:s.b,to:"".concat(i)},r.a.createElement(Mo.a,null))))))})),j_=Object(j.b)(Ab).withConfig({displayName:"InventoryGroupHostListItem___StyledHostToggle",componentId:"sc-jzyn4f-1"})(["grid-column:1"]),k_=Object(j.b)(O.a).withConfig({displayName:"InventoryGroupHostListItem___StyledButton",componentId:"sc-jzyn4f-2"})(["grid-column:2"]),w_=R("host",{page:1,page_size:20,order_by:"name"});var C_=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)(!1),i=Object(f.a)(a,2),l=i[0],o=i[1],u=Object(c.i)(),d=u.id,m=u.groupId,v=Object(c.h)(),_=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(w_,v.search),e.next=3,Promise.all([Ye.readAllHosts(m,n),Qe.readHostsOptions(d)]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0],o=i[1],e.abrupt("return",{hosts:l.data.results,hostCount:l.data.count,actions:o.data.actions,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[m,d,v.search]),{hosts:[],hostCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),h=_.result,E=h.hosts,y=h.hostCount,g=h.actions,O=h.relatedSearchableKeys,j=h.searchableKeys,k=_.error,w=_.isLoading,C=_.request,S=Uo(E),x=S.selected,T=S.isAllSelected,I=S.handleSelect,R=S.setSelected;Object(n.useEffect)((function(){C()}),[C]);var D=en(Object(n.useCallback)((function(){return Promise.all(x.map((function(e){return Ye.disassociateHost(m,e)})))}),[m,x]),{qsConfig:w_,allItemsSelected:T,fetchItems:C}),L=D.isLoading,P=D.deleteItems,U=D.deletionError,G=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:R([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=Object(n.useCallback)((function(e){return Qe.readHosts(d,F(e,{not__groups:m}))}),[m,d]),z=Object(n.useCallback)((function(){return Qe.readHostsOptions(d)}),[d]),M=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return Ye.associateHost(m,e.id)})));case 2:C();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,C])),K=M.request,V=Qa(M.error),H=V.error,B=V.dismissError,W=Qa(U),J=W.error,Y=W.dismissError,X=g&&Object.prototype.hasOwnProperty.call(g,"POST"),Z="/inventories/inventory/".concat(d,"/groups/").concat(m,"/nested_hosts/add"),$=t._({id:"Add existing host"}),Q=t._({id:"Add new host"}),ee=r.a.createElement(mb,{key:"add",dropdownItems:[r.a.createElement(ka.a,{onClick:function(){return o(!0)},key:$,"aria-label":$},$),r.a.createElement(ka.a,{component:s.b,to:"".concat(Z),key:Q,"aria-label":Q},Q)]});return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:k,hasContentLoading:w||L,items:E,itemCount:y,pluralizedItemName:t._({id:"Hosts"}),qsConfig:w_,onRowClick:I,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:j,toolbarRelatedSearchableKeys:O,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:T,onSelectAll:function(e){return R(e?Object(A.a)(E):[])},qsConfig:w_,additionalControls:[].concat(Object(A.a)(X?[ee]:[]),[r.a.createElement(y_,{adHocItems:x,hasListItems:y>0}),r.a.createElement(Nf,{key:"disassociate",onDisassociate:G,itemsToDisassociate:x,modalTitle:t._({id:"Disassociate host from group?"}),modalNote:t._({id:"Note that only hosts directly in this group can be disassociated. Hosts in sub-groups must be disassociated directly from the sub-group level that they belong."})})])}))},renderItem:function(e){return r.a.createElement(O_,{key:e.id,host:e,detailUrl:"/inventories/inventory/".concat(d,"/hosts/").concat(e.id,"/details"),editUrl:"/inventories/inventory/".concat(d,"/hosts/").concat(e.id,"/edit"),isSelected:x.some((function(t){return t.id===e.id})),onSelect:function(){return I(e)}})},emptyStateControls:X&&ee}),l&&r.a.createElement(If,{header:t._({id:"Hosts"}),fetchRequest:q,optionsRequest:z,isModalOpen:l,onAssociate:K,onClose:function(){return o(!1)},title:t._({id:"Select Hosts"})}),H&&r.a.createElement(Zt,{isOpen:H,onClose:B,title:t._({id:"Error!"}),variant:"error"},t._({id:"Failed to associate."}),r.a.createElement(ua,{error:H})),J&&r.a.createElement(Zt,{isOpen:J,onClose:Y,title:t._({id:"Error!"}),variant:"error"},t._({id:"Failed to disassociate one or more hosts."}),r.a.createElement(ua,{error:J})))}));var S_=function(e){var t=e.inventoryGroup;return r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/inventories/inventory/:id/groups/:groupId/nested_hosts/add"},r.a.createElement(o_,{inventoryGroup:t})),r.a.createElement(c.b,{path:"/inventories/inventory/:id/groups/:groupId/nested_hosts"},r.a.createElement(C_,null)))},x_=Object(j.b)(Fo.a).withConfig({displayName:"InventoryRelatedGroupListItem__DataListAction",componentId:"sc-cgucbw-0"})(["align-items:center;display:grid;grid-gap:24px;grid-template-columns:min-content 40px;"]);var T_=Object(u.withI18n)()((function(e){var t,a=e.i18n,n=e.detailUrl,i=e.editUrl,l=e.group,o=e.isSelected,c=e.onSelect,u="check-action-".concat(l.id);return r.a.createElement(ho.a,{key:l.id,"aria-labelledby":u,id:"".concat(l.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-group-".concat(l.id),checked:o,onChange:c,"aria-labelledby":u}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"".concat(n)},r.a.createElement("b",null,l.name)))]}),r.a.createElement(x_,{"aria-label":"actions","aria-labelledby":u,id:u},(null===(t=l.summary_fields.user_capabilities)||void 0===t?void 0:t.edit)&&r.a.createElement(Ea.a,{content:a._({id:"Edit Group"}),position:"top"},r.a.createElement(I_,{"aria-label":a._({id:"Edit Group"}),variant:"plain",component:s.b,to:"".concat(i)},r.a.createElement(Mo.a,null))))))})),I_=Object(j.b)(O.a).withConfig({displayName:"InventoryRelatedGroupListItem___StyledButton",componentId:"sc-cgucbw-1"})(["grid-column:2"]),A_=R("group",{page:1,page_size:20,order_by:"name"});var R_=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)(!1),i=Object(f.a)(a,2),l=i[0],o=i[1],u=Object(n.useState)(null),d=Object(f.a)(u,2),m=d[0],v=d[1],_=Object(n.useState)(null),h=Object(f.a)(_,2),E=h[0],y=h[1],g=Object(c.i)(),O=g.id,j=g.groupId,k=Object(c.h)(),w=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(A_,k.search),e.next=3,Promise.all([Ye.readChildren(j,n),Qe.readGroupsOptions(O)]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0],o=i[1],e.abrupt("return",{groups:l.data.results,itemCount:l.data.count,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable})),canAdd:o.data.actions&&Object.prototype.hasOwnProperty.call(o.data.actions,"POST")});case 8:case"end":return e.stop()}}),e)}))),[j,k.search,O]),{groups:[],itemCount:0,canAdd:!1}),C=w.request,S=w.result,x=S.groups,T=S.itemCount,I=S.relatedSearchableKeys,R=S.searchableKeys,D=S.canAdd,L=w.isLoading,P=w.error;Object(n.useEffect)((function(){C()}),[C]);var U=Object(n.useCallback)((function(e){return Ye.readPotentialGroups(j,F(e,{not__id:j,not__parents:j}))}),[j]),G=Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.map((function(e){return Ye.associateChildGroup(j,e.id)})));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),v(e.t0);case 8:C();case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[j,C]),q=Uo(x),z=q.selected,M=q.isAllSelected,K=q.handleSelect,V=q.setSelected,H=Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(z.map((function(e){var t=e.id;return Ye.disassociateChildGroup(parseInt(j,10),t)})));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),y(e.t0);case 8:C(),V([]);case 10:case"end":return e.stop()}}),e,null,[[0,5]])}))),[j,z,V,C]),B=Object(n.useCallback)((function(){return Qe.readGroupsOptions(O)}),[O]),W=Qa(m||E),J=W.error,Y=W.dismissError,X="/inventories/inventory/".concat(O,"/groups/").concat(j,"/nested_groups/add"),Z=t._({id:"Add existing group"}),$=t._({id:"Add new group"}),Q=r.a.createElement(mb,{key:"add",dropdownItems:[r.a.createElement(ka.a,{key:Z,onClick:function(){return o(!0)},"aria-label":Z},Z),r.a.createElement(ka.a,{component:s.b,to:"".concat(X),key:$,"aria-label":$},$)]});return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:P,hasContentLoading:L,items:x,itemCount:T,pluralizedItemName:t._({id:"Related Groups"}),qsConfig:A_,onRowClick:K,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:R,toolbarRelatedSearchableKeys:I,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:M,onSelectAll:function(e){return V(e?Object(A.a)(x):[])},qsConfig:A_,additionalControls:[].concat(Object(A.a)(D?[Q]:[]),[r.a.createElement(y_,{adHocItems:z,hasListItems:T>0}),r.a.createElement(Nf,{key:"disassociate",onDisassociate:H,itemsToDisassociate:z,modalTitle:t._({id:"Disassociate related group(s)?"})})])}))},renderItem:function(e){return r.a.createElement(T_,{key:e.id,group:e,detailUrl:"/inventories/inventory/".concat(O,"/groups/").concat(e.id,"/details"),editUrl:"/inventories/inventory/".concat(O,"/groups/").concat(e.id,"/edit"),isSelected:z.some((function(t){return t.id===e.id})),onSelect:function(){return K(e)}})},emptyStateControls:D&&Q}),l&&r.a.createElement(If,{header:t._({id:"Groups"}),fetchRequest:U,optionsRequest:B,isModalOpen:l,onAssociate:G,onClose:function(){return o(!1)},title:t._({id:"Select Groups"})}),J&&r.a.createElement(Zt,{isOpen:J,onClose:Y,title:t._({id:"Error!"}),variant:"error"},m?t._({id:"Failed to associate."}):t._({id:"Failed to disassociate one or more groups."}),r.a.createElement(ua,{error:J})))}));var N_=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],i=t[1],l=Object(c.g)(),o=Object(c.i)(),s=o.id,u=o.groupId,d=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.inventory=s,e.prev=1,e.next=4,Ye.create(t);case 4:return a=e.sent,n=a.data,e.next=8,Ye.associateChildGroup(u,n.id);case 8:l.push("/inventories/inventory/".concat(s,"/groups/").concat(n.id,"/details"),{prevGroupId:u}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement($v,{handleSubmit:d,handleCancel:function(){l.push("/inventories/inventory/".concat(s,"/groups/").concat(u,"/nested_groups"))},error:a})};var D_=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{key:"addRelatedGroups",path:"/inventories/inventory/:id/groups/:groupId/nested_groups/add"},r.a.createElement(N_,null)),r.a.createElement(c.b,{key:"relatedGroups",path:"/inventories/inventory/:id/groups/:groupId/nested_groups"},r.a.createElement(R_,null))))};var L_=Object(u.withI18n)()((function(e){var t,a,i=e.i18n,l=e.setBreadcrumb,o=e.inventory,u=Object(n.useState)(null),d=Object(f.a)(u,2),m=d[0],v=d[1],_=Object(n.useState)(!0),h=Object(f.a)(_,2),E=h[0],y=h[1],g=Object(n.useState)(null),O=Object(f.a)(g,2),j=O[0],k=O[1],w=Object(c.i)(),C=w.id,S=w.groupId,x=Object(c.h)();Object(n.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ye.readDetail(S);case 3:t=e.sent,a=t.data,v(a),l(o,a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),k(e.t0);case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}})()()}),[x.pathname,S,o,l]);var T=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,{"aria-label":i._({id:"Back to Groups"})}),i._({id:"Back to Groups"})),link:"/inventories/inventory/".concat(o.id,"/groups"),id:99},{name:i._({id:"Details"}),link:"/inventories/inventory/".concat(o.id,"/groups/").concat(null===m||void 0===m?void 0:m.id,"/details"),id:0},{name:i._({id:"Related Groups"}),link:"/inventories/inventory/".concat(o.id,"/groups/").concat(null===m||void 0===m?void 0:m.id,"/nested_groups"),id:1},{name:i._({id:"Hosts"}),link:"/inventories/inventory/".concat(o.id,"/groups/").concat(null===m||void 0===m?void 0:m.id,"/nested_hosts"),id:2}];if(E)return r.a.createElement(Nr,null);if(j)return r.a.createElement(za,{error:j});if((null===m||void 0===m||null===(t=m.summary_fields)||void 0===t||null===(a=t.inventory)||void 0===a?void 0:a.id)!==parseInt(C,10))return r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"/inventories/inventory/".concat(o.id,"/groups")},i._({id:"View Inventory Groups"})));var I=!0;return["add","edit"].some((function(e){return x.pathname.includes(e)}))&&(I=!1),r.a.createElement(r.a.Fragment,null,I&&r.a.createElement(us,{tabsArray:T}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/inventories/inventory/:id/groups/:groupId",to:"/inventories/inventory/:id/groups/:groupId/details",exact:!0}),m&&[r.a.createElement(c.b,{key:"edit",path:"/inventories/inventory/:id/groups/:groupId/edit"},r.a.createElement(e_,{inventoryGroup:m})),r.a.createElement(c.b,{key:"details",path:"/inventories/inventory/:id/groups/:groupId/details"},r.a.createElement(l_,{inventoryGroup:m})),r.a.createElement(c.b,{key:"hosts",path:"/inventories/inventory/:id/groups/:groupId/nested_hosts"},r.a.createElement(S_,{inventoryGroup:m})),r.a.createElement(c.b,{key:"relatedGroups",path:"/inventories/inventory/:id/groups/:groupId/nested_groups"},r.a.createElement(D_,null))],r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,null,o&&r.a.createElement(s.b,{to:"/inventories/inventory/".concat(o.id,"/details")},i._({id:"View Inventory Details"}))))))}));var P_=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.group,n=e.inventoryId,i=e.isSelected,l=e.onSelect,o="check-action-".concat(a.id),c="/inventories/inventory/".concat(n,"/groups/").concat(a.id,"/details"),u="/inventories/inventory/".concat(n,"/groups/").concat(a.id,"/edit");return r.a.createElement(ho.a,{key:a.id,"aria-labelledby":o,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{"aria-labelledby":o,id:"select-group-".concat(a.id),checked:i,onChange:l}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"".concat(c),id:o},r.a.createElement("b",null,a.name)))]}),r.a.createElement(Fo.a,{"aria-label":"actions","aria-labelledby":o,id:o},a.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:t._({id:"Edit Group"}),position:"top"},r.a.createElement(O.a,{"aria-label":t._({id:"Edit Group"}),variant:"plain",component:s.b,to:u},r.a.createElement(Mo.a,null))))))})),U_=R("group",{page:1,page_size:20,order_by:"name"});function G_(e){return!e.summary_fields.user_capabilities.delete}var q_=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.i)().id,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(U_,a.search),e.next=3,Promise.all([Qe.readGroups(i,r),Qe.readGroupsOptions(i)]);case 3:return l=e.sent,o=Object(f.a)(l,2),c=o[0],s=o[1],e.abrupt("return",{groups:c.data.results,groupCount:c.data.count,actions:s.data.actions,relatedSearchableKeys:((null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=s.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=s.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[i,a]),{groups:[],groupCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),o=l.result,s=o.groups,u=o.groupCount,d=o.actions,m=o.relatedSearchableKeys,v=o.searchableKeys,_=l.error,h=l.isLoading,E=l.request;Object(n.useEffect)((function(){E()}),[E]);var y=Uo(s),g=y.selected,O=y.isAllSelected,j=y.handleSelect,k=y.setSelected,w=function(){var e=g.filter(G_).map((function(e){return e.name})).join(", ");return g.some(G_)?r.a.createElement("div",null,t._({id:"You do not have permission to delete the following Groups: {itemsUnableToDelete}",values:{itemsUnableToDelete:e}})):g.length?t._({id:"\u5220\u9664"}):t._({id:"Select a row to delete"})},C=d&&Object.prototype.hasOwnProperty.call(d,"POST");return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:_,hasContentLoading:h,items:s,itemCount:u,qsConfig:U_,onRowClick:j,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"Group type"}),key:"parents__isnull",isBoolean:!0,booleanLabels:{true:t._({id:"Show only root groups"}),false:t._({id:"Show all groups"})}},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:v,toolbarRelatedSearchableKeys:m,renderItem:function(e){return r.a.createElement(P_,{key:e.id,group:e,inventoryId:i,isSelected:g.some((function(t){return t.id===e.id})),onSelect:function(){return j(e)}})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:O,onSelectAll:function(e){return k(e?Object(A.a)(s):[])},qsConfig:U_,additionalControls:[].concat(Object(A.a)(C?[r.a.createElement(Po,{key:"add",linkTo:"/inventories/inventory/".concat(i,"/groups/add")})]:[]),[r.a.createElement(y_,{adHocItems:g,hasListItems:u>0}),r.a.createElement(Ea.a,{content:w(),position:"top",key:"delete"},r.a.createElement(n_,{groups:g,isDisabled:0===g.length||g.some(G_),onAfterDelete:function(){E(),k([])}}))])}))},emptyStateControls:C&&r.a.createElement(Po,{key:"add",linkTo:"/inventories/inventory/".concat(i,"/groups/add")})}))}));var F_=Object(u.withI18n)()((function(e){var t=e.setBreadcrumb,a=e.inventory;return r.a.createElement(c.d,null,r.a.createElement(c.b,{key:"add",path:"/inventories/inventory/:id/groups/add"},r.a.createElement(Qv,{setBreadcrumb:t,inventory:a})),r.a.createElement(c.b,{key:"details",path:"/inventories/inventory/:id/groups/:groupId/"},r.a.createElement(L_,{inventory:a,setBreadcrumb:t})),r.a.createElement(c.b,{key:"list",path:"/inventories/inventory/:id/groups"},r.a.createElement(q_,null)))}));var z_=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.host,i=a.created,l=a.description,o=a.id,u=a.modified,m=a.name,v=a.variables,_=a.summary_fields,h=_.inventory,E=_.recent_jobs,y=_.created_by,g=_.modified_by,j=_.user_capabilities,k=Object(n.useState)(!1),w=Object(f.a)(k,2),C=w[0],S=w[1],x=Object(n.useState)(!1),T=Object(f.a)(x,2),I=T[0],A=T[1],R=Object(c.g)(),N=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,Xe.destroy(o);case 4:R.push("/inventories/inventory/".concat(h.id,"/hosts")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),A(e.t0);case 10:return e.prev=10,S(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(){return e.apply(this,arguments)}}();if(!C&&I)return r.a.createElement(Zt,{isOpen:I,variant:"error",title:t._({id:"Error!"}),onClose:function(){return A(!1)}},t._({id:"Failed to delete {name}.",values:{name:m}}),r.a.createElement(ua,{error:I}));var D=E.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"job"})}));return r.a.createElement(Bc,null,r.a.createElement(M_,{host:a}),r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:t._({id:"\u540d\u79f0"}),value:m}),(null===D||void 0===D?void 0:D.length)>0&&r.a.createElement(xi,{label:t._({id:"Activity"}),value:r.a.createElement(Op,{jobs:D})}),r.a.createElement(xi,{label:t._({id:"\u63cf\u8ff0"}),value:l}),r.a.createElement(Li,{date:i,label:t._({id:"\u5df2\u521b\u5efa"}),user:y}),r.a.createElement(Li,{date:u,label:t._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),user:g}),r.a.createElement(_l,{label:t._({id:"\u53d8\u91cf"}),rows:4,value:v})),r.a.createElement(Yc,null,(null===j||void 0===j?void 0:j.edit)&&r.a.createElement(O.a,{"aria-label":t._({id:"edit"}),component:s.b,to:"/inventories/inventory/".concat(h.id,"/hosts/").concat(o,"/edit")},t._({id:"Edit"})),(null===j||void 0===j?void 0:j.delete)&&r.a.createElement(Qc,{name:m,modalTitle:t._({id:"Delete Host"}),onConfirm:function(){return N()}})),I&&r.a.createElement(Zt,{isOpen:I,variant:"error",title:t._({id:"Error!"}),onClose:function(){return A(null)}},t._({id:"Failed to delete host."}),r.a.createElement(ua,{error:I})))})),M_=Object(j.b)(Ab).withConfig({displayName:"InventoryHostDetail___StyledHostToggle",componentId:"sc-10smphg-0"})(["padding-bottom:40px"]);var K_=function(e){var t=e.host,a=e.inventory,i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u="/inventories/inventory/".concat(a.id,"/hosts/").concat(t.id,"/details"),d=Object(c.g)(),m=function(){var e=Object(b.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe.update(t.id,a);case 3:d.push(u),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(Of,{host:t,handleSubmit:m,handleCancel:function(){d.push(u)},isInventoryVisible:!1,submitError:o}))};var V_=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.host,i=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe.readFacts(a.id);case 2:return t=e.sent,n=t.data,e.abrupt("return",JSON.stringify(n,null,4));case 5:case"end":return e.stop()}}),e)}))),[a]),null),l=i.request,o=i.isLoading,c=i.error,s=i.result;return Object(n.useEffect)((function(){l()}),[l]),c?r.a.createElement(za,{error:c}):o||null===s?r.a.createElement(Nr,null):r.a.createElement(Bc,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(_l,{label:t._({id:"Facts"}),fullHeight:!0,value:s})))}));var H_=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.group,n=e.inventoryId,i=e.isSelected,l=e.onSelect,o="check-action-".concat(a.id),c="/inventories/inventory/".concat(n,"/groups/").concat(a.id,"/details"),u="/inventories/inventory/".concat(n,"/groups/").concat(a.id,"/edit");return r.a.createElement(ho.a,{key:a.id,"aria-labelledby":o,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{"aria-labelledby":o,id:"select-group-".concat(a.id),checked:i,onChange:l}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"".concat(c),id:o},r.a.createElement("b",null,a.name)))]}),r.a.createElement(Fo.a,{"aria-label":"actions","aria-labelledby":o,id:o},a.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:t._({id:"Edit Group"}),position:"top"},r.a.createElement(O.a,{variant:"plain",component:s.b,to:u},r.a.createElement(Mo.a,null))))))})),B_=R("group",{page:1,page_size:20,order_by:"name"});var W_=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)(!1),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(c.i)(),u=s.hostId,d=s.id,m=Object(c.h)().search,v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(B_,m),e.next=3,Promise.all([Xe.readAllGroups(u,n),Xe.readGroupsOptions(u)]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0].data,o=l.count,c=l.results,s=i[1],e.abrupt("return",{groups:c,itemCount:o,actions:s.data.actions,relatedSearchableKeys:((null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=s.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=s.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 10:case"end":return e.stop()}}),e)}))),[u,m]),{groups:[],itemCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),_=v.result,h=_.groups,E=_.itemCount,y=_.actions,g=_.relatedSearchableKeys,O=_.searchableKeys,j=v.error,k=v.isLoading,w=v.request;Object(n.useEffect)((function(){w()}),[w]);var C=Uo(h),S=C.selected,x=C.isAllSelected,T=C.handleSelect,I=C.setSelected,R=en(Object(n.useCallback)((function(){return Promise.all(S.map((function(e){return Xe.disassociateGroup(u,e)})))}),[u,S]),{qsConfig:B_,allItemsSelected:x,fetchItems:w}),D=R.isLoading,L=R.deleteItems,P=R.deletionError,U=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:I([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=Object(n.useCallback)((function(e){return Qe.readGroups(d,F(e,{not__hosts:u}))}),[d,u]),q=Object(n.useCallback)((function(){return Qe.readGroupsOptions(d)}),[d]),z=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return Xe.associateGroup(u,e.id)})));case 2:w();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,w])),M=z.request,K=z.error,V=Qa(K||P),H=V.error,B=V.dismissError,W=y&&Object.prototype.hasOwnProperty.call(y,"POST");return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:j,hasContentLoading:k||D,items:h,itemCount:E,qsConfig:B_,onRowClick:T,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:O,toolbarRelatedSearchableKeys:g,renderItem:function(e){return r.a.createElement(H_,{key:e.id,group:e,inventoryId:e.summary_fields.inventory.id,isSelected:S.some((function(t){return t.id===e.id})),onSelect:function(){return T(e)}})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:x,onSelectAll:function(e){return I(e?Object(A.a)(h):[])},qsConfig:B_,additionalControls:[].concat(Object(A.a)(W?[r.a.createElement(Po,{key:"add",onClick:function(){return o(!0)}})]:[]),[r.a.createElement(y_,{adHocItems:S,hasListItems:E>0}),r.a.createElement(Nf,{key:"disassociate",onDisassociate:U,itemsToDisassociate:S,modalTitle:t._({id:"Disassociate group from host?"}),modalNote:t._({id:"Note that you may still see the group in the list after disassociating if the host is also a member of that group\u2019s children.  This list shows all groups the host is associated with directly and indirectly."})})])}))},emptyStateControls:W?r.a.createElement(Po,{key:"add",onClick:function(){return o(!0)}}):null}),l&&r.a.createElement(If,{header:t._({id:"Groups"}),fetchRequest:G,optionsRequest:q,isModalOpen:l,onAssociate:M,onClose:function(){return o(!1)},title:t._({id:"Select Groups"})}),H&&r.a.createElement(Zt,{isOpen:H,onClose:B,title:t._({id:"Error!"}),variant:"error"},K?t._({id:"Failed to associate."}):t._({id:"Failed to disassociate one or more groups."}),r.a.createElement(ua,{error:H})))}));var J_=Object(u.withI18n)()((function(){return r.a.createElement(c.d,null,r.a.createElement(c.b,{key:"list",path:"/inventories/inventory/:id/hosts/:hostId/groups"},r.a.createElement(W_,null)))}));var Y_=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=e.inventory,l=Object(c.h)(),o=Object(c.j)("/inventories/inventory/:id/hosts/:hostId"),u="/inventories/inventory/".concat(i.id,"/hosts"),d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.readHostDetail(i.id,o.params.hostId);case 2:return t=e.sent,e.abrupt("return",{host:t});case 4:case"end":return e.stop()}}),e)}))),[i.id,o.params.hostId]),{host:null}),m=d.result.host,f=d.error,v=d.isLoading,_=d.request;Object(n.useEffect)((function(){_()}),[_,l.pathname]),Object(n.useEffect)((function(){i&&m&&a(i,m)}),[i,m,a]);var h=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Hosts"})),link:"".concat(u),id:0},{name:t._({id:"Details"}),link:"".concat(o.url,"/details"),id:1},{name:t._({id:"Facts"}),link:"".concat(o.url,"/facts"),id:2},{name:t._({id:"Groups"}),link:"".concat(o.url,"/groups"),id:3},{name:t._({id:"Completed Jobs"}),link:"".concat(o.url,"/completed_jobs"),id:4}];if(f)return r.a.createElement(na.a,null,r.a.createElement(za,{error:f},f.response&&404===f.response.status&&r.a.createElement("span",null,t._({id:"Host not found."})," ",r.a.createElement(s.b,{to:u},t._({id:"View all Inventory Hosts."})))));var E=!0;return["edit"].some((function(e){return l.pathname.includes(e)}))&&(E=!1),r.a.createElement(r.a.Fragment,null,E&&r.a.createElement(us,{tabsArray:h}),v&&r.a.createElement(Nr,null),!v&&m&&r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/inventories/inventory/:id/hosts/:hostId",to:"/inventories/inventory/:id/hosts/:hostId/details",exact:!0}),r.a.createElement(c.b,{key:"details",path:"/inventories/inventory/:id/hosts/:hostId/details"},r.a.createElement(z_,{host:m})),r.a.createElement(c.b,{key:"edit",path:"/inventories/inventory/:id/hosts/:hostId/edit"},r.a.createElement(K_,{host:m,inventory:i})),r.a.createElement(c.b,{key:"facts",path:"/inventories/inventory/:id/hosts/:hostId/facts"},r.a.createElement(V_,{host:m})),r.a.createElement(c.b,{key:"groups",path:"/inventories/inventory/:id/hosts/:hostId/groups"},r.a.createElement(J_,null)),r.a.createElement(c.b,{key:"completed-jobs",path:"/inventories/inventory/:id/hosts/:hostId/completed_jobs"},r.a.createElement(tb,{defaultParams:{job__hosts:m.id}})),r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(o.url,"/details")},t._({id:"View Inventory Host Details"}))))))}));var X_,Z_=function(e){var t=e.inventory,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],o=i[1],s="/inventories/inventory/".concat(t.id,"/hosts"),u=Object(c.g)(),m=function(){var e=Object(b.a)(p.a.mark((function e(a){var n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(d.a)(Object(d.a)({},a),{},{inventory:t.id}),e.next=4,Xe.create(n);case 4:r=e.sent,i=r.data,u.push("".concat(s,"/").concat(i.id,"/details")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),o(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(Of,{handleSubmit:m,handleCancel:function(){u.push(s)},isInventoryVisible:!1,submitError:l}))},$_=Object(j.b)(Fo.a)(X_||(X_=Object(v.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 24px;\n  grid-template-columns: min-content 40px;\n"])));var Q_=Object(u.withI18n)()((function(e){var t,a=e.detailUrl,n=e.editUrl,i=e.host,l=e.i18n,o=e.isSelected,c=e.onSelect,u=i.summary_fields.recent_jobs.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"job"})})),m="check-action-".concat(i.id);return r.a.createElement(ho.a,{key:i.id,"aria-labelledby":m,id:"".concat(i.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-host-".concat(i.id),checked:o,onChange:c,"aria-labelledby":m}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"divider"},r.a.createElement(s.b,{to:"".concat(a)},r.a.createElement("b",null,i.name))),r.a.createElement(ko,{key:"recentJobs"},r.a.createElement(Op,{jobs:u}))]}),r.a.createElement($_,{"aria-label":"actions","aria-labelledby":m,id:m},r.a.createElement(Ab,{host:i}),(null===(t=i.summary_fields.user_capabilities)||void 0===t?void 0:t.edit)&&r.a.createElement(Ea.a,{content:l._({id:"\u7f16\u8f91\u4e3b\u673a"}),position:"top"},r.a.createElement(O.a,{variant:"plain",component:s.b,to:"".concat(n)},r.a.createElement(Mo.a,null))))))})),eh=R("host",{page:1,page_size:20,order_by:"name"});var th=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)([]),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(c.i)().id,u=Object(c.h)().search,d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(eh,u),e.next=3,Promise.all([Qe.readHosts(s,n),Qe.readHostsOptions(s)]);case 3:return r=e.sent,i=Object(f.a)(r,2),l=i[0],o=i[1],e.abrupt("return",{hosts:l.data.results,hostCount:l.data.count,actions:o.data.actions,relatedSearchableKeys:((null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=o.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=o.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[s,u]),{hosts:[],hostCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),m=d.result,v=m.hosts,_=m.hostCount,h=m.actions,E=m.relatedSearchableKeys,y=m.searchableKeys,g=d.error,O=d.isLoading,j=d.request;Object(n.useEffect)((function(){j()}),[j]);var k=function(e){o(e?Object(A.a)(v):[])},w=en(Object(n.useCallback)((function(){return Promise.all(l.map((function(e){return Xe.destroy(e.id)})))}),[l]),{qsConfig:eh,fetchItems:j}),C=w.isLoading,S=w.deleteItems,x=w.deletionError,T=w.clearDeletionError,I=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:o([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=h&&Object.prototype.hasOwnProperty.call(h,"POST"),D=l.length>0&&l.length===v.length;return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:g,hasContentLoading:O||C,items:v,itemCount:_,pluralizedItemName:t._({id:"Hosts"}),qsConfig:eh,toolbarColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name",isSortable:!0,isSearchable:!0},{name:t._({id:"\u66f4\u6539"}),key:"modified",isSortable:!0,isNumeric:!0},{name:t._({id:"\u5df2\u521b\u5efa"}),key:"created",isSortable:!0,isNumeric:!0}],toolbarSearchableKeys:y,toolbarRelatedSearchableKeys:E,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:D,onSelectAll:k,qsConfig:eh,additionalControls:[].concat(Object(A.a)(R?[r.a.createElement(Po,{key:"add",linkTo:"/inventories/inventory/".concat(s,"/hosts/add")})]:[]),[r.a.createElement(y_,{adHocItems:l,hasListItems:_>0}),r.a.createElement(Ro,{key:"delete",onDelete:I,itemsToDelete:l,pluralizedItemName:t._({id:"Hosts"})})])}))},renderItem:function(e){return r.a.createElement(Q_,{key:e.id,host:e,detailUrl:"/inventories/inventory/".concat(s,"/hosts/").concat(e.id,"/details"),editUrl:"/inventories/inventory/".concat(s,"/hosts/").concat(e.id,"/edit"),isSelected:l.some((function(t){return t.id===e.id})),onSelect:function(){return t=e,void(l.some((function(e){return e.id===t.id}))?o(l.filter((function(e){return e.id!==t.id}))):o(l.concat(t)));var t}})},emptyStateControls:R&&r.a.createElement(Po,{key:"add",linkTo:"/inventories/inventory/".concat(s,"/add")})}),x&&r.a.createElement(Zt,{isOpen:x,variant:"error",title:t._({id:"Error!"}),onClose:T},t._({id:"Failed to delete one or more hosts."}),r.a.createElement(ua,{error:x})))}));var ah=function(e){var t=e.setBreadcrumb,a=e.inventory;return r.a.createElement(c.d,null,r.a.createElement(c.b,{key:"host-add",path:"/inventories/inventory/:id/hosts/add"},r.a.createElement(Z_,{inventory:a})),r.a.createElement(c.b,{key:"host",path:"/inventories/inventory/:id/hosts/:hostId"},r.a.createElement(Y_,{setBreadcrumb:t,inventory:a})),r.a.createElement(c.b,{key:"host-list",path:"/inventories/inventory/:id/hosts"},r.a.createElement(th,null)))},nh=j.b.div.withConfig({displayName:"ScheduleOccurrences__OccurrencesLabel",componentId:"sc-1eb0n73-0"})(["display:inline-block;font-size:var(--pf-c-form__label--FontSize);font-weight:var(--pf-c-form__label--FontWeight);line-height:var(--pf-c-form__label--LineHeight);color:var(--pf-c-form__label--Color);span:first-of-type{font-weight:var(--pf-global--FontWeight--bold);margin-right:10px;}"]);function rh(e){var t=e.preview,a=void 0===t?{local:[],utc:[]}:t,i=e.i18n,l=Object(n.useState)("local"),o=Object(f.a)(l,2),c=o[0],s=o[1];return a.local.length<2?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(lh,{component:Dt.b.dt,fullWidth:!0},r.a.createElement($i.a,{hasGutter:!0},r.a.createElement(Qi.a,null,r.a.createElement(nh,null,r.a.createElement("span",null,i._({id:"Occurrences"})),r.a.createElement("span",null,i._({id:"(Limited to first 10)"})))),r.a.createElement(Qi.a,null,r.a.createElement(rl,{buttons:[["local","Local"],["utc","UTC"]],value:c,onChange:function(e){return s(e)}})))),r.a.createElement(oh,{component:Dt.b.dd,fullWidth:!0},a[c].map((function(e){return r.a.createElement("div",{key:e},"local"===c?ni(e):ri(e))}))))}rh.defaultProps={preview:{local:[],utc:[]}};var ih=Object(u.withI18n)()(rh),lh=Object(j.b)(ki).withConfig({displayName:"ScheduleOccurrences___StyledDetailName",componentId:"sc-1eb0n73-1"})(["grid-column:1 / -1"]),oh=Object(j.b)(wi).withConfig({displayName:"ScheduleOccurrences___StyledDetailValue",componentId:"sc-1eb0n73-2"})(["grid-column:1 / -1;margin-top:-10px"]);var ch=Object(u.withI18n)()((function(e){var t=e.schedule,a=e.onToggle,i=e.className,l=e.i18n,o=Object(n.useState)(t.enabled),c=Object(f.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(f.a)(d,2),v=m[0],_=m[1],h=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt.update(t.id,{enabled:!s});case 2:return e.abrupt("return",!s);case 3:case"end":return e.stop()}}),e)}))),[t,s]),t.enabled),E=h.result,y=h.isLoading,g=h.error,O=h.request;return Object(n.useEffect)((function(){E!==s&&(u(E),a&&a(E))}),[E,s,a]),Object(n.useEffect)((function(){g&&_(!0)}),[g]),r.a.createElement(n.Fragment,null,r.a.createElement(Ea.a,{content:t.enabled?l._({id:"Schedule is active"}):l._({id:"Schedule is inactive"}),position:"top"},r.a.createElement(sh,{className:i,id:"schedule-".concat(t.id,"-toggle"),label:l._({id:"On"}),labelOff:l._({id:"Off"}),isChecked:s,isDisabled:y||!t.summary_fields.user_capabilities.edit,onChange:O,"aria-label":l._({id:"Toggle schedule"})})),v&&g&&!y&&r.a.createElement(Zt,{variant:"error",title:l._({id:"Error!"}),isOpen:g&&!y,onClose:function(){return _(!1)}},l._({id:"Failed to toggle schedule."}),r.a.createElement(ua,{error:g})))})),sh=Object(j.b)(dm.a).withConfig({displayName:"ScheduleToggle___StyledSwitch",componentId:"sc-6oweiu-0"})(["display:inline-flex;"]),uh=Object(j.b)(qt.a).withConfig({displayName:"ScheduleDetail__PromptTitle",componentId:"sc-vyy7m-0"})(["--pf-c-title--m-md--FontWeight:700;grid-column:1 / -1;"]);var dh=Object(u.withI18n)()((function(e){var t,a,i,l,o,u=e.schedule,d=e.i18n,m=u.id,v=u.created,_=u.description,h=u.diff_mode,E=u.dtend,y=u.dtstart,g=u.extra_data,j=u.job_tags,k=u.job_type,w=u.limit,C=u.modified,S=u.name,x=u.next_run,T=u.rrule,I=u.scm_branch,A=u.skip_tags,R=u.summary_fields,N=u.timezone,D=Object(c.g)(),L=Object(c.h)().pathname,P=L.substr(0,L.indexOf("schedules")),U=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt.destroy(m);case 2:D.push("".concat(P,"schedules"));case 3:case"end":return e.stop()}}),e)}))),[m,D,P])),G=U.request,q=U.isLoading,F=Qa(U.error),z=F.error,M=F.dismissError,K=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,s,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[pt.readCredentials(m),pt.createPreview({rrule:T})],"job"===(null===u||void 0===u||null===(t=u.summary_fields)||void 0===t||null===(a=t.unified_job_template)||void 0===a?void 0:a.unified_job_type)?i.push(at.readLaunch(u.summary_fields.unified_job_template.id)):"workflow_job"===(null===u||void 0===u||null===(n=u.summary_fields)||void 0===n||null===(r=n.unified_job_template)||void 0===r?void 0:r.unified_job_type)?i.push(kt.readLaunch(u.summary_fields.unified_job_template.id)):i.push(Promise.resolve()),e.next=4,Promise.all(i);case 4:return l=e.sent,o=Object(f.a)(l,3),c=o[0].data,s=o[1].data,d=o[2],e.abrupt("return",[c.results,s,null===d||void 0===d?void 0:d.data]);case 10:case"end":return e.stop()}}),e)}))),[m,u,T]),[]),V=Object(f.a)(K.result,3),H=V[0],B=V[1],W=V[2],J=K.isLoading,Y=K.error,X=K.request;Object(n.useEffect)((function(){X()}),[X]);var Z=Object(ti.c)(T),$=Z.options.freq===ti.a.MINUTELY&&y===E?d._({id:"None (Run Once)"}):Z.toText().replace(/^\w/,(function(e){return e.toUpperCase()})),Q=W||{},ee=Q.ask_credential_on_launch,te=Q.ask_diff_mode_on_launch,ae=Q.ask_inventory_on_launch,ne=Q.ask_job_type_on_launch,re=Q.ask_limit_on_launch,ie=Q.ask_scm_branch_on_launch,le=Q.ask_skip_tags_on_launch,oe=Q.ask_tags_on_launch,ce=Q.ask_variables_on_launch,se=Q.ask_verbosity_on_launch,ue=Q.survey_enabled,de=ee||te||ae||ne||re||ie||le||oe||ce||se||ue;return J?r.a.createElement(Nr,null):Y?r.a.createElement(za,{error:Y}):r.a.createElement(Bc,null,r.a.createElement(mh,{schedule:u}),r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:d._({id:"\u540d\u79f0"}),value:S}),r.a.createElement(xi,{label:d._({id:"\u63cf\u8ff0"}),value:_}),r.a.createElement(xi,{label:d._({id:"First Run"}),value:ni(y)}),r.a.createElement(xi,{label:d._({id:"\u4e0b\u4e00\u6b21\u8fd0\u884c"}),value:ni(x)}),r.a.createElement(xi,{label:d._({id:"Last Run"}),value:ni(E)}),r.a.createElement(xi,{label:d._({id:"Local Time Zone"}),value:N}),r.a.createElement(xi,{label:d._({id:"Repeat Frequency"}),value:$}),r.a.createElement(ih,{preview:B}),r.a.createElement(Li,{label:d._({id:"\u5df2\u521b\u5efa"}),date:v,user:R.created_by}),r.a.createElement(Li,{label:d._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:C,user:R.modified_by}),de&&r.a.createElement(r.a.Fragment,null,r.a.createElement(uh,{headingLevel:"h2"},d._({id:"Prompted Fields"})),ne&&r.a.createElement(xi,{label:d._({id:"\u4f5c\u4e1a\u7c7b\u578b"}),value:k}),ae&&r.a.createElement(xi,{label:d._({id:"\u6e05\u5355"}),value:(null===R||void 0===R?void 0:R.inventory)?r.a.createElement(s.b,{to:"/inventories/".concat("smart"===(null===R||void 0===R||null===(t=R.inventory)||void 0===t?void 0:t.kind)?"smart_inventory":"inventory","/").concat(null===R||void 0===R||null===(a=R.inventory)||void 0===a?void 0:a.id,"/details")},null===R||void 0===R||null===(i=R.inventory)||void 0===i?void 0:i.name):" "}),ie&&r.a.createElement(xi,{label:d._({id:"Source Control Branch"}),value:I}),re&&r.a.createElement(xi,{label:d._({id:"\u8303\u56f4"}),value:w}),te&&"boolean"===typeof h&&r.a.createElement(xi,{label:d._({id:"Show Changes"}),value:h?d._({id:"On"}):d._({id:"Off"})}),ee&&r.a.createElement(xi,{fullWidth:!0,label:d._({id:"Credentials"}),value:r.a.createElement(fc,{numChips:5,totalChips:H.length},H.map((function(e){return r.a.createElement(du,{key:e.id,credential:e,isReadOnly:!0})})))}),oe&&j&&j.length>0&&r.a.createElement(xi,{fullWidth:!0,label:d._({id:"Job Tags"}),value:r.a.createElement(fc,{numChips:5,totalChips:j.split(",").length},j.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),le&&A&&A.length>0&&r.a.createElement(xi,{fullWidth:!0,label:d._({id:"Skip Tags"}),value:r.a.createElement(fc,{numChips:5,totalChips:A.split(",").length},A.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),(ce||ue)&&r.a.createElement(_l,{value:g,rows:4,label:d._({id:"\u53d8\u91cf"})}))),r.a.createElement(Yc,null,(null===R||void 0===R||null===(l=R.user_capabilities)||void 0===l?void 0:l.edit)&&r.a.createElement(O.a,{"aria-label":d._({id:"Edit"}),component:s.b,to:L.replace("details","edit")},d._({id:"Edit"})),(null===R||void 0===R||null===(o=R.user_capabilities)||void 0===o?void 0:o.delete)&&r.a.createElement(Qc,{name:S,modalTitle:d._({id:"Delete Schedule"}),onConfirm:G,isDisabled:q},d._({id:"\u5220\u9664"}))),z&&r.a.createElement(Zt,{isOpen:z,variant:"error",title:d._({id:"Error!"}),onClose:M},d._({id:"Failed to delete schedule."}),r.a.createElement(ua,{error:z})))})),mh=Object(j.b)(ch).withConfig({displayName:"ScheduleDetail___StyledScheduleToggle",componentId:"sc-vyy7m-1"})(["padding-bottom:40px"]);function ph(e,t){var a=e.startDateTime.split("T"),n=Object(f.a)(a,2),r=n[0],i=n[1],l=r.split("-"),o=Object(f.a)(l,3),c=o[0],s=o[1],u=o[2],d=i.split(":"),m=Object(f.a)(d,3),p=m[0],b=void 0===p?0:p,v=m[1],_=void 0===v?0:v,h=m[2],E=void 0===h?0:h,y={interval:e.interval,dtstart:new Date(Date.UTC(c,parseInt(s,10)-1,u,b,_,E)),tzid:e.timezone};switch(e.frequency){case"none":y.count=1,y.freq=ti.a.MINUTELY;break;case"minute":y.freq=ti.a.MINUTELY;break;case"hour":y.freq=ti.a.HOURLY;break;case"day":y.freq=ti.a.DAILY;break;case"week":y.freq=ti.a.WEEKLY,y.byweekday=e.daysOfWeek;break;case"month":y.freq=ti.a.MONTHLY,"day"===e.runOn?y.bymonthday=e.runOnDayNumber:"the"===e.runOn&&(y.bysetpos=parseInt(e.runOnTheOccurrence,10),y.byweekday=ci(e.runOnTheDay,t));break;case"year":y.freq=ti.a.YEARLY,"day"===e.runOn?(y.bymonth=parseInt(e.runOnDayMonth,10),y.bymonthday=e.runOnDayNumber):"the"===e.runOn&&(y.bysetpos=parseInt(e.runOnTheOccurrence,10),y.byweekday=ci(e.runOnTheDay,t),y.bymonth=parseInt(e.runOnTheMonth,10));break;default:throw new Error(t._({id:"Frequency did not match an expected value"}))}if("none"!==e.frequency)switch(e.end){case"never":break;case"after":y.count=e.occurrences;break;case"onDate":var g=e.endDateTime.split("T"),O=Object(f.a)(g,2),j=O[0],k=O[1],w=j.split("-"),C=Object(f.a)(w,3),S=C[0],x=C[1],T=C[2],I=k.split(":"),A=Object(f.a)(I,3),R=A[0],N=void 0===R?0:R,D=A[1],L=void 0===D?0:D,P=A[2],U=void 0===P?0:P;y.until=new Date(Date.UTC(S,parseInt(x,10)-1,T,N,L,U));break;default:throw new Error(t._({id:"End did not match an expected value"}))}return y}var bh=Object(j.b)(gc.a).withConfig({displayName:"FrequencyDetailSubform__RunOnRadio",componentId:"sc-1hkj5jz-0"})(["label{display:block;width:100%;}:not(:last-of-type){margin-bottom:10px;}select:not(:first-of-type){margin-left:10px;}"]),fh=j.b.p.withConfig({displayName:"FrequencyDetailSubform__RunEveryLabel",componentId:"sc-1hkj5jz-1"})(["display:flex;align-items:center;"]),vh=Object(j.b)(En.a).withConfig({displayName:"FrequencyDetailSubform__Checkbox",componentId:"sc-1hkj5jz-2"})([":not(:last-of-type){margin-right:10px;}"]);function _h(e){return function(t){if("number"===typeof t){if(!Number.isInteger(t))return e._({id:"This field must be an integer"});if(t<1)return e._({id:"This field must be greater than 0"})}if(!t)return e._({id:"Select a value for this field"})}}var hh=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(Va.b)({name:"runOnDayMonth"}),n=Object(f.a)(a,1)[0],i=Object(Va.b)({name:"runOnDayNumber"}),l=Object(f.a)(i,1)[0],o=Object(Va.b)({name:"runOnTheOccurrence"}),c=Object(f.a)(o,1)[0],s=Object(Va.b)({name:"runOnTheDay"}),d=Object(f.a)(s,1)[0],m=Object(Va.b)({name:"runOnTheMonth"}),p=Object(f.a)(m,1)[0],b=Object(Va.b)({name:"startDateTime"}),v=Object(f.a)(b,1)[0],_=Object(Va.b)({name:"daysOfWeek",validate:Yo(t._({id:"Select a value for this field"}),t)}),h=Object(f.a)(_,3),E=h[0],y=h[1],g=h[2],O=Object(Va.b)({name:"end",validate:Yo(t._({id:"Select a value for this field"}),t)}),j=Object(f.a)(O,2),k=j[0],w=j[1],C=Object(Va.b)({name:"interval",validate:_h(t)}),S=Object(f.a)(C,2),x=S[0],T=S[1],I=Object(Va.b)({name:"runOn",validate:Yo(t._({id:"Select a value for this field"}),t)}),R=Object(f.a)(I,2),N=R[0],D=R[1],L=Object(Va.b)({name:"endDateTime",validate:Yo(t._({id:"Select a value for this field"}),t)}),P=Object(f.a)(L,2),U=P[0],G=P[1],q=Object(Va.b)({name:"frequency"}),F=Object(f.a)(q,1)[0];Object(Va.b)({name:"occurrences",validate:_h(t)});var z=[{key:"january",value:1,label:t._({id:"January"})},{key:"february",value:2,label:t._({id:"February"})},{key:"march",value:3,label:t._({id:"March"})},{key:"april",value:4,label:t._({id:"April"})},{key:"may",value:5,label:t._({id:"May"})},{key:"june",value:6,label:t._({id:"June"})},{key:"july",value:7,label:t._({id:"July"})},{key:"august",value:8,label:t._({id:"August"})},{key:"september",value:9,label:t._({id:"September"})},{key:"october",value:10,label:t._({id:"October"})},{key:"november",value:11,label:t._({id:"November"})},{key:"december",value:12,label:t._({id:"December"})}],M=function(e,t){var a=Object(A.a)(E.value);t?(a.push(e),g.setValue(a)):g.setValue(a.filter((function(t){return t!==e})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wi.a,{name:"interval",fieldId:"schedule-run-every",helperTextInvalid:T.error,isRequired:!0,validated:T.touched&&T.error?"error":"default",label:t._({id:"Run every"})},r.a.createElement(Eh,null,r.a.createElement(yh,Object.assign({id:"schedule-run-every",type:"number",min:"1",step:"1"},x,{onChange:function(e,t){x.onChange(t)}})),r.a.createElement(fh,null,function(){var e=x.value;switch(F.value){case"minute":return t._("{intervalValue, plural, one {minute} other {minutes}}",{intervalValue:e});case"hour":return t._("{intervalValue, plural, one {hour} other {hours}}",{intervalValue:e});case"day":return t._("{intervalValue, plural, one {day} other {days}}",{intervalValue:e});case"week":return t._("{intervalValue, plural, one {week} other {weeks}}",{intervalValue:e});case"month":return t._("{intervalValue, plural, one {month} other {months}}",{intervalValue:e});case"year":return t._("{intervalValue, plural, one {year} other {years}}",{intervalValue:e});default:throw new Error(t._({id:"Frequency did not match an expected value"}))}}()))),"week"===(null===F||void 0===F?void 0:F.value)&&r.a.createElement(Wi.a,{name:"daysOfWeek",fieldId:"schedule-days-of-week",helperTextInvalid:y.error,isRequired:!0,validated:y.touched&&y.error?"error":"default",label:t._({id:"On days"})},r.a.createElement(gh,null,r.a.createElement(vh,{label:t._({id:"Sun"}),isChecked:E.value.includes(ti.a.SU),onChange:function(e){M(ti.a.SU,e)},"aria-label":t._({id:"Sunday"}),id:"schedule-days-of-week-sun",name:"daysOfWeek"}),r.a.createElement(vh,{label:t._({id:"Mon"}),isChecked:E.value.includes(ti.a.MO),onChange:function(e){M(ti.a.MO,e)},"aria-label":t._({id:"Monday"}),id:"schedule-days-of-week-mon",name:"daysOfWeek"}),r.a.createElement(vh,{label:t._({id:"Tue"}),isChecked:E.value.includes(ti.a.TU),onChange:function(e){M(ti.a.TU,e)},"aria-label":t._({id:"Tuesday"}),id:"schedule-days-of-week-tue",name:"daysOfWeek"}),r.a.createElement(vh,{label:t._({id:"Wed"}),isChecked:E.value.includes(ti.a.WE),onChange:function(e){M(ti.a.WE,e)},"aria-label":t._({id:"Wednesday"}),id:"schedule-days-of-week-wed",name:"daysOfWeek"}),r.a.createElement(vh,{label:t._({id:"Thu"}),isChecked:E.value.includes(ti.a.TH),onChange:function(e){M(ti.a.TH,e)},"aria-label":t._({id:"Thursday"}),id:"schedule-days-of-week-thu",name:"daysOfWeek"}),r.a.createElement(vh,{label:t._({id:"Fri"}),isChecked:E.value.includes(ti.a.FR),onChange:function(e){M(ti.a.FR,e)},"aria-label":t._({id:"Friday"}),id:"schedule-days-of-week-fri",name:"daysOfWeek"}),r.a.createElement(vh,{label:t._({id:"Sat"}),isChecked:E.value.includes(ti.a.SA),onChange:function(e){M(ti.a.SA,e)},"aria-label":t._({id:"Saturday"}),id:"schedule-days-of-week-sat",name:"daysOfWeek"}))),("month"===(null===F||void 0===F?void 0:F.value)||"year"===(null===F||void 0===F?void 0:F.value))&&!isNaN(new Date(v.value))&&r.a.createElement(Wi.a,{name:"runOn",fieldId:"schedule-run-on",helperTextInvalid:D.error,isRequired:!0,validated:D.touched&&D.error?"error":"default",label:t._({id:"Run on"})},r.a.createElement(bh,{id:"schedule-run-on-day",name:"runOn",label:r.a.createElement(Oh,null,"month"===(null===F||void 0===F?void 0:F.value)&&r.a.createElement(jh,{id:"radio-schedule-run-on-day"},r.a.createElement(u.Trans,{id:"Day"})),"year"===(null===F||void 0===F?void 0:F.value)&&r.a.createElement(kh,Object.assign({id:"schedule-run-on-day-month",isDisabled:"day"!==N.value,data:z},n)),r.a.createElement(Rn.a,Object.assign({id:"schedule-run-on-day-number",type:"number",min:"1",max:"31",step:"1",isDisabled:"day"!==N.value},l,{onChange:function(e,t){l.onChange(t)}}))),value:"day",isChecked:"day"===N.value,onChange:function(e,t){t.target.value="day",N.onChange(t)}}),r.a.createElement(bh,{id:"schedule-run-on-the",name:"runOn",label:r.a.createElement(wh,null,r.a.createElement(Ch,{id:"radio-schedule-run-on-the"},r.a.createElement(u.Trans,{id:"The"})),r.a.createElement(Fc,Object.assign({id:"schedule-run-on-the-occurrence",isDisabled:"the"!==N.value,data:[{value:1,key:"first",label:t._({id:"First"})},{value:2,key:"second",label:t._({id:"Second"})},{value:3,key:"third",label:t._({id:"Third"})},{value:4,key:"fourth",label:t._({id:"Fourth"})},{value:5,key:"fifth",label:t._({id:"Fifth"})},{value:-1,key:"last",label:t._({id:"Last"})}]},c)),r.a.createElement(Fc,Object.assign({id:"schedule-run-on-the-day",isDisabled:"the"!==N.value,data:[{value:"sunday",key:"sunday",label:t._({id:"Sunday"})},{value:"monday",key:"monday",label:t._({id:"Monday"})},{value:"tuesday",key:"tuesday",label:t._({id:"Tuesday"})},{value:"wednesday",key:"wednesday",label:t._({id:"Wednesday"})},{value:"thursday",key:"thursday",label:t._({id:"Thursday"})},{value:"friday",key:"friday",label:t._({id:"Friday"})},{value:"saturday",key:"saturday",label:t._({id:"Saturday"})},{value:"day",key:"day",label:t._({id:"Day"})},{value:"weekday",key:"weekday",label:t._({id:"Weekday"})},{value:"weekendDay",key:"weekendDay",label:t._({id:"Weekend day"})}]},d)),"year"===(null===F||void 0===F?void 0:F.value)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Sh,{id:"of-schedule-run-on-the-month"},r.a.createElement(u.Trans,{id:"of"})),r.a.createElement(Fc,Object.assign({id:"schedule-run-on-the-month",isDisabled:"the"!==N.value,data:z},p)))),value:"the",isChecked:"the"===N.value,onChange:function(e,t){t.target.value="the",N.onChange(t)}})),r.a.createElement(Wi.a,{name:"end",fieldId:"schedule-end",helperTextInvalid:w.error,isRequired:!0,validated:w.touched&&w.error?"error":"default",label:t._({id:"End"})},r.a.createElement(gc.a,{id:"end-never",name:"end",label:t._({id:"Never"}),value:"never",isChecked:"never"===k.value,onChange:function(e,t){t.target.value="never",k.onChange(t)}}),r.a.createElement(gc.a,{id:"end-after",name:"end",label:t._({id:"After number of occurrences"}),value:"after",isChecked:"after"===k.value,onChange:function(e,t){t.target.value="after",k.onChange(t)}}),r.a.createElement(gc.a,{id:"end-on-date",name:"end",label:t._({id:"On date"}),value:"onDate",isChecked:"onDate"===k.value,onChange:function(e,t){t.target.value="onDate",k.onChange(t)}})),"after"===(null===k||void 0===k?void 0:k.value)&&r.a.createElement(Tl,{id:"schedule-occurrences",label:t._({id:"Occurrences"}),name:"occurrences",type:"number",min:"1",step:"1",validate:Yo(null,t),isRequired:!0}),"onDate"===(null===k||void 0===k?void 0:k.value)&&r.a.createElement(Wi.a,{fieldId:"schedule-end-datetime",helperTextInvalid:G.error,isRequired:!0,validated:G.touched&&G.error?"error":"default",label:t._({id:"End date/time"})},r.a.createElement("input",Object.assign({className:"pf-c-form-control",type:"datetime-local",id:"schedule-end-datetime",step:"1"},U))))})),Eh=Object(j.b)("div").withConfig({displayName:"FrequencyDetailSubform___StyledDiv",componentId:"sc-1hkj5jz-3"})(["display:flex"]),yh=Object(j.b)(Rn.a).withConfig({displayName:"FrequencyDetailSubform___StyledTextInput",componentId:"sc-1hkj5jz-4"})(["margin-right:10px;"]),gh=Object(j.b)("div").withConfig({displayName:"FrequencyDetailSubform___StyledDiv2",componentId:"sc-1hkj5jz-5"})(["display:flex"]),Oh=Object(j.b)("div").withConfig({displayName:"FrequencyDetailSubform___StyledDiv3",componentId:"sc-1hkj5jz-6"})(["display:flex;align-items:center;"]),jh=Object(j.b)("span").withConfig({displayName:"FrequencyDetailSubform___StyledSpan",componentId:"sc-1hkj5jz-7"})(["margin-right:10px;"]),kh=Object(j.b)(Fc).withConfig({displayName:"FrequencyDetailSubform___StyledAnsibleSelect",componentId:"sc-1hkj5jz-8"})(["margin-right:10px"]),wh=Object(j.b)("div").withConfig({displayName:"FrequencyDetailSubform___StyledDiv4",componentId:"sc-1hkj5jz-9"})(["display:flex;align-items:center;"]),Ch=Object(j.b)("span").withConfig({displayName:"FrequencyDetailSubform___StyledSpan2",componentId:"sc-1hkj5jz-10"})(["margin-right:10px;"]),Sh=Object(j.b)("span").withConfig({displayName:"FrequencyDetailSubform___StyledSpan3",componentId:"sc-1hkj5jz-11"})(["margin-left:10px;"]),xh=["handleCancel","handleSubmit","i18n","schedule","submitError"],Th=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[ti.a.MO,ti.a.TU,ti.a.WE,ti.a.TH,ti.a.FR,ti.a.SA,ti.a.SU].every((function(t){return e.indexOf(t)>-1}))?"day":[ti.a.MO,ti.a.TU,ti.a.WE,ti.a.TH,ti.a.FR].every((function(t){return e.indexOf(t)>-1}))?"weekday":[ti.a.SA,ti.a.SU].every((function(t){return e.indexOf(t)>-1}))?"weekendDay":e.indexOf(ti.a.MO)>-1?"monday":e.indexOf(ti.a.TU)>-1?"tuesday":e.indexOf(ti.a.WE)>-1?"wednesday":e.indexOf(ti.a.TH)>-1?"thursday":e.indexOf(ti.a.FR)>-1?"friday":e.indexOf(ti.a.SA)>-1?"saturday":e.indexOf(ti.a.SU)>-1?"sunday":null};function Ih(e){var t=e.i18n,a=e.zoneOptions,n=Object(Va.b)({name:"startDateTime",validate:Yo(t._({id:"Select a valid date and time for this field"}),t)}),i=Object(f.a)(n,2),l=i[0],o=i[1],c=Object(Va.b)({name:"timezone",validate:Yo(t._({id:"Select a value for this field"}),t)}),s=Object(f.a)(c,2),u=s[0],d=s[1],m=Object(Va.b)({name:"frequency",validate:Yo(t._({id:"Select a value for this field"}),t)}),p=Object(f.a)(m,2),b=p[0],v=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"schedule-name",label:t._({id:"\u540d\u79f0"}),name:"name",type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"schedule-description",label:t._({id:"\u63cf\u8ff0"}),name:"description",type:"text"}),r.a.createElement(Wi.a,{fieldId:"schedule-start-datetime",helperTextInvalid:o.error,isRequired:!0,validated:o.touched&&o.error?"error":"default",label:t._({id:"Start date/time"})},r.a.createElement("input",Object.assign({className:"pf-c-form-control",type:"datetime-local",id:"schedule-start-datetime",step:"1"},l))),r.a.createElement(Wi.a,{name:"timezone",fieldId:"schedule-timezone",helperTextInvalid:d.error,isRequired:!0,validated:d.touched&&d.error?"error":"default",label:t._({id:"Local time zone"})},r.a.createElement(Fc,Object.assign({id:"schedule-timezone",data:a},u))),r.a.createElement(Wi.a,{name:"frequency",fieldId:"schedule-requency",helperTextInvalid:v.error,isRequired:!0,validated:v.touched&&v.error?"error":"default",label:t._({id:"Run frequency"})},r.a.createElement(Fc,Object.assign({id:"schedule-frequency",data:[{value:"none",key:"none",label:t._({id:"None (run once)"})},{value:"minute",key:"minute",label:t._({id:"Minute"})},{value:"hour",key:"hour",label:t._({id:"Hour"})},{value:"day",key:"day",label:t._({id:"Day"})},{value:"week",key:"week",label:t._({id:"Week"})},{value:"month",key:"month",label:t._({id:"Month"})},{value:"year",key:"year",label:t._({id:"Year"})}]},b))),"none"!==b.value&&r.a.createElement(Wl,null,r.a.createElement(qt.a,{size:"md",headingLevel:"h4"},t._({id:"Frequency Details"})),r.a.createElement(Vl,null,r.a.createElement(hh,null))))}function Ah(e){var t,a=e.handleCancel,i=e.handleSubmit,l=e.i18n,c=e.schedule,s=e.submitError,u=Object(o.a)(e,xh),d=new Date,m=new Date(9e5*Math.ceil(d.getTime()/9e5)),f=new Date(m);f.setDate(f.getDate()+1);var v={daysOfWeek:[],description:c.description||"",end:"never",endDateTime:oi(f),frequency:"none",interval:1,name:c.name||"",occurrences:1,runOn:"day",runOnDayMonth:1,runOnDayNumber:1,runOnTheDay:"sunday",runOnTheMonth:1,runOnTheOccurrence:1,startDateTime:oi(m),timezone:c.timezone||"America/New_York"},_={};if(Object.keys(c).length>0)if(c.rrule)try{var h=ti.a.fromString(c.rrule.replace(" ","\n")).origOptions,E=h.bymonth,y=h.bymonthday,g=h.bysetpos,O=h.byweekday,j=h.count,k=h.dtstart,w=h.freq,C=h.interval;if(k&&(_.startDateTime=oi(new Date(ri(k)))),c.until?(_.end="onDate",_.endDateTime=c.until):j&&(_.end="after",_.occurrences=j),C&&(_.interval=C),"number"===typeof w)switch(w){case ti.a.MINUTELY:c.dtstart!==c.dtend&&(_.frequency="minute");break;case ti.a.HOURLY:_.frequency="hour";break;case ti.a.DAILY:_.frequency="day";break;case ti.a.WEEKLY:_.frequency="week",O&&(_.daysOfWeek=O);break;case ti.a.MONTHLY:_.frequency="month",y?_.runOnDayNumber=y:g&&(_.runOn="the",_.runOnTheOccurrence=g,_.runOnTheDay=Th(O));break;case ti.a.YEARLY:_.frequency="year",y?(_.runOnDayNumber=y,_.runOnDayMonth=E):g&&(_.runOn="the",_.runOnTheOccurrence=g,_.runOnTheDay=Th(O),_.runOnTheMonth=E)}}catch(R){t=R}else t=new Error(l._({id:"Schedule is missing rrule"}));var S=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt.readZoneInfo();case 2:return t=e.sent,a=t.data,e.abrupt("return",a.map((function(e){return{value:e.name,key:e.name,label:e.name}})));case 5:case"end":return e.stop()}}),e)}))),[])),x=S.request,T=S.error,I=S.contentLoading,A=S.result;return Object(n.useEffect)((function(){x()}),[x]),T||t?r.a.createElement(za,{error:T||t}):I?r.a.createElement(Nr,null):r.a.createElement(xt,null,(function(){return r.a.createElement(Va.a,{initialValues:Object.assign(v,_),onSubmit:i,validate:function(e){var t={},a=e.end,n=e.endDateTime,r=e.frequency,i=e.runOn,o=e.runOnDayNumber,c=e.startDateTime;return"onDate"===a&&new Date(c)>new Date(n)&&(t.endDateTime=l._({id:"Please select an end date/time that comes after the start date/time."})),"month"!==r&&"year"!==r||"day"!==i||!(o<1||o>31)||(t.runOn=l._({id:"Please select a day number between 1 and 31."})),t}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(Ih,Object.assign({i18n:l,zoneOptions:A},u)),r.a.createElement(Yl,{error:s}),r.a.createElement(cc,{onCancel:a,onSubmit:e.handleSubmit})))}))}))}Ah.defaultProps={schedule:{},submitError:null};var Rh=Object(u.withI18n)()(Ah);function Nh(e){var t=e.i18n,a=e.schedule,i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(c.g)(),d=Object(c.h)().pathname,m=d.substr(0,d.indexOf("schedules")),v=function(){var e=Object(b.a)(p.a.mark((function e(n){var r,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new ti.a(ph(n,t)),e.next=4,pt.update(a.id,{name:n.name,description:n.description,rrule:r.toString().replace(/\n/g," ")});case 4:i=e.sent,l=i.data.id,u.push("".concat(m,"schedules/").concat(l,"/details")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Rh,{schedule:a,handleCancel:function(){return u.push("".concat(m,"schedules/").concat(a.id,"/details"))},handleSubmit:v,submitError:o})))}Nh.defaultProps={};var Dh=Object(u.withI18n)()(Nh);var Lh=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=e.unifiedJobTemplate,l=Object(n.useState)(null),o=Object(f.a)(l,2),u=o[0],d=o[1],m=Object(n.useState)(!0),v=Object(f.a)(m,2),_=v[0],h=v[1],E=Object(n.useState)(null),y=Object(f.a)(E,2),g=y[0],O=y[1],j=Object(c.i)().scheduleId,k=Object(c.h)(),w=k.pathname,C=w.substr(0,w.indexOf("schedules"));Object(n.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pt.readDetail(j);case 3:t=e.sent,a=t.data,d(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O(e.t0);case 11:return e.prev=11,h(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}})()()}),[k.pathname,j]),Object(n.useEffect)((function(){u&&a(i,u)}),[u,i]);var S=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Schedules"})),link:"".concat(C,"schedules"),id:99},{name:t._({id:"Details"}),link:"".concat(C,"schedules/").concat(u&&u.id,"/details"),id:0}];if(_)return r.a.createElement(Nr,null);if(u.summary_fields.unified_job_template.id!==parseInt(i.id,10))return r.a.createElement(za,null,u&&r.a.createElement(s.b,{to:"".concat(C,"schedules")},t._({id:"View Schedules"})));if(g)return r.a.createElement(za,{error:g});var x=!0;return k.pathname.includes("schedules/")&&!k.pathname.endsWith("edit")||(x=!1),r.a.createElement(r.a.Fragment,null,x&&r.a.createElement(us,{tabsArray:S}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"".concat(C,"schedules/:scheduleId"),to:"".concat(C,"schedules/:scheduleId/details"),exact:!0}),u&&[r.a.createElement(c.b,{key:"edit",path:"".concat(C,"schedules/:id/edit")},r.a.createElement(Dh,{schedule:u})),r.a.createElement(c.b,{key:"details",path:"".concat(C,"schedules/:scheduleId/details")},r.a.createElement(dh,{schedule:u}))],r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,null,i&&r.a.createElement(s.b,{to:"".concat(C,"details")},t._({id:"View Details"}))))))}));function Ph(e){var t=e.i18n,a=e.createSchedule,i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(c.g)(),d=Object(c.h)().pathname,m=d.substr(0,d.indexOf("schedules")),v=function(){var e=Object(b.a)(p.a.mark((function e(n){var r,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new ti.a(ph(n,t)),e.next=4,a({name:n.name,description:n.description,rrule:r.toString().replace(/\n/g," ")});case 4:i=e.sent,l=i.data.id,u.push("".concat(m,"schedules/").concat(l)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Rh,{handleCancel:function(){return u.push("".concat(m,"schedules"))},handleSubmit:v,submitError:o})))}Ph.defaultProps={};var Uh=Object(u.withI18n)()(Ph),Gh=Object(j.b)(Fo.a).withConfig({displayName:"ScheduleListItem__DataListAction",componentId:"sc-1srdnz4-0"})(["align-items:center;display:grid;grid-gap:16px;grid-template-columns:92px 40px;"]);var qh=Object(u.withI18n)()((function(e){var t,a=e.i18n,n=e.isSelected,i=e.onSelect,l=e.schedule,o="check-action-".concat(l.id),c={inventory_update:a._({id:"Inventory Sync"}),job:a._({id:"Playbook Run"}),project_update:a._({id:"Source Control Update"}),system_job:a._({id:"Management Job"}),workflow_job:a._({id:"Workflow Job"})};switch(l.summary_fields.unified_job_template.unified_job_type){case"inventory_update":t="/inventories/inventory/".concat(l.summary_fields.inventory.id,"/sources/").concat(l.summary_fields.unified_job_template.id,"/schedules/").concat(l.id);break;case"job":t="/templates/job_template/".concat(l.summary_fields.unified_job_template.id,"/schedules/").concat(l.id);break;case"project_update":t="/projects/".concat(l.summary_fields.unified_job_template.id,"/schedules/").concat(l.id);break;case"system_job":t="/management_jobs/".concat(l.summary_fields.unified_job_template.id,"/schedules/").concat(l.id);break;case"workflow_job":t="/templates/workflow_job_template/".concat(l.summary_fields.unified_job_template.id,"/schedules/").concat(l.id)}return r.a.createElement(ho.a,{key:l.id,"aria-labelledby":o,id:"".concat(l.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-schedule-".concat(l.id),checked:n,onChange:i,"aria-labelledby":o}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"".concat(t,"/details")},r.a.createElement("b",null,l.name))),r.a.createElement(ko,{key:"type"},c[l.summary_fields.unified_job_template.unified_job_type]),r.a.createElement(ko,{key:"next_run"},l.next_run&&r.a.createElement(pi,{stacked:!0},r.a.createElement(xi,{label:a._({id:"\u4e0b\u4e00\u6b21\u8fd0\u884c"}),value:ni(l.next_run)})))]}),r.a.createElement(Gh,{"aria-label":"actions","aria-labelledby":o,id:o,key:"actions"},r.a.createElement(ch,{schedule:l}),l.summary_fields.user_capabilities.edit?r.a.createElement(Ea.a,{content:a._({id:"Edit Schedule"}),position:"top"},r.a.createElement(Fh,{"aria-label":a._({id:"Edit Schedule"}),variant:"plain",component:s.b,to:"".concat(t,"/edit")},r.a.createElement(Mo.a,null))):"")))})),Fh=Object(j.b)(O.a).withConfig({displayName:"ScheduleListItem___StyledButton",componentId:"sc-1srdnz4-1"})(["grid-column:2"]),zh=R("schedule",{page:1,page_size:20,order_by:"name"});function Mh(e){var t=e.i18n,a=e.loadSchedules,i=e.loadScheduleOptions,l=e.hideAddButton,o=Object(n.useState)([]),s=Object(f.a)(o,2),u=s[0],d=s[1],m=Object(c.h)(),v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,l,o,c,s,u,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(zh,m.search),e.next=3,Promise.all([a(r),i()]);case 3:return l=e.sent,o=Object(f.a)(l,2),c=o[0].data,s=c.count,u=c.results,d=o[1],e.abrupt("return",{schedules:u,itemCount:s,actions:d.data.actions,relatedSearchableKeys:((null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=d.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=d.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 10:case"end":return e.stop()}}),e)}))),[m.search,a,i]),{schedules:[],itemCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),_=v.result,h=_.schedules,E=_.itemCount,y=_.actions,g=_.relatedSearchableKeys,O=_.searchableKeys,j=v.error,k=v.isLoading,w=v.request;Object(n.useEffect)((function(){w()}),[w]);var C=u.length===h.length&&u.length>0,S=en(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(u.map((function(e){var t=e.id;return pt.destroy(t)}))));case 1:case"end":return e.stop()}}),e)}))),[u]),{qsConfig:zh,allItemsSelected:C,fetchItems:w}),x=S.isLoading,T=S.deleteItems,I=S.deletionError,R=S.clearDeletionError,D=function(e){d(e?Object(A.a)(h):[])},L=function(e){u.some((function(t){return t.id===e.id}))?d(u.filter((function(t){return t.id!==e.id}))):d(u.concat(e))},P=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:d([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=y&&Object.prototype.hasOwnProperty.call(y,"POST")&&!l;return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:j,hasContentLoading:k||x,items:h,itemCount:E,qsConfig:zh,onRowClick:L,renderItem:function(e){return r.a.createElement(qh,{isSelected:u.some((function(t){return t.id===e.id})),key:e.id,onSelect:function(){return L(e)},schedule:e})},toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"},{name:t._({id:"\u4e0b\u4e00\u6b21\u8fd0\u884c"}),key:"next_run"}],toolbarSearchableKeys:O,toolbarRelatedSearchableKeys:g,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:C,onSelectAll:D,qsConfig:zh,additionalControls:[].concat(Object(A.a)(U?[r.a.createElement(Po,{key:"add",linkTo:"".concat(m.pathname,"/add")})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:P,itemsToDelete:u,pluralizedItemName:t._({id:"\u8ba1\u5212"})})])}))}}),I&&r.a.createElement(Zt,{isOpen:I,variant:"danger",title:t._({id:"Error!"}),onClose:R},t._({id:"Failed to delete one or more schedules."}),r.a.createElement(ua,{error:I})))}Mh.defaultProps={hideAddButton:!1};var Kh=Object(u.withI18n)()(Mh);var Vh=Object(u.withI18n)()((function(e){var t=e.createSchedule,a=e.loadScheduleOptions,n=e.loadSchedules,i=e.setBreadcrumb,l=e.unifiedJobTemplate,o=Object(c.j)();return r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"".concat(o.path,"/add")},r.a.createElement(Uh,{createSchedule:t})),r.a.createElement(c.b,{key:"details",path:"".concat(o.path,"/:scheduleId")},r.a.createElement(Lh,{unifiedJobTemplate:l,setBreadcrumb:i})),r.a.createElement(c.b,{key:"list",path:"".concat(o.path)},r.a.createElement(Kh,{loadSchedules:n,loadScheduleOptions:a})))})),Hh=a(1064);function Bh(e){var t=e.source,a=e.icon,i=e.i18n,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.createSyncStart(t.id);case 2:return a=e.sent,n=a.data.status,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),[t.id]),{}),o=l.isLoading,c=l.error,s=l.request,u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.readDetail(t.id);case 2:return a=e.sent,n=a.data.summary_fields.current_update.id,e.next=6,tt.createSyncCancel(n);case 6:case"end":return e.stop()}}),e)}))),[t.id])),d=u.isLoading,m=u.error,f=u.request,v=Qa(c),_=v.error,h=v.dismissError,E=Qa(m),y=E.error,g=E.dismissError;return r.a.createElement(r.a.Fragment,null,["running","pending","updating"].includes(t.status)?r.a.createElement(Ea.a,{content:i._({id:"Cancel sync process"}),position:"top"},r.a.createElement(O.a,{isDisabled:d||o,"aria-label":i._({id:"Cancel sync source"}),variant:a?"plain":"secondary",onClick:f},a?r.a.createElement(Dv.a,null):i._({id:"Cancel sync"}))):r.a.createElement(Ea.a,{content:i._({id:"Start sync process"}),position:"top"},r.a.createElement(O.a,{isDisabled:d||o,"aria-label":i._({id:"\u5f00\u59cb\u540c\u6b65\u6e90"}),variant:a?"plain":"secondary",onClick:s},a?r.a.createElement(Hh.a,null):i._({id:"\u540c\u6b65"}))),_&&r.a.createElement(Zt,{isOpen:_,variant:"error",title:i._({id:"Error!"}),onClose:h},i._({id:"Failed to sync inventory source."}),r.a.createElement(ua,{error:_})),y&&r.a.createElement(Zt,{isOpen:y,variant:"error",title:i._({id:"Error!"}),onClose:g},i._({id:"Failed to cancel inventory source sync."}),r.a.createElement(ua,{error:y})))}Bh.defaultProps={source:{},icon:!0};var Wh=Object(u.withI18n)()(Bh);var Jh=Object(u.withI18n)()((function(e){var t=e.inventorySource,a=e.i18n,i=t.created,l=t.custom_virtualenv,o=t.description,u=t.id,d=t.modified,m=t.name,v=t.overwrite,_=t.overwrite_vars,h=t.source,E=t.source_path,y=t.source_vars,g=t.update_cache_timeout,j=t.update_on_launch,k=t.update_on_project_update,w=t.verbosity,C=t.enabled_var,S=t.enabled_value,x=t.host_filter,T=t.summary_fields,I=T.created_by,R=T.credentials,N=T.inventory,D=T.modified_by,L=T.organization,P=T.source_project,U=T.user_capabilities,G=Object(n.useState)(!1),q=Object(f.a)(G,2),F=q[0],z=q[1],M=Object(c.g)(),K=Object(n.useRef)(null),V=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.readOptions();case 2:return t=e.sent,a=t.data,e.abrupt("return",Object.assign.apply(Object,Object(A.a)(a.actions.GET.source.choices.map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(gr.a)({},a,n)})))));case 5:case"end":return e.stop()}}),e)}))),[]),{}),H=V.result,B=V.error,W=V.isLoading,J=V.request;Object(n.useEffect)((function(){return K.current=!0,J(),function(){K.current=!1}}),[J]);var Y=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([et.destroyHosts(u),et.destroyGroups(u),et.destroy(u)]);case 3:M.push("/inventories/inventory/".concat(N.id,"/sources")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),K.current&&z(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),X={0:a._({id:"0 (Warning)"}),1:a._({id:"1 (Info)"}),2:a._({id:"2 (Debug)"})},Z="";return(v||_||j||k)&&(Z=r.a.createElement(lu.a,null,v&&r.a.createElement(ou.a,null,a._({id:"Overwrite"}),r.a.createElement(gi,{content:r.a.createElement(r.a.Fragment,null,a._({id:'If checked, any hosts and groups that were previously present on the external source but are now removed will be removed from the Tower inventory. Hosts and groups that were not managed by the inventory source will be promoted to the next manually created group or if there is no manually created group to promote them into, they will be left in the "all" default group for the inventory.'}),r.a.createElement("br",null),r.a.createElement("br",null),a._({id:"When not checked, local child hosts and groups not found on the external source will remain untouched by the inventory update process."}))})),_&&r.a.createElement(ou.a,null,a._({id:"Overwrite variables"}),r.a.createElement(gi,{content:r.a.createElement(r.a.Fragment,null,a._({id:"If checked, all variables for child groups and hosts will be removed and replaced by those found on the external source."}),r.a.createElement("br",null),r.a.createElement("br",null),a._({id:"When not checked, a merge will be performed, combining local variables with those found on the external source."}))})),j&&r.a.createElement(ou.a,null,a._({id:"Update on launch"}),r.a.createElement(gi,{content:a._({id:"Each time a job runs using this inventory, refresh the inventory from the selected source before executing job tasks."})})),k&&r.a.createElement(ou.a,null,a._({id:"Update on project update"}),r.a.createElement(gi,{content:a._({id:"After every project update where the SCM revision changes, refresh the inventory from the selected source before executing job tasks. This is intended for static content, like the Ansible inventory .ini file format."})})))),W?r.a.createElement(Nr,null):B?r.a.createElement(za,{error:B}):r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:a._({id:"\u540d\u79f0"}),value:m}),r.a.createElement(xi,{label:a._({id:"\u63cf\u8ff0"}),value:o}),r.a.createElement(xi,{label:a._({id:"Source"}),value:H[h]}),L&&r.a.createElement(xi,{label:a._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(L.id,"/details")},L.name)}),r.a.createElement(xi,{label:a._({id:"Ansible environment"}),value:l}),P&&r.a.createElement(xi,{label:a._({id:"\u9879\u76ee"}),value:r.a.createElement(s.b,{to:"/projects/".concat(P.id,"/details")},P.name)}),"scm"===h?r.a.createElement(xi,{label:a._({id:"Inventory file"}),value:""===E?a._({id:"/ (project root)"}):E}):null,r.a.createElement(xi,{label:a._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),value:X[w]}),r.a.createElement(xi,{label:a._({id:"Cache timeout"}),value:"".concat(g," ").concat(a._({id:"seconds"}))}),r.a.createElement(xi,{label:a._({id:"Host Filter"}),value:x}),r.a.createElement(xi,{label:a._({id:"Enabled Variable"}),value:C}),r.a.createElement(xi,{label:a._({id:"Enabled Value"}),value:S}),(null===R||void 0===R?void 0:R.length)>0&&r.a.createElement(xi,{fullWidth:!0,label:a._({id:"Credential"}),value:R.map((function(e){return r.a.createElement(du,{key:null===e||void 0===e?void 0:e.id,credential:e,isReadOnly:!0})}))}),Z&&r.a.createElement(xi,{fullWidth:!0,label:a._({id:"Options"}),value:Z}),y&&r.a.createElement(_l,{label:a._({id:"Source variables"}),rows:4,value:y}),r.a.createElement(Li,{date:i,label:a._({id:"\u5df2\u521b\u5efa"}),user:I}),r.a.createElement(Li,{date:d,label:a._({id:"Last modified"}),user:D})),r.a.createElement(Yc,null,(null===U||void 0===U?void 0:U.edit)&&r.a.createElement(O.a,{component:s.b,"aria-label":a._({id:"edit"}),to:"/inventories/inventory/".concat(N.id,"/sources/").concat(u,"/edit")},a._({id:"Edit"})),(null===U||void 0===U?void 0:U.start)&&r.a.createElement(Wh,{source:t,icon:!1}),(null===U||void 0===U?void 0:U.delete)&&r.a.createElement(Qc,{name:m,modalTitle:a._({id:"Delete inventory source"}),onConfirm:Y},a._({id:"\u5220\u9664"}))),F&&r.a.createElement(Zt,{variant:"error",title:a._({id:"Error!"}),isOpen:F,onClose:function(){return z(!1)}},a._({id:"Failed to delete inventory source {name}.",values:{name:m}}),r.a.createElement(ua,{error:F})))})),Yh=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.popoverContent;return r.a.createElement(Hl,null,r.a.createElement(ro,{id:"source_vars",name:"source_vars",label:t._({id:"Source variables"}),tooltip:r.a.createElement("div",null,a,r.a.createElement(u.Trans,{id:"Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two."}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(u.Trans,{id:"JSON:"}),r.a.createElement("pre",null,'\n  {\n    "somevar": "somevalue"\n    "somepassword": "Magic"\n  }\n'),r.a.createElement("br",null),r.a.createElement(u.Trans,{id:"YAML:"}),r.a.createElement("pre",null,"\n  ---\n  somevar: somevalue\n  somepassword: magic\n"),r.a.createElement("br",null),r.a.createElement(u.Trans,{id:"View JSON examples at <0>www.json.org</0>",components:[r.a.createElement("a",{href:"http://www.json.org",target:"_blank",rel:"noopener noreferrer"})]}),r.a.createElement("br",null),r.a.createElement(u.Trans,{id:"View YAML examples at <0>docs.ansible.com</0>",components:[r.a.createElement("a",{href:"http://docs.ansible.com/YAMLSyntax.html",target:"_blank",rel:"noopener noreferrer"})]}))}))})),Xh=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(Va.b)("verbosity"),n=Object(f.a)(a,3),i=n[0],l=n[1],o=n[2],c=!(l.touched&&l.error),s=[{value:"0",key:"0",label:t._({id:"0 (Warning)"})},{value:"1",key:"1",label:t._({id:"1 (Info)"})},{value:"2",key:"2",label:t._({id:"2 (Debug)"})}];return r.a.createElement(Wi.a,{fieldId:"verbosity",validated:c?"default":"error",label:t._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Control the level of output Ansible will produce for inventory source update jobs."})})},r.a.createElement(Fc,Object.assign({id:"verbosity",data:s},i,{onChange:function(e,t){return o.setValue(t)}})))})),Zh=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.showProjectUpdate,i=void 0!==a&&a,l=Object(Va.b)("update_on_launch"),o=Object(f.a)(l,1)[0],c=Object(Va.b)("update_cache_timeout"),s=Object(f.a)(c,3)[2];return Object(n.useEffect)((function(){o.value||s.setValue(0)}),[o.value]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Hl,null,r.a.createElement(Wi.a,{fieldId:"option-checkboxes",label:t._({id:"Update options"})},r.a.createElement(Bl,null,r.a.createElement(Rl,{id:"overwrite",name:"overwrite",label:t._({id:"Overwrite"}),tooltip:r.a.createElement(r.a.Fragment,null,t._({id:'If checked, any hosts and groups that were previously present on the external source but are now removed will be removed from the Tower inventory. Hosts and groups that were not managed by the inventory source will be promoted to the next manually created group or if there is no manually created group to promote them into, they will be left in the "all" default group for the inventory.'}),r.a.createElement("br",null),r.a.createElement("br",null),t._({id:"When not checked, local child hosts and groups not found on the external source will remain untouched by the inventory update process."}))}),r.a.createElement(Rl,{id:"overwrite_vars",name:"overwrite_vars",label:t._({id:"Overwrite variables"}),tooltip:r.a.createElement(r.a.Fragment,null,t._({id:"If checked, all variables for child groups and hosts will be removed and replaced by those found on the external source."}),r.a.createElement("br",null),r.a.createElement("br",null),t._({id:"When not checked, a merge will be performed, combining local variables with those found on the external source."}))}),r.a.createElement(Rl,{id:"update_on_launch",name:"update_on_launch",label:t._({id:"Update on launch"}),tooltip:t._({id:"Each time a job runs using this inventory, refresh the inventory from the selected source before executing job tasks."})}),i&&r.a.createElement(Rl,{id:"update_on_project_update",name:"update_on_project_update",label:t._({id:"Update on project update"}),tooltip:t._({id:"After every project update where the SCM revision changes, refresh the inventory from the selected source before executing job tasks. This is intended for static content, like the Ansible inventory .ini file format."})})))),o.value&&r.a.createElement(Tl,{id:"cache-timeout",name:"update_cache_timeout",type:"number",min:"0",max:"2147483647",validate:$o(0,2147483647,t),label:t._({id:"Cache timeout (seconds)"}),tooltip:t._({id:"Time in seconds to consider an inventory sync to be current. During job runs and callbacks the task system will evaluate the timestamp of the latest sync. If it is older than Cache Timeout, it is not considered current, and a new inventory sync will be performed."})}))})),$h=Object(u.withI18n)()((function(e){var t=e.i18n;return r.a.createElement(Tl,{id:"inventory-enabled-var",label:t._({id:"Enabled Variable"}),tooltip:t._({id:"Retrieve the enabled state from the given dict of host variables. The enabled variable may be specified using dot notation, e.g: 'foo.bar'"}),name:"enabled_var",type:"text"})})),Qh=Object(u.withI18n)()((function(e){var t=e.i18n;return r.a.createElement(Tl,{id:"inventory-enabled-value",label:t._({id:"Enabled Value"}),tooltip:t._({id:"This field is ignored unless an Enabled Variable is set. If the enabled variable matches this value, the host will be enabled on import."}),name:"enabled_value",type:"text"})})),eE=Object(u.withI18n)()((function(e){var t=e.i18n;return r.a.createElement(Tl,{id:"host-filter",label:t._({id:"Host Filter"}),tooltip:t._({id:"Regular expression where only matching host names will be imported. The filter is applied as a post-processing step after any inventory plugin filters are applied."}),name:"host_filter",type:"text",validate:ic(t)})})),tE=Object(u.withI18n)()((function(e){var t=e.autoPopulateCredential,a=e.i18n,i=Object(Va.c)().setFieldValue,l=Object(Va.b)({name:"credential",validate:Yo(a._({id:"Select a value for this field"}),a)}),o=Object(f.a)(l,3),c=o[0],s=o[1],d=o[2],m=Object(n.useCallback)((function(e){i("credential",e)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeNamespace:"azure_rm",label:a._({id:"Credential"}),helperTextInvalid:s.error,isValid:!s.touched||!s.error,onBlur:function(){return d.setTouched()},onChange:m,value:c.value,required:!0,autoPopulate:t}),r.a.createElement(Xh,null),r.a.createElement(eE,null),r.a.createElement($h,null),r.a.createElement(Qh,null),r.a.createElement(Zh,null),r.a.createElement(Yh,{popoverContent:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Trans,{id:"Enter variables to configure the inventory source. For a detailed description of how to configure this plugin, see <0>Inventory Plugins</0> in the documentation and the <1>azure_rm</1> plugin configuration guide.",components:[r.a.createElement("a",{href:"http://docs.ansible.com/ansible-tower/latest/html/userguide/inventories.html#inventory-plugins",target:"_blank",rel:"noopener noreferrer"}),r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/collections/azure/azcollection/azure_rm_inventory.html",target:"_blank",rel:"noopener noreferrer"})]}),r.a.createElement("br",null),r.a.createElement("br",null))}))})),aE=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(Va.c)().setFieldValue,i=Object(Va.b)("credential"),l=Object(f.a)(i,1)[0],o=Object(n.useCallback)((function(e){a("credential",e)}),[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeNamespace:"aws",label:t._({id:"Credential"}),value:l.value,onChange:o}),r.a.createElement(Xh,null),r.a.createElement(eE,null),r.a.createElement($h,null),r.a.createElement(Qh,null),r.a.createElement(Zh,null),r.a.createElement(Yh,{popoverContent:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Trans,{id:"Enter variables to configure the inventory source. For a detailed description of how to configure this plugin, see <0>Inventory Plugins</0> in the documentation and the <1>aws_ec2</1> plugin configuration guide.",components:[r.a.createElement("a",{href:"http://docs.ansible.com/ansible-tower/latest/html/userguide/inventories.html#inventory-plugins",target:"_blank",rel:"noopener noreferrer"}),r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/collections/amazon/aws/aws_ec2_inventory.html",target:"_blank",rel:"noopener noreferrer"})]}),r.a.createElement("br",null),r.a.createElement("br",null))}))})),nE=Object(u.withI18n)()((function(e){var t=e.autoPopulateCredential,a=e.i18n,i=Object(Va.c)().setFieldValue,l=Object(Va.b)({name:"credential",validate:Yo(a._({id:"Select a value for this field"}),a)}),o=Object(f.a)(l,3),c=o[0],s=o[1],d=o[2],m=Object(n.useCallback)((function(e){i("credential",e)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeNamespace:"gce",label:a._({id:"Credential"}),helperTextInvalid:s.error,isValid:!s.touched||!s.error,onBlur:function(){return d.setTouched()},onChange:m,value:c.value,required:!0,autoPopulate:t}),r.a.createElement(Xh,null),r.a.createElement(eE,null),r.a.createElement($h,null),r.a.createElement(Qh,null),r.a.createElement(Zh,null),r.a.createElement(Yh,{popoverContent:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Trans,{id:"Enter variables to configure the inventory source. For a detailed description of how to configure this plugin, see <0>Inventory Plugins</0> in the documentation and the <1>gcp_compute</1> plugin configuration guide.",components:[r.a.createElement("a",{href:"http://docs.ansible.com/ansible-tower/latest/html/userguide/inventories.html#inventory-plugins",target:"_blank",rel:"noopener noreferrer"}),r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/collections/google/cloud/gcp_compute_inventory.html",target:"_blank",rel:"noopener noreferrer"})]}),r.a.createElement("br",null),r.a.createElement("br",null))}))})),rE=Object(u.withI18n)()((function(e){var t=e.autoPopulateCredential,a=e.i18n,i=Object(Va.c)().setFieldValue,l=Object(Va.b)({name:"credential",validate:Yo(a._({id:"Select a value for this field"}),a)}),o=Object(f.a)(l,3),c=o[0],s=o[1],d=o[2],m=Object(n.useCallback)((function(e){i("credential",e)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeNamespace:"openstack",label:a._({id:"Credential"}),helperTextInvalid:s.error,isValid:!s.touched||!s.error,onBlur:function(){return d.setTouched()},onChange:m,value:c.value,required:!0,autoPopulate:t}),r.a.createElement(Xh,null),r.a.createElement(eE,null),r.a.createElement($h,null),r.a.createElement(Qh,null),r.a.createElement(Zh,null),r.a.createElement(Yh,{popoverContent:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Trans,{id:"Enter variables to configure the inventory source. For a detailed description of how to configure this plugin, see <0>Inventory Plugins</0> in the documentation and the <1>openstack</1> plugin configuration guide.",components:[r.a.createElement("a",{href:"http://docs.ansible.com/ansible-tower/latest/html/userguide/inventories.html#inventory-plugins",target:"_blank",rel:"noopener noreferrer"}),r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/collections/openstack/cloud/openstack_inventory.html",target:"_blank",rel:"noopener noreferrer"})]}),r.a.createElement("br",null),r.a.createElement("br",null))}))})),iE=Object(u.withI18n)()((function(e){var t=e.autoPopulateProject,a=e.i18n,i=Object(Va.c)(),l=i.setFieldValue,o=i.setFieldTouched,c=Object(Va.b)("credential"),s=Object(f.a)(c,1)[0],u=Object(Va.b)({name:"source_project",validate:Yo(a._({id:"Select a value for this field"}),a)}),d=Object(f.a)(u,3),m=d[0],v=d[1],_=d[2],h=Object(Va.b)({name:"source_path",validate:Yo(a._({id:"Select a value for this field"}),a)}),E=Object(f.a)(h,3),y=E[0],g=E[1],O=E[2],j=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut.readInventories(t);case 2:return a=e.sent,n=a.data,e.abrupt("return",[].concat(Object(A.a)(n),["/ (project root)"]));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),[]),k=j.error,w=j.request,C=j.result;Object(n.useEffect)((function(){v.initialValue&&(w(v.initialValue.id),""===y.value&&O.setValue("/ (project root)"))}),[w,v.initialValue]);var S=Object(n.useCallback)((function(e){l("source_project",e),l("source_path",""),o("source_path",!1),w(e.id)}),[w,l,o]),x=Object(n.useCallback)((function(e){l("credential",e)}),[l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeKind:"cloud",label:a._({id:"Credential"}),value:s.value,onChange:x}),r.a.createElement(Wb,{value:m.value,isValid:!v.touched||!v.error,helperTextInvalid:v.error,onBlur:function(){return _.setTouched()},onChange:S,required:!0,autoPopulate:t}),r.a.createElement(Wi.a,{fieldId:"source_path",helperTextInvalid:(null===k||void 0===k?void 0:k.message)||g.error,validated:g.error&&g.touched||(null===k||void 0===k?void 0:k.message)?"error":"default",isRequired:!0,label:a._({id:"Inventory file"}),labelIcon:r.a.createElement(gi,{content:a._({id:"Select the inventory file to be synced by this source. You can select from the dropdown or enter a file within the input."})})},r.a.createElement(Fc,Object.assign({},y,{id:"source_path",isValid:(!g.error||!g.touched)&&!(null===k||void 0===k?void 0:k.message),data:[{value:"",key:"",label:a._({id:"Choose an inventory file"}),isDisabled:!0}].concat(Object(A.a)(C.map((function(e){return{value:e,label:e,key:e}})))),onChange:function(e,t){O.setValue(t)}}))),r.a.createElement(Xh,null),r.a.createElement(eE,null),r.a.createElement($h,null),r.a.createElement(Qh,null),r.a.createElement(Zh,{showProjectUpdate:!0}),r.a.createElement(Yh,null))})),lE=Object(u.withI18n)()((function(e){var t=e.autoPopulateCredential,a=e.i18n,i=Object(Va.c)().setFieldValue,l=Object(Va.b)({name:"credential",validate:Yo(a._({id:"Select a value for this field"}),a)}),o=Object(f.a)(l,3),c=o[0],s=o[1],d=o[2],m=Object(n.useCallback)((function(e){i("credential",e)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeNamespace:"satellite6",label:a._({id:"Credential"}),helperTextInvalid:s.error,isValid:!s.touched||!s.error,onBlur:function(){return d.setTouched()},onChange:m,value:c.value,required:!0,autoPopulate:t}),r.a.createElement(Xh,null),r.a.createElement(eE,null),r.a.createElement($h,null),r.a.createElement(Qh,null),r.a.createElement(Zh,null),r.a.createElement(Yh,{popoverContent:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Trans,{id:"Enter variables to configure the inventory source. For a detailed description of how to configure this plugin, see <0>Inventory Plugins</0> in the documentation and the <1>foreman</1> plugin configuration guide.",components:[r.a.createElement("a",{href:"http://docs.ansible.com/ansible-tower/latest/html/userguide/inventories.html#inventory-plugins",target:"_blank",rel:"noopener noreferrer"}),r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/collections/theforeman/foreman/foreman_inventory.html",target:"_blank",rel:"noopener noreferrer"})]}),r.a.createElement("br",null),r.a.createElement("br",null))}))})),oE=Object(u.withI18n)()((function(e){var t=e.autoPopulateCredential,a=e.i18n,i=Object(Va.c)().setFieldValue,l=Object(Va.b)({name:"credential",validate:Yo(a._({id:"Select a value for this field"}),a)}),o=Object(f.a)(l,3),c=o[0],s=o[1],d=o[2],m=Object(n.useCallback)((function(e){i("credential",e)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeNamespace:"tower",label:a._({id:"Credential"}),helperTextInvalid:s.error,isValid:!s.touched||!s.error,onBlur:function(){return d.setTouched()},onChange:m,value:c.value,required:!0,autoPopulate:t}),r.a.createElement(Xh,null),r.a.createElement(eE,null),r.a.createElement($h,null),r.a.createElement(Qh,null),r.a.createElement(Zh,null),r.a.createElement(Yh,{popoverContent:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Trans,{id:"Enter variables to configure the inventory source. For a detailed description of how to configure this plugin, see <0>Inventory Plugins</0> in the documentation and the <1>Tower</1> plugin configuration guide.",components:[r.a.createElement("a",{href:"http://docs.ansible.com/ansible-tower/latest/html/userguide/inventories.html#inventory-plugins",target:"_blank",rel:"noopener noreferrer"}),r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/collections/awx/awx/tower_inventory.html",target:"_blank",rel:"noopener noreferrer"})]}),r.a.createElement("br",null),r.a.createElement("br",null))}))})),cE=Object(u.withI18n)()((function(e){var t=e.autoPopulateCredential,a=e.i18n,i=Object(Va.c)().setFieldValue,l=Object(Va.b)({name:"credential",validate:Yo(a._({id:"Select a value for this field"}),a)}),o=Object(f.a)(l,3),c=o[0],s=o[1],d=o[2],m=Object(n.useCallback)((function(e){i("credential",e)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeNamespace:"vmware",label:a._({id:"Credential"}),helperTextInvalid:s.error,isValid:!s.touched||!s.error,onBlur:function(){return d.setTouched()},onChange:m,value:c.value,required:!0,autoPopulate:t}),r.a.createElement(Xh,null),r.a.createElement(eE,null),r.a.createElement($h,null),r.a.createElement(Qh,null),r.a.createElement(Zh,null),r.a.createElement(Yh,{popoverContent:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Trans,{id:"Enter variables to configure the inventory source. For a detailed description of how to configure this plugin, see <0>Inventory Plugins</0> in the documentation and the <1>vmware_vm_inventory</1> plugin configuration guide.",components:[r.a.createElement("a",{href:"http://docs.ansible.com/ansible-tower/latest/html/userguide/inventories.html#inventory-plugins",target:"_blank",rel:"noopener noreferrer"}),r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/collections/community/vmware/vmware_vm_inventory_inventory.html",target:"_blank",rel:"noopener noreferrer"})]}),r.a.createElement("br",null),r.a.createElement("br",null))}))})),sE=Object(u.withI18n)()((function(e){var t=e.autoPopulateCredential,a=e.i18n,i=Object(Va.c)().setFieldValue,l=Object(Va.b)({name:"credential",validate:Yo(a._({id:"Select a value for this field"}),a)}),o=Object(f.a)(l,3),c=o[0],s=o[1],d=o[2],m=Object(n.useCallback)((function(e){i("credential",e)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeNamespace:"rhv",label:a._({id:"Credential"}),helperTextInvalid:s.error,isValid:!s.touched||!s.error,onBlur:function(){return d.setTouched()},onChange:m,value:c.value,required:!0,autoPopulate:t}),r.a.createElement(Xh,null),r.a.createElement(eE,null),r.a.createElement($h,null),r.a.createElement(Qh,null),r.a.createElement(Zh,null),r.a.createElement(Yh,{popoverContent:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Trans,{id:"Enter variables to configure the inventory source. For a detailed description of how to configure this plugin, see <0>Inventory Plugins</0> in the documentation and the <1>ovirt</1> plugin configuration guide.",components:[r.a.createElement("a",{href:"http://docs.ansible.com/ansible-tower/latest/html/userguide/inventories.html#inventory-plugins",target:"_blank",rel:"noopener noreferrer"}),r.a.createElement("a",{href:"https://docs.ansible.com/ansible/latest/collections/ovirt/ovirt/ovirt_inventory.html",target:"_blank",rel:"noopener noreferrer"})]}),r.a.createElement("br",null),r.a.createElement("br",null))}))})),uE=function(e){var t,a=e.source,i=e.sourceOptions,l=e.i18n,o=Object(Va.c)(),c=o.values,s=o.initialValues,u=o.resetForm,m=o.setFieldTouched,p=o.setFieldValue,b=Object(Va.b)({name:"source",validate:Yo(l._({id:"Set a value for this field"}),l)}),v=Object(f.a)(b,2),_=v[0],h=v[1],E=Object(n.useContext)(Ct).custom_virtualenvs,y=Object(Va.b)("custom_virtualenv"),g=Object(f.a)(y,1)[0],O={label:l._({id:"Use Default Ansible Environment"}),value:"/var/lib/awx/venv/ansible/",key:"default"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"name",label:l._({id:"\u540d\u79f0"}),name:"name",type:"text",validate:Yo(null,l),isRequired:!0}),r.a.createElement(Tl,{id:"description",label:l._({id:"\u63cf\u8ff0"}),name:"description",type:"text"}),r.a.createElement(Wi.a,{fieldId:"source",helperTextInvalid:h.error,isRequired:!0,validated:h.touched&&h.error?"error":"default",label:l._({id:"Source"})},r.a.createElement(Fc,Object.assign({},_,{id:"source",data:[{value:"",key:"",label:l._({id:"Choose a source"}),isDisabled:!0}].concat(Object(A.a)((t=i,t.actions.GET.source.choices.map((function(e){var t=Object(f.a)(e,2),a=t[0];return{label:t[1],key:a,value:a}})).filter((function(e){return"file"!==e.key}))))),onChange:function(e,t){!function(e){if(e===s.source)u({values:Object(d.a)(Object(d.a)({},s),{},{name:c.name,description:c.description,custom_virtualenv:c.custom_virtualenv,source:e})});else{var t={credential:null,overwrite:!1,overwrite_vars:!1,source:e,source_path:"",source_project:null,source_script:null,source_vars:"---\n",update_cache_timeout:0,update_on_launch:!1,update_on_project_update:!1,verbosity:1,enabled_var:"",enabled_value:"",host_filter:""};Object.keys(t).forEach((function(e){p(e,t[e]),m(e,!1)}))}}(t)}}))),E&&E.length>1&&r.a.createElement(Wi.a,{fieldId:"custom-virtualenv",label:l._({id:"Ansible Environment"}),labelIcon:r.a.createElement(gi,{content:l._({id:"Select the custom Python virtual environment for this inventory source sync to run on."})})},r.a.createElement(Fc,Object.assign({id:"custom-virtualenv",data:[O].concat(Object(A.a)(E.filter((function(e){return e!==O.value})).map((function(e){return{value:e,label:e,key:e}}))))},g))),""!==_.value&&r.a.createElement(Wl,null,r.a.createElement(qt.a,{size:"md",headingLevel:"h4"},l._({id:"Source details"})),r.a.createElement(Vl,null,{azure_rm:r.a.createElement(tE,{autoPopulateCredential:!(null===a||void 0===a?void 0:a.id)||"azure_rm"!==(null===a||void 0===a?void 0:a.source),sourceOptions:i}),ec2:r.a.createElement(aE,{sourceOptions:i}),gce:r.a.createElement(nE,{autoPopulateCredential:!(null===a||void 0===a?void 0:a.id)||"gce"!==(null===a||void 0===a?void 0:a.source),sourceOptions:i}),openstack:r.a.createElement(rE,{autoPopulateCredential:!(null===a||void 0===a?void 0:a.id)||"openstack"!==(null===a||void 0===a?void 0:a.source)}),rhv:r.a.createElement(sE,{autoPopulateCredential:!(null===a||void 0===a?void 0:a.id)||"rhv"!==(null===a||void 0===a?void 0:a.source)}),satellite6:r.a.createElement(lE,{autoPopulateCredential:!(null===a||void 0===a?void 0:a.id)||"satellite6"!==(null===a||void 0===a?void 0:a.source)}),scm:r.a.createElement(iE,{autoPopulateProject:!(null===a||void 0===a?void 0:a.id)||"scm"!==(null===a||void 0===a?void 0:a.source)}),tower:r.a.createElement(oE,{autoPopulateCredential:!(null===a||void 0===a?void 0:a.id)||"tower"!==(null===a||void 0===a?void 0:a.source)}),vmware:r.a.createElement(cE,{autoPopulateCredential:!(null===a||void 0===a?void 0:a.id)||"vmware"!==(null===a||void 0===a?void 0:a.source),sourceOptions:i})}[_.value])))},dE=function(e){var t,a,i,l=e.i18n,o=e.onCancel,c=e.onSubmit,s=e.source,u=e.submitError,d=void 0===u?null:u,m={credential:(null===s||void 0===s||null===(t=s.summary_fields)||void 0===t?void 0:t.credential)||null,custom_virtualenv:(null===s||void 0===s?void 0:s.custom_virtualenv)||"",description:(null===s||void 0===s?void 0:s.description)||"",name:(null===s||void 0===s?void 0:s.name)||"",overwrite:(null===s||void 0===s?void 0:s.overwrite)||!1,overwrite_vars:(null===s||void 0===s?void 0:s.overwrite_vars)||!1,source:(null===s||void 0===s?void 0:s.source)||"",source_path:(null===s||void 0===s?void 0:s.source_path)||"",source_project:(null===s||void 0===s||null===(a=s.summary_fields)||void 0===a?void 0:a.source_project)||null,source_script:(null===s||void 0===s||null===(i=s.summary_fields)||void 0===i?void 0:i.source_script)||null,source_vars:(null===s||void 0===s?void 0:s.source_vars)||"---\n",update_cache_timeout:(null===s||void 0===s?void 0:s.update_cache_timeout)||0,update_on_launch:(null===s||void 0===s?void 0:s.update_on_launch)||!1,update_on_project_update:(null===s||void 0===s?void 0:s.update_on_project_update)||!1,verbosity:(null===s||void 0===s?void 0:s.verbosity)||1,enabled_var:(null===s||void 0===s?void 0:s.enabled_var)||"",enabled_value:(null===s||void 0===s?void 0:s.enabled_value)||"",host_filter:(null===s||void 0===s?void 0:s.host_filter)||""},f=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.readOptions();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[]),null),v=f.isLoading,_=f.error,h=f.request,E=f.result;return Object(n.useEffect)((function(){h()}),[h]),_?r.a.createElement(za,{error:_}):!E||v?r.a.createElement(Nr,null):r.a.createElement(Va.a,{initialValues:m,onSubmit:function(e){c(e)}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(uE,{formik:e,i18n:l,source:s,sourceOptions:E}),d&&r.a.createElement(Yl,{error:d}),r.a.createElement(cc,{onCancel:o,onSubmit:e.handleSubmit})))}))};dE.defaultProps={submitError:null};var mE=Object(u.withI18n)()(dE),pE=["credential","source_path","source_project","source_script"];var bE,fE,vE=function(e){var t=e.source,a=Object(c.g)(),i=Object(c.i)().id,l="/inventories/inventory/".concat(i,"/sources/").concat(t.id,"/details"),s=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.replace(t.id,a);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t.id]),null),u=s.error,m=s.request,f=s.result;Object(n.useEffect)((function(){f&&a.push(l)}),[f,l,a]);var v=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,l,c,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.credential,n=t.source_path,r=t.source_project,l=t.source_script,c=Object(o.a)(t,pE),s={},u={},"scm"===t.source&&(s.source_path="/ (project root)"===n?"":n,u.source_project=r.id),e.next=6,m(Object(d.a)(Object(d.a)(Object(d.a)({credential:(null===a||void 0===a?void 0:a.id)||null,inventory:i,source_script:(null===l||void 0===l?void 0:l.id)||null},s),u),c));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(mE,{source:t,onCancel:function(){a.push(l)},onSubmit:v,submitError:u})))},_E=Object(j.b)(Fo.a)(bE||(bE=Object(v.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 16px;\n  grid-template-columns: ",";\n"])),(function(e){return"repeat(".concat(e.columns,", max-content)")})),hE=j.b.b(fE||(fE=Object(v.a)(["\n  margin-right: 20px;\n"])));function EE(e){var t=e.canToggleNotifications,a=e.notification,n=e.detailUrl,i=e.approvalsTurnedOn,l=e.startedTurnedOn,o=e.successTurnedOn,c=e.errorTurnedOn,u=e.toggleNotification,d=e.i18n,m=e.typeLabels,p=e.showApprovalsToggle;return r.a.createElement(ho.a,{"aria-labelledby":"items-list-item-".concat(a.id),key:a.id,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:{pathname:n}},r.a.createElement("b",{id:"items-list-item-".concat(a.id)},a.name))),r.a.createElement(ko,{key:"type"},r.a.createElement(hE,null,d._({id:"Type"})),m[a.notification_type])]}),r.a.createElement(_E,{"aria-label":"actions","aria-labelledby":"items-list-item-".concat(a.id),id:"items-list-item-".concat(a.id),columns:p?4:3},p&&r.a.createElement(dm.a,{id:"notification-".concat(a.id,"-approvals-toggle"),label:d._({id:"Approval"}),labelOff:d._({id:"Approval"}),isChecked:i,isDisabled:!t,onChange:function(){return u(a.id,i,"approvals")},"aria-label":d._({id:"Toggle notification approvals"})}),r.a.createElement(dm.a,{id:"notification-".concat(a.id,"-started-toggle"),label:d._({id:"Start"}),labelOff:d._({id:"Start"}),isChecked:l,isDisabled:!t,onChange:function(){return u(a.id,l,"started")},"aria-label":d._({id:"Toggle notification start"})}),r.a.createElement(dm.a,{id:"notification-".concat(a.id,"-success-toggle"),label:d._({id:"Success"}),labelOff:d._({id:"Success"}),isChecked:o,isDisabled:!t,onChange:function(){return u(a.id,o,"success")},"aria-label":d._({id:"Toggle notification success"})}),r.a.createElement(dm.a,{id:"notification-".concat(a.id,"-error-toggle"),label:d._({id:"Failure"}),labelOff:d._({id:"Failure"}),isChecked:c,isDisabled:!t,onChange:function(){return u(a.id,c,"error")},"aria-label":d._({id:"Toggle notification failure"})}))))}EE.defaultProps={approvalsTurnedOn:!1,errorTurnedOn:!1,startedTurnedOn:!1,successTurnedOn:!1,showApprovalsToggle:!1};var yE=Object(u.withI18n)()(EE),gE=R("notification",{page:1,page_size:5,order_by:"name"});function OE(e){var t=e.apiModel,a=e.canToggleNotifications,i=e.id,l=e.i18n,o=e.showApprovalsToggle,s=Object(c.h)(),u=Object(n.useState)([]),m=Object(f.a)(u,2),v=m[0],_=m[1],h=Object(n.useState)(null),E=Object(f.a)(h,2),y=E[0],g=E[1],O=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n,r,l,c,u,m,b,v,_,h,E,y,g,O,j,k,w,C;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(gE,s.search),e.next=3,Promise.all([lt.read(r),lt.readOptions()]);case 3:return l=e.sent,c=Object(f.a)(l,2),u=c[0].data,m=u.results,b=u.count,v=c[1],_=v.data.actions.GET.notification_type.choices.reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(gr.a)({},t[0],t[1]))}),{}),h=m.length>0?{id__in:m.map((function(e){return e.id})).join(",")}:{},e.next=13,Promise.all([t.readNotificationTemplatesStarted(i,h),t.readNotificationTemplatesSuccess(i,h),t.readNotificationTemplatesError(i,h)]);case 13:if(E=e.sent,y=Object(f.a)(E,3),g=y[0].data,O=y[1].data,j=y[2].data,k={notifications:m,itemCount:b,startedTemplateIds:g.results.map((function(e){return e.id})),successTemplateIds:O.results.map((function(e){return e.id})),errorTemplateIds:j.results.map((function(e){return e.id})),typeLabels:_,relatedSearchableKeys:((null===v||void 0===v||null===(a=v.data)||void 0===a?void 0:a.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=v.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=v.data.actions)||void 0===t?void 0:t.GET[e].filterable}))},!o){e.next=27;break}return e.next=22,t.readNotificationTemplatesApprovals(i,h);case 22:w=e.sent,C=w.data,k.approvalsTemplateIds=C.results.map((function(e){return e.id})),e.next=28;break;case 27:k.approvalsTemplateIds=[];case 28:return e.abrupt("return",k);case 29:case"end":return e.stop()}}),e)}))),[t,i,s,o]),{notifications:[],itemCount:0,approvalsTemplateIds:[],startedTemplateIds:[],successTemplateIds:[],errorTemplateIds:[],typeLabels:{},relatedSearchableKeys:[],searchableKeys:[]}),j=O.result,k=O.result,w=k.notifications,C=k.itemCount,S=k.approvalsTemplateIds,x=k.startedTemplateIds,T=k.successTemplateIds,I=k.errorTemplateIds,A=k.typeLabels,R=k.relatedSearchableKeys,D=k.searchableKeys,L=O.error,P=O.isLoading,U=O.request,G=O.setValue;Object(n.useEffect)((function(){U()}),[U]);var q=function(){var e=Object(b.a)(p.a.mark((function e(a,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(v.concat([a])),e.prev=1,!n){e.next=8;break}return e.next=5,t.disassociateNotificationTemplate(i,a,r);case 5:G(Object(d.a)(Object(d.a)({},j),{},Object(gr.a)({},"".concat(r,"TemplateIds"),j["".concat(r,"TemplateIds")].filter((function(e){return e!==a}))))),e.next=11;break;case 8:return e.next=10,t.associateNotificationTemplate(i,a,r);case 10:G(Object(d.a)(Object(d.a)({},j),{},Object(gr.a)({},"".concat(r,"TemplateIds"),j["".concat(r,"TemplateIds")].concat(a))));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),g(e.t0);case 16:return e.prev=16,_(v.filter((function(e){return e!==a}))),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:L,hasContentLoading:P,items:w,itemCount:C,pluralizedItemName:l._({id:"Notifications"}),qsConfig:gE,toolbarSearchColumns:[{name:l._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:l._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:l._({id:"Notification type"}),key:"or__notification_type",options:[["email",l._({id:"Email"})],["grafana",l._({id:"Grafana"})],["hipchat",l._({id:"Hipchat"})],["irc",l._({id:"IRC"})],["mattermost",l._({id:"Mattermost"})],["pagerduty",l._({id:"Pagerduty"})],["rocketchat",l._({id:"Rocket.Chat"})],["slack",l._({id:"Slack"})],["twilio",l._({id:"Twilio"})],["webhook",l._({id:"Webhook"})]]},{name:l._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:l._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:l._({id:"\u540d\u79f0"}),key:"name"},{name:l._({id:"\u7c7b\u578b"}),key:"notification_type"}],toolbarSearchableKeys:D,toolbarRelatedSearchableKeys:R,renderItem:function(e){return r.a.createElement(yE,{key:e.id,notification:e,detailUrl:"/notification_templates/".concat(e.id,"/details"),canToggleNotifications:a&&!v.includes(e.id),toggleNotification:q,approvalsTurnedOn:S.includes(e.id),errorTurnedOn:I.includes(e.id),startedTurnedOn:x.includes(e.id),successTurnedOn:T.includes(e.id),typeLabels:A,showApprovalsToggle:o})}}),y&&r.a.createElement(Zt,{variant:"error",title:l._({id:"Error!"}),isOpen:0===v.length,onClose:function(){return g(null)}},l._({id:"Failed to toggle notification."}),r.a.createElement(ua,{error:y})))}OE.defaultProps={showApprovalsToggle:!1};var jE=Object(u.withI18n)()(OE);var kE=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.inventory,i=e.setBreadcrumb,l=e.me,o=Object(c.h)(),u=Object(c.j)("/inventories/inventory/:id/sources/:sourceId"),d="/inventories/inventory/".concat(a.id,"/sources"),m=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Qe.readSourceDetail(a.id,u.params.sourceId),ct.read({page_size:1,role_level:"notification_admin_role"})]);case 2:return t=e.sent,n=Object(f.a)(t,2),r=n[0],i=n[1],e.abrupt("return",{source:r,isNotifAdmin:i.data.results.length>0});case 7:case"end":return e.stop()}}),e)}))),[a.id,u.params.sourceId]),{source:null,isNotifAdmin:!1}),v=m.result,_=v.source,h=v.isNotifAdmin,E=m.error,y=m.isLoading,g=m.request;Object(n.useEffect)((function(){g()}),[g,o.pathname]),Object(n.useEffect)((function(){a&&_&&i(a,_)}),[a,_,i]);var O=Object(n.useCallback)((function(e){return et.readSchedules(null===_||void 0===_?void 0:_.id,e)}),[_]),j=Object(n.useCallback)((function(){return et.readScheduleOptions(null===_||void 0===_?void 0:_.id)}),[_]),k=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Sources"})),link:"".concat(d),id:0},{name:t._({id:"Details"}),link:"".concat(u.url,"/details"),id:1},{name:t._({id:"\u8ba1\u5212"}),link:"".concat(u.url,"/schedules"),id:2}],w=h;if((l.is_system_auditor||h)&&k.push({name:t._({id:"Notifications"}),link:"".concat(u.url,"/notifications"),id:3}),E)return r.a.createElement(za,{error:E});var C=!0;return["edit","schedules/"].some((function(e){return o.pathname.includes(e)}))&&(C=!1),r.a.createElement(r.a.Fragment,null,C&&r.a.createElement(us,{tabsArray:k}),y&&r.a.createElement(Nr,null),!y&&_&&r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/inventories/inventory/:id/sources/:sourceId",to:"/inventories/inventory/:id/sources/:sourceId/details",exact:!0}),r.a.createElement(c.b,{key:"details",path:"/inventories/inventory/:id/sources/:sourceId/details"},r.a.createElement(Jh,{inventorySource:_})),r.a.createElement(c.b,{key:"edit",path:"/inventories/inventory/:id/sources/:sourceId/edit"},r.a.createElement(vE,{source:_,inventory:a})),r.a.createElement(c.b,{key:"notifications",path:"/inventories/inventory/:id/sources/:sourceId/notifications"},r.a.createElement(jE,{id:Number(u.params.sourceId),canToggleNotifications:w,apiModel:et})),r.a.createElement(c.b,{key:"schedules",path:"/inventories/inventory/:id/sources/:sourceId/schedules"},r.a.createElement(Vh,{createSchedule:function(e){return et.createSchedule(null===_||void 0===_?void 0:_.id,e)},setBreadcrumb:function(e,t){return i(a,_,t)},unifiedJobTemplate:_,loadSchedules:O,loadScheduleOptions:j})),r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(u.url,"/details")},t._({id:"View inventory source details"}))))))})),wE=["credential","source_path","source_project","source_script"];var CE=function(){var e=Object(c.g)(),t=Object(c.i)().id,a=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.create(t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[])),i=a.error,l=a.request,s=a.result;Object(n.useEffect)((function(){s&&e.push("/inventories/inventory/".concat(s.inventory,"/sources/").concat(s.id,"/details"))}),[s,e]);var u=function(){var e=Object(b.a)(p.a.mark((function e(a){var n,r,i,c,s,u,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.credential,r=a.source_path,i=a.source_project,c=a.source_script,s=Object(o.a)(a,wE),u={},m={},"scm"===a.source&&(u.source_path="/ (project root)"===r?"":r,m.source_project=i.id),e.next=6,l(Object(d.a)(Object(d.a)(Object(d.a)({credential:(null===n||void 0===n?void 0:n.id)||null,inventory:t,source_script:(null===c||void 0===c?void 0:c.id)||null},u),m),s));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(mE,{onCancel:function(){e.push("/inventories/inventory/".concat(t,"/sources"))},onSubmit:u,submitError:i})))};var SE=Object(u.withI18n)()((function(e){var t,a=e.source,n=e.isSelected,i=e.onSelect,l=e.i18n,o=e.detailUrl,c=e.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ho.a,{"aria-labelledby":"check-action-".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-source-".concat(a.id),checked:n,onChange:i,"aria-labelledby":"check-action-".concat(a.id)}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(go.a,{key:"status",isFilled:!1},a.summary_fields.last_job&&r.a.createElement(Ea.a,{position:"top",content:(t=a.summary_fields.last_job,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,l._({id:"MOST RECENT SYNC"})),r.a.createElement("div",null,l._({id:"JOB ID:"})," ",t.id),r.a.createElement("div",null,l._({id:"STATUS:"})," ",t.status.toUpperCase()),t.finished&&r.a.createElement("div",null,l._({id:"FINISHED:"})," ",t.finished))),key:a.summary_fields.last_job.id},r.a.createElement(s.b,{to:"/jobs/inventory/".concat(a.summary_fields.last_job.id)},r.a.createElement(hp,{status:a.summary_fields.last_job.status})))),r.a.createElement(go.a,{"aria-label":l._({id:"name"}),key:"name"},r.a.createElement("span",null,r.a.createElement(s.b,{to:"".concat(o,"/details")},r.a.createElement("b",null,a.name)))),r.a.createElement(go.a,{"aria-label":l._({id:"type"}),key:"type"},c)]}),r.a.createElement(Fo.a,{id:"actions","aria-labelledby":"actions","aria-label":"actions"},a.summary_fields.user_capabilities.start&&r.a.createElement(Wh,{source:a}),a.summary_fields.user_capabilities.edit&&r.a.createElement(O.a,{"aria-label":l._({id:"Edit Source"}),variant:"plain",component:s.b,to:"".concat(o,"/edit")},r.a.createElement(Mo.a,null))))))}));function xE(e){var t=Object(n.useState)(e),a=Object(f.a)(t,2),r=a[0],i=a[1],l=Yp({jobs:["status_changed"],control:["limit_reached_1"]});return Object(n.useEffect)((function(){i(e)}),[e]),Object(n.useEffect)((function(){if((null===l||void 0===l?void 0:l.unified_job_id)&&(null===l||void 0===l?void 0:l.inventory_source_id)){var e=l.inventory_source_id,t=r.findIndex((function(t){return t.id===e}));t>-1&&i(function(e,t,a){var n=Object(d.a)(Object(d.a)({},e[t]),{},{status:a.status,last_updated:a.finished,summary_fields:Object(d.a)(Object(d.a)({},e[t].summary_fields),{},{last_job:{id:a.unified_job_id,status:a.status,finished:a.finished}})});return[].concat(Object(A.a)(e.slice(0,t)),[n],Object(A.a)(e.slice(t+1)))}(r,t,l))}}),[l]),r}var TE=R("inventory",{not__source:"",page:1,page_size:20,order_by:"name"});var IE=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.i)(),i=a.inventoryType,l=a.id,o=Object(c.h)().search,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(TE,o),e.next=3,Promise.all([Qe.readSources(l,t),et.readOptions()]);case 3:return a=e.sent,e.abrupt("return",{result:a[0].data.results,sourceCount:a[0].data.count,sourceChoices:a[1].data.actions.GET.source.choices,sourceChoicesOptions:a[1].data.actions});case 5:case"end":return e.stop()}}),e)}))),[l,o]),{result:[],sourceCount:0,sourceChoices:[]}),u=s.isLoading,d=s.error,m=s.result,v=m.result,_=m.sourceCount,h=m.sourceChoices,E=m.sourceChoicesOptions,y=s.request,g=xE(v),j=g.length>0&&g.every((function(e){return e.summary_fields.user_capabilities.start})),k=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=3;break}return e.next=3,Qe.syncAllSources(l);case 3:case"end":return e.stop()}}),e)}))),[l,j])),w=k.isLoading,C=k.error,S=k.request;Object(n.useEffect)((function(){y()}),[y]);var x=Uo(g),T=x.selected,I=x.isAllSelected,R=x.handleSelect,D=x.setSelected,L=en(Object(n.useCallback)((function(){return Promise.all(T.map((function(e){var t=e.id;return et.destroy(t)})),[])}),[T]),{fetchItems:y,allItemsSelected:I,qsConfig:TE}),P=L.isLoading,U=L.deleteItems,G=L.deletionError,q=L.clearDeletionError,F=Qa(C),z=F.error,M=F.dismissError,K=function(e){return[et.destroyHosts(e),et.destroyGroups(e)]},V=en(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(Promise.all(T.map((function(e){var t=e.id;return K(t)})).flat()),[]));case 1:case"end":return e.stop()}}),e)}))),[T])),H=V.isLoading,B=V.deletionError,W=V.deleteItems,J=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:if(B){e.next=5;break}return e.next=5,U();case 5:D([]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=E&&Object.prototype.hasOwnProperty.call(E,"POST"),X="/inventories/".concat(i,"/").concat(l,"/sources/");return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:d,hasContentLoading:u||P||w||H,items:g,itemCount:_,pluralizedItemName:t._({id:"Inventory Sources"}),qsConfig:TE,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:I,onSelectAll:function(e){return D(e?Object(A.a)(g):[])},qsConfig:TE,additionalControls:[].concat(Object(A.a)(Y?[r.a.createElement(Po,{key:"add",linkTo:"".concat(X,"add")})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:J,itemsToDelete:T,pluralizedItemName:t._({id:"Inventory Sources"})})],Object(A.a)(j?[r.a.createElement(Ea.a,{key:"update",content:t._({id:"Sync all sources"}),position:"top"},r.a.createElement(O.a,{onClick:S,"aria-label":t._({id:"Sync all"}),variant:"secondary"},t._({id:"Sync all"})))]:[]))}))},renderItem:function(e){var t;return h.forEach((function(a){var n=Object(f.a)(a,2),r=n[0],i=n[1];e.source===r&&(t=i)})),r.a.createElement(SE,{key:e.id,source:e,onSelect:function(){return R(e)},label:t,detailUrl:"".concat(X).concat(e.id),isSelected:T.some((function(t){return t.id===e.id}))})}}),z&&r.a.createElement(Zt,{"aria-label":t._({id:"Sync error"}),isOpen:z,variant:"error",title:t._({id:"Error!"}),onClose:M},t._({id:"Failed to sync some or all inventory sources."}),r.a.createElement(ua,{error:z})),(G||B)&&r.a.createElement(Zt,{"aria-label":t._({id:"Delete error"}),isOpen:G||B,variant:"error",title:t._({id:"Error!"}),onClose:q},t._({id:"Failed to delete one or more inventory sources."}),r.a.createElement(ua,{error:G||B})))}));var AE=function(e){var t=e.inventory,a=e.setBreadcrumb;return r.a.createElement(c.d,null,r.a.createElement(c.b,{key:"add",path:"/inventories/inventory/:id/sources/add"},r.a.createElement(CE,null)),r.a.createElement(c.b,{path:"/inventories/inventory/:id/sources/:sourceId"},r.a.createElement(xt,null,(function(e){var n=e.me;return r.a.createElement(kE,{inventory:t,setBreadcrumb:a,me:n||{}})}))),r.a.createElement(c.b,{path:"/inventories/:inventoryType/:id/sources"},r.a.createElement(IE,null)))};var RE=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],u=l[1],d=Object(n.useState)(!0),m=Object(f.a)(d,2),v=m[0],_=m[1],h=Object(n.useState)(null),E=Object(f.a)(h,2),y=E[0],g=E[1],O=Object(c.h)(),j=Object(c.j)({path:"/inventories/inventory/:id"});Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.readDetail(j.params.id);case 3:t=e.sent,n=t.data,a(n),g(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u(e.t0);case 12:return e.prev=12,_(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[j.params.id,O.pathname,a]);var k,w=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Inventories"})),link:"/inventories",id:99},{name:t._({id:"Details"}),link:"".concat(j.url,"/details"),id:0},{name:t._({id:"Access"}),link:"".concat(j.url,"/access"),id:1},{name:t._({id:"Groups"}),link:"".concat(j.url,"/groups"),id:2},{name:t._({id:"Hosts"}),link:"".concat(j.url,"/hosts"),id:3},{name:t._({id:"Sources"}),link:"".concat(j.url,"/sources"),id:4},{name:t._({id:"Completed Jobs"}),link:"".concat(j.url,"/completed_jobs"),id:5}];if(v)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Nr,null)));if(o)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:o},404===(null===(k=o.response)||void 0===k?void 0:k.status)&&r.a.createElement("span",null,t._({id:"Inventory not found."})," ",r.a.createElement(s.b,{to:"/inventories"},t._({id:"View all Inventories."}))))));var C=!0;return["edit","add","groups/","hosts/","sources/"].some((function(e){return O.pathname.includes(e)}))&&(C=!1),"smart"===(null===y||void 0===y?void 0:y.kind)?r.a.createElement(c.a,{to:"/inventories/smart_inventory/".concat(y.id,"/details")}):r.a.createElement(La.a,null,r.a.createElement(na.a,null,C&&r.a.createElement(us,{tabsArray:w}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/inventories/inventory/:id",to:"/inventories/inventory/:id/details",exact:!0}),y&&[r.a.createElement(c.b,{path:"/inventories/inventory/:id/details",key:"details"},r.a.createElement(Kv,{inventory:y,hasInventoryLoading:v})),r.a.createElement(c.b,{path:"/inventories/inventory/:id/edit",key:"edit"},r.a.createElement(Zv,{inventory:y})),r.a.createElement(c.b,{path:"/inventories/inventory/:id/hosts",key:"hosts"},r.a.createElement(ah,{inventory:y,setBreadcrumb:a})),r.a.createElement(c.b,{path:"/inventories/inventory/:id/access",key:"access"},r.a.createElement(iu,{resource:y,apiModel:Qe})),r.a.createElement(c.b,{path:"/inventories/inventory/:id/groups",key:"groups"},r.a.createElement(F_,{inventory:y,setBreadcrumb:a})),r.a.createElement(c.b,{path:"/inventories/inventory/:id/sources",key:"sources"},r.a.createElement(AE,{inventory:y,setBreadcrumb:a})),r.a.createElement(c.b,{path:"/inventories/inventory/:id/completed_jobs",key:"completed_jobs"},r.a.createElement(tb,{defaultParams:{or__job__inventory:y.id,or__adhoccommand__inventory:y.id,or__inventoryupdate__inventory_source__inventory:y.id,or__workflowjob__inventory:y.id}})),r.a.createElement(c.b,{path:"*",key:"not-found"},r.a.createElement(za,{isNotFound:!0},j.params.id&&r.a.createElement(s.b,{to:"/inventories/inventory/".concat(j.params.id,"/details")},t._({id:"View Inventory Details"}))))])))}));var NE=Object(u.withI18n)()((function(e){var t=e.inventory,a=e.i18n,i=Object(c.g)(),l=t.created,o=t.description,u=t.host_filter,d=t.id,m=t.modified,v=t.name,_=t.variables,h=t.summary_fields,E=h.created_by,y=h.modified_by,g=h.organization,j=h.user_capabilities,k=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={or__job__inventory:d,or__workflowjob__inventory:d,order_by:"-finished",page_size:10},e.next=3,Promise.all([Et.read(t),Qe.readInstanceGroups(d)]);case 3:return a=e.sent,n=Object(f.a)(a,2),r=n[0].data,i=n[1].data,e.abrupt("return",{recentJobs:r.results,instanceGroups:i.results});case 8:case"end":return e.stop()}}),e)}))),[d]),{recentJobs:[],instanceGroups:[]}),w=k.error,C=k.isLoading,S=k.request,x=k.result,T=x.recentJobs,I=x.instanceGroups;Object(n.useEffect)((function(){S()}),[S]);var A=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.destroy(d);case 2:i.push("/inventories");case 3:case"end":return e.stop()}}),e)}))),[d,i])),R=A.error,N=A.isLoading,D=A.request,L=Qa(R),P=L.error,U=L.dismissError;return C?r.a.createElement(Nr,null):w?r.a.createElement(za,{error:w}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:a._({id:"\u540d\u79f0"}),value:v}),T.length>0&&r.a.createElement(xi,{label:a._({id:"Activity"}),value:r.a.createElement(Op,{jobs:T})}),r.a.createElement(xi,{label:a._({id:"\u63cf\u8ff0"}),value:o}),r.a.createElement(xi,{label:a._({id:"\u7c7b\u578b"}),value:a._({id:"Smart inventory"})}),r.a.createElement(xi,{label:a._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(g.id,"/details")},g.name)}),r.a.createElement(xi,{fullWidth:!0,label:a._({id:"Smart host filter"}),value:r.a.createElement(Wf.a,{variant:"outline"},u)}),I.length>0&&r.a.createElement(xi,{fullWidth:!0,label:a._({id:"Instance groups"}),value:r.a.createElement(fc,{numChips:5,totalChips:I.length},I.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),r.a.createElement(_l,{label:a._({id:"\u53d8\u91cf"}),value:_,rows:4}),r.a.createElement(Li,{label:a._({id:"\u5df2\u521b\u5efa"}),date:l,user:E}),r.a.createElement(Li,{label:a._({id:"Last modified"}),date:m,user:y})),r.a.createElement(Yc,null,(null===j||void 0===j?void 0:j.edit)&&r.a.createElement(O.a,{component:s.b,"aria-label":"edit",to:"/inventories/smart_inventory/".concat(d,"/edit")},a._({id:"Edit"})),(null===j||void 0===j?void 0:j.delete)&&r.a.createElement(Qc,{name:v,modalTitle:a._({id:"Delete smart inventory"}),onConfirm:D,isDisabled:N},a._({id:"\u5220\u9664"})))),P&&r.a.createElement(Zt,{isOpen:P,variant:"error",title:a._({id:"Error!"}),onClose:U},a._({id:"Failed to delete smart inventory."}),r.a.createElement(ua,{error:P})))})),DE=Object(u.withI18n)()((function(e){var t,a=e.i18n,i=e.inventory,l=Object(Va.c)().setFieldValue,o=Object(Va.b)({name:"organization",validate:Yo(a._({id:"Select a value for this field"}),a)}),c=Object(f.a)(o,3),s=c[0],u=c[1],d=c[2],m=Object(Va.b)({name:"instance_groups"}),p=Object(f.a)(m,3),b=p[0],v=p[2],_=Object(Va.b)({name:"host_filter",validate:Yo(null,a)}),h=Object(f.a)(_,3),E=h[0],y=h[1],g=h[2],O=Object(n.useCallback)((function(e){l("organization",e)}),[l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"name",label:a._({id:"\u540d\u79f0"}),name:"name",type:"text",validate:Yo(null,a),isRequired:!0}),r.a.createElement(Tl,{id:"description",label:a._({id:"\u63cf\u8ff0"}),name:"description",type:"text"}),r.a.createElement(Pc,{helperTextInvalid:u.error,isValid:!u.touched||!u.error,onBlur:function(){return d.setTouched()},onChange:O,value:s.value,required:!0,autoPopulate:!(null===i||void 0===i?void 0:i.id)}),r.a.createElement(Ef,{value:E.value,organizationId:null===(t=s.value)||void 0===t?void 0:t.id,helperTextInvalid:y.error,onChange:function(e){g.setValue(e)},onBlur:function(){return g.setTouched()},isValid:!y.touched||!y.error,isDisabled:!s.value}),r.a.createElement(zb,{value:b.value,onChange:function(e){v.setValue(e)},tooltip:a._({id:"Select the Instance Groups for this Inventory to run on."})}),r.a.createElement(Hl,null,r.a.createElement(ro,{id:"variables",name:"variables",label:a._({id:"\u53d8\u91cf"}),tooltip:a._({id:"Enter inventory variables using either JSON or YAML syntax. Use the radio button to toggle between the two. Refer to the Ansible Tower documentation for example syntax."})})))}));function LE(e){var t,a=e.inventory,i=e.instanceGroups,l=e.onSubmit,o=e.onCancel,s=e.submitError,u=Object(c.h)().search,d=new URLSearchParams(u).get("host_filter"),m={description:a.description||"",host_filter:a.host_filter||(d?bf(pf(d)):""),instance_groups:i||[],kind:"smart",name:a.name||"",organization:(null===(t=a.summary_fields)||void 0===t?void 0:t.organization)||null,variables:a.variables||"---"},f=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.readOptions();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[]),null),v=f.isLoading,_=f.error,h=f.request,E=f.result;return Object(n.useEffect)((function(){h()}),[h]),v?r.a.createElement(Nr,null):_?r.a.createElement(za,{error:_}):r.a.createElement(Va.a,{initialValues:m,onSubmit:function(e){l(e)}},(function(e){var t;return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(DE,{inventory:a}),s&&r.a.createElement(Yl,{error:s}),r.a.createElement(cc,{onCancel:o,onSubmit:e.handleSubmit,submitDisabled:!(null===E||void 0===E||null===(t=E.actions)||void 0===t?void 0:t.POST)})))}))}LE.defaultProps={instanceGroups:[],inventory:{},submitError:null};var PE=Object(u.withI18n)()(LE),UE=["instance_groups","organization"];var GE=function(e){var t=e.inventory,a=Object(c.g)(),i="/inventories/smart_inventory/".concat(t.id,"/details"),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.readInstanceGroups(t.id);case 2:return a=e.sent,n=a.data.results,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),[t.id]),[]),s=l.error,u=l.isLoading,m=l.request,f=l.result;Object(n.useEffect)((function(){m()}),[m]);var v=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(a,n,r){var i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.update(t.id,a);case 2:return i=e.sent,l=i.data,e.next=6,Promise.all(n.map((function(e){return Qe.associateInstanceGroup(t.id,e)})));case 6:return e.next=8,Promise.all(r.map((function(e){return Qe.disassociateInstanceGroup(t.id,e)})));case 8:return e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),[t.id])),_=v.error,h=v.request,E=v.result;Object(n.useEffect)((function(){E&&a.push({pathname:i,search:""})}),[E,i,a]);var y=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i,l,c,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.instance_groups,n=t.organization,r=Object(o.a)(t,UE),i=Jv(f,a),l=i.added,c=i.removed,s=l.map((function(e){return e.id})),u=c.map((function(e){return e.id})),e.next=6,h(Object(d.a)({organization:null===n||void 0===n?void 0:n.id},r),s,u);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?r.a.createElement(Nr,null):s?r.a.createElement(za,{error:s}):r.a.createElement(Bc,null,r.a.createElement(PE,{inventory:t,instanceGroups:f,onCancel:function(){a.push({pathname:i,search:""})},onSubmit:y,submitError:_}))};var qE=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.detailUrl,n=e.host,i=e.isSelected,l=e.onSelect,o=n.summary_fields.recent_jobs.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"job"})})),c="check-action-".concat(n.id);return r.a.createElement(ho.a,{key:n.id,"aria-labelledby":c,id:"".concat(n.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-host-".concat(n.id),checked:i,onChange:l,"aria-labelledby":c}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"".concat(a)},r.a.createElement("b",null,n.name))),r.a.createElement(ko,{key:"recentJobs"},r.a.createElement(Op,{jobs:o})),r.a.createElement(ko,{key:"inventory"},r.a.createElement(r.a.Fragment,null,r.a.createElement(FE,null,t._({id:"\u6e05\u5355"})),r.a.createElement(s.b,{to:"/inventories/inventory/".concat(n.summary_fields.inventory.id,"/details")},n.summary_fields.inventory.name)))]})))})),FE=Object(j.b)("b").withConfig({displayName:"SmartInventoryHostListItem___StyledB",componentId:"sc-1e206b3-0"})(["margin-right:24px"]),zE=R("host",{page:1,page_size:20,order_by:"name"});var ME=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.inventory,i=Object(c.h)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(zE,i.search),e.next=3,Qe.readHosts(a.id,t);case 3:return n=e.sent,r=n.data,l=r.results,o=r.count,e.abrupt("return",{hosts:l,count:o});case 8:case"end":return e.stop()}}),e)}))),[i.search,a.id]),{hosts:[],count:0}),o=l.result,s=o.hosts,u=o.count,d=l.error,m=l.isLoading,f=l.request,v=Uo(s),_=v.selected,h=v.isAllSelected,E=v.handleSelect,y=v.setSelected;return Object(n.useEffect)((function(){f()}),[f]),r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:d,hasContentLoading:m,items:s,itemCount:u,pluralizedItemName:t._({id:"Hosts"}),qsConfig:zE,onRowClick:E,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name",isDefault:!0},{name:t._({id:"Created by (username)"}),key:"created_by__username"},{name:t._({id:"Modified by (username)"}),key:"modified_by__username"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],renderToolbar:function(e){var t,n;return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:h,onSelectAll:function(e){return y(e?Object(A.a)(s):[])},qsConfig:zE,additionalControls:(null===a||void 0===a||null===(t=a.summary_fields)||void 0===t||null===(n=t.user_capabilities)||void 0===n?void 0:n.adhoc)?[r.a.createElement(y_,{adHocItems:_,hasListItems:u>0})]:[]}))},renderItem:function(e){return r.a.createElement(qE,{key:e.id,host:e,detailUrl:"/inventories/smart_inventory/".concat(a.id,"/hosts/").concat(e.id,"/details"),isSelected:_.some((function(t){return t.id===e.id})),onSelect:function(){return E(e)}})}}))}));var KE=Object(u.withI18n)()((function(e){var t=e.host,a=e.i18n,n=t.created,i=t.description,l=t.enabled,o=t.modified,c=t.name,u=t.variables,m=t.summary_fields,p=m.inventory,b=m.recent_jobs,f=m.created_by,v=m.modified_by,_=null===b||void 0===b?void 0:b.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"job"})}));return r.a.createElement(Bc,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:a._({id:"\u540d\u79f0"}),value:c}),(null===_||void 0===_?void 0:_.length)>0&&r.a.createElement(xi,{label:a._({id:"Activity"}),value:r.a.createElement(Op,{jobs:_})}),r.a.createElement(xi,{label:a._({id:"\u63cf\u8ff0"}),value:i}),r.a.createElement(xi,{label:a._({id:"\u6e05\u5355"}),value:r.a.createElement(s.b,{to:"/inventories/inventory/".concat(null===p||void 0===p?void 0:p.id,"/details")},null===p||void 0===p?void 0:p.name)}),r.a.createElement(xi,{label:a._({id:"Enabled"}),value:l?a._({id:"On"}):a._({id:"Off"})}),r.a.createElement(Li,{date:n,label:a._({id:"\u5df2\u521b\u5efa"}),user:f}),r.a.createElement(Li,{date:o,label:a._({id:"Last modified"}),user:v}),r.a.createElement(_l,{label:a._({id:"\u53d8\u91cf"}),rows:4,value:u})))}));var VE=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.inventory,i=e.setBreadcrumb,l=Object(c.j)("/inventories/smart_inventory/:id/hosts/:hostId"),o=l.params,u=l.path,d=l.url,m=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.readHostDetail(a.id,o.hostId);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),[a.id,o.hostId]),null),f=m.result,v=m.error,_=m.isLoading,h=m.request;if(Object(n.useEffect)((function(){h()}),[h]),Object(n.useEffect)((function(){a&&f&&i(a,f)}),[a,f,i]),v)return r.a.createElement(za,{error:v});var E=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Hosts"})),link:"/inventories/smart_inventory/".concat(a.id,"/hosts"),id:0},{name:t._({id:"Details"}),link:"".concat(d,"/details"),id:1}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:E}),_&&r.a.createElement(Nr,null),!_&&f&&r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/inventories/smart_inventory/:id/hosts/:hostId",to:"".concat(u,"/details"),exact:!0}),r.a.createElement(c.b,{key:"details",path:"".concat(u,"/details")},r.a.createElement(KE,{host:f})),r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(d,"/details")},t._({id:"View smart inventory host details"}))))))}));var HE=function(e){var t=e.inventory,a=e.setBreadcrumb;return r.a.createElement(c.d,null,r.a.createElement(c.b,{key:"host",path:"/inventories/smart_inventory/:id/hosts/:hostId"},r.a.createElement(VE,{setBreadcrumb:a,inventory:t})),r.a.createElement(c.b,{key:"host-list",path:"/inventories/smart_inventory/:id/hosts"},r.a.createElement(ME,{inventory:t})))};var BE=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Object(c.h)(),l=Object(c.j)("/inventories/smart_inventory/:id"),o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.readDetail(l.params.id);case 2:return t=e.sent,a=t.data,e.abrupt("return",{inventory:a});case 5:case"end":return e.stop()}}),e)}))),[l.params.id]),{inventory:null}),u=o.result.inventory,d=o.error,m=o.isLoading,f=o.request;Object(n.useEffect)((function(){f()}),[f]),Object(n.useEffect)((function(){u&&a(u)}),[u,a]);var v,_=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Inventories"})),link:"/inventories",id:99},{name:t._({id:"Details"}),link:"".concat(l.url,"/details"),id:0},{name:t._({id:"Access"}),link:"".concat(l.url,"/access"),id:1},{name:t._({id:"Hosts"}),link:"".concat(l.url,"/hosts"),id:2},{name:t._({id:"Completed jobs"}),link:"".concat(l.url,"/completed_jobs"),id:3}];if(m)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Nr,null)));if(d)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:d},404===(null===d||void 0===d||null===(v=d.response)||void 0===v?void 0:v.status)&&r.a.createElement("span",null,t._({id:"Smart Inventory not found."})," ",r.a.createElement(s.b,{to:"/inventories"},t._({id:"View all Inventories."}))))));if(""===(null===u||void 0===u?void 0:u.kind))return r.a.createElement(c.a,{to:"/inventories/inventory/".concat(u.id,"/details")});var h=!0;return["edit","hosts/"].some((function(e){return i.pathname.includes(e)}))&&(h=!1),r.a.createElement(La.a,null,r.a.createElement(na.a,null,h&&r.a.createElement(us,{tabsArray:_}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/inventories/smart_inventory/:id",to:"/inventories/smart_inventory/:id/details",exact:!0}),u&&[r.a.createElement(c.b,{key:"details",path:"/inventories/smart_inventory/:id/details"},r.a.createElement(NE,{isLoading:m,inventory:u})),r.a.createElement(c.b,{key:"edit",path:"/inventories/smart_inventory/:id/edit"},r.a.createElement(GE,{inventory:u})),r.a.createElement(c.b,{key:"access",path:"/inventories/smart_inventory/:id/access"},r.a.createElement(iu,{resource:u,apiModel:Qe})),r.a.createElement(c.b,{key:"hosts",path:"/inventories/smart_inventory/:id/hosts"},r.a.createElement(HE,{inventory:u,setBreadcrumb:a})),r.a.createElement(c.b,{key:"completed_jobs",path:"/inventories/smart_inventory/:id/completed_jobs"},r.a.createElement(tb,{defaultParams:{or__job__inventory:u.id,or__adhoccommand__inventory:u.id,or__inventoryupdate__inventory_source__inventory:u.id,or__workflowjob__inventory:u.id}})),r.a.createElement(c.b,{key:"not-found",path:"*"},!m&&r.a.createElement(za,{isNotFound:!0},l.params.id&&r.a.createElement(s.b,{to:"/inventories/smart_inventory/".concat(l.params.id,"/details")},t._({id:"View Inventory Details"}))))])))})),WE=["instanceGroups","organization","insights_credential"];var JE=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],i=t[1],l=Object(n.useState)(!0),s=Object(f.a)(l,2),u=s[0],m=s[1],v=Object(n.useState)(null),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Object(c.g)();Object(n.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.read({kind:"insights"});case 3:t=e.sent,a=t.data.results,E(a[0].id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i(e.t0);case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}})()()}),[u,h]);var g=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,l,c,s,u,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.instanceGroups,n=t.organization,r=t.insights_credential,l=Object(o.a)(t,WE),e.prev=1,e.next=4,Qe.create(Object(d.a)({organization:n.id,insights_credential:r?r.id:null},l));case 4:if(c=e.sent,s=c.data.id,!a){e.next=10;break}return u=a.map(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.associateInstanceGroup(s,t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=10,Promise.all(u);case 10:m=y.location.pathname.startsWith("/inventories/smart_inventory")?"/inventories/smart_inventory/".concat(s,"/details"):"/inventories/inventory/".concat(s,"/details"),y.push("".concat(m)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),i(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return u?r.a.createElement(Nr,null):r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Wv,{onCancel:function(){y.push("/inventories")},onSubmit:g,credentialTypeId:h,submitError:a}))))},YE=["instance_groups","organization"];var XE=function(){var e=Object(c.g)(),t=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.create(t);case 2:return n=e.sent,r=n.data.id,e.next=6,Promise.all(a.map((function(e){var t=e.id;return Qe.associateInstanceGroup(r,t)})));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[])),a=t.error,i=t.request,l=t.result,s=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.instance_groups,n=t.organization,r=Object(o.a)(t,YE),e.next=3,i(Object(d.a)({organization:null===n||void 0===n?void 0:n.id},r),a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l&&e.push({pathname:"/inventories/smart_inventory/".concat(l,"/details"),search:""})}),[l,e]),r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(PE,{onCancel:function(){e.push({pathname:"/inventories",search:""})},onSubmit:s,submitError:a}))))};var ZE=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useRef)({"/inventories":t._({id:"Inventories"}),"/inventories/inventory/add":t._({id:"Create new inventory"}),"/inventories/smart_inventory/add":t._({id:"Create new smart inventory"})}),i=Object(n.useState)(a.current),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(n.useState)(),m=Object(f.a)(u,2),p=m[0],b=m[1],v=Object(n.useState)(),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Object(n.useState)(),g=Object(f.a)(y,2),O=g[0],j=g[1],k=Object(n.useCallback)((function(e,n,r){var i;if(e&&e.name!==(null===p||void 0===p?void 0:p.name)&&b(e),n&&n.name!==(null===h||void 0===h?void 0:h.name)&&E(n),r&&r.name!==(null===O||void 0===O?void 0:O.name)&&j(r),p){var l="smart"===p.kind?"smart_inventory":"inventory",o="/inventories/".concat(l,"/").concat(p.id),c="".concat(o,"/hosts"),u="".concat(o,"/groups"),m="".concat(o,"/sources");s(Object(d.a)(Object(d.a)({},a.current),{},(i={},Object(gr.a)(i,o,"".concat(p.name)),Object(gr.a)(i,"".concat(o,"/access"),t._({id:"Access"})),Object(gr.a)(i,"".concat(o,"/completed_jobs"),t._({id:"Completed jobs"})),Object(gr.a)(i,"".concat(o,"/details"),t._({id:"Details"})),Object(gr.a)(i,"".concat(o,"/edit"),t._({id:"Edit details"})),Object(gr.a)(i,c,t._({id:"Hosts"})),Object(gr.a)(i,"".concat(c,"/add"),t._({id:"Create new host"})),Object(gr.a)(i,"".concat(c,"/").concat(null===h||void 0===h?void 0:h.id),"".concat(null===h||void 0===h?void 0:h.name)),Object(gr.a)(i,"".concat(c,"/").concat(null===h||void 0===h?void 0:h.id,"/edit"),t._({id:"Edit details"})),Object(gr.a)(i,"".concat(c,"/").concat(null===h||void 0===h?void 0:h.id,"/details"),t._({id:"Host details"})),Object(gr.a)(i,"".concat(c,"/").concat(null===h||void 0===h?void 0:h.id,"/completed_jobs"),t._({id:"Completed jobs"})),Object(gr.a)(i,"".concat(c,"/").concat(null===h||void 0===h?void 0:h.id,"/facts"),t._({id:"Facts"})),Object(gr.a)(i,"".concat(c,"/").concat(null===h||void 0===h?void 0:h.id,"/groups"),t._({id:"Groups"})),Object(gr.a)(i,u,t._({id:"Groups"})),Object(gr.a)(i,"".concat(u,"/add"),t._({id:"Create new group"})),Object(gr.a)(i,"".concat(u,"/").concat(null===h||void 0===h?void 0:h.id),"".concat(null===h||void 0===h?void 0:h.name)),Object(gr.a)(i,"".concat(u,"/").concat(null===h||void 0===h?void 0:h.id,"/edit"),t._({id:"Edit details"})),Object(gr.a)(i,"".concat(u,"/").concat(null===h||void 0===h?void 0:h.id,"/details"),t._({id:"Group details"})),Object(gr.a)(i,"".concat(u,"/").concat(null===h||void 0===h?void 0:h.id,"/nested_hosts"),t._({id:"Hosts"})),Object(gr.a)(i,"".concat(u,"/").concat(null===h||void 0===h?void 0:h.id,"/nested_hosts/add"),t._({id:"Create new host"})),Object(gr.a)(i,"".concat(u,"/").concat(null===h||void 0===h?void 0:h.id,"/nested_groups"),t._({id:"Related Groups"})),Object(gr.a)(i,"".concat(u,"/").concat(null===h||void 0===h?void 0:h.id,"/nested_groups/add"),t._({id:"Create new group"})),Object(gr.a)(i,"".concat(m),t._({id:"Sources"})),Object(gr.a)(i,"".concat(m,"/add"),t._({id:"Create new source"})),Object(gr.a)(i,"".concat(m,"/").concat(null===h||void 0===h?void 0:h.id),"".concat(null===h||void 0===h?void 0:h.name)),Object(gr.a)(i,"".concat(m,"/").concat(null===h||void 0===h?void 0:h.id,"/details"),t._({id:"Details"})),Object(gr.a)(i,"".concat(m,"/").concat(null===h||void 0===h?void 0:h.id,"/edit"),t._({id:"Edit details"})),Object(gr.a)(i,"".concat(m,"/").concat(null===h||void 0===h?void 0:h.id,"/schedules"),t._({id:"Schedules"})),Object(gr.a)(i,"".concat(m,"/").concat(null===h||void 0===h?void 0:h.id,"/schedules/").concat(null===O||void 0===O?void 0:O.id),"".concat(null===O||void 0===O?void 0:O.name)),Object(gr.a)(i,"".concat(m,"/").concat(null===h||void 0===h?void 0:h.id,"/schedules/add"),t._({id:"Create New Schedule"})),Object(gr.a)(i,"".concat(m,"/").concat(null===h||void 0===h?void 0:h.id,"/schedules/").concat(null===O||void 0===O?void 0:O.id,"/details"),t._({id:"Schedule details"})),Object(gr.a)(i,"".concat(m,"/").concat(null===h||void 0===h?void 0:h.id,"/notifications"),t._({id:"Notifcations"})),i)))}}),[t,p,h,O]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"inventory",breadcrumbConfig:o}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/inventories/inventory/add"},r.a.createElement(JE,null)),r.a.createElement(c.b,{path:"/inventories/smart_inventory/add"},r.a.createElement(XE,null)),r.a.createElement(c.b,{path:"/inventories/inventory/:id"},r.a.createElement(xt,null,(function(e){var t=e.me;return r.a.createElement(RE,{setBreadcrumb:k,me:t||{}})}))),r.a.createElement(c.b,{path:"/inventories/smart_inventory/:id"},r.a.createElement(BE,{setBreadcrumb:k})),r.a.createElement(c.b,{path:"/inventories"},r.a.createElement(Mv,null))))})),$E=Object(j.b)(wl).withConfig({displayName:"JobDetail__VariablesInput",componentId:"sc-16ir9b4-0"})([".pf-c-form__label{--pf-c-form__label--FontWeight:var(--pf-global--FontWeight--bold);}"]),QE=Object(j.b)($E).withConfig({displayName:"JobDetail___StyledVariablesInput2",componentId:"sc-16ir9b4-1"})(["margin:20px 0"]),ey=Object(j.b)($E).withConfig({displayName:"JobDetail___StyledVariablesInput",componentId:"sc-16ir9b4-2"})(["margin:20px 0"]),ty=j.b.div.withConfig({displayName:"JobDetail__StatusDetailValue",componentId:"sc-16ir9b4-3"})(["align-items:center;display:inline-grid;grid-gap:10px;grid-template-columns:auto auto;"]),ay={0:"0 (Normal)",1:"1 (Verbose)",2:"2 (More Verbose)",3:"3 (Debug)",4:"4 (Connection Debug)"};var ny,ry,iy,ly=Object(u.withI18n)()((function(e){var t,a=e.job,i=e.i18n,l=a.summary_fields,o=l.created_by,u=l.credential,d=l.credentials,m=l.instance_group,v=l.inventory,_=l.job_template,h=l.workflow_job_template,E=l.labels,y=l.project,g=Object(n.useState)(),j=Object(f.a)(g,2),k=j[0],w=j[1],C=Object(c.g)(),S={project_update:i._({id:"Source Control Update"}),inventory_update:i._({id:"Inventory Sync"}),job:i._({id:"Playbook Run"}),ad_hoc_command:i._({id:"Command"}),management_job:i._({id:"Management Job"}),workflow_job:i._({id:"Workflow Job"})},x=function(e){var t,a,n=e.summary_fields,r=void 0===n?{}:n,i=e.related,l=void 0===i?{}:i,o=r.created_by,c=r.job_template,s=r.schedule,u=l.schedule;return o||s?(o?(t="/users/".concat(o.id),a=o.username):u&&c?(t="/templates/job_template/".concat(c.id,"/schedules/").concat(s.id),a=s.name):(t=null,a=s.name),{link:t,value:a}):null}(a)||{},T=x.value,I=x.link,A=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=a.type,e.next="project_update"===e.t0?4:"system_job"===e.t0?7:"workflow_job"===e.t0?10:"ad_hoc_command"===e.t0?13:"inventory_update"===e.t0?16:19;break;case 4:return e.next=6,st.destroy(a.id);case 6:return e.abrupt("break",21);case 7:return e.next=9,ft.destroy(a.id);case 9:return e.abrupt("break",21);case 10:return e.next=12,wt.destroy(a.id);case 12:return e.abrupt("break",21);case 13:return e.next=15,ze.destroy(a.id);case 15:return e.abrupt("break",21);case 16:return e.next=18,Qe.destroy(a.id);case 18:return e.abrupt("break",21);case 19:return e.next=21,nt.destroy(a.id);case 21:C.push("/jobs"),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(0),w(e.t1);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:i._({id:"\u72b6\u6001"}),value:r.a.createElement(ty,null,a.status&&r.a.createElement(hp,{status:a.status}),as(a.status))}),r.a.createElement(xi,{label:i._({id:"\u5f00\u59cb\u65f6\u95f4"}),value:ni(a.started)}),r.a.createElement(xi,{label:i._({id:"\u7ed3\u675f\u65f6\u95f4"}),value:ni(a.finished)}),_&&r.a.createElement(xi,{label:i._({id:"\u4f5c\u4e1a\u6a21\u677f"}),value:r.a.createElement(s.b,{to:"/templates/job_template/".concat(_.id)},_.name)}),h&&r.a.createElement(xi,{label:i._({id:"Workflow Job Template"}),value:r.a.createElement(s.b,{to:"/templates/workflow_job_template/".concat(h.id)},h.name)}),r.a.createElement(xi,{label:i._({id:"\u4f5c\u4e1a\u7c7b\u578b"}),value:S[a.type]}),r.a.createElement(xi,{label:i._({id:"\u53d1\u8d77\u8005"}),value:I?r.a.createElement(s.b,{to:"".concat(I)},T):T}),v&&r.a.createElement(xi,{label:i._({id:"\u6e05\u5355"}),value:r.a.createElement(s.b,{to:"smart"===v.kind?"/inventories/smart_inventory/".concat(v.id):"/inventories/inventory/".concat(v.id)},v.name)}),y&&r.a.createElement(xi,{label:i._({id:"\u9879\u76ee"}),value:r.a.createElement(ty,null,y.status&&r.a.createElement(hp,{status:y.status}),r.a.createElement(s.b,{to:"/projects/".concat(y.id)},y.name))}),r.a.createElement(xi,{label:i._({id:"Revision"}),value:a.scm_revision}),r.a.createElement(xi,{label:i._({id:"\u5267\u672c"}),value:a.playbook}),r.a.createElement(xi,{label:i._({id:"\u8303\u56f4"}),value:a.limit}),r.a.createElement(xi,{label:i._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),value:ay[a.verbosity]}),r.a.createElement(xi,{label:i._({id:"\u8fd0\u884c\u73af\u5883"}),value:a.custom_virtualenv}),r.a.createElement(xi,{label:i._({id:"\u6267\u884c\u8282\u70b9"}),value:a.execution_node}),m&&r.a.createElement(xi,{label:i._({id:"\u5b9e\u4f8b\u7ec4"}),value:(t=m,t.is_isolated?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"/instance_groups/".concat(t.id)},t.name),r.a.createElement(oy,null,r.a.createElement(Wf.a,{"aria-label":i._({id:"isolated instance"})},i._({id:"Isolated"})))):r.a.createElement(s.b,{to:"/instance_groups/".concat(t.id)},t.name))}),"number"===typeof a.job_slice_number&&"number"===typeof a.job_slice_count&&r.a.createElement(xi,{label:i._({id:"\u4f5c\u4e1a\u5206\u7247"}),value:"".concat(a.job_slice_number,"/").concat(a.job_slice_count)}),u&&r.a.createElement(xi,{label:i._({id:"Machine Credential"}),value:r.a.createElement(fc,{numChips:5,totalChips:1},r.a.createElement(du,{key:u.id,credential:u,isReadOnly:!0}))}),d&&d.length>0&&r.a.createElement(xi,{fullWidth:!0,label:i._({id:"Credentials"}),value:r.a.createElement(fc,{numChips:5,totalChips:d.length},d.map((function(e){return r.a.createElement(du,{key:e.id,credential:e,isReadOnly:!0})})))}),E&&E.count>0&&r.a.createElement(xi,{fullWidth:!0,label:i._({id:"Labels"}),value:r.a.createElement(fc,{numChips:5,totalChips:E.results.length},E.results.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),r.a.createElement(Li,{label:i._({id:"\u5df2\u521b\u5efa"}),date:a.created,user:o}),r.a.createElement(Li,{label:i._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:a.modified})),a.extra_vars&&r.a.createElement(ey,{id:"job-variables",readOnly:!0,value:a.extra_vars,rows:4,label:i._({id:"\u53d8\u91cf"})}),a.artifacts&&r.a.createElement(QE,{id:"job-artifacts",readOnly:!0,value:JSON.stringify(a.artifacts),rows:4,label:i._({id:"\u6784\u4ef6"})}),r.a.createElement(Yc,null,"system_job"!==a.type&&a.summary_fields.user_capabilities.start&&r.a.createElement(Mp,{resource:a,"aria-label":i._({id:"\u91cd\u8fd0\u884c"})},(function(e){var t=e.handleRelaunch;return r.a.createElement(O.a,{type:"submit",onClick:t},i._({id:"\u91cd\u8fd0\u884c"}))})),a.summary_fields.user_capabilities.delete&&r.a.createElement(Qc,{name:a.name,modalTitle:i._({id:"Delete Job"}),onConfirm:A},i._({id:"\u5220\u9664"}))),k&&r.a.createElement(Zt,{isOpen:k,variant:"error",onClose:function(){return w()},title:i._({id:"Job Delete Error"})},r.a.createElement(ua,{error:k})))})),oy=Object(j.b)("span").withConfig({displayName:"JobDetail___StyledSpan",componentId:"sc-16ir9b4-4"})(["margin-left:12px"]),cy=a(215),sy=a(505),uy=a.n(sy),dy=a(506),my=a.n(dy),py=a(293),by=j.b.div(ny||(ny=Object(v.a)(["\n  background-color: #d7d7d7;\n  display: flex;\n  height: 5px;\n  margin: 24px 0;\n  width: 100%;\n"]))),fy=j.b.div(ry||(ry=Object(v.a)(["\n  background-color: ",";\n  flex-grow: ",";\n"])),(function(e){return e.color||"inherit"}),(function(e){return e.count||0}));fy.displayName="BarSegment";var vy,_y,hy,Ey=j.b.div(iy||(iy=Object(v.a)(["\n  align-items: center;\n  display: flex;\n\n  span.pf-c-badge {\n    margin-left: 10px;\n  }\n"]))),yy=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.counts,n=void 0===a?{}:a,i=0===Object.keys(n).length,l={ok:{color:"#4CB140",label:t._({id:"OK"})},skipped:{color:"#73BCF7",label:t._({id:"Skipped"})},changed:{color:"#F0AB00",label:t._({id:"Changed"})},failures:{color:"#C9190B",label:t._({id:"Failed"})},dark:{color:"#8F4700",label:t._({id:"Unreachable"})}},o=Object.keys(l).map((function(e){var t=n[e]||0;return r.a.createElement(Ea.a,{key:e,content:r.a.createElement(Ey,null,l[e].label,r.a.createElement(Pi.a,{isRead:!0},t))},r.a.createElement(fy,{key:e,color:l[e].color,count:t}))}));return i?r.a.createElement(by,null,r.a.createElement(Ea.a,{content:t._({id:"Host status information for this job is unavailable."})},r.a.createElement(fy,{count:1}))):r.a.createElement(by,null,o)})),gy=j.b.div(vy||(vy=Object(v.a)(["\n  display: flex;\n\n  &:hover {\n    background-color: white;\n    cursor: ",";\n  }\n\n  &:hover div {\n    background-color: white;\n  }\n\n  &--hidden {\n    display: none;\n  }\n  ","\n"])),(function(e){return e.isClickable?"pointer":"default"}),(function(e){return e.isFirst?"padding-top: 10px;":""})),Oy=j.b.div(_y||(_y=Object(v.a)(["\n  background-color: #ebebeb;\n  color: #646972;\n  display: flex;\n  flex: 0 0 30px;\n  font-size: 18px;\n  justify-content: center;\n  line-height: 12px;\n\n  & > i {\n    cursor: pointer;\n  }\n\n  user-select: none;\n"]))),jy=j.b.div(hy||(hy=Object(v.a)(["\n  color: #161b1f;\n  background-color: #ebebeb;\n  flex: 0 0 45px;\n  text-align: right;\n  vertical-align: top;\n  padding-right: 5px;\n  border-right: 1px solid #d7d7d7;\n  user-select: none;\n"])));jy.displayName="JobEventLineNumber";var ky,wy=jy,Cy=j.b.div(ky||(ky=Object(v.a)(["\n  padding: 0 15px;\n  white-space: pre-wrap;\n  word-break: break-all;\n  word-wrap: break-word;\n\n  .time {\n    font-size: 14px;\n    font-weight: 600;\n    user-select: none;\n    background-color: #ebebeb;\n    border-radius: 12px;\n    padding: 2px 10px;\n    margin-left: 15px;\n  }\n\n  .content {\n    background: var(--pf-global--disabled-color--200);\n    background: linear-gradient(\n      to right,\n      #f5f5f5 10%,\n      #e8e8e8 18%,\n      #f5f5f5 33%\n    );\n    border-radius: 5px;\n  }\n"])));Cy.displayName="JobEventLineText";var Sy,xy,Ty,Iy=Cy,Ay=a(1065),Ry=a(1066),Ny=j.b.div(Sy||(Sy=Object(v.a)(["\n  margin-left: 20px;\n  height: 18px;\n  display: inline-flex;\n"]))),Dy=Object(j.b)(Pi.a)(xy||(xy=Object(v.a)(["\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  margin-left: 10px;\n  ","\n"])),(function(e){return e.color?"\n  background-color: ".concat(e.color,"\n  color: white;\n  "):null})),Ly=j.b.div(Ty||(Ty=Object(v.a)(["\n  align-items: center;\n  display: flex;\n  flex-flow: row wrap;\n  font-size: 14px;\n"]))),Py=["ad_hoc_command","system_job","inventory_update"],Uy=Object(u.withI18n)()((function(e){var t,a,n,i,l,o,c=e.i18n,s=e.job,u=e.onDelete,d=Py.includes(s.type),m=null===s||void 0===s||null===(t=s.playbook_counts)||void 0===t?void 0:t.play_count,p=null===s||void 0===s||null===(a=s.playbook_counts)||void 0===a?void 0:a.task_count,b=null===s||void 0===s||null===(n=s.host_status_counts)||void 0===n?void 0:n.dark,f=null===s||void 0===s||null===(i=s.host_status_counts)||void 0===i?void 0:i.failures,v=Object.keys((null===s||void 0===s?void 0:s.host_status_counts)||{}).reduce((function(e,t){return e+(null===s||void 0===s?void 0:s.host_status_counts[t])}),0);return r.a.createElement(Ly,null,!d&&r.a.createElement(r.a.Fragment,null,m>0&&r.a.createElement(Ny,{"aria-label":c._({id:"Play Count"})},r.a.createElement("div",null,c._({id:"Plays"})),r.a.createElement(Dy,{isRead:!0},m)),p>0&&r.a.createElement(Ny,{"aria-label":c._({id:"Task Count"})},r.a.createElement("div",null,c._({id:"Tasks"})),r.a.createElement(Dy,{isRead:!0},p)),v>0&&r.a.createElement(Ny,{"aria-label":c._({id:"Host Count"})},r.a.createElement("div",null,c._({id:"Hosts"})),r.a.createElement(Dy,{isRead:!0},v)),b>0&&r.a.createElement(Ny,{"aria-label":c._({id:"Unreachable Host Count"})},r.a.createElement("div",null,c._({id:"Unreachable"})),r.a.createElement(Ea.a,{content:c._({id:"Unreachable Hosts"})},r.a.createElement(Dy,{color:"#470000",isRead:!0},b))),f>0&&r.a.createElement(Ny,{"aria-label":c._({id:"Failed Host Count"})},r.a.createElement("div",null,c._({id:"Failed"})),r.a.createElement(Ea.a,{content:c._({id:"Failed Hosts"})},r.a.createElement(Dy,{color:"#C9190B",isRead:!0},f)))),r.a.createElement(Ny,{"aria-label":c._({id:"Elapsed Time"})},r.a.createElement("div",null,c._({id:"Elapsed"})),r.a.createElement(Ea.a,{content:c._({id:"Elapsed time that the job ran"})},r.a.createElement(Dy,{isRead:!0},function(e){var t=parseInt(e,10),a=Math.floor(t/3600),n=Math.floor(t/60)%60,r=t%60,i=a<10?"0".concat(a):a,l=n<10?"0".concat(n):n,o=r<10?"0".concat(r):r;return"".concat(i,":").concat(l,":").concat(o)}(s.elapsed)))),"system_job"!==s.type&&(null===(l=s.summary_fields.user_capabilities)||void 0===l?void 0:l.start)&&r.a.createElement(Ea.a,{content:c._({id:"Relaunch Job"})},r.a.createElement(Mp,{resource:s,"aria-label":c._({id:"\u91cd\u8fd0\u884c"})},(function(e){var t=e.handleRelaunch;return r.a.createElement(O.a,{variant:"plain",onClick:t,"aria-label":c._({id:"\u91cd\u8fd0\u884c"})},r.a.createElement(Fd.a,null))}))),(null===(o=s.related)||void 0===o?void 0:o.stdout)&&r.a.createElement(Ea.a,{content:c._({id:"Download Output"})},r.a.createElement("a",{href:"".concat(s.related.stdout,"?format=txt_download")},r.a.createElement(O.a,{variant:"plain","aria-label":c._({id:"Download Output"})},r.a.createElement(Ay.a,null)))),s.summary_fields.user_capabilities.delete&&r.a.createElement(Ea.a,{content:c._({id:"Delete Job"})},r.a.createElement(Qc,{name:s.name,modalTitle:c._({id:"Delete Job"}),onConfirm:u,variant:"plain"},r.a.createElement(Ry.a,null))))}));var Gy=function(e){var t=e.counter,a=e.stdout,n=e.style,i=e.type,l=e.lineTextHtml,o=e.isClickable,c=e.onJobEventClick;return a?r.a.createElement("div",{style:n,type:i},l.map((function(e){var a=e.lineNumber,n=e.html;return a>=0&&r.a.createElement(gy,{onClick:o?c:void 0,key:"".concat(t,"-").concat(a),isFirst:0===a,isClickable:o},r.a.createElement(Oy,null),r.a.createElement(wy,null,a),r.a.createElement(Iy,{type:"job_event_line_text",dangerouslySetInnerHTML:{__html:n}}))}))):null};function qy(e){var t=e.contentLength;return r.a.createElement(Iy,null,r.a.createElement("span",{className:"content"}," ".repeat(t)))}var Fy,zy=function(e){var t=e.counter,a=e.contentLength,n=e.style;return t>1&&r.a.createElement("div",{style:n},r.a.createElement(gy,{key:t},r.a.createElement(Oy,null),r.a.createElement(wy,null),r.a.createElement(qy,{contentLength:a})))},My=a(1067),Ky=a(1068),Vy=a(1069),Hy=a(1070),By=a(1071),Wy=j.b.div.withConfig({displayName:"PageControls__Wrapper",componentId:"sc-1v626x-0"})(["display:flex;height:35px;outline:1px solid #d7d7d7;width:100%;"]),Jy=Object(j.b)(O.a).withConfig({displayName:"PageControls__Button",componentId:"sc-1v626x-1"})(["position:relative;z-index:1;"]),Yy=Object(j.b)(Jy).withConfig({displayName:"PageControls___StyledButton",componentId:"sc-1v626x-2"})(["margin-right:auto"]),Xy=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.onScrollFirst,n=e.onScrollLast,i=e.onScrollNext,l=e.onScrollPrevious;return r.a.createElement(Wy,null,r.a.createElement(Yy,{"aria-label":t._({id:"Toggle expand/collapse event lines"}),variant:"plain"},r.a.createElement(My.a,null)),r.a.createElement(Jy,{"aria-label":t._({id:"Scroll previous"}),onClick:l,variant:"plain"},r.a.createElement(Ky.a,null)),r.a.createElement(Jy,{"aria-label":t._({id:"Scroll next"}),onClick:i,variant:"plain"},r.a.createElement(Vy.a,null)),r.a.createElement(Jy,{"aria-label":t._({id:"Scroll first"}),onClick:a,variant:"plain"},r.a.createElement(Hy.a,null)),r.a.createElement(Jy,{"aria-label":t._({id:"Scroll last"}),onClick:n,variant:"plain"},r.a.createElement(By.a,null)))})),Zy=new py.AllHtmlEntities,$y=j.b.div(Fy||(Fy=Object(v.a)(["\n  align-items: center;\n  display: inline-grid;\n  grid-gap: 10px;\n  grid-template-columns: auto auto;\n"]))),Qy=function(e){return void 0!==e&&(""===e?" ":"string"===typeof e?Zy.encode(e):e)};function eg(e){var t,a,i,l,o,c=e.onClose,s=e.hostEvent,u=void 0===s?{}:s,d=e.isOpen,m=void 0!==d&&d,p=e.i18n,b=Object(n.useState)(null),v=Object(f.a)(b,2),_=v[0],h=v[1],E=Object(n.useState)(0),y=Object(f.a)(E,2),g=y[0],O=y[1];Object(n.useEffect)((function(){h(function(e){var t=null;return"runner_on_unreachable"===e.event&&(t="unreachable"),e.failed&&(t="failed"),"runner_on_ok"!==e.event&&"runner_on_async_ok"!==e.event&&"runner_item_on_ok"!==e.event||(t="ok"),e.changed&&(t="changed"),"runner_on_skipped"===e.event&&(t="skipped"),t}(u))}),[h,u]);var j=Qy(null===u||void 0===u||null===(t=u.event_data)||void 0===t?void 0:t.res),k=Qy(null===u||void 0===u||null===(a=u.event_data)||void 0===a||null===(i=a.res)||void 0===i?void 0:i.stderr),w=Qy(function(e){var t,a,n,r=null===e||void 0===e||null===(t=e.event_data)||void 0===t?void 0:t.taskAction,i=null===e||void 0===e||null===(a=e.event_data)||void 0===a?void 0:a.res;if("debug"===r&&i.result&&i.result.stdout)n=i.result.stdout;else if("yum"===r&&i.results&&Array.isArray(i.results)){n=Object(f.a)(i.results,1)[0]}else i&&(n=i.stdout);return n}(u));return r.a.createElement(Ft.a,{isOpen:m,onClose:c,title:p._({id:"Host Details"}),"aria-label":p._({id:"Host details modal"}),width:"75%"},r.a.createElement(os.a,{"aria-label":p._({id:"Tabs"}),activeKey:g,onSelect:function(e,t){O(t)}},r.a.createElement(cs.a,{"aria-label":p._({id:"Details tab"}),eventKey:0,title:r.a.createElement(ss.a,null,p._({id:"Details"}))},r.a.createElement(pi,{style:{alignItems:"center",marginTop:"20px"},gutter:"sm"},r.a.createElement(xi,{label:p._({id:"Host Name"}),value:r.a.createElement($y,null,_?r.a.createElement(hp,{status:_}):null,u.host_name)}),r.a.createElement(xi,{label:p._({id:"Play"}),value:u.play}),r.a.createElement(xi,{label:p._({id:"Task"}),value:u.task}),r.a.createElement(xi,{label:p._({id:"Module"}),value:u.event_data.task_action||p._({id:"No result found"})}),r.a.createElement(xi,{label:p._({id:"Command"}),value:null===u||void 0===u||null===(l=u.event_data)||void 0===l||null===(o=l.res)||void 0===o?void 0:o.cmd}))),r.a.createElement(cs.a,{eventKey:1,title:r.a.createElement(ss.a,null,p._({id:"JSON"})),"aria-label":p._({id:"JSON tab"})},1===g&&j?r.a.createElement(io,{mode:"javascript",readOnly:!0,value:JSON.stringify(j,null,2),onChange:function(){},rows:20,hasErrors:!1}):r.a.createElement(Ir,{title:p._({id:"No JSON Available"})})),r.a.createElement(cs.a,{eventKey:2,title:r.a.createElement(ss.a,null,p._({id:"Standard Out"})),"aria-label":p._({id:"Standard out tab"})},2===g&&w?r.a.createElement(io,{mode:"javascript",readOnly:!0,value:w,onChange:function(){},rows:20,hasErrors:!1}):r.a.createElement(Ir,{title:p._({id:"No Standard Out Available"})})),r.a.createElement(cs.a,{eventKey:3,title:r.a.createElement(ss.a,null,p._({id:"Standard Error"})),"aria-label":p._({id:"Standard error tab"})},3===g&&k?r.a.createElement(io,{mode:"javascript",readOnly:!0,onChange:function(){},value:k,hasErrors:!1,rows:20}):r.a.createElement(Ir,{title:p._({id:"No Standard Error Available"})}))))}var tg,ag,ng,rg,ig=Object(u.withI18n)()(eg);eg.defaultProps={hostEvent:null,isOpen:!1};var lg=["playbook_on_task_start","playbook_on_play_start","playbook_on_stats"],og=new uy.a({stream:!0,colors:{0:"#000",1:"#A30000",2:"#486B00",3:"#795600",4:"#00A",5:"#A0A",6:"#004368",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"}}),cg=new py.AllHtmlEntities;var sg=new RegExp('style="[^"]*"',"g");function ug(e){for(var t=0,a=0;a<e.length;a++)t=(t<<5)-t,t+=e.charCodeAt(a),t&=t;return"".concat(t)}function dg(e){var t=e.created,a=e.event,n=e.start_line,r=e.stdout,i=cg.encode(r),l={},o=[];return i.split("\r\n").forEach((function(e,r){var i;if(my()(e)){var c=function(e){for(var t=Object(A.a)(new Set(e.match(sg))),a={},n=e,r=0;r<t.length;r++){var i=t[r],l="output-".concat(ug(i));a[l]=i.replace('style="',"").slice(0,-1),n=n.split(i).join('class="'.concat(l,'"'))}return{cssMap:a,result:n}}(og.toHtml(e)),s=c.cssMap;i=c.result,l=Object(d.a)(Object(d.a)({},l),s)}else i=e;if(1===r&&lg.includes(a)){var u=function(e){var t=e.created,a=new Date(t),n=a.getHours(),r=a.getMinutes(),i=a.getSeconds(),l=n<10?"0".concat(n):n,o=r<10?"0".concat(r):r,c=i<10?"0".concat(i):i;return"".concat(l,":").concat(o,":").concat(c)}({created:t});i+='<span class="time">'.concat(u,"</span>")}o.push({lineNumber:n+r,html:i})})),{lineCssMap:l,lineTextHtml:o}}var mg,pg=j.b.div(tg||(tg=Object(v.a)(["\n  display: inline-flex;\n  align-items: center;\n  h1 {\n    margin-left: 10px;\n    font-weight: var(--pf-global--FontWeight--bold);\n  }\n"]))),bg=j.b.div(ag||(ag=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),fg=j.b.div(ng||(ng=Object(v.a)(["\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  font-family: monospace;\n  font-size: 15px;\n  height: calc(100vh - 350px);\n  outline: 1px solid #d7d7d7;\n  ","\n"])),(function(e){var t=e.cssMap;return Object.keys(t).map((function(e){return".".concat(e,"{").concat(t[e],"}")}))})),vg=j.b.div(rg||(rg=Object(v.a)(["\n  background-color: #ebebeb;\n  border-right: 1px solid #d7d7d7;\n  width: 75px;\n  flex: 1;\n"])));function _g(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a}var hg=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).listRef=r.a.createRef(),n.state={contentError:null,deletionError:null,hasContentLoading:!0,results:{},currentlyLoading:[],remoteRowCount:0,isHostModalOpen:!1,hostEvent:{},cssMap:{}},n.cache=new cy.c({fixedWidth:!0,defaultHeight:25}),n._isMounted=!1,n.loadJobEvents=n.loadJobEvents.bind(Object(Z.a)(n)),n.handleDeleteJob=n.handleDeleteJob.bind(Object(Z.a)(n)),n.rowRenderer=n.rowRenderer.bind(Object(Z.a)(n)),n.handleHostEventClick=n.handleHostEventClick.bind(Object(Z.a)(n)),n.handleHostModalClose=n.handleHostModalClose.bind(Object(Z.a)(n)),n.handleScrollFirst=n.handleScrollFirst.bind(Object(Z.a)(n)),n.handleScrollLast=n.handleScrollLast.bind(Object(Z.a)(n)),n.handleScrollNext=n.handleScrollNext.bind(Object(Z.a)(n)),n.handleScrollPrevious=n.handleScrollPrevious.bind(Object(Z.a)(n)),n.handleResize=n.handleResize.bind(Object(Z.a)(n)),n.isRowLoaded=n.isRowLoaded.bind(Object(Z.a)(n)),n.loadMoreRows=n.loadMoreRows.bind(Object(Z.a)(n)),n.scrollToRow=n.scrollToRow.bind(Object(Z.a)(n)),n.monitorJobSocketCounter=n.monitorJobSocketCounter.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.job;this._isMounted=!0,this.loadJobEvents(),function e(t,a){var n=t.type,r=t.id;(mg=new WebSocket("".concat("http:"===window.location.protocol?"ws:":"wss:","//").concat(window.location.host,"/websocket/"))).onopen=function(){var e="; ".concat(document.cookie).split("; csrftoken=").pop().split(";").shift(),t="".concat(n,"_events");mg.send(JSON.stringify({xrftoken:e,groups:Object(gr.a)({jobs:["summary","status_changed"]},t,[r])}))},mg.onmessage=function(e){a(JSON.parse(e.data))},mg.onclose=function(t){console.debug("Socket closed. Reconnecting...",t),setTimeout((function(){e({type:n,id:r},a)}),1e3)},mg.onerror=function(e){console.debug("Socket error: ",e,"Disconnecting..."),mg.close()}}(t,(function(a){a.counter&&a.counter>e.jobSocketCounter?e.jobSocketCounter=a.counter:a.final_counter&&a.unified_job_id===t.id&&(e.jobSocketCounter=a.final_counter)})),this.interval=setInterval((function(){return e.monitorJobSocketCounter()}),5e3)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state,r=n.currentlyLoading,i=n.cssMap,l=!1;t.currentlyLoading.filter((function(e){return!r.includes(e)})).forEach((function(e){l=!0,a.cache.clear(e)})),Object.keys(i).length!==Object.keys(t.cssMap).length&&(l=!0),l&&this.listRef.recomputeRowHeights&&this.listRef.recomputeRowHeights()}},{key:"componentWillUnmount",value:function(){mg&&mg.close(),clearInterval(this.interval),this._isMounted=!1}},{key:"monitorJobSocketCounter",value:function(){var e=this.state.remoteRowCount;this.jobSocketCounter>=e&&this._isMounted&&this.setState({remoteRowCount:this.jobSocketCounter+1})}},{key:"loadJobEvents",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.job,n=t.type,r=_g(1,50),this._isMounted&&this.setState((function(e){return{hasContentLoading:!0,currentlyLoading:e.currentlyLoading.concat(r)}})),e.prev=3,e.next=6,nt.readEvents(a.id,n,{page_size:50,order_by:"start_line"});case 6:i=e.sent,l=i.data,o=l.results,c=void 0===o?[]:o,s=l.count,this._isMounted&&this.setState((function(e){var t=e.results;return c.forEach((function(e){t[e.counter]=e})),{results:t,remoteRowCount:s+1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),this.setState({contentError:e.t0});case 17:return e.prev=17,this._isMounted&&this.setState((function(e){return{hasContentLoading:!1,currentlyLoading:e.currentlyLoading.filter((function(e){return!r.includes(e)}))}})),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[3,14,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleDeleteJob",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,a=t.job,n=t.history,e.prev=1,e.t0=a.type,e.next="project_update"===e.t0?5:"system_job"===e.t0?8:"workflow_job"===e.t0?11:"ad_hoc_command"===e.t0?14:"inventory_update"===e.t0?17:20;break;case 5:return e.next=7,st.destroy(a.id);case 7:return e.abrupt("break",22);case 8:return e.next=10,ft.destroy(a.id);case 10:return e.abrupt("break",22);case 11:return e.next=13,wt.destroy(a.id);case 13:return e.abrupt("break",22);case 14:return e.next=16,ze.destroy(a.id);case 16:return e.abrupt("break",22);case 17:return e.next=19,Qe.destroy(a.id);case 19:return e.abrupt("break",22);case 20:return e.next=22,nt.destroy(a.id);case 22:n.push("/jobs"),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(1),this.setState({deletionError:e.t1});case 28:case"end":return e.stop()}}),e,this,[[1,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"isRowLoaded",value:function(e){var t=e.index,a=this.state,n=a.results,r=a.currentlyLoading;return!!n[t]||r.includes(t)}},{key:"handleHostEventClick",value:function(e){this.setState({isHostModalOpen:!0,hostEvent:e})}},{key:"handleHostModalClose",value:function(){this.setState({isHostModalOpen:!1})}},{key:"rowRenderer",value:function(e){var t=this,a=e.index,n=e.parent,i=e.key,l=e.style,o=this.state.results,c=[];if(o[a]){var s=dg(o[a]),u=s.lineTextHtml,m=s.lineCssMap;this.setState((function(e){var t=e.cssMap;return{cssMap:Object(d.a)(Object(d.a)({},t),m)}})),c=u}return r.a.createElement(cy.b,{key:i,cache:this.cache,parent:n,rowIndex:a,columnIndex:0},o[a]?r.a.createElement(Gy,Object.assign({isClickable:function(e){var t=e.event,a=e.event_data,n=e.host,r=e.type;return!!("number"===typeof n||a&&a.res)||!("project_update_event"!==r||"runner_on_skipped"===t||!a.host)}(o[a]),onJobEventClick:function(){return t.handleHostEventClick(o[a])},className:"row",style:l,lineTextHtml:c},o[a])):r.a.createElement(zy,{className:"row",style:l,counter:a,contentLength:80}))}},{key:"loadMoreRows",value:function(e){var t=this,a=e.startIndex,n=e.stopIndex;if(0===a&&0===n)return Promise.resolve(null);var r=this.props,i=r.job,l=r.type,o=_g(a,n);this._isMounted&&this.setState((function(e){return{currentlyLoading:e.currentlyLoading.concat(o)}}));var c={counter__gte:a,counter__lte:n,order_by:"start_line"};return nt.readEvents(i.id,l,c).then((function(e){t._isMounted&&t.setState((function(t){var a=t.results,n=t.currentlyLoading;return e.data.results.forEach((function(e){a[e.counter]=e})),{results:a,currentlyLoading:n.filter((function(e){return!o.includes(e)}))}}))}))}},{key:"scrollToRow",value:function(e){this.listRef.scrollToRow(e)}},{key:"handleScrollPrevious",value:function(){var e=this.listRef.Grid._renderedRowStartIndex,t=this.listRef.Grid._renderedRowStopIndex-e+1;this.scrollToRow(Math.max(0,e-t))}},{key:"handleScrollNext",value:function(){var e=this.listRef.Grid._renderedRowStopIndex;this.scrollToRow(e-1)}},{key:"handleScrollFirst",value:function(){this.scrollToRow(0)}},{key:"handleScrollLast",value:function(){var e=this.state.remoteRowCount;this.scrollToRow(e-1)}},{key:"handleResize",value:function(e){var t,a=e.width;a!==this._previousWidth&&(this.cache.clearAll(),(null===(t=this.listRef)||void 0===t?void 0:t.recomputeRowHeights)&&this.listRef.recomputeRowHeights());this._previousWidth=a}},{key:"render",value:function(){var e=this,t=this.props.job,a=this.state,i=a.contentError,l=a.deletionError,o=a.hasContentLoading,c=a.hostEvent,s=a.isHostModalOpen,d=a.remoteRowCount,m=a.cssMap;return o?r.a.createElement(Nr,null):i?r.a.createElement(za,{error:i}):r.a.createElement(n.Fragment,null,r.a.createElement(Bc,null,s&&r.a.createElement(ig,{onClose:this.handleHostModalClose,isOpen:s,hostEvent:c}),r.a.createElement(bg,null,r.a.createElement(pg,null,r.a.createElement(hp,{status:t.status}),r.a.createElement("h1",null,t.name)),r.a.createElement(Uy,{job:t,onDelete:this.handleDeleteJob})),r.a.createElement(yy,{counts:t.host_status_counts}),r.a.createElement(Xy,{onScrollFirst:this.handleScrollFirst,onScrollLast:this.handleScrollLast,onScrollNext:this.handleScrollNext,onScrollPrevious:this.handleScrollPrevious}),r.a.createElement(fg,{cssMap:m},r.a.createElement(cy.d,{isRowLoaded:this.isRowLoaded,loadMoreRows:this.loadMoreRows,rowCount:d},(function(t){var a=t.onRowsRendered,n=t.registerChild;return r.a.createElement(cy.a,{nonce:window.NONCE_ID,onResize:e.handleResize},(function(t){var i=t.width,l=t.height;return r.a.createElement(cy.e,{ref:function(t){e.listRef=t,n(t)},deferredMeasurementCache:e.cache,height:l||1,onRowsRendered:a,rowCount:d,rowHeight:e.cache.rowHeight,rowRenderer:e.rowRenderer,scrollToAlignment:"start",width:i||1,overscanRowCount:20})}))})),r.a.createElement(vg,null))),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(u.I18n,null,(function(t){var a=t.i18n;return r.a.createElement(Zt,{isOpen:l,variant:"danger",onClose:function(){return e.setState({deletionError:null})},title:a._({id:"Job Delete Error"}),label:a._({id:"Job Delete Error"})},r.a.createElement(ua,{error:l}))}))))}}]),a}(n.Component),Eg=Object(c.k)(hg),yg=r.a.createContext(null),gg=r.a.createContext(null),Og=a(355),jg=function(e,t){return t-e[1].y},kg=180,wg=60,Cg=72,Sg=40;function xg(e,t,a,n){e.height/=n,e.width/=n,e.width+=Cg;var r,i,l=t.height/e.height,o=t.width/e.width,c=Math.min(l,o);return c<.1||c>2?(r=c<.1?.1:2,i=t.height/2-wg*r/2):(r=Math.floor(1e3*c)/1e3,i=(t.height-e.height*r)/2-a.y/n*r),[r,i]}function Tg(e){return ab.h().x((function(e){return e.x})).y((function(e){return e.y}))(e)}function Ig(e,t){var a=t[e.source.id].x+t[e.source.id].width+1,n=jg(t,t[e.source.id].y)+t[e.source.id].height/2,r=t[e.target.id].x-1,i=jg(t,t[e.target.id].y)+t[e.target.id].height/2;return 1===e.source.id&&(n+=10),[{x:a,y:n},{x:r,y:i}]}function Ag(e,t){var a=t[e.source.id].x+t[e.source.id].width+1,n=jg(t,t[e.source.id].y)+t[e.source.id].height/2,r=t[e.target.id].x-1,i=jg(t,t[e.target.id].y)+t[e.target.id].height/2;1===e.source.id&&(n+=10);var l=(i-n)/(r-a),o=i-l*r;return[[r,l*r+o+8*Math.sqrt(1+l*l)].join(","),[a,l*a+o+8*Math.sqrt(1+l*l)].join(","),[a,l*a+o-8*Math.sqrt(1+l*l)].join(","),[r,l*r+o-8*Math.sqrt(1+l*l)].join(",")].join(" ")}function Rg(e,t){var a=new Og.graphlib.Graph;return a.setGraph({rankdir:"LR",nodesep:30,ranksep:120}),a.setDefaultEdgeLabel((function(){return{}})),e.forEach((function(e){1===e.id?a.setNode(e.id,{label:"",width:Cg,height:Sg}):a.setNode(e.id,{label:"",width:kg,height:wg})})),t.forEach((function(e){a.setEdge(e.source.id,e.target.id)})),Og.layout(a),a}function Ng(e,t,a){var n=t.k,r=(t.x+(e.width*n-e.width)/2)/n,i=(t.y+(e.height*n-e.height)/2)/n;return[r*a-(a*e.width-e.width)/2,i*a-(a*e.height-e.height)/2]}function Dg(){return{addLinkSourceNode:null,addLinkTargetNode:null,addNodeSource:null,addNodeTarget:null,addingLink:!1,contentError:null,isLoading:!0,linkToDelete:null,linkToEdit:null,links:[],nextNodeId:0,nodePositions:null,nodes:[],nodeToDelete:null,nodeToEdit:null,nodeToView:null,showDeleteAllNodesModal:!1,showLegend:!1,showTools:!1,showUnsavedChangesModal:!1,unsavedChanges:!1}}function Lg(e,t){switch(t.type){case"CREATE_LINK":return function(e,t){var a=e.addLinkSourceNode,n=e.addLinkTargetNode,r=e.links,i=e.nodes,l=Object(A.a)(r),o=Object(A.a)(i);return o.forEach((function(e){e.isInvalidLinkTarget=!1})),l.push({source:{id:a.id},target:{id:n.id},linkType:t}),l.forEach((function(e,t){1===e.source.id&&e.target.id===n.id&&l.splice(t,1)})),Object(d.a)(Object(d.a)({},e),{},{addLinkSourceNode:null,addLinkTargetNode:null,addingLink:!1,linkToEdit:null,links:l,nodes:o,unsavedChanges:!0})}(e,t.linkType);case"CREATE_NODE":return function(e,t){var a=e.addNodeSource,n=e.addNodeTarget,r=e.links,i=e.nodes,l=e.nextNodeId,o=Object(A.a)(i),c=Object(A.a)(r);o.push({id:l,fullUnifiedJobTemplate:t.nodeResource,isInvalidLinkTarget:!1,promptValues:t.promptValues}),1===a&&(t.linkType="always");c.push({source:{id:a},target:{id:l},linkType:t.linkType}),n&&c.forEach((function(e){e.source.id===a&&e.target.id===n&&(e.source={id:l})}));return Object(d.a)(Object(d.a)({},e),{},{addNodeSource:null,addNodeTarget:null,links:c,nextNodeId:l+1,nodes:o,unsavedChanges:!0})}(e,t.node);case"CANCEL_LINK":case"CANCEL_LINK_MODAL":return function(e){var t=e.nodes,a=Object(A.a)(t);return a.forEach((function(e){e.isInvalidLinkTarget=!1})),Object(d.a)(Object(d.a)({},e),{},{addLinkSourceNode:null,addLinkTargetNode:null,addingLink:!1,linkToEdit:null,nodes:a})}(e);case"CANCEL_NODE_MODAL":return Object(d.a)(Object(d.a)({},e),{},{addNodeSource:null,addNodeTarget:null,nodeToEdit:null});case"DELETE_ALL_NODES":return function(e){var t=e.nodes;return Object(d.a)(Object(d.a)({},e),{},{addLinkSourceNode:null,addLinkTargetNode:null,addingLink:!1,links:[],nodes:t.map((function(e){return 1!==e.id&&(e.isDeleted=!0),e})),showDeleteAllNodesModal:!1,unsavedChanges:!0})}(e);case"DELETE_LINK":return function(e){for(var t=e.links,a=e.linkToDelete,n=Object(A.a)(t),r=n.length;r--;){var i=n[r];i.source.id===a.source.id&&i.target.id===a.target.id&&n.splice(r,1)}a.isConvergenceLink||n.push({source:{id:1},target:{id:a.target.id},linkType:"always"});return Object(d.a)(Object(d.a)({},e),{},{links:n,linkToDelete:null,unsavedChanges:!0})}(e);case"DELETE_NODE":return function(e){var t=e.links,a=e.nodes,n=e.nodeToDelete,r=n.id,i=Object(A.a)(a),l=Object(A.a)(t);i.find((function(e){return e.id===n.id})).isDeleted=!0;var o=[],c=[],s={};return function(e,t,a,n,r){for(var i=t.length;i--;){var l=t[i];a[l.target.id]||(a[l.target.id]=[]),a[l.target.id].push(l.source.id),l.source.id!==e&&l.target.id!==e||(l.source.id===e?n.push({id:l.target.id,linkType:l.linkType}):l.target.id===e&&r.push(l.source.id),t.splice(i,1))}}(r,l,s,c,o),function(e,t,a,n){e.forEach((function(e){t.forEach((function(t){1===e?1===n[t.id].length&&a.push({source:{id:e},target:{id:t.id},linkType:"always"}):n[t.id].includes(e)||a.push({source:{id:e},target:{id:t.id},linkType:t.linkType})}))}))}(o,c,l,s),Object(d.a)(Object(d.a)({},e),{},{links:l,nodeToDelete:null,nodes:i,unsavedChanges:!0})}(e);case"GENERATE_NODES_AND_LINKS":return function(e,t,a){var n=function(e,t){var a=[],n={},r={},i=2,l=[{id:1,fullUnifiedJobTemplate:{name:t._({id:"START"})}}];return e.forEach((function(e){var t,o;e.workflowMakerNodeId=i;var c={id:i,originalNodeObject:e};"workflow_approval"===(null===(t=e.summary_fields)||void 0===t||null===(o=t.unified_job_template)||void 0===o?void 0:o.unified_job_type)&&(c.fullUnifiedJobTemplate=Object(d.a)(Object(d.a)({},e.summary_fields.unified_job_template),{},{type:"workflow_approval_template"})),l.push(c),a.push(e.id),r[e.id]=e.workflowMakerNodeId,n[i]=i-1,i++})),[l,a,r,n,i]}(t,a),r=Object(f.a)(n,5),i=r[0],l=r[1],o=r[2],c=r[3],s=r[4],u=function(e,t,a,n){var r=[],i=[];return e.forEach((function(e){var l=t[e.workflowMakerNodeId];e.success_nodes.forEach((function(e){var o=t[a[e]];r.push({source:n[l],target:n[o],linkType:"success"}),i.push(e)})),e.failure_nodes.forEach((function(e){var o=t[a[e]];r.push({source:n[l],target:n[o],linkType:"failure"}),i.push(e)})),e.always_nodes.forEach((function(e){var o=t[a[e]];r.push({source:n[l],target:n[o],linkType:"always"}),i.push(e)}))})),[r,i]}(t,c,o,i),m=Object(f.a)(u,2),p=m[0],b=m[1],v=Array.from(new Set(b));return l.filter((function(e){return!v.includes(e)})).forEach((function(e){var t=c[o[e]];p.push({source:i[0],target:i[t],linkType:"always"})})),Object(d.a)(Object(d.a)({},e),{},{links:p,nodes:i,nextNodeId:s})}(e,t.nodes,t.i18n);case"RESET":return{addLinkSourceNode:null,addLinkTargetNode:null,addNodeSource:null,addNodeTarget:null,addingLink:!1,contentError:null,isLoading:!0,linkToDelete:null,linkToEdit:null,links:[],nextNodeId:0,nodePositions:null,nodes:[],nodeToDelete:null,nodeToEdit:null,nodeToView:null,showDeleteAllNodesModal:!1,showLegend:!1,showTools:!1,showUnsavedChangesModal:!1,unsavedChanges:!1};case"SELECT_SOURCE_FOR_LINKING":return function(e,t){var a=e.links,n=e.nodes,r=Object(A.a)(n),i={},l=[];a.forEach((function(e){1!==e.source.id&&(e.source.id===t.id&&l.push(e.target.id),i[e.target.id]||(i[e.target.id]=[]),i[e.target.id].push(e.source.id))}));return function e(t){i[t]&&i[t].forEach((function(t){l.push(t),e(t)}))}(t.id),l.filter((function(e,t,a){return t===a.indexOf(e)})).forEach((function(e){r.forEach((function(t){t.id===e&&(t.isInvalidLinkTarget=!0)}))})),Object(d.a)(Object(d.a)({},e),{},{addLinkSourceNode:t,addingLink:!0,nodes:r})}(e,t.node);case"SET_ADD_LINK_TARGET_NODE":return Object(d.a)(Object(d.a)({},e),{},{addLinkTargetNode:t.value});case"SET_CONTENT_ERROR":return Object(d.a)(Object(d.a)({},e),{},{contentError:t.value});case"SET_IS_LOADING":return Object(d.a)(Object(d.a)({},e),{},{isLoading:t.value});case"SET_LINK_TO_DELETE":return Object(d.a)(Object(d.a)({},e),{},{linkToDelete:t.value});case"SET_LINK_TO_EDIT":return Object(d.a)(Object(d.a)({},e),{},{linkToEdit:t.value});case"SET_NODES":return Object(d.a)(Object(d.a)({},e),{},{nodes:t.value});case"SET_NODE_POSITIONS":return Object(d.a)(Object(d.a)({},e),{},{nodePositions:t.value});case"SET_NODE_TO_DELETE":return Object(d.a)(Object(d.a)({},e),{},{nodeToDelete:t.value});case"SET_NODE_TO_EDIT":return Object(d.a)(Object(d.a)({},e),{},{nodeToEdit:t.value});case"SET_NODE_TO_VIEW":return Object(d.a)(Object(d.a)({},e),{},{nodeToView:t.value});case"SET_SHOW_DELETE_ALL_NODES_MODAL":return Object(d.a)(Object(d.a)({},e),{},{showDeleteAllNodesModal:t.value});case"START_ADD_NODE":return Object(d.a)(Object(d.a)({},e),{},{addNodeSource:t.sourceNodeId,addNodeTarget:t.targetNodeId||null});case"START_DELETE_LINK":return function(e,t){var a=e.links,n={};return a.forEach((function(e){n[e.target.id]||(n[e.target.id]=[]),n[e.target.id].push(e.source.id)})),t.isConvergenceLink=n[t.target.id].length>1,Object(d.a)(Object(d.a)({},e),{},{linkToDelete:t})}(e,t.link);case"TOGGLE_DELETE_ALL_NODES_MODAL":return function(e){var t=e.showDeleteAllNodesModal;return Object(d.a)(Object(d.a)({},e),{},{showDeleteAllNodesModal:!t})}(e);case"TOGGLE_LEGEND":return function(e){var t=e.showLegend;return Object(d.a)(Object(d.a)({},e),{},{showLegend:!t})}(e);case"TOGGLE_TOOLS":return function(e){var t=e.showTools;return Object(d.a)(Object(d.a)({},e),{},{showTools:!t})}(e);case"TOGGLE_UNSAVED_CHANGES_MODAL":return function(e){var t=e.showUnsavedChangesModal;return Object(d.a)(Object(d.a)({},e),{},{showUnsavedChangesModal:!t})}(e);case"UPDATE_LINK":return function(e,t){var a=e.linkToEdit,n=e.links,r=Object(A.a)(n);return r.forEach((function(e){e.source.id===a.source.id&&e.target.id===a.target.id&&(e.linkType=t)})),Object(d.a)(Object(d.a)({},e),{},{linkToEdit:null,links:r,unsavedChanges:!0})}(e,t.linkType);case"UPDATE_NODE":return function(e,t){var a=e.nodeToEdit,n=e.nodes,r=t.nodeResource,i=t.launchConfig,l=t.promptValues,o=Object(A.a)(n),c=o.find((function(e){return e.id===a.id}));c.fullUnifiedJobTemplate=r,c.isEdited=!0,c.launchConfig=i,l?c.promptValues=l:delete c.promptValues;return Object(d.a)(Object(d.a)({},e),{},{nodeToEdit:null,nodes:o,unsavedChanges:!0})}(e,t.node);case"REFRESH_NODE":return function(e,t){var a=e.nodeToView,n=e.nodes,r=Object(A.a)(n),i=r.find((function(e){return e.id===a.id}));t.fullUnifiedJobTemplate&&(i.fullUnifiedJobTemplate=t.fullUnifiedJobTemplate);t.originalNodeCredentials&&(i.originalNodeCredentials=t.originalNodeCredentials);return Object(d.a)(Object(d.a)({},e),{},{nodes:r,nodeToView:i})}(e,t.node);default:throw new Error("Unrecognized action type: ".concat(t.type))}}var Pg,Ug,Gg,qg,Fg,zg=function(e){var t=e.link,a=e.mouseEnter,i=e.mouseLeave,l=Object(n.useRef)(null),o=Object(n.useState)(!1),c=Object(f.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)(),m=Object(f.a)(d,2),p=m[0],b=m[1],v=Object(n.useState)("#CCCCCC"),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Object(n.useContext)(gg).nodePositions;return Object(n.useEffect)((function(){"failure"===t.linkType&&E("#d9534f"),"success"===t.linkType&&E("#5cb85c"),"always"===t.linkType&&E("#337ab7")}),[t.linkType]),Object(n.useEffect)((function(){var e=Ig(t,y);b(Tg(e))}),[t,y]),r.a.createElement("g",{ref:l,id:"link-".concat(t.source.id,"-").concat(t.target.id),onMouseEnter:function(){l.current.parentNode.appendChild(l.current),u(!0),a()},onMouseLeave:function(){l.current.parentNode.prepend(l.current),u(null),i()}},r.a.createElement("polygon",{fill:"#E1E1E1",id:"link-".concat(t.source.id,"-").concat(t.target.id,"-overlay"),opacity:s?"1":"0",points:Ag(t,y)}),r.a.createElement("path",{d:p,stroke:h,strokeWidth:"2px"}),r.a.createElement("polygon",{onMouseEnter:function(){return a()},onMouseLeave:function(){return i()},opacity:"0",points:Ag(t,y)}))},Mg=j.b.div(Pg||(Pg=Object(v.a)(["\n  display: flex;\n"]))),Kg=j.b.div(Ug||(Ug=Object(v.a)(["\n  width: 10px;\n"]))),Vg=j.b.div(Gg||(Gg=Object(v.a)(["\n  border-bottom: 10px solid transparent;\n  border-right: 10px solid #c4c4c4;\n  border-top: 10px solid transparent;\n  height: 0;\n  margin: auto;\n  position: absolute;\n  top: calc(50% - 10px);\n  width: 0;\n"]))),Hg=j.b.div(qg||(qg=Object(v.a)(["\n  border-bottom: 10px solid transparent;\n  border-right: 10px solid white;\n  border-top: 10px solid transparent;\n  height: 0;\n  left: 2px;\n  margin: auto;\n  position: absolute;\n  top: calc(50% - 10px);\n  width: 0;\n"]))),Bg=j.b.div(Fg||(Fg=Object(v.a)(["\n  background-color: white;\n  border-radius: 2px;\n  border: 1px solid #c4c4c4;\n  padding: 5px;\n"])));var Wg,Jg=function(e){var t=e.actions,a=e.pointX,n=e.pointY,i=25*t.length+5*t.length-1+10;return r.a.createElement("foreignObject",{x:a,y:Number(n)-i/2,width:"52",height:i},r.a.createElement(Mg,null,r.a.createElement(Kg,null,r.a.createElement(Vg,null),r.a.createElement(Hg,null)),r.a.createElement(Bg,null,t)))},Yg=j.b.div(Wg||(Wg=Object(v.a)(["\n  align-items: center;\n  border-radius: 2px;\n  cursor: pointer;\n  display: flex;\n  font-size: 12px;\n  height: 25px;\n  justify-content: center;\n  width: 25px;\n\n  &:hover {\n    color: white;\n    background-color: #c4c4c4;\n  }\n\n  &:not(:last-of-type) {\n    margin-bottom: 5px;\n  }\n"])));function Xg(e){var t=e.children,a=e.id,n=e.onClick,i=e.onMouseEnter,l=e.onMouseLeave;return r.a.createElement(Yg,{id:a,onClick:n,onMouseEnter:i,onMouseLeave:l},t)}Xg.defaultProps={onClick:function(){},onMouseEnter:function(){},onMouseLeave:function(){}};var Zg,$g,Qg=Xg,eO=j.b.div(Zg||(Zg=Object(v.a)(["\n  height: 0;\n  pointer-events: none;\n  position: relative;\n"]))),tO=j.b.div($g||($g=Object(v.a)(["\n  background-color: #383f44;\n  border-radius: 2px;\n  color: white;\n  left: 10px;\n  max-width: 300px;\n  padding: 5px 10px;\n  position: absolute;\n  top: 10px;\n"])));var aO,nO,rO,iO,lO,oO,cO,sO,uO,dO,mO=function(e){var t=e.children;return r.a.createElement(eO,null,r.a.createElement(tO,null,t))},pO=a(1072),bO=a(1073),fO=j.b.div(aO||(aO=Object(v.a)(["\n  background-color: white;\n  border: 1px solid #c7c7c7;\n  margin-left: 20px;\n  min-width: 100px;\n  position: relative;\n"]))),vO=j.b.div(nO||(nO=Object(v.a)(["\n  border-bottom: 1px solid #c7c7c7;\n  padding: 10px;\n  position: relative;\n"]))),_O=j.b.ul(rO||(rO=Object(v.a)(["\n  padding: 5px 10px;\n\n  li {\n    align-items: center;\n    display: flex;\n    padding: 5px 0px;\n  }\n"]))),hO=j.b.div(iO||(iO=Object(v.a)(["\n  background-color: #393f43;\n  border-radius: 50%;\n  color: white;\n  font-size: 10px;\n  height: 20px;\n  line-height: 20px;\n  margin-right: 10px;\n  text-align: center;\n  width: 20px;\n"]))),EO=Object(j.b)(Ht.a)(lO||(lO=Object(v.a)(["\n  color: #f0ad4d;\n  height: 20px;\n  margin-right: 10px;\n  width: 20px;\n"]))),yO=j.b.div(oO||(oO=Object(v.a)(["\n  height: 5px;\n  margin-right: 10px;\n  width: 20px;\n"]))),gO=Object(j.b)(yO)(cO||(cO=Object(v.a)(["\n  background-color: #5cb85c;\n"]))),OO=Object(j.b)(yO)(sO||(sO=Object(v.a)(["\n  background-color: #d9534f;\n"]))),jO=Object(j.b)(yO)(uO||(uO=Object(v.a)(["\n  background-color: #337ab7;\n"]))),kO=Object(j.b)(pO.a)(dO||(dO=Object(v.a)(["\n  cursor: pointer;\n  position: absolute;\n  right: 10px;\n  top: 15px;\n"])));var wO,CO=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useContext)(yg);return r.a.createElement(fO,null,r.a.createElement(vO,null,r.a.createElement("b",null,t._({id:"Legend"})),r.a.createElement(kO,{onClick:function(){return a({type:"TOGGLE_LEGEND"})}})),r.a.createElement(_O,null,r.a.createElement("li",null,r.a.createElement(hO,null,"JT"),r.a.createElement("span",null,t._({id:"\u4f5c\u4e1a\u6a21\u677f"}))),r.a.createElement("li",null,r.a.createElement(hO,null,"W"),r.a.createElement("span",null,t._({id:"Workflow"}))),r.a.createElement("li",null,r.a.createElement(hO,null,"I"),r.a.createElement("span",null,t._({id:"Inventory Sync"}))),r.a.createElement("li",null,r.a.createElement(hO,null,"P"),r.a.createElement("span",null,t._({id:"Project Sync"}))),r.a.createElement("li",null,r.a.createElement(hO,null,r.a.createElement(bO.a,null)),r.a.createElement("span",null,t._({id:"Approval"}))),r.a.createElement("li",null,r.a.createElement(EO,null),r.a.createElement("span",null,t._({id:"Warning"}))),r.a.createElement("li",null,r.a.createElement(gO,null),r.a.createElement("span",null,t._({id:"On Success"}))),r.a.createElement("li",null,r.a.createElement(OO,null),r.a.createElement("span",null,t._({id:"On Failure"}))),r.a.createElement("li",null,r.a.createElement(jO,null),r.a.createElement("span",null,t._({id:"Always"})))))})),SO=j.b.dl(wO||(wO=Object(v.a)(["\n  column-gap: 15px;\n  display: grid;\n  grid-template-columns: max-content;\n  row-gap: 0px;\n  dt {\n    grid-column-start: 1;\n  }\n  dd {\n    grid-column-start: 2;\n  }\n"])));var xO=Object(u.withI18n)()((function(e){var t,a=e.link,n=e.i18n;switch(a.linkType){case"always":t=n._({id:"Always"});break;case"success":t=n._({id:"On Success"});break;case"failure":t=n._({id:"On Failure"});break;default:t=""}return r.a.createElement(SO,null,r.a.createElement("dt",null,r.a.createElement("b",null,n._({id:"Run"}))),r.a.createElement("dd",{id:"workflow-link-help-type"},t))})),TO=j.b.dl.withConfig({displayName:"WorkflowNodeHelp__GridDL",componentId:"sc-1wnectr-0"})(["column-gap:15px;display:grid;grid-template-columns:max-content;row-gap:0px;dt{grid-column-start:1;}dd{grid-column-start:2;}"]),IO=j.b.p.withConfig({displayName:"WorkflowNodeHelp__ResourceDeleted",componentId:"sc-1wnectr-1"})(["margin-bottom:",";"],(function(e){return e.job?"10px":"0px"})),AO=Object(j.b)(Ht.a).withConfig({displayName:"WorkflowNodeHelp__StyledExclamationTriangleIcon",componentId:"sc-1wnectr-2"})(["color:#f0ad4d;height:20px;margin-right:10px;width:20px;"]);var RO,NO,DO=Object(u.withI18n)()((function(e){var t,a,n,i,l,o,c=e.node,s=e.i18n,d=null===c||void 0===c||null===(t=c.originalNodeObject)||void 0===t||null===(a=t.summary_fields)||void 0===a?void 0:a.job,m=(null===c||void 0===c?void 0:c.fullUnifiedJobTemplate)||(null===c||void 0===c||null===(n=c.originalNodeObject)||void 0===n||null===(i=n.summary_fields)||void 0===i?void 0:i.unified_job_template);if(m||d)switch(m?m.unified_job_type||m.type:d.type){case"job_template":case"job":l=s._({id:"\u4f5c\u4e1a\u6a21\u677f"});break;case"workflow_job_template":case"workflow_job":l=s._({id:"Workflow Job Template"});break;case"project":case"project_update":l=s._({id:"Project Update"});break;case"inventory_source":case"inventory_update":l=s._({id:"Inventory Update"});break;case"workflow_approval_template":case"workflow_approval":l=s._({id:"Workflow Approval"});break;default:l=""}if(d)switch(d.status){case"new":o=s._({id:"New"});break;case"pending":o=s._({id:"Pending"});break;case"waiting":o=s._({id:"Waiting"});break;case"running":o=s._({id:"Running"});break;case"successful":o=s._({id:"Successful"});break;case"failed":o=s._({id:"Failed"});break;case"error":o=s._({id:"Error"});break;case"canceled":o=s._({id:"Canceled"});break;case"never updated":o=s._({id:"Never Updated"});break;case"ok":o=s._({id:"OK"});break;case"missing":o=s._({id:"Missing"});break;case"none":o=s._({id:"None"});break;case"updating":o=s._({id:"Updating"});break;default:o=""}return r.a.createElement(r.a.Fragment,null,!m&&(!d||"workflow_approval"!==d.type)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(IO,{job:d},r.a.createElement(AO,null),r.a.createElement(u.Trans,{id:"The resource associated with this node has been deleted."}))),d&&r.a.createElement(TO,null,r.a.createElement("dt",null,r.a.createElement("b",null,s._({id:"\u540d\u79f0"}))),r.a.createElement("dd",{id:"workflow-node-help-name"},d.name),r.a.createElement("dt",null,r.a.createElement("b",null,s._({id:"\u7c7b\u578b"}))),r.a.createElement("dd",{id:"workflow-node-help-type"},l),r.a.createElement("dt",null,r.a.createElement("b",null,s._({id:"Job Status"}))),r.a.createElement("dd",{id:"workflow-node-help-status"},o),"number"===typeof d.elapsed&&r.a.createElement(r.a.Fragment,null,r.a.createElement("dt",null,r.a.createElement("b",null,s._({id:"Elapsed"}))),r.a.createElement("dd",{id:"workflow-node-help-elapsed"},ii(d.elapsed)))),m&&!d&&r.a.createElement(TO,null,r.a.createElement("dt",null,r.a.createElement("b",null,s._({id:"\u540d\u79f0"}))),r.a.createElement("dd",{id:"workflow-node-help-name"},m.name),r.a.createElement("dt",null,r.a.createElement("b",null,s._({id:"\u7c7b\u578b"}))),r.a.createElement("dd",{id:"workflow-node-help-type"},l)),d&&"workflow_approval"!==d.type&&r.a.createElement(LO,null,s._({id:"Click to view job details"})))})),LO=Object(j.b)("p").withConfig({displayName:"WorkflowNodeHelp___StyledP",componentId:"sc-1wnectr-3"})(["margin-top:10px"]),PO=j.b.div(RO||(RO=Object(v.a)(["\n  background-color: #393f43;\n  border-radius: 50%;\n  color: white;\n  font-size: 10px;\n  line-height: 20px;\n  text-align: center;\n  height: 20px;\n  width: 20px;\n"]))),UO=Object(j.b)(bO.a)(NO||(NO=Object(v.a)(["\n  vertical-align: middle !important;\n"])));var GO,qO=function(e){var t,a,n,i,l,o=e.node;if(!(null===o||void 0===o?void 0:o.fullUnifiedJobTemplate)&&!(null===o||void 0===o||null===(t=o.originalNodeObject)||void 0===t||null===(a=t.summary_fields)||void 0===a?void 0:a.unified_job_template))return null;var c,s=(null===o||void 0===o?void 0:o.fullUnifiedJobTemplate)||(null===o||void 0===o||null===(n=o.originalNodeObject)||void 0===n||null===(i=n.summary_fields)||void 0===i?void 0:i.unified_job_template);if(s.type||s.unified_job_type||(null===o||void 0===o||null===(l=o.job)||void 0===l?void 0:l.type))switch(s.type||s.unified_job_type||o.job.type){case"job_template":case"job":c="JT";break;case"project":case"project_update":c="P";break;case"inventory_source":case"inventory_update":c="I";break;case"workflow_job_template":case"workflow_job":c="W";break;case"workflow_approval_template":case"workflow_approval":c=r.a.createElement(UO,null);break;default:c=""}return r.a.createElement("foreignObject",{y:"50",x:"-10",height:"20",width:"20"},r.a.createElement(PO,{id:"node-".concat(o.id,"-type-letter")},c))},FO=j.b.g(GO||(GO=Object(v.a)(["\n  pointer-events: ",";\n"])),(function(e){return e.ignorePointerEvents?"none":"auto"}));function zO(e){var t=e.i18n,a=e.onUpdateHelpText,i=e.showActionTooltip,l=Object(n.useRef)(null),o=Object(n.useState)(!1),c=Object(f.a)(o,2),s=c[0],u=c[1],d=Object(n.useContext)(yg),m=Object(n.useContext)(gg),p=m.addingLink,b=m.nodePositions;return r.a.createElement(FO,{id:"node-1",ignorePointerEvents:p,onMouseEnter:function(){l.current.parentNode.appendChild(l.current),u(!0)},onMouseLeave:function(){return u(!1)},ref:l,transform:"translate(".concat(b[1].x,",0)")},r.a.createElement("rect",{fill:"#0279BC",height:Sg,rx:"2",ry:"2",width:Cg,y:"10"}),r.a.createElement("text",{x:"13",y:"30",dy:".35em",fill:"white"},"START"),i&&s&&r.a.createElement(Jg,{actions:[r.a.createElement(Qg,{id:"node-add",key:"add",onMouseEnter:function(){return a(t._({id:"Add a new node"}))},onMouseLeave:function(){return a(null)},onClick:function(){a(null),u(!1),d({type:"START_ADD_NODE",sourceNodeId:1})}},r.a.createElement(My.a,null))],pointX:Cg,pointY:Sg/2+10}))}zO.defaultProps={onUpdateHelpText:function(){}};var MO=Object(u.withI18n)()(zO),KO=a(1074),VO=a(1075),HO=a(1076),BO=a(1077),WO=a(1078),JO=a(1079),YO=j.b.div.withConfig({displayName:"WorkflowTools__Wrapper",componentId:"sc-e6lsx2-0"})(["background-color:white;border:1px solid #c7c7c7;height:215px;position:relative;"]),XO=j.b.div.withConfig({displayName:"WorkflowTools__Header",componentId:"sc-e6lsx2-1"})(["border-bottom:1px solid #c7c7c7;padding:10px;"]),ZO=j.b.div.withConfig({displayName:"WorkflowTools__Pan",componentId:"sc-e6lsx2-2"})(["align-items:center;display:flex;"]),$O=j.b.div.withConfig({displayName:"WorkflowTools__PanCenter",componentId:"sc-e6lsx2-3"})(["display:flex;flex-direction:column;"]),QO=j.b.div.withConfig({displayName:"WorkflowTools__Tools",componentId:"sc-e6lsx2-4"})(["align-items:center;display:flex;padding:20px;"]),ej=Object(j.b)(pO.a).withConfig({displayName:"WorkflowTools__Close",componentId:"sc-e6lsx2-5"})(["cursor:pointer;position:absolute;right:10px;top:15px;"]);var tj,aj,nj,rj,ij,lj=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.onFitGraph,i=e.onPan,l=e.onPanToMiddle,o=e.onZoomChange,c=e.zoomPercentage,s=Object(n.useContext)(yg);return r.a.createElement(YO,null,r.a.createElement(XO,null,r.a.createElement("b",null,t._({id:"Tools"})),r.a.createElement(ej,{onClick:function(){return s({type:"TOGGLE_TOOLS"})}})),r.a.createElement(QO,null,r.a.createElement(Ea.a,{content:t._({id:"Fit the graph to the available screen size"}),position:"bottom"},r.a.createElement(oj,{variant:"tertiary",onClick:function(){return a()}},r.a.createElement(KO.a,null))),r.a.createElement(Ea.a,{content:t._({id:"Zoom Out"}),position:"bottom"},r.a.createElement(cj,{variant:"tertiary",onClick:function(){return function(){var e=10*Math.floor((c-10)/10)>10?10*Math.floor((c-10)/10):10;o(e/100)}()}},r.a.createElement(VO.a,null))),r.a.createElement("input",{id:"zoom-slider",max:"200",min:"10",onChange:function(e){return o(parseInt(e.target.value,10)/100)},step:"10",type:"range",value:c}),r.a.createElement(Ea.a,{content:t._({id:"Zoom In"}),position:"bottom"},r.a.createElement(sj,{variant:"tertiary",onClick:function(){return function(){var e=10*Math.ceil((c+10)/10)<200?10*Math.ceil((c+10)/10):200;o(e/100)}()}},r.a.createElement(My.a,null))),r.a.createElement(ZO,null,r.a.createElement(Ea.a,{content:t._({id:"Pan Left"}),position:"left"},r.a.createElement(uj,{variant:"tertiary",onClick:function(){return i("left")}},r.a.createElement(Zc.a,null))),r.a.createElement($O,null,r.a.createElement(Ea.a,{content:t._({id:"Pan Up"}),position:"top"},r.a.createElement(dj,{variant:"tertiary",onClick:function(){return i("up")}},r.a.createElement(HO.a,null))),r.a.createElement(Ea.a,{content:t._({id:"Set zoom to 100% and center graph"}),position:"top"},r.a.createElement(O.a,{variant:"tertiary",onClick:function(){return l()}},r.a.createElement(BO.a,null))),r.a.createElement(Ea.a,{content:t._({id:"Pan Down"}),position:"bottom"},r.a.createElement(mj,{variant:"tertiary",onClick:function(){return i("down")}},r.a.createElement(WO.a,null)))),r.a.createElement(Ea.a,{content:t._({id:"Pan Right"}),position:"right"},r.a.createElement(pj,{variant:"tertiary",onClick:function(){return i("right")}},r.a.createElement(JO.a,null))))))})),oj=Object(j.b)(O.a).withConfig({displayName:"WorkflowTools___StyledButton",componentId:"sc-e6lsx2-6"})(["margin-right:30px;"]),cj=Object(j.b)(O.a).withConfig({displayName:"WorkflowTools___StyledButton2",componentId:"sc-e6lsx2-7"})(["margin-right:10px;"]),sj=Object(j.b)(O.a).withConfig({displayName:"WorkflowTools___StyledButton3",componentId:"sc-e6lsx2-8"})(["margin:0px 25px 0px 10px;"]),uj=Object(j.b)(O.a).withConfig({displayName:"WorkflowTools___StyledButton4",componentId:"sc-e6lsx2-9"})(["margin-right:10px;"]),dj=Object(j.b)(O.a).withConfig({displayName:"WorkflowTools___StyledButton5",componentId:"sc-e6lsx2-10"})(["margin-bottom:10px;"]),mj=Object(j.b)(O.a).withConfig({displayName:"WorkflowTools___StyledButton6",componentId:"sc-e6lsx2-11"})(["margin-top:10px;"]),pj=Object(j.b)(O.a).withConfig({displayName:"WorkflowTools___StyledButton7",componentId:"sc-e6lsx2-12"})(["margin-left:10px;"]),bj=j.b.g(tj||(tj=Object(v.a)(["\n  cursor: ",";\n"])),(function(e){return e.job&&"workflow_approval"!==e.job.type?"pointer":"default"})),fj=j.b.div(aj||(aj=Object(v.a)(["\n  align-items: center;\n  display: flex;\n  margin-top: 5px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  p {\n    margin-left: 10px;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n"]))),vj=j.b.div(nj||(nj=Object(v.a)(["\n  margin-top: 5px;\n  text-align: center;\n\n  span {\n    font-size: 12px;\n    font-weight: bold;\n    background-color: #ededed;\n    padding: 3px 12px;\n    border-radius: 14px;\n  }\n"]))),_j=j.b.div(rj||(rj=Object(v.a)(["\n  font-size: 13px;\n  padding: 0px 10px;\n"]))),hj=j.b.p(ij||(ij=Object(v.a)(["\n  margin-top: 20px;\n  overflow: hidden;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])));vj.displayName="Elapsed";var Ej=Object(u.withI18n)()((function(e){var t,a,i,l,o,s,u=e.i18n,d=e.mouseEnter,m=e.mouseLeave,p=e.node,b=Object(c.g)(),f=Object(n.useContext)(gg).nodePositions,v=null===p||void 0===p||null===(t=p.originalNodeObject)||void 0===t||null===(a=t.summary_fields)||void 0===a?void 0:a.job,_=(null===p||void 0===p||null===(i=p.originalNodeObject)||void 0===i||null===(l=i.summary_fields)||void 0===l||null===(o=l.unified_job_template)||void 0===o?void 0:o.name)||(null===p||void 0===p||null===(s=p.unifiedJobTemplate)||void 0===s?void 0:s.name),h="#93969A";return v&&("failed"!==v.status&&"error"!==v.status&&"canceled"!==v.status||(h="#d9534f"),"successful"!==v.status&&"ok"!==v.status||(h="#5cb85c")),r.a.createElement(bj,{id:"node-".concat(p.id),transform:"translate(".concat(f[p.id].x,",").concat(f[p.id].y-f[1].y,")"),job:v,onClick:function(){v&&"workflow_aproval"!==v.type&&b.push("/jobs/".concat(v.id,"/details"))},onMouseEnter:d,onMouseLeave:m},r.a.createElement("rect",{fill:"#FFFFFF",height:wg,rx:"2",ry:"2",stroke:h,strokeWidth:"2px",width:kg}),r.a.createElement("foreignObject",{height:"58",width:"178",x:"1",y:"1"},r.a.createElement(_j,null,v?r.a.createElement(r.a.Fragment,null,r.a.createElement(fj,null,"pending"!==v.status&&r.a.createElement(hp,{status:v.status}),r.a.createElement("p",null,_)),!!(null===v||void 0===v?void 0:v.elapsed)&&r.a.createElement(vj,null,ii(v.elapsed))):r.a.createElement(hj,null,_||u._({id:"DELETED"})))),(p.unifiedJobTemplate||v)&&r.a.createElement(qO,{node:p}))}));var yj,gj,Oj,jj,kj,wj,Cj=function(){var e=Object(n.useState)(),t=Object(f.a)(e,2),a=t[0],i=t[1],l=Object(n.useState)(),o=Object(f.a)(l,2),c=o[0],s=o[1],u=Object(n.useState)(100),d=Object(f.a)(u,2),m=d[0],p=d[1],b=Object(n.useRef)(null),v=Object(n.useRef)(null),_=Object(n.useContext)(gg),h=_.links,E=_.nodePositions,y=_.nodes,g=_.showLegend,O=_.showTools,j=function(){var e=ab.r(ab.l(b.current).node()).k,t=ab.l(v.current).node().getBoundingClientRect(),a=ab.l(v.current).node().getBBox(),n=xg(t,b.current.getBoundingClientRect(),a,e),r=Object(f.a)(n,2),i=r[0],l=r[1];ab.l(b.current).call(k.transform,ab.q.translate(0,l).scale(i)),p(100*i)},k=ab.p().scaleExtent([.1,2]).on("zoom",(function(){var e=[ab.d.transform.x,ab.d.transform.y];ab.l(v.current).attr("transform","translate(".concat(e,") scale(").concat(ab.d.transform.k,")")),p(100*ab.d.transform.k)}));return Object(n.useEffect)((function(){ab.l(b.current).call(k)}),[k]),Object(n.useEffect)((function(){j()}),[]),r.a.createElement(r.a.Fragment,null,(c||a)&&r.a.createElement(mO,null,c&&r.a.createElement(DO,{node:c}),a&&r.a.createElement(xO,{link:a})),r.a.createElement(Sj,{id:"workflow-svg",ref:b},r.a.createElement("g",{id:"workflow-g",ref:v},E&&[r.a.createElement(MO,{key:"start",showActionTooltip:!1}),h.map((function(e){return r.a.createElement(zg,{key:"link-".concat(e.source.id,"-").concat(e.target.id),link:e,mouseEnter:function(){return i(e)},mouseLeave:function(){return i(null)}})})),y.map((function(e){return e.id>1?r.a.createElement(Ej,{key:"node-".concat(e.id),mouseEnter:function(){return s(e)},mouseLeave:function(){return s(null)},node:e}):null}))])),r.a.createElement(xj,null,O&&r.a.createElement(lj,{onFitGraph:j,onPan:function(e){var t=ab.r(ab.l(b.current).node()),a=t.x,n=t.y,r=t.k;switch(e){case"up":n-=50;break;case"down":n+=50;break;case"left":a-=50;break;case"right":a+=50}ab.l(b.current).call(k.transform,ab.q.translate(a,n).scale(r))},onPanToMiddle:function(){var e=b.current.getBoundingClientRect();ab.l(b.current).call(k.transform,ab.q.translate(0,e.height/2-30).scale(1)),p(100)},onZoomChange:function(e){var t=Ng(b.current.getBoundingClientRect(),ab.r(ab.l(b.current).node()),e),a=Object(f.a)(t,2),n=a[0],r=a[1];ab.l(b.current).call(k.transform,ab.q.translate(n,r).scale(e)),p(100*e)},zoomPercentage:m}),g&&r.a.createElement(CO,null)))},Sj=Object(j.b)("svg").withConfig({displayName:"WorkflowOutputGraph___StyledSvg",componentId:"sc-1vqdj5h-0"})(["display:flex;height:100%;background-color:#f6f6f6;"]),xj=Object(j.b)("div").withConfig({displayName:"WorkflowOutputGraph___StyledDiv",componentId:"sc-1vqdj5h-1"})(["position:absolute;top:75px;right:20px;display:flex;"]),Tj=a(1080),Ij=a(1081),Aj=j.b.div(yj||(yj=Object(v.a)(["\n  align-items: center;\n  border-bottom: 1px solid grey;\n  display: flex;\n  height: 56px;\n"]))),Rj=j.b.div(gj||(gj=Object(v.a)(["\n  align-items: center;\n  display: flex;\n"]))),Nj=j.b.div(Oj||(Oj=Object(v.a)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n"]))),Dj=Object(j.b)(Pi.a)(jj||(jj=Object(v.a)(["\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  margin-left: 10px;\n"]))),Lj=Object(j.b)(O.a)(kj||(kj=Object(v.a)(["\n  border: none;\n  margin: 0px 6px;\n  padding: 6px 10px;\n  &:hover {\n    background-color: #0066cc;\n    color: white;\n  }\n\n  &.pf-m-active {\n    background-color: #0066cc;\n    color: white;\n  }\n"]))),Pj=Object(j.b)(hp)(wj||(wj=Object(v.a)(["\n  margin-right: 20px;\n"])));var Uj,Gj,qj=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.job,i=Object(n.useContext)(yg),l=Object(n.useContext)(gg),o=l.nodes,c=l.showLegend,s=l.showTools,u=o.reduce((function(e,t){return e+!t.isDeleted}),0)-1;return r.a.createElement(Aj,{id:"workflow-output-toolbar"},r.a.createElement(Rj,null,r.a.createElement(Pj,{status:a.status}),r.a.createElement("b",null,a.name)),r.a.createElement(Nj,null,r.a.createElement("div",null,t._({id:"Total Nodes"})),r.a.createElement(Dj,{isRead:!0},u),r.a.createElement(Ea.a,{content:t._({id:"Toggle Legend"}),position:"bottom"},r.a.createElement(Lj,{id:"workflow-output-toggle-legend",isActive:c,onClick:function(){return i({type:"TOGGLE_LEGEND"})},variant:"plain"},r.a.createElement(Tj.a,null))),r.a.createElement(Ea.a,{content:t._({id:"Toggle Tools"}),position:"bottom"},r.a.createElement(Lj,{id:"workflow-output-toggle-tools",isActive:s,onClick:function(){return i({type:"TOGGLE_TOOLS"})},variant:"plain"},r.a.createElement(Ij.a,null)))))})),Fj=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i,l=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:1,n=l.length>2&&void 0!==l[2]?l[2]:[],e.next=4,wt.readNodes(t,{page_size:200,page:a});case 4:if(r=e.sent,!(i=r.data).next){e.next=8;break}return e.abrupt("return",Fj(t,a+1,n.concat(i.results)));case 8:return e.abrupt("return",n.concat(i.results));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function zj(e,t){var a=Object(n.useState)(t),r=Object(f.a)(a,2),i=r[0],l=r[1],o=Yp({jobs:["status_changed"],control:["limit_reached_1"]});return Object(n.useEffect)((function(){l(t)}),[t]),Object(n.useEffect)((function(){function t(){return(t=Object(b.a)(p.a.mark((function t(){var a,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.next=3,Fj(e);case 3:n=t.sent,r=n.reduce((function(e,t){return e[t.id]=t,e}),{}),i.forEach((function(e){1===e.id?a.push(Object(d.a)({},e)):a.push(Object(d.a)(Object(d.a)({},e),{},{originalNodeObject:r[e.originalNodeObject.id]}))})),l(a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}if((null===o||void 0===o?void 0:o.unified_job_id)===e&&["successful","failed","error","cancelled"].includes(o.status))!function(){t.apply(this,arguments)}();else{if(!i||0===i.length||(null===o||void 0===o?void 0:o.workflow_job_id)!==e)return;var a=i.findIndex((function(e){var t;return(null===e||void 0===e||null===(t=e.originalNodeObject)||void 0===t?void 0:t.id)===o.workflow_node_id}));a>-1&&l(function(e,t,a){var n,r,i,l,o,c,s,u,m,p,b,f=Object(d.a)(Object(d.a)({},e[t]),{},{originalNodeObject:Object(d.a)(Object(d.a)({},null===(n=e[t])||void 0===n?void 0:n.originalNodeObject),{},{job:a.unified_job_id,summary_fields:Object(d.a)(Object(d.a)({},null===(r=e[t])||void 0===r||null===(i=r.originalNodeObject)||void 0===i?void 0:i.summary_fields),{},{job:Object(d.a)(Object(d.a)({},null===(l=e[t])||void 0===l||null===(o=l.originalNodeObject)||void 0===o||null===(c=o.summary_fields)||void 0===c?void 0:c.job),{},{id:a.unified_job_id,status:a.status,type:a.type})})}),job:Object(d.a)(Object(d.a)({},null===(s=e[t])||void 0===s?void 0:s.job),{},{id:a.unified_job_id,name:(null===(u=e[t])||void 0===u||null===(m=u.job)||void 0===m?void 0:m.name)||(null===(p=e[t])||void 0===p||null===(b=p.unifiedJobTemplate)||void 0===b?void 0:b.name),status:a.status,type:a.type})});return[].concat(Object(A.a)(e.slice(0,t)),[f],Object(A.a)(e.slice(t+1)))}(i,a,o))}}),[o]),i}var Mj=Object(j.b)(ra.a)(Uj||(Uj=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 240px);\n"]))),Kj=j.b.div(Gj||(Gj=Object(v.a)(["\n  display: flex;\n  flex-flow: column;\n  height: 100%;\n  position: relative;\n"]))),Vj=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i,l=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:1,n=l.length>2&&void 0!==l[2]?l[2]:[],e.next=4,wt.readNodes(t,{page_size:200,page:a});case 4:if(r=e.sent,!(i=r.data).next){e.next=8;break}return e.abrupt("return",Vj(t,a+1,n.concat(i.results)));case 8:return e.abrupt("return",n.concat(i.results));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Hj=Object(u.withI18n)()((function(e){var t=e.job,a=e.i18n,i=Object(n.useReducer)(Lg,{},Dg),l=Object(f.a)(i,2),o=l[0],c=l[1],s=o.contentError,u=o.isLoading,d=o.links,m=o.nodePositions,v=o.nodes;Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vj(t.id);case 3:n=e.sent,c({type:"GENERATE_NODES_AND_LINKS",nodes:n,i18n:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"SET_CONTENT_ERROR",value:e.t0});case 10:return e.prev=10,c({type:"SET_IS_LOADING",value:!1}),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})))).apply(this,arguments)}c({type:"RESET"}),function(){e.apply(this,arguments)}()}),[t.id,a]),Object(n.useEffect)((function(){if(v){var e={},t=Rg(v,d);t.nodes().forEach((function(a){e[a]=t.node(a)})),c({type:"SET_NODE_POSITIONS",value:e})}}),[t.id,d,v]);var _=zj(t.id,v);return Object(n.useEffect)((function(){c({type:"SET_NODES",value:_})}),[_]),u?r.a.createElement(Mj,null,r.a.createElement(Nr,null)):s?r.a.createElement(Mj,null,r.a.createElement(za,{error:s})):r.a.createElement(gg.Provider,{value:o},r.a.createElement(yg.Provider,{value:c},r.a.createElement(Mj,null,r.a.createElement(Kj,null,r.a.createElement(qj,{job:t}),m&&r.a.createElement(Cj,null)))))}));function Bj(e){var t=Object(c.i)().type,a=Object(n.useState)(e),r=Object(f.a)(a,2),i=r[0],l=r[1],o=Yp({jobs:["status_changed"],control:["limit_reached_1"]});return Object(n.useEffect)((function(){l(e)}),[e]),Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.readDetail(i.id,t);case 2:a=e.sent,n=a.data,l(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i&&(null===o||void 0===o?void 0:o.unified_job_id)===i.id&&(["successful","failed","error","cancelled"].includes(o.status)?function(){e.apply(this,arguments)}():l(function(e,t){return Object(d.a)(Object(d.a)({},e),{},{finished:t.finished,status:t.status})}(i,o)))}),[o]),i}var Wj=Object(u.withI18n)()(Object(c.k)((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Object(c.i)(),l=i.id,o=i.type,u=Object(c.j)(),d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.readDetail(l,o);case 2:if(r=e.sent,!(null===(i=r.data)||void 0===i||null===(t=i.summary_fields)||void 0===t||null===(n=t.credentials)||void 0===n?void 0:n.find((function(e){return"vault"===e.kind})))){e.next=10;break}return e.next=7,nt.readCredentials(i.id,o);case 7:c=e.sent,s=c.data.results,i.summary_fields.credentials=s;case 10:return a(i),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)}))),[l,o,a])),m=d.isLoading,f=d.error,v=d.request,_=d.result;Object(n.useEffect)((function(){v()}),[v]);var h=Bj(_),E=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Jobs"})),link:"/jobs",id:99},{name:t._({id:"Details"}),link:"".concat(u.url,"/details"),id:0},{name:t._({id:"Output"}),link:"".concat(u.url,"/output"),id:1}];return m?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Nr,null))):f?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:f},404===f.response.status&&r.a.createElement("span",null,t._({id:"The page you requested could not be found."})," ",r.a.createElement(s.b,{to:"/jobs"},t._({id:"View all Jobs."})))))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(us,{tabsArray:E}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/jobs/:type/:id",to:"/jobs/:type/:id/output",exact:!0}),h&&"workflow_job"===h.type&&[r.a.createElement(c.b,{key:"workflow-details",path:"/jobs/workflow/:id/details"},r.a.createElement(ly,{type:u.params.type,job:h})),r.a.createElement(c.b,{key:"workflow-output",path:"/jobs/workflow/:id/output"},r.a.createElement(Hj,{job:h}))],h&&"workflow_job"!==h.type&&[r.a.createElement(c.b,{key:"details",path:"/jobs/:type/:id/details"},r.a.createElement(ly,{type:o,job:h})),r.a.createElement(c.b,{key:"output",path:"/jobs/:type/:id/output"},r.a.createElement(Eg,{type:o,job:h})),r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"/jobs/".concat(o,"/").concat(l,"/details")},t._({id:"View Job Details"}))))])))})));function Jj(e){var t=e.id,a=e.path,i=e.view,l=e.i18n,o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.read({id:t});case 2:return a=e.sent,n=a.data.results,r=Object(f.a)(n,1),i=r[0],e.abrupt("return",{job:i});case 6:case"end":return e.stop()}}),e)}))),[t]),{job:{}}),u=o.isLoading,d=o.error,m=o.result.job,v=o.request;if(Object(n.useEffect)((function(){v()}),[v]),d)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,"not found"===d?r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"/jobs"},l._({id:"View all Jobs"}))):r.a.createElement(za,{error:d})));if(u||!(null===m||void 0===m?void 0:m.id))return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Nr,null)));var _=I[m.type];return r.a.createElement(c.a,{from:a,to:"/jobs/".concat(_,"/").concat(m.id,"/").concat(i)})}Jj.defaultProps={view:"output"};var Yj=Object(u.withI18n)()(Jj);var Xj=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.j)(),i=Object(n.useState)({"/jobs":t._({id:"\u4f5c\u4e1a"})}),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(n.useCallback)((function(e){var a;if(e){var n=I[e.type];s((a={"/jobs":t._({id:"\u4f5c\u4e1a"})},Object(gr.a)(a,"/jobs/".concat(n,"/").concat(e.id),"".concat(e.name)),Object(gr.a)(a,"/jobs/".concat(n,"/").concat(e.id,"/output"),t._({id:"Output"})),Object(gr.a)(a,"/jobs/".concat(n,"/").concat(e.id,"/details"),t._({id:"Details"})),a))}}),[t]);function d(e){var t=e.view,a=Object(c.i)().id,n=Object(c.j)().path;return r.a.createElement(Yj,{id:a,path:n,view:t})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"job",breadcrumbConfig:o}),r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:a.path},r.a.createElement(La.a,null,r.a.createElement(tb,{showTypeColumn:!0}))),r.a.createElement(c.b,{path:"".concat(a.path,"/:id/details")},r.a.createElement(d,{view:"details"})),r.a.createElement(c.b,{path:"".concat(a.path,"/:id/output")},r.a.createElement(d,{view:"output"})),r.a.createElement(c.b,{path:"".concat(a.path,"/:type/:id")},r.a.createElement(Wj,{setBreadcrumb:u})),r.a.createElement(c.b,{path:"".concat(a.path,"/:id")},r.a.createElement(d,null))))}));var Zj=Object(u.withI18n)()((function(e){var t=e.i18n;return r.a.createElement(n.Fragment,null,r.a.createElement(hs,{streamType:"none",breadcrumbConfig:{"/management_jobs":t._({id:"Management Jobs"})}}))})),$j=a(1082),Qj={email:"Email",grafana:"Grafana",irc:"IRC",mattermost:"Mattermost",pagerduty:"Pagerduty",rocketchat:"Rocket.Chat",slack:"Slack",twilio:"Twilio",webhook:"Webhook"},ek=Object(j.b)(Fo.a).withConfig({displayName:"NotificationTemplateListItem__DataListAction",componentId:"sc-1lln6qu-0"})(["align-items:center;display:grid;grid-gap:16px;grid-template-columns:repeat(3,40px);"]);var tk=Object(u.withI18n)()((function(e){var t,a,i=e.template,l=e.detailUrl,o=e.fetchTemplates,c=e.isSelected,u=e.onSelect,d=e.i18n,m=null===(t=i.summary_fields)||void 0===t?void 0:t.recent_notifications,v=m?null===(a=m[0])||void 0===a?void 0:a.status:null,_=Object(n.useState)(v),h=Object(f.a)(_,2),E=h[0],y=h[1],g=Object(n.useState)(!1),j=Object(f.a)(g,2),k=j[0],w=j[1],C=Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.copy(i.id,{name:"".concat(i.name," @ ").concat(li())});case 2:return e.next=4,o();case 4:case"end":return e.stop()}}),e)}))),[i.id,i.name,o]),S=Object(n.useCallback)((function(){w(!0)}),[]),x=Object(n.useCallback)((function(){w(!1)}),[]);Object(n.useEffect)((function(){y(v)}),[v]);var T=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return(o=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot.readDetail(r);case 2:if(t=e.sent,"pending"===(n=t.data).status){e.next=7;break}return y(n.status),e.abrupt("return");case 7:--a>0&&setTimeout(l,5e3);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},l=function(){return o.apply(this,arguments)},t=lt.test(i.id),y("running"),a=25,e.next=7,t;case 7:n=e.sent,r=n.data.notification,setTimeout(l,5e3);case 10:case"end":return e.stop()}}),e)}))),[i.id])),I=T.request,A=T.isLoading,R=T.error;Object(n.useEffect)((function(){R&&y("error")}),[R]);var N="template-name-".concat(i.id);return r.a.createElement(ho.a,{key:i.id,"aria-labelledby":N,id:i.id},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-template-".concat(i.id),checked:c,onChange:u,"aria-labelledby":N}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name",id:N},r.a.createElement(s.b,{to:l},r.a.createElement("b",null,i.name))),r.a.createElement(ko,{key:"status"},E&&r.a.createElement(qv,{status:E})),r.a.createElement(ko,{key:"type"},r.a.createElement("strong",null,d._({id:"Type:"}))," ",Qj[i.notification_type]||i.notification_type)]}),r.a.createElement(ek,{"aria-label":"actions","aria-labelledby":N},r.a.createElement(Ea.a,{content:d._({id:"Test Notification"}),position:"top"},r.a.createElement(O.a,{"aria-label":d._({id:"Test Notification"}),variant:"plain",onClick:I,isDisabled:A||"running"===E},r.a.createElement($j.a,null))),i.summary_fields.user_capabilities.edit?r.a.createElement(Ea.a,{content:d._({id:"Edit Notification Template"}),position:"top"},r.a.createElement(O.a,{"aria-label":d._({id:"Edit Notification Template"}),variant:"plain",component:s.b,to:"/notification_templates/".concat(i.id,"/edit")},r.a.createElement(Mo.a,null))):r.a.createElement("div",null),i.summary_fields.user_capabilities.copy&&r.a.createElement(hd,{copyItem:C,isCopyDisabled:k,onCopyStart:S,onCopyFinish:x,helperText:{tooltip:d._({id:"Copy Notification Template"}),errorMessage:d._({id:"Failed to copy template."})}}))))})),ak=R("notification-templates",{page:1,page_size:20,order_by:"name"});var nk=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l="".concat(i.url,"/add"),o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(ak,a.search),e.next=3,Promise.all([lt.read(r),lt.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{templates:o.data.results,count:o.data.count,actions:c.data.actions,relatedSearchableKeys:((null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{templates:[],count:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),s=o.result,u=s.templates,d=s.count,m=s.actions,v=s.relatedSearchableKeys,_=s.searchableKeys,h=o.error,E=o.isLoading,y=o.request;Object(n.useEffect)((function(){y()}),[y]);var g=Uo(u),O=g.selected,j=g.isAllSelected,k=g.handleSelect,w=g.setSelected,C=en(Object(n.useCallback)((function(){return Promise.all(O.map((function(e){var t=e.id;return lt.destroy(t)})))}),[O]),{qsConfig:ak,allItemsSelected:j,fetchItems:y}),S=C.isLoading,x=C.deleteItems,T=C.deletionError,I=C.clearDeletionError,R=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:w([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=m&&m.POST;return r.a.createElement(r.a.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:h,hasContentLoading:E||S,items:u,itemCount:d,pluralizedItemName:t._({id:"Notification Templates"}),qsConfig:ak,onRowClick:k,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"Notification type"}),key:"or__notification_type",options:[["email",t._({id:"Email"})],["grafana",t._({id:"Grafana"})],["hipchat",t._({id:"Hipchat"})],["irc",t._({id:"IRC"})],["mattermost",t._({id:"Mattermost"})],["pagerduty",t._({id:"Pagerduty"})],["rocketchat",t._({id:"Rocket.Chat"})],["slack",t._({id:"Slack"})],["twilio",t._({id:"Twilio"})],["webhook",t._({id:"Webhook"})]]},{name:t._({id:"Created by (username)"}),key:"created_by__username__icontains"},{name:t._({id:"Modified by (username)"}),key:"modified_by__username__icontains"}],toolbarSearchableKeys:_,toolbarRelatedSearchableKeys:v,toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"},{name:t._({id:"\u7c7b\u578b"}),key:"notification_type"}],renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:j,onSelectAll:function(e){return w(e?Object(A.a)(u):[])},qsConfig:ak,additionalControls:[].concat(Object(A.a)(D?[r.a.createElement(Po,{key:"add",linkTo:l})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:R,itemsToDelete:O,pluralizedItemName:t._({id:"Notification Templates"})})])}))},renderItem:function(e){return r.a.createElement(tk,{key:e.id,fetchTemplates:y,template:e,detailUrl:"".concat(i.url,"/").concat(e.id),isSelected:O.some((function(t){return t.id===e.id})),onSelect:function(){return k(e)}})},emptyStateControls:D?r.a.createElement(Po,{key:"add",linkTo:l}):null}))),r.a.createElement(Zt,{isOpen:T,variant:"error",title:t._({id:"Error!"}),onClose:I},t._({id:"Failed to delete one or more notification template."}),r.a.createElement(ua,{error:T})))})),rk={email:function(e){var t=e.i18n,a=Object(Va.b)({name:"emailOptions",validate:Yo(t._({id:"Select a value for this field"}),t)}),n=Object(f.a)(a,2),i=n[0],l=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"email-username",label:t._({id:"Username"}),name:"notification_configuration.username",type:"text"}),r.a.createElement(Ml,{id:"email-password",label:t._({id:"Password"}),name:"notification_configuration.password"}),r.a.createElement(Tl,{id:"email-host",label:t._({id:"Host"}),name:"notification_configuration.host",type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(eo,{id:"email-recipients",label:t._({id:"Recipient list"}),name:"notification_configuration.recipients",type:"textarea",validate:Yo(null,t),isRequired:!0,rows:3,tooltip:t._({id:"Enter one email address per line to create a recipient list for this type of notification."})}),r.a.createElement(Tl,{id:"email-sender",label:t._({id:"Sender e-mail"}),name:"notification_configuration.sender",type:"text",validate:Qo(t),isRequired:!0}),r.a.createElement(Tl,{id:"email-port",label:t._({id:"Port"}),name:"notification_configuration.port",type:"number",validate:rc([Yo(null,t),$o(1,65535,t)]),isRequired:!0,min:"0",max:"65535"}),r.a.createElement(Tl,{id:"email-timeout",label:t._({id:"Timeout"}),name:"notification_configuration.timeout",type:"number",validate:rc([Yo(null,t),$o(1,120,t)]),isRequired:!0,min:"1",max:"120",tooltip:t._({id:"The amount of time (in seconds) before the email notification stops trying to reach the host and times out. Ranges from 1 to 120 seconds."})}),r.a.createElement(Wi.a,{fieldId:"email-options",helperTextInvalid:l.error,isRequired:!0,validated:l.touched&&l.error?"error":"default",label:t._({id:"E-mail options"})},r.a.createElement(Fc,Object.assign({},i,{id:"email-options",data:[{value:"",key:"",label:t._({id:"Choose an email option"}),isDisabled:!0},{value:"tls",key:"tls",label:t._({id:"Use TLS"})},{value:"ssl",key:"ssl",label:t._({id:"Use SSL"})}]}))))},grafana:function(e){var t=e.i18n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"grafana-url",label:t._({id:"Grafana URL"}),name:"notification_configuration.grafana_url",type:"text",validate:Yo(null,t),isRequired:!0,tooltip:t._({id:"The base URL of the Grafana server - the /api/annotations endpoint will be added automatically to the base Grafana URL."})}),r.a.createElement(Ml,{id:"grafana-key",label:t._({id:"Grafana API key"}),name:"notification_configuration.grafana_key",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"grafana-dashboard-id",label:t._({id:"ID of the dashboard (optional)"}),name:"notification_configuration.dashboardId",type:"text"}),r.a.createElement(Tl,{id:"grafana-panel-id",label:t._({id:"ID of the panel (optional)"}),name:"notification_configuration.panelId",type:"text"}),r.a.createElement(eo,{id:"grafana-tags",label:t._({id:"Tags for the annotation (optional)"}),name:"notification_configuration.annotation_tags",type:"textarea",rows:3,tooltip:t._({id:"Enter one Annotation Tag per line, without commas."})}),r.a.createElement(Rl,{id:"grafana-ssl",label:t._({id:"Disable SSL verification"}),name:"notification_configuration.grafana_no_verify_ssl"}))},irc:function(e){var t=e.i18n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ml,{id:"irc-password",label:t._({id:"IRC server password"}),name:"notification_configuration.password"}),r.a.createElement(Tl,{id:"irc-port",label:t._({id:"IRC server port"}),name:"notification_configuration.port",type:"number",validate:Yo(null,t),isRequired:!0,min:"0"}),r.a.createElement(Tl,{id:"irc-server",label:t._({id:"IRC server address"}),name:"notification_configuration.server",type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"irc-nickname",label:t._({id:"IRC nick"}),name:"notification_configuration.nickname",type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(eo,{id:"irc-targets",label:t._({id:"Destination channels or users"}),name:"notification_configuration.targets",type:"textarea",validate:Yo(null,t),isRequired:!0,tooltip:t._({id:"Enter one IRC channel or username per line. The pound symbol (#) for channels, and the at (@) symbol for users, are not required."})}),r.a.createElement(Rl,{id:"grafana-ssl",label:t._({id:"Disable SSL verification"}),name:"notification_configuration.use_ssl"}))},mattermost:function(e){var t=e.i18n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"mattermost-url",label:t._({id:"Target URL"}),name:"notification_configuration.mattermost_url",type:"text",validate:rc([Yo(null,t),nc(t)]),isRequired:!0}),r.a.createElement(Tl,{id:"mattermost-username",label:t._({id:"Username"}),name:"notification_configuration.mattermost_username",type:"text"}),r.a.createElement(Tl,{id:"mattermost-channel",label:t._({id:"Channel"}),name:"notification_configuration.mattermost_channel",type:"text"}),r.a.createElement(Tl,{id:"mattermost-icon",label:t._({id:"Icon URL"}),name:"notification_configuration.mattermost_icon_url",type:"text",validate:nc(t)}),r.a.createElement(Rl,{id:"mattermost-ssl",label:t._({id:"Disable SSL verification"}),name:"notification_configuration.mattermost_no_verify_ssl"}))},pagerduty:function(e){var t=e.i18n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ml,{id:"pagerduty-token",label:t._({id:"API Token"}),name:"notification_configuration.token",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"pagerduty-subdomain",label:t._({id:"Pagerduty subdomain"}),name:"notification_configuration.subdomain",type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"pagerduty-service-key",label:t._({id:"API service/integration key"}),name:"notification_configuration.service_key",type:"text",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"pagerduty-identifier",label:t._({id:"Client identifier"}),name:"notification_configuration.client_name",type:"text",validate:Yo(null,t),isRequired:!0}))},rocketchat:function(e){var t=e.i18n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"rocketchat-url",label:t._({id:"Target URL"}),name:"notification_configuration.rocketchat_url",type:"text",validate:rc([Yo(null,t),nc(t)]),isRequired:!0}),r.a.createElement(Tl,{id:"rocketchat-username",label:t._({id:"Username"}),name:"notification_configuration.rocketchat_username",type:"text"}),r.a.createElement(Tl,{id:"rocketchat-icon-url",label:t._({id:"Icon URL"}),name:"notification_configuration.rocketchat_icon_url",type:"text",validate:nc(t)}),r.a.createElement(Rl,{id:"rocketchat-ssl",label:t._({id:"Disable SSL verification"}),name:"notification_configuration.rocketchat_no_verify_ssl"}))},slack:function(e){var t=e.i18n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(eo,{id:"slack-channels",label:t._({id:"Destination channels"}),name:"notification_configuration.channels",type:"textarea",validate:Yo(null,t),isRequired:!0,tooltip:t._({id:"Enter one Slack channel per line. The pound symbol (#) is required for channels."})}),r.a.createElement(Ml,{id:"slack-token",label:t._({id:"Token"}),name:"notification_configuration.token",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"slack-color",label:t._({id:"Notification color"}),name:"notification_configuration.hex_color",type:"text",tooltip:t._({id:"Specify a notification color. Acceptable colors are hex color code (example: #3af or #789abc)."})}))},twilio:function(e){var t=e.i18n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ml,{id:"twilio-token",label:t._({id:"Account token"}),name:"notification_configuration.account_token",validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"twilio-from-phone",label:t._({id:"Source phone number"}),name:"notification_configuration.from_number",type:"text",validate:Yo(null,t),isRequired:!0,tooltip:t._({id:'Enter the number associated with the "Messaging Service" in Twilio in the format +18005550199.'})}),r.a.createElement(eo,{id:"twilio-destination-numbers",label:t._({id:"Destination SMS number(s)"}),name:"notification_configuration.to_numbers",type:"textarea",validate:Yo(null,t),isRequired:!0,tooltip:t._({id:"Enter one phone number per line to specify where to route SMS messages."})}),r.a.createElement(Tl,{id:"twilio-account-sid",label:t._({id:"Account SID"}),name:"notification_configuration.account_sid",type:"text",validate:Yo(null,t),isRequired:!0}))},webhook:function(e){var t=e.i18n,a=Object(Va.b)({name:"notification_configuration.http_method",validate:Yo(t._({id:"Select a value for this field"}),t)}),n=Object(f.a)(a,2),i=n[0],l=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"webhook-username",label:t._({id:"Username"}),name:"notification_configuration.username",type:"text"}),r.a.createElement(Ml,{id:"webhook-password",label:t._({id:"Basic auth password"}),name:"notification_configuration.password"}),r.a.createElement(Tl,{id:"webhook-url",label:t._({id:"Target URL"}),name:"notification_configuration.url",type:"text",validate:rc([Yo(null,t),nc(t)]),isRequired:!0}),r.a.createElement(Rl,{id:"webhook-ssl",label:t._({id:"Disable SSL verification"}),name:"notification_configuration.disable_ssl_verification"}),r.a.createElement(Hl,null,r.a.createElement(Zi,{id:"webhook-headers",name:"notification_configuration.headers",label:t._({id:"HTTP Headers"}),mode:"javascript",tooltip:t._({id:"Specify HTTP Headers in JSON format. Refer to the Ansible Tower documentation for example syntax."}),rows:5})),r.a.createElement(Wi.a,{fieldId:"webhook-http-method",helperTextInvalid:l.error,isRequired:!0,validated:l.touched&&l.error?"error":"default",label:t._({id:"HTTP Method"})},r.a.createElement(Fc,Object.assign({},i,{id:"webhook-http-method",data:[{value:"",key:"",label:t._({id:"Choose an HTTP method"}),isDisabled:!0},{value:"POST",key:"post",label:t._({id:"POST"})},{value:"PUT",key:"put",label:t._({id:"PUT"})}]}))))}};var ik=Object(u.withI18n)()((function(e){var t=e.type,a=e.i18n,n=rk[t];return r.a.createElement(Wl,null,r.a.createElement(qt.a,{size:"md",headingLevel:"h4"},a._({id:"Type Details"})),r.a.createElement(Vl,null,r.a.createElement(n,{i18n:a})))}));var lk=Object(u.withI18n)()((function(e){var t=e.defaultMessages,a=e.type,i=e.i18n,l=Object(Va.b)("useCustomMessages"),o=Object(f.a)(l,3),c=o[0],s=o[2],u="webhook"!==a,d=["email","pagerduty","webhook"].includes(a),m=Object(Va.c)().setFieldValue,p=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(p.current){var e=t[a],n=function(e,t){m("".concat(e,".message"),t.message||""),m("".concat(e,".body"),t.body||"")};n("messages.started",e.started),n("messages.success",e.success),n("messages.error",e.error),n("messages.workflow_approval.approved",e.workflow_approval.approved),n("messages.workflow_approval.denied",e.workflow_approval.denied),n("messages.workflow_approval.running",e.workflow_approval.running),n("messages.workflow_approval.timed_out",e.workflow_approval.timed_out)}else p.current=!0}),[a,m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(dm.a,{id:"toggle-custom-messages",label:i._({id:"Customize messages\u2026"}),isChecked:!!c.value,onChange:function(){return s.setValue(!c.value)}}),c.value&&r.a.createElement(Wl,null,r.a.createElement(ok,{className:"pf-c-content"},r.a.createElement("small",null,"Use custom messages to change the content of notifications sent when a job starts, succeeds, or fails. Use curly braces to access information about the job:"," ",r.a.createElement("code",null,"{{"," job_friendly_name ","}}"),","," ",r.a.createElement("code",null,"{{"," url ","}}"),", or attributes of the job such as"," ",r.a.createElement("code",null,"{{"," job.status ","}}"),". You may apply a number of possible variables in the message. Refer to the"," ",r.a.createElement("a",{href:"https://docs.ansible.com/ansible-tower/latest/html/userguide/notifications.html#create-custom-notifications",target:"_blank",rel:"noopener noreferrer"},"Ansible Tower documentation")," ","for more details.")),r.a.createElement(Hl,null,u&&r.a.createElement(Zi,{id:"start-message",name:"messages.started.message",label:i._({id:"Start message"}),mode:"jinja2",rows:2}),d&&r.a.createElement(Zi,{id:"start-body",name:"messages.started.body",label:i._({id:"Start message body"}),mode:"jinja2",rows:6}),u&&r.a.createElement(Zi,{id:"success-message",name:"messages.success.message",label:i._({id:"Success message"}),mode:"jinja2",rows:2}),d&&r.a.createElement(Zi,{id:"success-body",name:"messages.success.body",label:i._({id:"Success message body"}),mode:"jinja2",rows:6}),u&&r.a.createElement(Zi,{id:"error-message",name:"messages.error.message",label:i._({id:"Error message"}),mode:"jinja2",rows:2}),d&&r.a.createElement(Zi,{id:"error-body",name:"messages.error.body",label:i._({id:"Error message body"}),mode:"jinja2",rows:6}),u&&r.a.createElement(Zi,{id:"wf-approved-message",name:"messages.workflow_approval.approved.message",label:i._({id:"Workflow approved message"}),mode:"jinja2",rows:2}),d&&r.a.createElement(Zi,{id:"wf-approved-body",name:"messages.workflow_approval.approved.body",label:i._({id:"Workflow approved message body"}),mode:"jinja2",rows:6}),u&&r.a.createElement(Zi,{id:"wf-denied-message",name:"messages.workflow_approval.denied.message",label:i._({id:"Workflow denied message"}),mode:"jinja2",rows:2}),d&&r.a.createElement(Zi,{id:"wf-denied-body",name:"messages.workflow_approval.denied.body",label:i._({id:"Workflow denied message body"}),mode:"jinja2",rows:6}),u&&r.a.createElement(Zi,{id:"wf-running-message",name:"messages.workflow_approval.running.message",label:i._({id:"Workflow pending message"}),mode:"jinja2",rows:2}),d&&r.a.createElement(Zi,{id:"wf-running-body",name:"messages.workflow_approval.running.body",label:i._({id:"Workflow pending message body"}),mode:"jinja2",rows:6}),u&&r.a.createElement(Zi,{id:"wf-timed-out-message",name:"messages.workflow_approval.timed_out.message",label:i._({id:"Workflow timed out message"}),mode:"jinja2",rows:2}),d&&r.a.createElement(Zi,{id:"wf-timed-out-body",name:"messages.workflow_approval.timed_out.body",label:i._({id:"Workflow timed out message body"}),mode:"jinja2",rows:6}))))})),ok=Object(j.b)(Qs.a).withConfig({displayName:"CustomMessagesSubForm___StyledText",componentId:"sc-12oxf3-0"})(["margin-bottom:var(--pf-c-content--MarginBottom)"]);function ck(e,t){var a,n,r,i;return!!e&&(sk(e.started,t.started)||sk(e.success,t.success)||sk(e.error,t.error)||sk(null===(a=e.workflow_approval)||void 0===a?void 0:a.approved,t.workflow_approval.approved)||sk(null===(n=e.workflow_approval)||void 0===n?void 0:n.denied,t.workflow_approval.denied)||sk(null===(r=e.workflow_approval)||void 0===r?void 0:r.running,t.workflow_approval.running)||sk(null===(i=e.workflow_approval)||void 0===i?void 0:i.timed_out,t.workflow_approval.timed_out))}function sk(e,t){return!!e&&(!(!e.message||e.message===t.message)||!(!e.body||e.body===t.body))}var uk={email:["username","password","host","recipients","sender","port","timeout"],grafana:["grafana_url","grafana_key","dashboardId","panelId","annotation_tags","grafana_no_verify_ssl"],irc:["password","port","server","nickname","targets","use_ssl"],mattermost:["mattermost_url","mattermost_username","mattermost_channel","mattermost_icon_url","mattermost_no_verify_ssl"],pagerduty:["token","subdomain","service_key","client_name"],rocketchat:["rocketchat_url","rocketchat_username","rocketchat_icon_url","rocketchat_no_verify_ssl"],slack:["channels","token","hex_color"],twilio:["account_token","from_number","to_numbers","account_sid"],webhook:["username","password","url","disable_ssl_verification","headers","http_method"]},dk=uk,mk={};Object.keys(uk).forEach((function(e){uk[e].forEach((function(e){var t=e.includes("_ssl");mk[e]=!t&&""}))}));var pk=["emailOptions"],bk=["useCustomMessages"];function fk(e){var t=e.i18n,a=e.defaultMessages,i=e.template,l=Object(Va.c)().setFieldValue,o=Object(Va.b)("organization"),c=Object(f.a)(o,3),s=c[0],u=c[1],d=c[2],m=Object(Va.b)({name:"notification_type",validate:Yo(t._({id:"Select a value for this field"}),t)}),p=Object(f.a)(m,2),b=p[0],v=p[1],_=Object(n.useCallback)((function(e){l("organization",e)}),[l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"notification-name",name:"name",type:"text",label:t._({id:"\u540d\u79f0"}),validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"notification-description",name:"description",type:"text",label:t._({id:"\u63cf\u8ff0"})}),r.a.createElement(Pc,{helperTextInvalid:u.error,isValid:!u.touched||!u.error,onBlur:function(){return d.setTouched()},onChange:_,value:s.value,touched:u.touched,error:u.error,required:!0,autoPopulate:!(null===i||void 0===i?void 0:i.id)}),r.a.createElement(Wi.a,{fieldId:"notification-type",helperTextInvalid:v.error,isRequired:!0,validated:v.touched&&v.error?"error":"default",label:t._({id:"\u7c7b\u578b"})},r.a.createElement(Fc,Object.assign({},b,{id:"notification-type",isValid:!v.touched||!v.error,data:[{value:"",key:"none",label:t._({id:"Choose a Notification Type"}),isDisabled:!0},{value:"email",key:"email",label:t._({id:"E-mail"})},{value:"grafana",key:"grafana",label:"Grafana"},{value:"irc",key:"irc",label:"IRC"},{value:"mattermost",key:"mattermost",label:"Mattermost"},{value:"pagerduty",key:"pagerduty",label:"Pagerduty"},{value:"rocketchat",key:"rocketchat",label:"Rocket.Chat"},{value:"slack",key:"slack",label:"Slack"},{value:"twilio",key:"twilio",label:"Twilio"},{value:"webhook",key:"webhook",label:"Webhook"}]}))),b.value&&r.a.createElement(ik,{type:b.value}),r.a.createElement(lk,{defaultMessages:a,type:b.value}))}function vk(e){var t,a,n,i,l,c,s=e.template,u=e.defaultMessages,m=e.onSubmit,p=e.onCancel,b=e.submitError,f=e.i18n,v="";"email"===s.notification_type&&(v=(null===(c=s.notification_configuration)||void 0===c?void 0:c.use_ssl)?"ssl":"tls");var _=s.messages||{workflow_approval:{}},h=u[s.notification_type||"email"],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{message:(null===e||void 0===e?void 0:e.message)||t.message||"",body:(null===e||void 0===e?void 0:e.body)||t.body||""}},y=((null===s||void 0===s?void 0:s.notification_configuration)||{}).headers;return r.a.createElement(Va.a,{initialValues:{name:s.name,description:s.description,notification_type:s.notification_type,notification_configuration:Object(d.a)(Object(d.a)(Object(d.a)({},mk),s.notification_configuration),{},{headers:y?JSON.stringify(y,null,2):null}),emailOptions:v,organization:null===(t=s.summary_fields)||void 0===t?void 0:t.organization,messages:{started:Object(d.a)({},E(_.started,h.started)),success:Object(d.a)({},E(_.success,h.success)),error:Object(d.a)({},E(_.error,h.error)),workflow_approval:{approved:Object(d.a)({},E(null===(a=_.workflow_approval)||void 0===a?void 0:a.approved,h.workflow_approval.approved)),denied:Object(d.a)({},E(null===(n=_.workflow_approval)||void 0===n?void 0:n.denied,h.workflow_approval.denied)),running:Object(d.a)({},E(null===(i=_.workflow_approval)||void 0===i?void 0:i.running,h.workflow_approval.running)),timed_out:Object(d.a)({},E(null===(l=_.workflow_approval)||void 0===l?void 0:l.timed_out,h.workflow_approval.timed_out))}},useCustomMessages:ck(_,h)},onSubmit:function(e){var t;m(function(e,t){return function(e){var t={};dk[e.notification_type].forEach((function(a){"undefined"!==typeof e.notification_configuration[a]&&(t[a]=e.notification_configuration[a])})),"email"===e.notification_type&&(t.use_ssl="ssl"===e.emailOptions,t.use_tls=!t.use_ssl);"webhook"===e.notification_type&&(t.headers=t.headers?JSON.parse(t.headers):{});e.emailOptions;var a=Object(o.a)(e,pk);return Object(d.a)(Object(d.a)({},a),{},{notification_configuration:t})}(function(e,t){var a=e.useCustomMessages,n=Object(o.a)(e,bk);if(!a)return Object(d.a)(Object(d.a)({},n),{},{messages:null});var r=e.messages,i=t[e.notification_type],l=function(e,t){return{message:e.message===t.message?null:e.message,body:e.body===t.body?null:e.body}},c={started:l(r.started,i.started),success:l(r.success,i.success),error:l(r.error,i.error),workflow_approval:{approved:l(r.workflow_approval.approved,i.workflow_approval.approved),denied:l(r.workflow_approval.denied,i.workflow_approval.denied),running:l(r.workflow_approval.running,i.workflow_approval.running),timed_out:l(r.workflow_approval.timed_out,i.workflow_approval.timed_out)}};return Object(d.a)(Object(d.a)({},n),{},{messages:c})}(e,t))}(Object(d.a)(Object(d.a)({},e),{},{organization:null===(t=e.organization)||void 0===t?void 0:t.id}),u))}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(fk,{i18n:f,defaultMessages:u,template:s}),r.a.createElement(Yl,{error:b}),r.a.createElement(cc,{onCancel:p,onSubmit:e.handleSubmit})))}))}vk.defaultProps={template:{name:"",description:"",notification_type:""},submitError:null};var _k=Object(u.withI18n)()(vk);function hk(e){var t=e.i18n,a=Object(c.g)(),i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],u=l[1],d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.readOptions();case 2:return t=e.sent,a=t.data,e.abrupt("return",a.actions.POST.messages);case 5:case"end":return e.stop()}}),e)}))),[])),m=d.result,v=d.error,_=d.request;Object(n.useEffect)((function(){_()}),[_]);var h=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt.create(t);case 3:n=e.sent,r=n.data,a.push("/notification_templates/".concat(r.id)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return v?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:v},404===v.response.status&&r.a.createElement("span",null,t._({id:"Notification Template not found."})," ",r.a.createElement(s.b,{to:"/notification_templates"},t._({id:"View all Notification Templates."})))))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,m&&r.a.createElement(_k,{defaultMessages:m,onSubmit:h,onCancel:function(){a.push("/notification_templates")},submitError:o}))))}hk.contextTypes={custom_virtualenvs:Dn.a.arrayOf(Dn.a.string)};var Ek=Object(u.withI18n)()(hk);function yk(e){var t=e.value,a=e.label,n=e.mode,i=e.rows,l=e.fullHeight,o=e.helpText,c=e.dataCy,s=c?"".concat(c,"-label"):null,u=c?"".concat(c,"-value"):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ok,{component:Dt.b.dt,fullWidth:!0,"data-cy":s},r.a.createElement("div",{className:"pf-c-form__label"},r.a.createElement(jk,{className:"pf-c-form__label-text"},a),o&&r.a.createElement(gi,{header:a,content:o,id:c}))),r.a.createElement(kk,{component:Dt.b.dd,fullWidth:!0,"data-cy":u},r.a.createElement(wk,{mode:n,value:t,readOnly:!0,rows:i,fullHeight:l})))}yk.defaultProps={rows:null,helpText:"",dataCy:""};var gk=yk,Ok=Object(j.b)(ki).withConfig({displayName:"CodeDetail___StyledDetailName",componentId:"sc-2xb938-0"})(["grid-column:1 / -1"]),jk=Object(j.b)("span").withConfig({displayName:"CodeDetail___StyledSpan",componentId:"sc-2xb938-1"})(["font-weight:var(--pf-global--FontWeight--bold)"]),kk=Object(j.b)(wi).withConfig({displayName:"CodeDetail___StyledDetailValue",componentId:"sc-2xb938-2"})(["grid-column:1 / -1;margin-top:-20px"]),wk=Object(j.b)(io).withConfig({displayName:"CodeDetail___StyledCodeMirrorInput",componentId:"sc-2xb938-3"})(["margin-top:10px"]);function Ck(e){var t,a,n,i,l,o,c,s,u,d,m,p,b,f,v,_,h=e.messages,E=e.defaults,y=e.type,g=e.i18n,O="webhook"!==y,j=["email","pagerduty","webhook"].includes(y);return r.a.createElement(r.a.Fragment,null,O&&r.a.createElement(gk,{label:g._({id:"Start message"}),value:h.started.message||E.started.message,mode:"jinja2",rows:"2",fullWidth:!0}),j&&r.a.createElement(gk,{label:g._({id:"Start message body"}),value:h.started.body||E.started.body,mode:"jinja2",rows:"6",fullWidth:!0}),O&&r.a.createElement(gk,{label:g._({id:"Success message"}),value:h.success.message||E.success.message,mode:"jinja2",rows:"2",fullWidth:!0}),j&&r.a.createElement(gk,{label:g._({id:"Success message body"}),value:h.success.body||E.success.body,mode:"jinja2",rows:"6",fullWidth:!0}),O&&r.a.createElement(gk,{label:g._({id:"Error message"}),value:h.error.message||E.error.message,mode:"jinja2",rows:"2",fullWidth:!0}),j&&r.a.createElement(gk,{label:g._({id:"Error message body"}),value:h.error.body||E.error.body,mode:"jinja2",rows:"6",fullWidth:!0}),O&&r.a.createElement(gk,{label:g._({id:"Workflow approved message"}),value:(null===(t=h.workflow_approval)||void 0===t||null===(a=t.approved)||void 0===a?void 0:a.message)||E.workflow_approval.approved.message,mode:"jinja2",rows:"2",fullWidth:!0}),j&&r.a.createElement(gk,{label:g._({id:"Workflow approved message body"}),value:(null===(n=h.workflow_approval)||void 0===n||null===(i=n.approved)||void 0===i?void 0:i.body)||E.workflow_approval.approved.body,mode:"jinja2",rows:"6",fullWidth:!0}),O&&r.a.createElement(gk,{label:g._({id:"Workflow denied message"}),value:(null===(l=h.workflow_approval)||void 0===l||null===(o=l.denied)||void 0===o?void 0:o.message)||E.workflow_approval.denied.message,mode:"jinja2",rows:"2",fullWidth:!0}),j&&r.a.createElement(gk,{label:g._({id:"Workflow denied message body"}),value:(null===(c=h.workflow_approval)||void 0===c||null===(s=c.denied)||void 0===s?void 0:s.body)||E.workflow_approval.denied.body,mode:"jinja2",rows:"6",fullWidth:!0}),O&&r.a.createElement(gk,{label:g._({id:"Workflow pending message"}),value:(null===(u=h.workflow_approval)||void 0===u||null===(d=u.running)||void 0===d?void 0:d.message)||E.workflow_approval.running.message,mode:"jinja2",rows:"2",fullWidth:!0}),j&&r.a.createElement(gk,{label:g._({id:"Workflow pending message body"}),value:(null===(m=h.workflow_approval)||void 0===m||null===(p=m.running)||void 0===p?void 0:p.body)||E.workflow_approval.running.body,mode:"jinja2",rows:"6",fullWidth:!0}),O&&r.a.createElement(gk,{label:g._({id:"Workflow timed out message"}),value:(null===(b=h.workflow_approval)||void 0===b||null===(f=b.timed_out)||void 0===f?void 0:f.message)||E.workflow_approval.timed_out.message,mode:"jinja2",rows:"2",fullWidth:!0}),j&&r.a.createElement(gk,{label:g._({id:"Workflow timed out message body"}),value:(null===(v=h.workflow_approval)||void 0===v||null===(_=v.timed_out)||void 0===_?void 0:_.body)||E.workflow_approval.timed_out.body,mode:"jinja2",rows:"6",fullWidth:!0}))}var Sk=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.template,i=e.defaultMessages,l=Object(c.g)(),o=a.created,u=a.modified,d=a.notification_configuration,m=a.summary_fields,f=a.messages,v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.destroy(a.id);case 2:l.push("/notification_templates");case 3:case"end":return e.stop()}}),e)}))),[a.id,l])),_=v.request,h=v.isLoading,E=Qa(v.error),y=E.error,g=E.dismissError,j=i[a.notification_type];return r.a.createElement(Bc,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:t._({id:"\u540d\u79f0"}),value:a.name,dataCy:"nt-detail-name"}),r.a.createElement(xi,{label:t._({id:"\u63cf\u8ff0"}),value:a.description,dataCy:"nt-detail-description"}),m.organization?r.a.createElement(xi,{label:t._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(m.organization.id,"/details")},m.organization.name)}):r.a.createElement(Ai,{label:t._({id:"\u7ec4\u7ec7"})}),r.a.createElement(xi,{label:t._({id:"Notification Type"}),value:Qj[a.notification_type]||a.notification_type,dataCy:"nt-detail-type"}),"email"===a.notification_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xi,{label:t._({id:"Username"}),value:d.username,dataCy:"nt-detail-username"}),r.a.createElement(xi,{label:t._({id:"Host"}),value:d.host,dataCy:"nt-detail-host"}),r.a.createElement(zi,{label:t._({id:"Recipient List"}),value:d.recipients,dataCy:"nt-detail-recipients"}),r.a.createElement(xi,{label:t._({id:"Sender Email"}),value:d.sender,dataCy:"nt-detail-sender"}),r.a.createElement(xi,{label:t._({id:"Port"}),value:d.port,dataCy:"nt-detail-port"}),r.a.createElement(xi,{label:t._({id:"Timeout"}),value:d.timeout,dataCy:"nt-detail-timeout"}),r.a.createElement(xi,{label:t._({id:"Email Options"}),value:d.use_ssl?t._({id:"Use SSL"}):t._({id:"Use TLS"}),dataCy:"nt-detail-email-options"})),"grafana"===a.notification_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xi,{label:t._({id:"Grafana URL"}),value:d.grafana_url,dataCy:"nt-detail-grafana-url"}),r.a.createElement(xi,{label:t._({id:"ID of the Dashboard"}),value:d.dashboardId,dataCy:"nt-detail-dashboard-id"}),r.a.createElement(xi,{label:t._({id:"ID of the Panel"}),value:d.panelId,dataCy:"nt-detail-panel-id"}),r.a.createElement(zi,{label:t._({id:"Tags for the Annotation"}),value:d.annotation_tags,dataCy:"nt-detail-"}),r.a.createElement(xi,{label:t._({id:"Disable SSL Verification"}),value:d.grafana_no_verify_ssl?t._({id:"True"}):t._({id:"False"}),dataCy:"nt-detail-disable-ssl"})),"irc"===a.notification_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xi,{label:t._({id:"IRC Server Port"}),value:d.port,dataCy:"nt-detail-irc-port"}),r.a.createElement(xi,{label:t._({id:"IRC Server Address"}),value:d.server,dataCy:"nt-detail-irc-server"}),r.a.createElement(xi,{label:t._({id:"IRC Nick"}),value:d.nickname,dataCy:"nt-detail-irc-nickname"}),r.a.createElement(zi,{label:t._({id:"Destination Channels or Users"}),value:d.targets,dataCy:"nt-detail-channels"}),r.a.createElement(xi,{label:t._({id:"SSL Connection"}),value:d.use_ssl?t._({id:"True"}):t._({id:"False"}),dataCy:"nt-detail-irc-ssl"})),"mattermost"===a.notification_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xi,{label:t._({id:"Target URL"}),value:d.mattermost_url,dataCy:"nt-detail-mattermost-url"}),r.a.createElement(xi,{label:t._({id:"Username"}),value:d.mattermost_username,dataCy:"nt-detail-mattermost-username"}),r.a.createElement(xi,{label:t._({id:"Channel"}),value:d.mattermost_channel,dataCy:"nt-detail-mattermost_channel"}),r.a.createElement(xi,{label:t._({id:"Icon URL"}),value:d.mattermost_icon_url,dataCy:"nt-detail-mattermost-icon-url"}),r.a.createElement(xi,{label:t._({id:"Disable SSL Verification"}),value:d.mattermost_no_verify_ssl?t._({id:"True"}):t._({id:"False"}),dataCy:"nt-detail-disable-ssl"})),"pagerduty"===a.notification_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xi,{label:t._({id:"Pagerduty Subdomain"}),value:d.subdomain,dataCy:"nt-detail-pagerduty-subdomain"}),r.a.createElement(xi,{label:t._({id:"API Service/Integration Key"}),value:d.service_key,dataCy:"nt-detail-pagerduty-service-key"}),r.a.createElement(xi,{label:t._({id:"Client Identifier"}),value:d.client_name,dataCy:"nt-detail-pagerduty-client-name"})),"rocketchat"===a.notification_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xi,{label:t._({id:"Target URL"}),value:d.rocketchat_url,dataCy:"nt-detail-rocketchat-url"}),r.a.createElement(xi,{label:t._({id:"Username"}),value:d.rocketchat_username,dataCy:"nt-detail-rocketchat-username"}),r.a.createElement(xi,{label:t._({id:"Icon URL"}),value:d.rocketchat_icon_url,dataCy:"nt-detail-rocketchat-icon-url"}),r.a.createElement(xi,{label:t._({id:"Disable SSL Verification"}),value:d.rocketchat_no_verify_ssl?t._({id:"True"}):t._({id:"False"}),dataCy:"nt-detail-disable-ssl"})),"slack"===a.notification_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(zi,{label:t._({id:"Destination Channels"}),value:d.channels,dataCy:"nt-detail-slack-channels"}),r.a.createElement(xi,{label:t._({id:"Notification Color"}),value:d.hex_color,dataCy:"nt-detail-slack-color"})),"twilio"===a.notification_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xi,{label:t._({id:"Source Phone Number"}),value:d.from_number,dataCy:"nt-detail-twilio-source-phone"}),r.a.createElement(zi,{label:t._({id:"Destination SMS Number(s)"}),value:d.to_numbers,dataCy:"nt-detail-twilio-destination-numbers"}),r.a.createElement(xi,{label:t._({id:"Account SID"}),value:d.account_sid,dataCy:"nt-detail-twilio-account-sid"})),"webhook"===a.notification_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xi,{label:t._({id:"Username"}),value:d.username,dataCy:"nt-detail-webhook-password"}),r.a.createElement(xi,{label:t._({id:"Target URL"}),value:d.url,dataCy:"nt-detail-webhook-url"}),r.a.createElement(xi,{label:t._({id:"Disable SSL Verification"}),value:d.disable_ssl_verification?t._({id:"True"}):t._({id:"False"}),dataCy:"nt-detail-disable-ssl"}),r.a.createElement(xi,{label:t._({id:"HTTP Method"}),value:d.http_method,dataCy:"nt-detail-webhook-http-method"}),r.a.createElement(gk,{label:t._({id:"HTTP Headers"}),value:JSON.stringify(d.headers),mode:"json",rows:"6",dataCy:"nt-detail-webhook-headers"})),r.a.createElement(Li,{label:t._({id:"\u5df2\u521b\u5efa"}),date:o,user:null===m||void 0===m?void 0:m.created_by}),r.a.createElement(Li,{label:t._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:u,user:null===m||void 0===m?void 0:m.modified_by}),ck(f,j)&&r.a.createElement(Ck,{messages:f,defaults:j,type:a.notification_type,i18n:t})),r.a.createElement(Yc,null,m.user_capabilities&&m.user_capabilities.edit&&r.a.createElement(O.a,{component:s.b,to:"/notification_templates/".concat(a.id,"/edit"),"aria-label":t._({id:"Edit"})},t._({id:"Edit"})),m.user_capabilities&&m.user_capabilities.delete&&r.a.createElement(Qc,{name:a.name,modalTitle:t._({id:"Delete Notification"}),onConfirm:_,isDisabled:h},t._({id:"\u5220\u9664"}))),y&&r.a.createElement(Zt,{isOpen:y,variant:"error",title:t._({id:"Error!"}),onClose:g},t._({id:"Failed to delete notification."}),r.a.createElement(ua,{error:y})))}));function xk(e){var t=e.template,a=e.defaultMessages,i="/notification_templates/".concat(t.id,"/details"),l=Object(c.g)(),o=Object(n.useState)(null),s=Object(f.a)(o,2),u=s[0],d=s[1],m=function(){var e=Object(b.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt.update(t.id,a);case 3:l.push(i),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(_k,{template:t,defaultMessages:a,onSubmit:m,onCancel:function(){l.push(i)},submitError:u}))}xk.contextTypes={custom_virtualenvs:Dn.a.arrayOf(Dn.a.string)};var Tk=xk;var Ik=Object(u.withI18n)()((function(e){var t=e.setBreadcrumb,a=e.i18n,i=Object(c.i)().id,l=Object(c.j)(),o=Object(c.h)(),u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n,r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([lt.readDetail(i),lt.readOptions()]);case 2:return a=e.sent,n=Object(f.a)(a,2),r=n[0],l=n[1],t(r.data),e.abrupt("return",{template:r.data,defaultMessages:l.data.actions.POST.messages});case 8:case"end":return e.stop()}}),e)}))),[i,t]),{template:null,defaultMessages:null}),d=u.result,m=d.template,v=d.defaultMessages,_=u.isLoading,h=u.error,E=u.request;if(Object(n.useEffect)((function(){E()}),[E,o.pathname]),!_&&h)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:h},404===h.response.status&&r.a.createElement("span",null,a._({id:"Notification Template not found."})," ",r.a.createElement(s.b,{to:"/notification_templates"},a._({id:"View all Notification Templates."}))))));var y=!o.pathname.endsWith("edit"),g=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),a._({id:"Back to Notifications"})),link:"/notification_templates",id:99},{name:a._({id:"Details"}),link:"".concat(l.url,"/details"),id:0}];return r.a.createElement(La.a,null,r.a.createElement(na.a,null,y&&r.a.createElement(us,{tabsArray:g}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/notification_templates/:id",to:"/notification_templates/:id/details",exact:!0}),_&&r.a.createElement(Nr,null),m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{path:"/notification_templates/:id/edit"},r.a.createElement(Tk,{template:m,defaultMessages:v})),r.a.createElement(c.b,{path:"/notification_templates/:id/details"},r.a.createElement(Sk,{template:m,defaultMessages:v}))))))}));var Ak=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.j)(),i=Object(n.useState)({"/notification_templates":t._({id:"Notification Templates"}),"/notification_templates/add":t._({id:"Create New Notification Template"})}),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(n.useCallback)((function(e){var a,n=e.id;s((a={"/notification_templates":t._({id:"Notification Templates"}),"/notification_templates/add":t._({id:"Create New Notification Template"})},Object(gr.a)(a,"/notification_templates/".concat(n),e.name),Object(gr.a)(a,"/notification_templates/".concat(n,"/edit"),t._({id:"Edit Details"})),Object(gr.a)(a,"/notification_templates/".concat(n,"/details"),t._({id:"Details"})),a))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"notification_template",breadcrumbConfig:o}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"".concat(a.url,"/add")},r.a.createElement(Ek,null)),r.a.createElement(c.b,{path:"".concat(a.url,"/:id")},r.a.createElement(Ik,{setBreadcrumb:u})),r.a.createElement(c.b,{path:"".concat(a.url)},r.a.createElement(nk,null))))}));var Rk=Object(u.withI18n)()((function(e){var t=e.organization,a=e.isSelected,n=e.onSelect,i=e.rowIndex,l=e.detailUrl,o=e.i18n,c="check-action-".concat(t.id);return r.a.createElement(Yr.a,{id:"org-row-".concat(t.id)},r.a.createElement(zr.a,{select:{rowIndex:i,isSelected:a,onSelect:n,disable:!1},dataLabel:o._({id:"\u5df2\u9009\u62e9"})}),r.a.createElement(zr.a,{id:c,dataLabel:o._({id:"\u540d\u79f0"})},r.a.createElement(s.b,{to:"".concat(l)},r.a.createElement("b",null,t.name))),r.a.createElement(zr.a,{dataLabel:o._({id:"Members"})},t.summary_fields.related_field_counts.users),r.a.createElement(zr.a,{dataLabel:o._({id:"\u56e2\u961f"})},t.summary_fields.related_field_counts.teams),r.a.createElement(Vr,{dataLabel:o._({id:"Actions"})},r.a.createElement(Qr,{visible:t.summary_fields.user_capabilities.edit,tooltip:o._({id:"\u7f16\u8f91\u7ec4\u7ec7"})},r.a.createElement(O.a,{"aria-label":o._({id:"\u7f16\u8f91\u7ec4\u7ec7"}),variant:"plain",component:s.b,to:"/organizations/".concat(t.id,"/edit")},r.a.createElement(Mo.a,null)))))})),Nk=R("organization",{page:1,page_size:20,order_by:"name"});var Dk=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l=Object(n.useState)([]),o=Object(f.a)(l,2),s=o[0],u=o[1],d="".concat(i.url,"/add"),m=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(Nk,a.search),e.next=3,Promise.all([ct.read(r),ct.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{organizations:o.data.results,organizationCount:o.data.count,actions:c.data.actions,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{organizations:[],organizationCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),v=m.result,_=v.organizations,h=v.organizationCount,E=v.actions,y=v.relatedSearchableKeys,g=v.searchableKeys,O=m.error,j=m.isLoading,k=m.request;Object(n.useEffect)((function(){k()}),[k]);var w=s.length===_.length&&s.length>0,C=en(Object(n.useCallback)((function(){return Promise.all(s.map((function(e){var t=e.id;return ct.destroy(t)})))}),[s]),{qsConfig:Nk,allItemsSelected:w,fetchItems:k}),S=C.isLoading,x=C.deleteItems,T=C.deletionError,I=C.clearDeletionError,R=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:u([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=S||j,L=E&&E.POST,P=function(e){u(e?Object(A.a)(_):[])};return r.a.createElement(r.a.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Fr,{contentError:O,hasContentLoading:D,items:_,itemCount:h,pluralizedItemName:t._({id:"Organizations"}),qsConfig:Nk,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSearchableKeys:g,toolbarRelatedSearchableKeys:y,headerRow:r.a.createElement(Zr,{qsConfig:Nk},r.a.createElement($r,{sortKey:"name"},t._({id:"\u540d\u79f0"})),r.a.createElement($r,null,t._({id:"Members"})),r.a.createElement($r,null,t._({id:"\u56e2\u961f"})),r.a.createElement($r,null,t._({id:"Actions"}))),renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:w,onSelectAll:P,qsConfig:Nk,additionalControls:[].concat(Object(A.a)(L?[r.a.createElement(Po,{key:"add",linkTo:d})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:R,itemsToDelete:s,pluralizedItemName:"Organizations"})])}))},renderRow:function(e,t){return r.a.createElement(Rk,{key:e.id,organization:e,rowIndex:t,detailUrl:"".concat(i.url,"/").concat(e.id),isSelected:s.some((function(t){return t.id===e.id})),onSelect:function(){return t=e,void(s.some((function(e){return e.id===t.id}))?u(s.filter((function(e){return e.id!==t.id}))):u(s.concat(t)));var t}})},emptyStateControls:L?r.a.createElement(Po,{key:"add",linkTo:d}):null}))),r.a.createElement(Zt,{isOpen:T,variant:"error",title:t._({id:"Error!"}),onClose:I},t._({id:"Failed to delete one or more organizations."}),r.a.createElement(ua,{error:T})))})),Lk=["organization","onCancel","onSubmit","submitError"];function Pk(e){var t=e.i18n,a=e.instanceGroups,i=e.setInstanceGroups,l=Object(Va.c)().setFieldValue,o=Object(Va.b)("custom_virtualenv"),c=Object(f.a)(o,1)[0],s=Tt(),u=s.license_info,d=void 0===u?{}:u,m=s.me,p=void 0===m?{}:m,b=Object(Va.b)("galaxy_credentials"),v=Object(f.a)(b,3),_=v[0],h=v[1],E=v[2],y={label:t._({id:"Use Default Ansible Environment"}),value:"/var/lib/awx/venv/ansible/",key:"default"},g=Object(n.useContext)(Ct).custom_virtualenvs,O=Object(n.useCallback)((function(e){l("galaxy_credentials",e)}),[l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"org-name",name:"name",type:"text",label:t._({id:"\u540d\u79f0"}),validate:Yo(null,t),isRequired:!0}),r.a.createElement(Tl,{id:"org-description",name:"description",type:"text",label:t._({id:"\u63cf\u8ff0"})}),"open"!==(null===d||void 0===d?void 0:d.license_type)&&r.a.createElement(Tl,{id:"org-max_hosts",name:"max_hosts",type:"number",label:t._({id:"Max Hosts"}),tooltip:t._({id:"The maximum number of hosts allowed to be managed by this organization. Value defaults to 0 which means no limit. Refer to the Ansible documentation for more details."}),validate:$o(0,Number.MAX_SAFE_INTEGER,t),me:p,isDisabled:!p.is_superuser}),g&&g.length>1&&r.a.createElement(Wi.a,{fieldId:"org-custom-virtualenv",label:t._({id:"Ansible Environment"})},r.a.createElement(Fc,Object.assign({id:"org-custom-virtualenv",data:[y].concat(Object(A.a)(g.filter((function(e){return e!==y.value})).map((function(e){return{value:e,label:e,key:e}}))))},c))),r.a.createElement(zb,{value:a,onChange:i,tooltip:t._({id:"Select the Instance Groups for this Organization to run on."})}),r.a.createElement(lf,{credentialTypeNamespace:"galaxy_api_token",label:t._({id:"Galaxy Credentials"}),helperTextInvalid:h.error,isValid:!h.touched||!h.error,onBlur:function(){return E.setTouched()},onChange:O,value:_.value,multiple:!0}))}function Uk(e){var t=e.organization,a=e.onCancel,i=e.onSubmit,l=e.submitError,c=Object(o.a)(e,Lk),s=Object(n.useState)(null),u=Object(f.a)(s,2),d=u[0],m=u[1],v=Object(n.useState)(!0),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Object(n.useState)([]),g=Object(f.a)(y,2),O=g[0],j=g[1],k=Object(n.useState)([]),w=Object(f.a)(k,2),C=w[0],S=w[1],x=function(){a()};return Object(n.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id){e.next=4;break}return E(!1),e.abrupt("return");case 4:return m(null),E(!0),e.prev=6,e.next=9,ct.readInstanceGroups(a);case 9:n=e.sent,r=n.data.results,j(i=void 0===r?[]:r),S(i),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),m(e.t0);case 19:return e.prev=19,E(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[6,16,19,22]])})))()}),[t]),d?r.a.createElement(za,{error:d}):h?r.a.createElement(Nr,null):r.a.createElement(Va.a,{initialValues:{name:t.name,description:t.description,custom_virtualenv:t.custom_virtualenv||"",max_hosts:t.max_hosts||"0",galaxy_credentials:t.galaxy_credentials||[]},onSubmit:function(e){var t=Jv(O,C),a=t.added,n=t.removed,r=a.map((function(e){return e.id})),l=n.map((function(e){return e.id}));"number"===typeof e.max_hosts&&"undefined"!==e.max_hosts||(e.max_hosts=0),i(e,r,l)}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(Pk,Object.assign({instanceGroups:C,setInstanceGroups:S},c)),r.a.createElement(Yl,{error:l}),r.a.createElement(cc,{onCancel:x,onSubmit:e.handleSubmit})))}))}Uk.defaultProps={organization:{name:"",description:"",max_hosts:"0",custom_virtualenv:""},submitError:null},Uk.contextTypes={custom_virtualenvs:Dn.a.arrayOf(Dn.a.string)};var Gk=Object(u.withI18n)()(Uk);function qk(){var e=Object(c.g)(),t=Object(n.useState)(null),a=Object(f.a)(t,2),i=a[0],l=a[1],o=function(){var t=Object(b.a)(p.a.mark((function t(a,n){var r,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ct.create(a);case 3:return r=t.sent,i=r.data,t.next=7,Promise.all(n.map((function(e){return ct.associateInstanceGroup(i.id,e)})).concat(a.galaxy_credentials.map((function(e){var t=e.id;return ct.associateGalaxyCredential(i.id,t)}))));case 7:e.push("/organizations/".concat(i.id)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),l(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Gk,{onSubmit:o,onCancel:function(){e.push("/organizations")},submitError:i}))))}qk.contextTypes={custom_virtualenvs:Dn.a.arrayOf(Dn.a.string)};var Fk=qk;var zk=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.organization,i=Object(c.j)().params.id,l=a.name,o=a.description,u=a.custom_virtualenv,d=a.max_hosts,m=a.created,v=a.modified,_=a.summary_fields,h=a.galaxy_credentials,E=Object(n.useState)(null),y=Object(f.a)(E,2),g=y[0],j=y[1],k=Object(n.useState)(!0),w=Object(f.a)(k,2),C=w[0],S=w[1],x=Object(n.useState)([]),T=Object(f.a)(x,2),I=T[0],A=T[1],R=Object(c.g)(),N=Tt().license_info,D=void 0===N?{}:N;Object(n.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(null),S(!0),e.prev=2,e.next=5,ct.readInstanceGroups(i);case 5:t=e.sent,a=t.data.results,A(void 0===a?[]:a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),j(e.t0);case 14:return e.prev=14,S(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))()}),[i]);var L=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.destroy(i);case 2:R.push("/organizations");case 3:case"end":return e.stop()}}),e)}))),[i,R])),P=L.request,U=L.isLoading,G=Qa(L.error),q=G.error,F=G.dismissError;return C?r.a.createElement(Nr,null):g?r.a.createElement(za,{error:g}):r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:t._({id:"\u540d\u79f0"}),value:l,dataCy:"organization-detail-name"}),r.a.createElement(xi,{label:t._({id:"\u63cf\u8ff0"}),value:o}),"open"!==(null===D||void 0===D?void 0:D.license_type)&&r.a.createElement(xi,{label:t._({id:"Max Hosts"}),value:"".concat(d)}),r.a.createElement(xi,{label:t._({id:"Ansible Environment"}),value:u}),r.a.createElement(Li,{label:t._({id:"\u5df2\u521b\u5efa"}),date:m,user:_.created_by}),r.a.createElement(Li,{label:t._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:v,user:_.modified_by}),I&&I.length>0&&r.a.createElement(xi,{fullWidth:!0,label:t._({id:"Instance Groups"}),value:r.a.createElement(fc,{numChips:5,totalChips:I.length},I.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),h&&h.length>0&&r.a.createElement(xi,{fullWidth:!0,label:t._({id:"Galaxy Credentials"}),value:r.a.createElement(fc,{numChips:5,totalChips:h.length},h.map((function(e){return r.a.createElement(du,{credential:e,key:e.id,isReadOnly:!0})})))})),r.a.createElement(Yc,null,_.user_capabilities.edit&&r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,to:"/organizations/".concat(i,"/edit")},t._({id:"Edit"})),_.user_capabilities&&_.user_capabilities.delete&&r.a.createElement(Qc,{name:l,modalTitle:t._({id:"Delete Organization"}),onConfirm:P,isDisabled:U},t._({id:"\u5220\u9664"}))),q&&r.a.createElement(Zt,{isOpen:q,variant:"error",title:t._({id:"Error!"}),onClose:F},t._({id:"Failed to delete organization."}),r.a.createElement(ua,{error:q})))}));function Mk(e){var t=e.organization,a="/organizations/".concat(t.id,"/details"),i=Object(c.g)(),l=Object(n.useState)(null),o=Object(f.a)(l,2),s=o[0],u=o[1],d=function(){var e=Object(b.a)(p.a.mark((function e(n,r,l){var o,c,s,d,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=Jv(t.galaxy_credentials,n.galaxy_credentials),c=o.added,s=o.removed,d=c.map((function(e){return e.id})),m=s.map((function(e){return e.id})),e.next=6,ct.update(t.id,n);case 6:return e.next=8,Promise.all(r.map((function(e){return ct.associateInstanceGroup(t.id,e)})).concat(d.map((function(e){return ct.associateGalaxyCredential(t.id,e)}))));case 8:return e.next=10,Promise.all(l.map((function(e){return ct.disassociateInstanceGroup(t.id,e)})).concat(m.map((function(e){return ct.disassociateGalaxyCredential(t.id,e)}))));case 10:i.push(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),u(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(Gk,{organization:t,onSubmit:d,onCancel:function(){i.push(a)},submitError:s}))}Mk.contextTypes={custom_virtualenvs:Dn.a.arrayOf(Dn.a.string)};var Kk=Mk;var Vk=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.team,n=e.detailUrl,i="check-action-".concat(a.id);return r.a.createElement(ho.a,{"aria-labelledby":i,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"divider"},r.a.createElement("span",null,r.a.createElement(s.b,{to:"".concat(n,"/details")},r.a.createElement("b",{"aria-label":t._({id:"team name"})},a.name))))]}),r.a.createElement(Fo.a,{"aria-label":"actions","aria-labelledby":i,id:i},a.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:t._({id:"Edit Team"}),position:"top"},r.a.createElement(O.a,{"aria-label":t._({id:"Edit Team"}),css:"grid-column: 2",variant:"plain",component:s.b,to:"".concat(n,"/edit")},r.a.createElement(Mo.a,null))))))})),Hk=R("team",{page:1,page_size:5,order_by:"name"});var Bk=Object(u.withI18n)()((function(e){var t=e.id,a=e.i18n,i=Object(c.h)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n,r,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(Hk,i.search),e.next=3,Promise.all([ct.readTeams(t,r),ct.readTeamsOptions(t)]);case 3:return l=e.sent,o=Object(f.a)(l,2),c=o[0],s=o[1],e.abrupt("return",{teams:c.data.results,count:c.data.count,relatedSearchableKeys:((null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=s.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=s.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[t,i]),{teams:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),o=l.result,s=o.teams,u=o.count,d=o.relatedSearchableKeys,m=o.searchableKeys,v=l.error,_=l.isLoading,h=l.request;return Object(n.useEffect)((function(){h()}),[h]),r.a.createElement(To,{contentError:v,hasContentLoading:_,items:s,itemCount:u,pluralizedItemName:a._({id:"\u56e2\u961f"}),qsConfig:Hk,toolbarSearchColumns:[{name:a._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:a._({id:"Created by (username)"}),key:"created_by__username__icontains"},{name:a._({id:"Modified by (username)"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:a._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:m,toolbarRelatedSearchableKeys:d,renderItem:function(e){return r.a.createElement(Vk,{key:e.id,value:e.name,team:e,detailUrl:"/teams/".concat(e.id)})}})}));var Wk=Object(u.withI18n)()(Object(c.k)((function(e){var t=e.i18n,a=e.setBreadcrumb,i=e.me,l=Object(c.h)(),o=Object(c.i)().id,u=Object(c.j)(),d=Object(n.useRef)(!0),m=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ct.readDetail(o),ct.readGalaxyCredentials(o)]);case 2:return t=e.sent,n=Object(f.a)(t,2),r=n[0].data,i=n[1],r.galaxy_credentials=i.data.results,a(r),e.abrupt("return",{organization:r});case 9:case"end":return e.stop()}}),e)}))),[a,o]),{organization:null}),v=m.result.organization,_=m.isLoading,h=m.error,E=m.request,y=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ct.read({page_size:1,role_level:"notification_admin_role"}),ct.read({id:o,role_level:"auditor_role"}),ct.read({id:o,role_level:"admin_role"})]);case 2:return t=e.sent,a=Object(f.a)(t,3),n=a[0],r=a[1],i=a[2],e.abrupt("return",{isNotifAdmin:n.data.results.length>0,isAuditorOfThisOrg:r.data.results.length>0,isAdminOfThisOrg:i.data.results.length>0});case 8:case"end":return e.stop()}}),e)}))),[o]),{isNotifAdmin:!1,isAuditorOfThisOrg:!1,isAdminOfThisOrg:!1}),g=y.result,O=g.isNotifAdmin,j=g.isAuditorOfThisOrg,k=g.isAdminOfThisOrg,w=y.isLoading,C=y.error,S=y.request;Object(n.useEffect)((function(){E(),S()}),[E,S]),Object(n.useEffect)((function(){d.current?d.current=!1:l.pathname==="/organizations/".concat(o,"/details")&&E()}),[E,o,l.pathname]);var x=i.is_system_auditor||O||j,T=O&&(i.is_system_auditor||j||k),I=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Organizations"})),link:"/organizations",id:99},{name:t._({id:"Details"}),link:"".concat(u.url,"/details"),id:0},{name:t._({id:"Access"}),link:"".concat(u.url,"/access"),id:1},{name:t._({id:"\u56e2\u961f"}),link:"".concat(u.url,"/teams"),id:2}];x&&I.push({name:t._({id:"Notifications"}),link:"".concat(u.url,"/notifications"),id:3});var A=!0;return l.pathname.endsWith("edit")&&(A=!1),!_&&h?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:h},404===h.response.status&&r.a.createElement("span",null,t._({id:"Organization not found."})," ",r.a.createElement(s.b,{to:"/organizations"},t._({id:"View all Organizations."})))))):!w&&C?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:C}))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,A&&r.a.createElement(us,{tabsArray:I}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/organizations/:id",to:"/organizations/:id/details",exact:!0}),v&&r.a.createElement(c.b,{path:"/organizations/:id/edit"},r.a.createElement(Kk,{organization:v})),v&&r.a.createElement(c.b,{path:"/organizations/:id/details"},r.a.createElement(zk,{organization:v})),v&&r.a.createElement(c.b,{path:"/organizations/:id/access"},r.a.createElement(iu,{resource:v,apiModel:ct})),r.a.createElement(c.b,{path:"/organizations/:id/teams"},r.a.createElement(Bk,{id:Number(u.params.id)})),x&&r.a.createElement(c.b,{path:"/organizations/:id/notifications"},r.a.createElement(jE,{id:Number(u.params.id),canToggleNotifications:T,apiModel:ct,showApprovalsToggle:!0})),r.a.createElement(c.b,{key:"not-found",path:"*"},!_&&!w&&r.a.createElement(za,{isNotFound:!0},u.params.id&&r.a.createElement(s.b,{to:"/organizations/".concat(u.params.id,"/details")},t._({id:"View Organization Details"})))),",")))})));var Jk=Object(u.withI18n)()(Object(c.k)((function(e){var t=e.i18n,a=Object(c.j)(),i=Object(n.useState)({"/organizations":t._({id:"Organizations"}),"/organizations/add":t._({id:"Create New Organization"})}),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(n.useCallback)((function(e){var a;if(e){var n=(a={"/organizations":t._({id:"Organizations"}),"/organizations/add":t._({id:"Create New Organization"})},Object(gr.a)(a,"/organizations/".concat(e.id),"".concat(e.name)),Object(gr.a)(a,"/organizations/".concat(e.id,"/edit"),t._({id:"Edit Details"})),Object(gr.a)(a,"/organizations/".concat(e.id,"/details"),t._({id:"Details"})),Object(gr.a)(a,"/organizations/".concat(e.id,"/access"),t._({id:"Access"})),Object(gr.a)(a,"/organizations/".concat(e.id,"/teams"),t._({id:"\u56e2\u961f"})),Object(gr.a)(a,"/organizations/".concat(e.id,"/notifications"),t._({id:"Notifications"})),a);s(n)}}),[t]);return r.a.createElement(n.Fragment,null,r.a.createElement(hs,{streamType:"organization",breadcrumbConfig:o}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"".concat(a.path,"/add")},r.a.createElement(Fk,null)),r.a.createElement(c.b,{path:"".concat(a.path,"/:id")},r.a.createElement(xt,null,(function(e){var t=e.me;return r.a.createElement(Wk,{setBreadcrumb:u,me:t||{}})}))),r.a.createElement(c.b,{path:"".concat(a.path)},r.a.createElement(Dk,null))))})));var Yk=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).handleCopyClick=function(e){var t=n.props,a=t.stringToCopy,r=t.switchDelay;n.timer&&(window.clearTimeout(n.timer),n.setState({copied:!1})),function(e,t){var a=e.currentTarget.parentElement,n=document.createElement("input");n.value=t,a.appendChild(n),n.select(),document.execCommand("copy"),a.removeChild(n)}(e,a),n.setState({copied:!0},(function(){n.timer=window.setTimeout((function(){n.setState({copied:!1}),n.timer=null}),r)}))},n.state={copied:!1},n.handleCopyClick=n.handleCopyClick.bind(Object(Z.a)(n)),n}return Object(S.a)(a,[{key:"render",value:function(){var e=this.props,t=e.copyTip,a=e.entryDelay,n=e.exitDelay,i=e.copiedSuccessTip,l=e.isDisabled,o=this.state.copied;return r.a.createElement(Ea.a,{entryDelay:a,exitDelay:n,trigger:"mouseenter focus click",content:o?i:t},r.a.createElement(O.a,{isDisabled:l,variant:"plain",onClick:this.handleCopyClick,"aria-label":t},r.a.createElement(fd.a,null)))}}]),a}(r.a.Component);Yk.defaultProps={entryDelay:100,exitDelay:1600,switchDelay:2e3};var Xk=Yk;var Zk=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.projectId,i=Object(c.j)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut.sync(a);case 2:case"end":return e.stop()}}),e)}))),[a]),null),o=l.request,s=Qa(l.error),u=s.error,d=s.dismissError,m=i.url.endsWith("/details");return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{"aria-label":t._({id:"\u540c\u6b65\u9879\u76ee"}),variant:m?"secondary":"plain",onClick:o},i.url.endsWith("/details")?t._({id:"\u540c\u6b65"}):r.a.createElement(Hh.a,null)),u&&r.a.createElement(Zt,{isOpen:u,variant:"error",title:t._({id:"Error!"}),onClose:d},t._({id:"Failed to sync project."}),r.a.createElement(ua,{error:u})))})),$k=Object(j.b)(Fo.a).withConfig({displayName:"ProjectListItem__DataListAction",componentId:"sc-k4ofl4-0"})(["align-items:center;display:grid;grid-gap:16px;grid-template-columns:repeat(3,40px);"]),Qk=j.b.span.withConfig({displayName:"ProjectListItem__Label",componentId:"sc-k4ofl4-1"})(["color:var(--pf-global--disabled-color--100);"]);var ew=Object(u.withI18n)()((function(e){var t,a=e.project,i=e.isSelected,l=e.onSelect,o=e.detailUrl,c=e.i18n,u=e.fetchProjects,d=Object(n.useState)(!1),m=Object(f.a)(d,2),v=m[0],_=m[1],h=Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut.copy(a.id,{name:"".concat(a.name," @ ").concat(li())});case 2:return e.next=4,u();case 4:case"end":return e.stop()}}),e)}))),[a.id,a.name,u]),E=Object(n.useCallback)((function(){_(!0)}),[]),y=Object(n.useCallback)((function(){_(!1)}),[]),g="check-action-".concat(a.id);return r.a.createElement(ho.a,{key:a.id,"aria-labelledby":g,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-project-".concat(a.id),checked:i,onChange:l,"aria-labelledby":g}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"status",isFilled:!1},a.summary_fields.last_job&&r.a.createElement(Ea.a,{position:"top",content:(t=a.summary_fields.last_job,r.a.createElement(n.Fragment,null,r.a.createElement("div",null,c._({id:"MOST RECENT SYNC"})),r.a.createElement("div",null,c._({id:"JOB ID:"})," ",t.id),r.a.createElement("div",null,c._({id:"STATUS:"})," ",t.status.toUpperCase()),t.finished&&r.a.createElement("div",null,c._({id:"FINISHED:"})," ",ni(t.finished)))),key:a.summary_fields.last_job.id},r.a.createElement(s.b,{to:"/jobs/project/".concat(a.summary_fields.last_job.id)},r.a.createElement(hp,{status:a.summary_fields.last_job.status})))),r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{id:g,to:"".concat(o)},r.a.createElement("b",null,a.name))),r.a.createElement(ko,{key:"type"},""===a.scm_type?c._({id:"Manual"}):as(a.scm_type)),r.a.createElement(ko,{key:"revision"},a.scm_revision.substring(0,7),!a.scm_revision&&r.a.createElement(Qk,{"aria-label":c._({id:"copy to clipboard disabled"})},c._({id:"Sync for revision"})),r.a.createElement(Xk,{isDisabled:!a.scm_revision,stringToCopy:a.scm_revision,copyTip:c._({id:"Copy full revision to clipboard."}),copiedSuccessTip:c._({id:"Successfully copied to clipboard!"})}))]}),r.a.createElement($k,{"aria-label":"actions","aria-labelledby":g,id:g},a.summary_fields.user_capabilities.start&&r.a.createElement(Ea.a,{content:c._({id:"\u540c\u6b65\u9879\u76ee"}),position:"top"},r.a.createElement(Zk,{projectId:a.id})),a.summary_fields.user_capabilities.edit?r.a.createElement(Ea.a,{content:c._({id:"\u7f16\u8f91\u9879\u76ee"}),position:"top"},r.a.createElement(O.a,{isDisabled:v,"aria-label":c._({id:"\u7f16\u8f91\u9879\u76ee"}),variant:"plain",component:s.b,to:"/projects/".concat(a.id,"/edit")},r.a.createElement(Mo.a,null))):"",a.summary_fields.user_capabilities.copy&&r.a.createElement(hd,{copyItem:h,isDisabled:v,onCopyStart:E,onCopyFinish:y,helperText:{tooltip:c._({id:"\u590d\u5236\u9879\u76ee"}),errorMessage:c._({id:"Failed to copy project."})}}))))})),tw=R("project",{page:1,page_size:20,order_by:"name"});var aw=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l=Object(n.useState)([]),o=Object(f.a)(l,2),s=o[0],u=o[1],m=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(tw,a.search),e.next=3,Promise.all([ut.read(r),ut.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{results:o.data.results,itemCount:o.data.count,actions:c.data.actions,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{results:[],itemCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),v=m.result,_=v.results,h=v.itemCount,E=v.actions,y=v.relatedSearchableKeys,g=v.searchableKeys,O=m.error,j=m.isLoading,k=m.request;Object(n.useEffect)((function(){k()}),[k]);var w=function(e){var t=Object(n.useState)(e),a=Object(f.a)(t,2),r=a[0],i=a[1],l=Yp({jobs:["status_changed"],control:["limit_reached_1"]});return Object(n.useEffect)((function(){i(e)}),[e]),Object(n.useEffect)((function(){if((null===l||void 0===l?void 0:l.unified_job_id)&&"project_update"===l.type){var e=r.findIndex((function(e){return e.id===l.project_id}));if(-1!==e){var t=r[e],a=Object(d.a)(Object(d.a)({},t),{},{summary_fields:Object(d.a)(Object(d.a)({},t.summary_fields),{},{last_job:{id:l.unified_job_id,status:l.status,finished:l.finished}})});i([].concat(Object(A.a)(r.slice(0,e)),[a],Object(A.a)(r.slice(e+1))))}}}),[l]),r}(_),C=s.length===w.length&&s.length>0,S=en(Object(n.useCallback)((function(){return Promise.all(s.map((function(e){var t=e.id;return ut.destroy(t)})))}),[s]),{qsConfig:tw,allItemsSelected:C,fetchItems:k}),x=S.isLoading,T=S.deleteItems,I=S.deletionError,R=S.clearDeletionError,D=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:u([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=x||j,P=E&&E.POST,U=function(e){u(e?Object(A.a)(w):[])},G=function(e){s.some((function(t){return t.id===e.id}))?u(s.filter((function(t){return t.id!==e.id}))):u(s.concat(e))};return r.a.createElement(n.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:O,hasContentLoading:L,items:w,itemCount:h,pluralizedItemName:t._({id:"Projects"}),qsConfig:tw,onRowClick:G,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"\u7c7b\u578b"}),key:"or__scm_type",options:[["",t._({id:"Manual"})],["git",t._({id:"Git"})],["svn",t._({id:"Subversion"})],["archive",t._({id:"Remote Archive"})],["insights",t._({id:"Red Hat Insights"})]]},{name:t._({id:"Source Control URL"}),key:"scm_url__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"}],toolbarSearchableKeys:g,toolbarRelatedSearchableKeys:y,toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:C,onSelectAll:U,qsConfig:tw,additionalControls:[].concat(Object(A.a)(P?[r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:D,itemsToDelete:s,pluralizedItemName:t._({id:"Projects"})})])}))},renderItem:function(e){return r.a.createElement(ew,{fetchProjects:k,key:e.id,project:e,detailUrl:"".concat(i.url,"/").concat(e.id),isSelected:s.some((function(t){return t.id===e.id})),onSelect:function(){return G(e)}})},emptyStateControls:P?r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")}):null}))),r.a.createElement(Zt,{isOpen:I,variant:"error","aria-label":t._({id:"Deletion Error"}),title:t._({id:"Error!"}),onClose:R},t._({id:"Failed to delete one or more projects."}),r.a.createElement(ua,{error:I})))})),nw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.tooltip;return r.a.createElement(Tl,{id:"project-scm-url",isRequired:!0,label:t._({id:"Source Control URL"}),name:"scm_url",tooltip:a,tooltipMaxWidth:"350px",type:"text",validate:Yo(null,t)})})),rw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.label;return r.a.createElement(Tl,{id:"project-scm-branch",name:"scm_branch",type:"text",label:a,tooltip:t._({id:"Branch to checkout. In addition to branches, you can input tags, commit hashes, and arbitrary refs. Some commit hashes and refs may not be available unless you also provide a custom refspec."})})})),iw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.credential,i=e.onCredentialSelection,l=Object(Va.c)().setFieldValue,o=Object(n.useCallback)((function(e){i("scm",e),l("credential",e?e.id:"")}),[i,l]);return r.a.createElement(lf,{credentialTypeId:a.typeId,label:t._({id:"Source Control Credential"}),value:a.value,onChange:o})})),lw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.scmUpdateOnLaunch,n=e.hideAllowOverride;return r.a.createElement(Hl,null,r.a.createElement(Wi.a,{fieldId:"project-option-checkboxes",label:t._({id:"Options"})},r.a.createElement(Bl,null,r.a.createElement(Rl,{id:"option-scm-clean",name:"scm_clean",label:t._({id:"Clean"}),tooltip:t._({id:"Remove any local modifications prior to performing an update."})}),r.a.createElement(Rl,{id:"option-scm-delete-on-update",name:"scm_delete_on_update",label:t._({id:"\u5220\u9664"}),tooltip:t._({id:"Delete the local repository in its entirety prior to performing an update. Depending on the size of the repository this may significantly increase the amount of time required to complete an update."})}),r.a.createElement(Rl,{id:"option-scm-update-on-launch",name:"scm_update_on_launch",label:t._({id:"Update Revision on Launch"}),tooltip:t._({id:"Each time a job runs using this project, update the revision of the project prior to starting the job."})}),!n&&r.a.createElement(Rl,{id:"option-allow-override",name:"allow_override",label:t._({id:"Allow Branch Override"}),tooltip:t._({id:"Allow changing the Source Control branch or revision in a job template that uses this project."})}))),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(qt.a,{size:"md",headingLevel:"h4"},t._({id:"Option Details"})),r.a.createElement(Tl,{id:"project-cache-timeout",name:"scm_update_cache_timeout",type:"number",min:"0",label:t._({id:"Cache Timeout"}),tooltip:t._({id:"Time in seconds to consider a project to be current. During job runs and callbacks the task system will evaluate the timestamp of the latest project update. If it is older than Cache Timeout, it is not considered current, and a new project update will be performed."})})))})),ow=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.credential,n=e.onCredentialSelection,i=e.scmUpdateOnLaunch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(nw,{i18n:t,tooltip:r.a.createElement("span",null,t._({id:"Example URLs for GIT Source Control include:"}),r.a.createElement(cw,null,r.a.createElement("li",null,"https://github.com/ansible/ansible.git"),r.a.createElement("li",null,"git@github.com:ansible/ansible.git"),r.a.createElement("li",null,"git://servername.example.com/ansible.git")),t._({id:"Note: When using SSH protocol for GitHub or Bitbucket, enter an SSH key only, do not enter a username (other than git). Additionally, GitHub and Bitbucket do not support password authentication when using SSH. GIT read only protocol (git://) does not use username or password information."}))}),r.a.createElement(rw,{i18n:t,label:t._({id:"Source Control Branch/Tag/Commit"})}),r.a.createElement(Tl,{id:"project-scm-refspec",label:t._({id:"Source Control Refspec"}),name:"scm_refspec",type:"text",tooltipMaxWidth:"400px",tooltip:r.a.createElement("span",null,t._({id:"A refspec to fetch (passed to the Ansible git module). This parameter allows access to references via the branch field not otherwise available."}),r.a.createElement("br",null),r.a.createElement("br",null),t._({id:'Note: This field assumes the remote name is "origin".'}),r.a.createElement("br",null),r.a.createElement("br",null),t._({id:"Examples include:"}),r.a.createElement(sw,null,r.a.createElement("li",null,"refs/*:refs/remotes/origin/*"),r.a.createElement("li",null,"refs/pull/62/head:refs/remotes/origin/pull/62/head")),t._({id:'The first fetches all references. The second fetches the Github pull request number 62, in this example the branch needs to be "pull/62/head".'}),r.a.createElement("br",null),r.a.createElement("br",null),t._({id:"For more information, refer to the"})," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.ansible.com/ansible-tower/latest/html/userguide/projects.html#manage-playbooks-using-source-control"},t._({id:"Ansible Tower Documentation."})))}),r.a.createElement(iw,{credential:a,onCredentialSelection:n}),r.a.createElement(lw,{scmUpdateOnLaunch:i}))})),cw=Object(j.b)("ul").withConfig({displayName:"GitSubForm___StyledUl",componentId:"sc-1jaigv0-0"})(["margin:10px 0 10px 20px"]),sw=Object(j.b)("ul").withConfig({displayName:"GitSubForm___StyledUl2",componentId:"sc-1jaigv0-1"})({margin:"10px 0 10px 20px"}),uw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.credential,i=e.onCredentialSelection,l=e.scmUpdateOnLaunch,o=e.autoPopulateCredential,c=Object(Va.c)().setFieldValue,s=Object(Va.b)({name:"credential",validate:Yo(t._({id:"Select a value for this field"}),t)}),u=Object(f.a)(s,3),d=u[1],m=u[2],p=Object(n.useCallback)((function(e){i("insights",e),c("credential",e.id)}),[i,c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lf,{credentialTypeId:a.typeId,label:t._({id:"Insights Credential"}),helperTextInvalid:d.error,isValid:!d.touched||!d.error,onBlur:function(){return m.setTouched()},onChange:p,value:a.value,required:!0,autoPopulate:o}),r.a.createElement(lw,{hideAllowOverride:!0,scmUpdateOnLaunch:l}))})),dw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.localPath,n=e.project_base_dir,i=e.project_local_paths,l=Object(A.a)(new Set([].concat(Object(A.a)(i),[a]))),o=[{value:"",key:"",label:t._({id:"Choose a Playbook Directory"})}].concat(Object(A.a)(l.filter((function(e){return e})).map((function(e){return{value:e,key:e,label:e}})))),c=Object(Va.b)({name:"local_path",validate:Yo(t._({id:"Select a value for this field"}),t)}),s=Object(f.a)(c,3),u=s[0],d=s[1],m=s[2];return r.a.createElement(r.a.Fragment,null,1===o.length&&r.a.createElement(mw,{title:t._({id:"WARNING:"}),variant:"warning",isInline:!0},t._({id:'There are no available playbook directories in {project_base_dir}. Either that directory is empty, or all of the contents are already assigned to other projects. Create a new directory there and make sure the playbook files can be read by the "awx" system user, or have {brandName} directly retrieve your playbooks from source control using the Source Control Type option above.',values:{project_base_dir:n,brandName:"AWX"}})),r.a.createElement(Tl,{id:"project-base-dir",label:t._({id:"Project Base Path"}),name:"base_dir",type:"text",isReadOnly:!0,tooltip:r.a.createElement("span",null,t._({id:"Base path used for locating playbooks. Directories found inside this path will be listed in the playbook directory drop-down. Together the base path and selected playbook directory provide the full path used to locate playbooks."}),r.a.createElement("br",null),r.a.createElement("br",null),t._({id:"Change PROJECTS_ROOT when deploying {brandName} to change this location.",values:{brandName:"AWX"}}))}),r.a.createElement(Wi.a,{fieldId:"project-local-path",helperTextInvalid:d.error,isRequired:!0,validated:d.touched&&d.error?"error":"default",label:t._({id:"Playbook Directory"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Select from the list of directories found in the Project Base Path. Together the base path and the playbook directory provide the full path used to locate playbooks."})})},r.a.createElement(Fc,Object.assign({},u,{id:"local_path",data:o,onChange:function(e,t){m.setValue(t)}}))))})),mw=Object(j.b)(Kl.a).withConfig({displayName:"ManualSubForm___StyledAlert",componentId:"sc-1r1e30l-0"})(["grid-column:1/-1"]),pw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.credential,n=e.onCredentialSelection,i=e.scmUpdateOnLaunch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(nw,{i18n:t,tooltip:r.a.createElement("span",null,t._({id:"Example URLs for Subversion Source Control include:"}),r.a.createElement(bw,null,r.a.createElement("li",null,"https://github.com/ansible/ansible"),r.a.createElement("li",null,"svn://servername.example.com/path"),r.a.createElement("li",null,"svn+ssh://servername.example.com/path")))}),r.a.createElement(rw,{i18n:t,label:t._({id:"Revision #"})}),r.a.createElement(iw,{credential:a,onCredentialSelection:n}),r.a.createElement(lw,{scmUpdateOnLaunch:i}))})),bw=Object(j.b)("ul").withConfig({displayName:"SvnSubForm___StyledUl",componentId:"sc-1rlknmz-0"})({margin:"10px 0 10px 20px"}),fw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.credential,n=e.onCredentialSelection,i=e.scmUpdateOnLaunch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(nw,{i18n:t,tooltip:r.a.createElement("span",null,t._({id:"Example URLs for Remote Archive Source Control include:"}),r.a.createElement(vw,null,r.a.createElement("li",null,"https://github.com/username/project/archive/v0.0.1.tar.gz"),r.a.createElement("li",null,"https://github.com/username/project/archive/v0.0.2.zip")))}),r.a.createElement(iw,{credential:a,onCredentialSelection:n}),r.a.createElement(lw,{scmUpdateOnLaunch:i}))})),vw=Object(j.b)("ul").withConfig({displayName:"ArchiveSubForm___StyledUl",componentId:"sc-m80yol-0"})({margin:"10px 0 10px 20px"}),_w=["i18n","project","submitError"],hw=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Be.read({kind:"scm"}),Be.read({name:"Insights"})]);case 2:if(a=e.sent,n=Object(f.a)(a,2),r=Object(f.a)(n[0].data.results,1),i=r[0],l=Object(f.a)(n[1].data.results,1),o=l[0],t){e.next=10;break}return e.abrupt("return",{scm:{typeId:i.id},insights:{typeId:o.id}});case 10:return c=t.credential_type_id,e.abrupt("return",{scm:{typeId:i.id,value:c===i.id?t:null},insights:{typeId:o.id,value:c===o.id?t:null}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ew(e){var t=e.project,a=e.project_base_dir,i=e.project_local_paths,l=e.formik,o=e.i18n,c=e.setCredentials,s=e.credentials,u=e.scmTypeOptions,m=e.setScmSubFormState,p=e.scmSubFormState,b={scm_url:"",scm_branch:"",scm_refspec:"",credential:"",scm_clean:!1,scm_delete_on_update:!1,scm_update_on_launch:!1,allow_override:!1,scm_update_cache_timeout:0},v=Object(Va.c)().setFieldValue,_=Object(Va.b)({name:"scm_type",validate:Yo(o._({id:"Set a value for this field"}),o)}),h=Object(f.a)(_,3),E=h[0],y=h[1],g=h[2],O=Object(Va.b)("custom_virtualenv"),j=Object(f.a)(O,1)[0],k=Object(Va.b)({name:"organization",validate:Yo(o._({id:"Select a value for this field"}),o)}),w=Object(f.a)(k,3),C=w[0],S=w[1],x=w[2],T=function(e,t){t.values.scm_type===t.initialValues.scm_type&&function(e){var t=Object(d.a)({},b);Object.keys(t).forEach((function(a){t[a]=e.values[a]})),m(t)}(l),Object.keys(b).forEach((function(a){e===t.initialValues.scm_type?t.setFieldValue(a,p[a]):t.setFieldValue(a,b[a]),t.setFieldTouched(a,!1)}))},I=Object(n.useCallback)((function(e,t){c(Object(d.a)(Object(d.a)({},s),{},Object(gr.a)({},e,Object(d.a)(Object(d.a)({},s[e]),{},{value:t}))))}),[s,c]),R=Object(n.useCallback)((function(e){v("organization",e)}),[v]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"project-name",label:o._({id:"\u540d\u79f0"}),name:"name",type:"text",validate:Yo(null,o),isRequired:!0}),r.a.createElement(Tl,{id:"project-description",label:o._({id:"\u63cf\u8ff0"}),name:"description",type:"text"}),r.a.createElement(Pc,{helperTextInvalid:S.error,isValid:!S.touched||!S.error,onBlur:function(){return x.setTouched()},onChange:R,value:C.value,required:!0,autoPopulate:!(null===t||void 0===t?void 0:t.id)}),r.a.createElement(Wi.a,{fieldId:"project-scm-type",helperTextInvalid:y.error,isRequired:!0,validated:y.touched&&y.error?"error":"default",label:o._({id:"Source Control Credential Type"})},r.a.createElement(Fc,Object.assign({},E,{id:"scm_type",data:[{value:"",key:"",label:o._({id:"Choose a Source Control Type"}),isDisabled:!0}].concat(Object(A.a)(u.map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return"Manual"===n&&(a="manual"),{label:n,value:a,key:a}})))),onChange:function(e,t){g.setValue(t),T(t,l)}}))),""!==l.values.scm_type&&r.a.createElement(Wl,null,r.a.createElement(qt.a,{size:"md",headingLevel:"h4"},o._({id:"Type Details"})),r.a.createElement(Vl,null,{manual:r.a.createElement(dw,{localPath:l.initialValues.local_path,project_base_dir:a,project_local_paths:i}),git:r.a.createElement(ow,{credential:s.scm,onCredentialSelection:I,scmUpdateOnLaunch:l.values.scm_update_on_launch}),svn:r.a.createElement(pw,{credential:s.scm,onCredentialSelection:I,scmUpdateOnLaunch:l.values.scm_update_on_launch}),archive:r.a.createElement(fw,{credential:s.scm,onCredentialSelection:I,scmUpdateOnLaunch:l.values.scm_update_on_launch}),insights:r.a.createElement(uw,{credential:s.insights,onCredentialSelection:I,scmUpdateOnLaunch:l.values.scm_update_on_launch,autoPopulateCredential:!(null===t||void 0===t?void 0:t.id)||"insights"!==(null===t||void 0===t?void 0:t.scm_type)})}[l.values.scm_type])),r.a.createElement(xt,null,(function(e){var t=e.custom_virtualenvs;return t&&t.length>1&&r.a.createElement(Wi.a,{fieldId:"project-custom-virtualenv",label:o._({id:"Ansible Environment"}),labelIcon:r.a.createElement(gi,{content:o._({id:"Select the playbook to be executed by this job."})})},r.a.createElement(Fc,Object.assign({id:"project-custom-virtualenv",data:[{label:o._({id:"Use Default Ansible Environment"}),value:"/var/lib/awx/venv/ansible/",key:"default"}].concat(Object(A.a)(t.filter((function(e){return"/var/lib/awx/venv/ansible/"!==e})).map((function(e){return{label:e,value:e,key:e}}))))},j)))})))}function yw(e){var t=e.i18n,a=e.project,i=e.submitError,l=Object(o.a)(e,_w),c=l.handleCancel,s=l.handleSubmit,u=a.summary_fields,d=void 0===u?{}:u,m=Object(n.useState)(null),v=Object(f.a)(m,2),_=v[0],h=v[1],E=Object(n.useState)(!0),y=Object(f.a)(E,2),g=y[0],O=y[1],j=Object(n.useState)({scm_url:"",scm_branch:"",scm_refspec:"",credential:"",scm_clean:!1,scm_delete_on_update:!1,scm_update_on_launch:!1,allow_override:!1,scm_update_cache_timeout:0}),k=Object(f.a)(j,2),w=k[0],C=k[1],S=Object(n.useState)(null),x=Object(f.a)(S,2),T=x[0],I=x[1],A=Object(n.useState)({scm:{typeId:null,value:null},insights:{typeId:null,value:null}}),R=Object(f.a)(A,2),N=R[0],D=R[1];return Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=hw(d.credential),e.next=4,ut.readOptions();case 4:return a=e.sent,n=a.data.actions.GET.scm_type.choices,e.t0=D,e.next=9,t;case 9:e.t1=e.sent,(0,e.t0)(e.t1),I(n),e.next=17;break;case 14:e.prev=14,e.t2=e.catch(0),h(e.t2);case 17:return e.prev=17,O(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d.credential]),g?r.a.createElement(Nr,null):_?r.a.createElement(za,{error:_}):r.a.createElement(xt,null,(function(e){var n,l=e.project_base_dir,o=e.project_local_paths;return r.a.createElement(Va.a,{initialValues:{allow_override:a.allow_override||!1,base_dir:l||"",credential:a.credential||"",custom_virtualenv:a.custom_virtualenv||"",description:a.description||"",local_path:a.local_path||"",name:a.name||"",organization:(null===(n=a.summary_fields)||void 0===n?void 0:n.organization)||null,scm_branch:a.scm_branch||"",scm_clean:a.scm_clean||!1,scm_delete_on_update:a.scm_delete_on_update||!1,scm_refspec:a.scm_refspec||"",scm_type:""===a.scm_type?"manual":void 0===a.scm_type?"":a.scm_type,scm_update_cache_timeout:a.scm_update_cache_timeout||0,scm_update_on_launch:a.scm_update_on_launch||!1,scm_url:a.scm_url||""},onSubmit:s},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(Ew,{project:a,project_base_dir:l,project_local_paths:o,formik:e,i18n:t,setCredentials:D,credentials:N,scmTypeOptions:T,setScmSubFormState:C,scmSubFormState:w}),r.a.createElement(Yl,{error:i}),r.a.createElement(cc,{onCancel:c,onSubmit:e.handleSubmit})))}))}))}yw.defaultProps={project:{},submitError:null};var gw=Object(u.withI18n)()(yw);var Ow=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],i=t[1],l=Object(c.g)(),o=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"manual"===t.scm_type&&(t.scm_type=""),t.credential||delete t.credential,i(null),e.prev=3,e.next=6,ut.create(Object(d.a)(Object(d.a)({},t),{},{organization:t.organization.id}));case 6:a=e.sent,n=a.data.id,l.push("/projects/".concat(n,"/details")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),i(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(gw,{handleCancel:function(){l.push("/projects")},handleSubmit:o,submitError:a}))))};var jw=Object(u.withI18n)()((function(e){var t,a,i,l=e.project,o=e.i18n,u=l.allow_override,d=l.created,m=l.custom_virtualenv,f=l.description,v=l.id,_=l.local_path,h=l.modified,E=l.name,y=l.scm_branch,g=l.scm_clean,j=l.scm_delete_on_update,k=l.scm_refspec,w=l.scm_type,C=l.scm_update_on_launch,S=l.scm_update_cache_timeout,x=l.scm_url,T=l.summary_fields,I=Object(c.g)(),A=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut.destroy(v);case 2:I.push("/projects");case 3:case"end":return e.stop()}}),e)}))),[v,I])),R=A.request,N=A.isLoading,D=Qa(A.error),L=D.error,P=D.dismissError,U="";return(g||j||C||u)&&(U=r.a.createElement(lu.a,null,g&&r.a.createElement(ou.a,null,o._({id:"Clean"})),j&&r.a.createElement(ou.a,null,o._({id:"Delete on Update"})),C&&r.a.createElement(ou.a,null,o._({id:"Update Revision on Launch"})),u&&r.a.createElement(ou.a,null,o._({id:"Allow Branch Override"})))),r.a.createElement(Bc,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:o._({id:"\u540d\u79f0"}),value:E,dataCy:"project-detail-name"}),r.a.createElement(xi,{label:o._({id:"\u63cf\u8ff0"}),value:f}),T.organization&&r.a.createElement(xi,{label:o._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(T.organization.id,"/details")},T.organization.name)}),r.a.createElement(xi,{label:o._({id:"Source Control Type"}),value:""===w?o._({id:"Manual"}):as(l.scm_type)}),r.a.createElement(xi,{label:o._({id:"Source Control URL"}),value:x}),r.a.createElement(xi,{label:o._({id:"Source Control Branch"}),value:y}),r.a.createElement(xi,{label:o._({id:"Source Control Refspec"}),value:k}),T.credential&&r.a.createElement(xi,{label:o._({id:"Source Control Credential"}),value:r.a.createElement(du,{key:T.credential.id,credential:T.credential,isReadOnly:!0})}),U&&r.a.createElement(xi,{label:o._({id:"Options"}),value:U}),r.a.createElement(xi,{label:o._({id:"Cache Timeout"}),value:"".concat(S," ").concat(o._({id:"Seconds"}))}),r.a.createElement(xi,{label:o._({id:"Ansible Environment"}),value:m}),r.a.createElement(xt,null,(function(e){var t=e.project_base_dir;return r.a.createElement(xi,{label:o._({id:"Project Base Path"}),value:t})})),r.a.createElement(xi,{label:o._({id:"Playbook Directory"}),value:_}),r.a.createElement(Li,{label:o._({id:"\u5df2\u521b\u5efa"}),date:d,user:T.created_by}),r.a.createElement(Li,{label:o._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:h,user:T.modified_by})),r.a.createElement(Yc,null,(null===(t=T.user_capabilities)||void 0===t?void 0:t.edit)&&r.a.createElement(O.a,{"aria-label":o._({id:"edit"}),component:s.b,to:"/projects/".concat(v,"/edit")},o._({id:"Edit"})),(null===(a=T.user_capabilities)||void 0===a?void 0:a.start)&&r.a.createElement(Zk,{projectId:l.id}),(null===(i=T.user_capabilities)||void 0===i?void 0:i.delete)&&r.a.createElement(Qc,{name:E,modalTitle:o._({id:"Delete Project"}),onConfirm:R,isDisabled:N},o._({id:"\u5220\u9664"}))),L&&r.a.createElement(Zt,{isOpen:L,variant:"error",title:o._({id:"Error!"}),onClose:P},o._({id:"Failed to delete project."}),r.a.createElement(ua,{error:L})))}));var kw=function(e){var t=e.project,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(c.g)(),u=function(){var e=Object(b.a)(p.a.mark((function e(a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"manual"===a.scm_type&&(a.scm_type=""),a.credential||delete a.credential,e.prev=2,e.next=5,ut.update(t.id,Object(d.a)(Object(d.a)({},a),{},{organization:a.organization.id}));case 5:n=e.sent,r=n.data.id,s.push("/projects/".concat(r,"/details")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(gw,{project:t,handleCancel:function(){s.push("/projects/".concat(t.id,"/details"))},handleSubmit:u,submitError:l})))},ww=Object(j.b)(Fo.a).withConfig({displayName:"ProjectJobTemplatesListItem__DataListAction",componentId:"sc-u4o2ha-0"})(["align-items:center;display:grid;grid-gap:16px;grid-template-columns:repeat(2,40px);"]);var Cw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.template,n=e.isSelected,i=e.onSelect,l=e.detailUrl,o="check-action-".concat(a.id),c=a.summary_fields.user_capabilities.start,u="job_template"===a.type&&(!a.summary_fields.project||!a.summary_fields.inventory&&!a.ask_inventory_on_launch);return r.a.createElement(ho.a,{"aria-labelledby":o,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-jobTemplate-".concat(a.id),checked:n,onChange:i,"aria-labelledby":o}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"divider"},r.a.createElement("span",null,r.a.createElement(s.b,{to:"".concat(l)},r.a.createElement("b",null,a.name))),u&&r.a.createElement("span",null,r.a.createElement(Ea.a,{content:t._({id:"Resources are missing from this template."}),position:"right"},r.a.createElement(Sw,null)))),r.a.createElement(ko,{key:"type"},as(a.type)),r.a.createElement(ko,{key:"sparkline"},r.a.createElement(Op,{jobs:a.summary_fields.recent_jobs}))]}),r.a.createElement(ww,{"aria-label":"actions","aria-labelledby":o,id:o},c&&"job_template"===a.type&&r.a.createElement(Ea.a,{content:t._({id:"\u8fd0\u884c\u6a21\u677f"}),position:"top"},r.a.createElement(Mp,{resource:a},(function(e){var t=e.handleLaunch;return r.a.createElement(xw,{variant:"plain",onClick:t},r.a.createElement(Fd.a,null))}))),a.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:t._({id:"\u7f16\u8f91\u6a21\u677f"}),position:"top"},r.a.createElement(Tw,{variant:"plain",component:s.b,to:"/templates/".concat(a.type,"/").concat(a.id,"/edit")},r.a.createElement(Mo.a,null))))))})),Sw=Object(j.b)(Ht.a).withConfig({displayName:"ProjectJobTemplatesListItem___StyledExclamationTriangleIcon",componentId:"sc-u4o2ha-1"})(["color:#c9190b;margin-left:20px;"]),xw=Object(j.b)(O.a).withConfig({displayName:"ProjectJobTemplatesListItem___StyledButton",componentId:"sc-u4o2ha-2"})(["grid-column:1"]),Tw=Object(j.b)(O.a).withConfig({displayName:"ProjectJobTemplatesListItem___StyledButton2",componentId:"sc-u4o2ha-3"})(["grid-column:2"]),Iw=R("template",{page:1,page_size:20,order_by:"name"});var Aw=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.i)().id,i=Object(c.h)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=N(Iw,i.search)).project=a,e.next=4,Promise.all([at.read(r),at.readOptions()]);case 4:return l=e.sent,o=Object(f.a)(l,2),c=o[0],s=o[1],e.abrupt("return",{jobTemplates:c.data.results,itemCount:c.data.count,actions:s.data.actions,relatedSearchableKeys:((null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=s.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=s.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 9:case"end":return e.stop()}}),e)}))),[i,a]),{jobTemplates:[],itemCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),o=l.result,s=o.jobTemplates,u=o.itemCount,d=o.actions,m=o.relatedSearchableKeys,v=o.searchableKeys,_=l.error,h=l.isLoading,E=l.request;Object(n.useEffect)((function(){E()}),[E]);var y=Uo(s),g=y.selected,O=y.isAllSelected,j=y.handleSelect,k=y.setSelected,w=en(Object(n.useCallback)((function(){return Promise.all(g.map((function(e){return at.destroy(e.id)})))}),[g]),{qsConfig:Iw,allItemsSelected:O,fetchItems:E}),C=w.isLoading,S=w.deleteItems,x=w.deletionError,T=w.clearDeletionError,I=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:k([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=d&&Object.prototype.hasOwnProperty.call(d,"POST"),D=r.a.createElement(Po,{key:"add",linkTo:"/templates/job_template/add/"});return r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:_,hasContentLoading:C||h,items:s,itemCount:u,pluralizedItemName:t._({id:"Job templates"}),qsConfig:Iw,onRowClick:j,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u6e05\u5355"}),key:"job_template__inventory__id"},{name:t._({id:"Last job run"}),key:"last_job_run"},{name:t._({id:"\u66f4\u6539"}),key:"modified"},{name:t._({id:"\u540d\u79f0"}),key:"name"},{name:t._({id:"\u9879\u76ee"}),key:"jobtemplate__project__id"},{name:t._({id:"\u7c7b\u578b"}),key:"type"}],toolbarSearchableKeys:v,toolbarRelatedSearchableKeys:m,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:O,onSelectAll:function(e){return k(e?Object(A.a)(s):[])},qsConfig:Iw,additionalControls:[].concat(Object(A.a)(R?[D]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:I,itemsToDelete:g,pluralizedItemName:t._({id:"Job templates"})})])}))},renderItem:function(e){return r.a.createElement(Cw,{key:e.id,value:e.name,template:e,detailUrl:"/templates/".concat(e.type,"/").concat(e.id,"/details"),onSelect:function(){return j(e)},isSelected:g.some((function(t){return t.id===e.id}))})},emptyStateControls:R&&D})),r.a.createElement(Zt,{isOpen:x,variant:"danger",title:t._({id:"Error!"}),onClose:T},t._({id:"Failed to delete one or more job templates."}),r.a.createElement(ua,{error:x})))}));var Rw=Object(u.withI18n)()(Object(c.k)((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Tt().me,l=void 0===i?{}:i,o=Object(c.i)().id,u=Object(c.h)(),d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ut.readDetail(o),ct.read({page_size:1,role_level:"notification_admin_role"})]);case 2:if(t=e.sent,a=Object(f.a)(t,2),n=a[0].data,r=a[1],!n.summary_fields.credentials){e.next=13;break}return i={page:1,page_size:200,order_by:"name"},e.next=10,ut.readCredentials(n.id,i);case 10:l=e.sent,c=l.data.results,n.summary_fields.credentials=c;case 13:return e.abrupt("return",{project:n,isNotifAdmin:r.data.results.length>0});case 14:case"end":return e.stop()}}),e)}))),[o]),{project:null,notifAdminRes:null}),m=d.request,v=d.result,_=v.project,h=v.isNotifAdmin,E=d.isLoading,y=d.error;Object(n.useEffect)((function(){m()}),[m,u.pathname]),Object(n.useEffect)((function(){_&&a(_)}),[_,a]);var g=Object(n.useCallback)((function(){return ut.readScheduleOptions(_.id)}),[_]),O=Object(n.useCallback)((function(e){return ut.readSchedules(_.id,e)}),[_]),j=l.is_system_auditor||h,k=h,w=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Projects"})),link:"/projects",id:99},{name:t._({id:"Details"}),link:"/projects/".concat(o,"/details")},{name:t._({id:"Access"}),link:"/projects/".concat(o,"/access")}];if(j&&w.push({name:t._({id:"Notifications"}),link:"/projects/".concat(o,"/notifications")}),w.push({name:t._({id:"Job Templates"}),link:"/projects/".concat(o,"/job_templates")}),(null===_||void 0===_?void 0:_.scm_type)&&w.push({name:t._({id:"\u8ba1\u5212"}),link:"/projects/".concat(o,"/schedules")}),w.forEach((function(e,t){e.id=t})),y)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:y},404===y.response.status&&r.a.createElement("span",null,t._({id:"Project not found."})," ",r.a.createElement(s.b,{to:"/projects"},t._({id:"View all Projects."}))))));var C=!(u.pathname.endsWith("edit")||u.pathname.includes("schedules/"));return r.a.createElement(La.a,null,r.a.createElement(na.a,null,C&&r.a.createElement(us,{tabsArray:w}),E&&r.a.createElement(Nr,null),!E&&_&&r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/projects/:id",to:"/projects/:id/details",exact:!0}),r.a.createElement(c.b,{path:"/projects/:id/edit"},r.a.createElement(kw,{project:_})),r.a.createElement(c.b,{path:"/projects/:id/details"},r.a.createElement(jw,{project:_})),r.a.createElement(c.b,{path:"/projects/:id/access"},r.a.createElement(iu,{resource:_,apiModel:ut})),j&&r.a.createElement(c.b,{path:"/projects/:id/notifications"},r.a.createElement(jE,{id:Number(o),canToggleNotifications:k,apiModel:ut})),r.a.createElement(c.b,{path:"/projects/:id/job_templates"},r.a.createElement(Aw,null)),(null===_||void 0===_?void 0:_.scm_type)&&""!==_.scm_type&&r.a.createElement(c.b,{path:"/projects/:id/schedules"},r.a.createElement(Vh,{setBreadcrumb:a,unifiedJobTemplate:_,createSchedule:function(e){return ut.createSchedule(_.id,e)},loadSchedules:O,loadScheduleOptions:g})),r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,{isNotFound:!0},o&&r.a.createElement(s.b,{to:"/projects/".concat(o,"/details")},t._({id:"View Project Details"})))))))})));var Nw=Object(u.withI18n)()(Object(c.k)((function(e){var t=e.i18n,a=Object(n.useState)({"/projects":t._({id:"Projects"}),"/projects/add":t._({id:"Create New Project"})}),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(n.useCallback)((function(e,a){var n;if(e){var r="/projects/".concat(e.id,"/schedules");o((n={"/projects":t._({id:"Projects"}),"/projects/add":t._({id:"Create New Project"})},Object(gr.a)(n,"/projects/".concat(e.id),"".concat(e.name)),Object(gr.a)(n,"/projects/".concat(e.id,"/edit"),t._({id:"Edit Details"})),Object(gr.a)(n,"/projects/".concat(e.id,"/details"),t._({id:"Details"})),Object(gr.a)(n,"/projects/".concat(e.id,"/access"),t._({id:"Access"})),Object(gr.a)(n,"/projects/".concat(e.id,"/notifications"),t._({id:"Notifications"})),Object(gr.a)(n,"/projects/".concat(e.id,"/job_templates"),t._({id:"Job Templates"})),Object(gr.a)(n,"".concat(r),t._({id:"\u8ba1\u5212"})),Object(gr.a)(n,"".concat(r,"/add"),t._({id:"Create New Schedule"})),Object(gr.a)(n,"".concat(r,"/").concat(null===a||void 0===a?void 0:a.id),"".concat(null===a||void 0===a?void 0:a.name)),Object(gr.a)(n,"".concat(r,"/").concat(null===a||void 0===a?void 0:a.id,"/details"),t._({id:"Schedule Details"})),Object(gr.a)(n,"".concat(r,"/").concat(null===a||void 0===a?void 0:a.id,"/edit"),t._({id:"Edit Details"})),n))}}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"project",breadcrumbConfig:l}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/projects/add"},r.a.createElement(Ow,null)),r.a.createElement(c.b,{path:"/projects/:id"},r.a.createElement(Rw,{setBreadcrumb:s})),r.a.createElement(c.b,{path:"/projects"},r.a.createElement(aw,null))))})));var Dw=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useCallback)((function(){return pt.readOptions()}),[]),i=Object(n.useCallback)((function(e){return pt.read(e)}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"schedule",breadcrumbConfig:{"/schedules":t._({id:"\u8ba1\u5212"})}}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/schedules"},r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Kh,{loadSchedules:i,loadScheduleOptions:a,hideAddButton:!0}))))))})),Lw=r.a.createContext({}),Pw=Lw.Provider,Uw=function(){return Object(n.useContext)(Lw)};function Gw(e){var t=e.i18n,a=e.successResponse,n=e.errorResponse,i=e.onClose,l=null;a&&(l=t._({id:"Log aggregator test sent successfully."}));var o,c,s,u,d=null;n&&(l=t._({id:"There was an error testing the log aggregator."}),(null===n||void 0===n||null===(o=n.response)||void 0===o?void 0:o.statusText)&&(null===n||void 0===n||null===(c=n.response)||void 0===c?void 0:c.status)&&(l=t._({id:"{0}: {1}",values:{0:n.response.statusText,1:n.response.status}}),d=t._({id:"{0}",values:{0:null===(s=n.response)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.error}})));return r.a.createElement(Vu.a,{isToast:!0},l&&r.a.createElement(Kl.a,{actionClose:r.a.createElement(Hu.a,{onClose:i}),ouiaId:"logging-test-alert",title:a?t._({id:"Success"}):t._({id:"Error"}),variant:a?"success":"danger"},r.a.createElement("b",{id:"test-message"},l),r.a.createElement("p",{id:"test-error"},d)))}Gw.defaultProps={successResponse:null,errorResponse:null,onClose:function(){}};var qw=Object(u.withI18n)()(Gw),Fw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.helpText,n=e.id,i=e.label,l=e.type,o=e.unit,c=void 0===o?"":o,s=e.value,u=null;switch("$encrypted$"===s?"encrypted":l){case"nested object":u=r.a.createElement(gk,{dataCy:n,helpText:a,label:i,mode:"javascript",rows:4,value:JSON.stringify(s||{},void 0,2)});break;case"list":u=r.a.createElement(gk,{dataCy:n,helpText:a,label:i,mode:"javascript",rows:4,value:JSON.stringify(s||[],void 0,2)});break;case"image":u=r.a.createElement(xi,{alwaysVisible:!0,dataCy:n,helpText:a,isNotConfigured:!s,label:i,value:s?r.a.createElement("img",{src:s,alt:i,height:"40",width:"40"}):t._({id:"Not configured"})});break;case"encrypted":u=r.a.createElement(xi,{alwaysVisible:!0,dataCy:n,helpText:a,isEncrypted:!0,label:i,value:t._({id:"Encrypted"})});break;case"boolean":u=r.a.createElement(xi,{alwaysVisible:!0,dataCy:n,helpText:a,label:i,value:s?t._({id:"On"}):t._({id:"Off"})});break;case"choice":u=r.a.createElement(xi,{alwaysVisible:!0,dataCy:n,helpText:a,isNotConfigured:!s,label:i,value:s||t._({id:"Not configured"})});break;case"integer":u=r.a.createElement(xi,{alwaysVisible:!0,dataCy:n,helpText:a,label:i,value:c?"".concat(s," ").concat(c):"".concat(s)});break;case"string":u=r.a.createElement(xi,{alwaysVisible:!0,dataCy:n,helpText:a,isNotConfigured:!s,label:i,value:s||t._({id:"Not configured"})});break;default:u=null}return u}));var zw,Mw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.onClose,n=e.onRevertAll;return r.a.createElement(Zt,{isOpen:!0,title:t._({id:"Revert settings"}),variant:"info",onClose:a,ouiaId:"revert-all-modal",actions:[r.a.createElement(O.a,{key:"revert",variant:"primary","aria-label":t._({id:"Confirm revert all"}),onClick:n,ouiaId:"confirm-revert-all-button"},t._({id:"Revert all"})),r.a.createElement(O.a,{key:"cancel",variant:"secondary","aria-label":t._({id:"Cancel revert"}),onClick:a,ouiaId:"cancel-revert-all-button"},t._({id:"\u53d6\u6d88"}))]},t._({id:"This will revert all configuration values on this page to their factory defaults. Are you sure you want to proceed?"}))})),Kw=Object(u.withI18n)()((function(e){var t=e.children,a=e.onCancel,n=e.onRevert,i=e.onSubmit,l=e.i18n;return r.a.createElement(Hl,null,r.a.createElement(lc.a,null,r.a.createElement(O.a,{"aria-label":l._({id:"Save"}),variant:"primary",type:"button",onClick:i,ouiaId:"save-button"},l._({id:"Save"})),r.a.createElement(O.a,{"aria-label":l._({id:"Revert all to default"}),variant:"secondary",type:"button",onClick:n,ouiaId:"revert-all-button"},l._({id:"Revert all to default"})),t,r.a.createElement(O.a,{"aria-label":l._({id:"\u53d6\u6d88"}),variant:"secondary",type:"button",onClick:a,ouiaId:"cancel-button"},l._({id:"\u53d6\u6d88"}))))})),Vw=j.b.div(zw||(zw=Object(v.a)(["\n  margin-left: auto;\n  &&& {\n    --pf-c-button--FontSize: var(--pf-c-button--m-small--FontSize);\n  }\n"])));var Hw,Bw=Object(u.withI18n)()((function(e){var t,a=e.i18n,n=e.id,i=e.defaultValue,l=e.isDisabled,o=void 0!==l&&l,c=Object(Va.b)(n),s=Object(f.a)(c,3),u=s[0],d=s[1],m=s[2],p=null!==(t=d.initialValue)&&void 0!==t?t:"",b=u.value,v=!0,_=!1;b===i&&b!==p&&(v=!1),b===i&&b===p&&(_=!0);var h=v?a._({id:"Revert to factory default."}):a._({id:"Restore initial value."}),E=o||_?a._({id:"Setting matches factory default."}):h;return r.a.createElement(Ea.a,{entryDelay:700,content:E},r.a.createElement(Vw,null,r.a.createElement(O.a,{"aria-label":v?a._({id:"Revert"}):a._({id:"Undo"}),ouiaId:"".concat(n,"-revert"),isInline:!0,isSmall:!0,onClick:function(){m.setValue(v?i:p)},type:"button",variant:"link",isDisabled:o||_},v?a._({id:"Revert"}):a._({id:"Undo"}))))})),Ww=Object(j.b)(Wi.a)(Hw||(Hw=Object(v.a)(["\n  .pf-c-form__group-label {\n    display: inline-flex;\n    align-items: center;\n    width: 100%;\n  }\n"]))),Jw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.children,n=e.defaultValue,i=e.fieldId,l=e.helperTextInvalid,o=e.isDisabled,c=e.isRequired,s=e.label,u=e.popoverContent,d=e.validated;return r.a.createElement(Ww,{fieldId:i,helperTextInvalid:l,id:"".concat(i,"-field"),isRequired:c,label:s,validated:d,labelIcon:r.a.createElement(r.a.Fragment,null,r.a.createElement(gi,{content:u,ariaLabel:"".concat(t._({id:"More information for"})," ").concat(s)}),r.a.createElement(Bw,{id:i,defaultValue:n,isDisabled:o}))},a)})),Yw=Object(u.withI18n)()((function(e){var t,a=e.i18n,n=e.ariaLabel,i=void 0===n?"":n,l=e.name,o=e.config,c=e.disabled,s=void 0!==c&&c,u=Object(Va.b)(l),d=Object(f.a)(u,3),m=d[0],p=d[1],b=d[2];return o?r.a.createElement(Jw,{defaultValue:null!==(t=o.default)&&void 0!==t&&t,fieldId:l,helperTextInvalid:p.error,isDisabled:s,label:o.label,popoverContent:o.help_text},r.a.createElement(dm.a,{id:l,ouiaId:l,isChecked:m.value,isDisabled:s,label:a._({id:"On"}),labelOff:a._({id:"Off"}),onChange:function(e){return b.setValue(e)},"aria-label":i||o.label})):null})),Xw=Object(u.withI18n)()((function(e){var t,a=e.i18n,n=e.name,i=e.config,l=e.isRequired,o=void 0!==l&&l,c=o?Yo(null,a):null,s=Object(Va.b)({name:n,validate:c}),u=Object(f.a)(s,2),d=u[0],m=u[1],p=!m.error||!m.touched;return i?r.a.createElement(Jw,{defaultValue:null!==(t=i.default)&&void 0!==t?t:"",fieldId:n,helperTextInvalid:m.error,isRequired:o,label:i.label,popoverContent:i.help_text,validated:p?"default":"error"},r.a.createElement(Fc,Object.assign({id:n},d,{data:Object(A.a)(i.choices.map((function(e,t){var a=Object(f.a)(e,2),n=a[0];return{label:a[1],value:null!==n&&void 0!==n?n:"",key:null!==n&&void 0!==n?n:t}})))}))):null})),Zw=Object(u.withI18n)()((function(e){var t,a=e.i18n,n=e.name,i=e.config,l=e.isRequired,o=void 0!==l&&l,c=o?Yo(null,a):null,s=Object(Va.b)({name:n,validate:c}),u=Object(f.a)(s,2)[1],d=!(u.touched&&u.error);return i?r.a.createElement(Jw,{defaultValue:null!==(t=i.default)&&void 0!==t?t:"",fieldId:n,helperTextInvalid:u.error,isRequired:o,label:i.label,popoverContent:i.help_text,validated:d?"default":"error"},r.a.createElement(An.a,null,r.a.createElement(Pl,{id:n,name:n,label:i.label,validate:c,isRequired:o}))):null})),$w=Object(u.withI18n)()((function(e){var t,a,n=e.i18n,i=e.name,l=e.config,o=e.type,c=void 0===o?"text":o,s=e.isRequired,u=void 0!==s&&s,d=null!==(t=null===l||void 0===l?void 0:l.min_value)&&void 0!==t?t:Number.MIN_SAFE_INTEGER,m=null!==(a=null===l||void 0===l?void 0:l.max_value)&&void 0!==a?a:Number.MAX_SAFE_INTEGER,p=[].concat(Object(A.a)(u?[Yo(null,n)]:[]),Object(A.a)("url"===c?[nc(n)]:[]),Object(A.a)("number"===c?[tc(n),$o(d,m,n)]:[])),b=Object(Va.b)({name:i,validate:rc(p)}),v=Object(f.a)(b,2),_=v[0],h=v[1],E=!(h.touched&&h.error);return l?r.a.createElement(Jw,{defaultValue:l.default||"",fieldId:i,helperTextInvalid:h.error,isRequired:u,label:l.label,popoverContent:l.help_text,validated:E?"default":"error"},r.a.createElement(Rn.a,{id:i,isRequired:u,placeholder:l.placeholder,validated:E?"default":"error",value:_.value,onBlur:_.onBlur,onChange:function(e,t){_.onChange(t)}})):null})),Qw=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.name,n=e.config,i=e.isRequired,l=void 0!==i&&i,o=l?Yo(null,t):null,c=Object(Va.b)({name:a,validate:o}),s=Object(f.a)(c,3),u=s[0],d=s[1],m=s[2],p=!(d.touched&&d.error),b="list"===(null===n||void 0===n?void 0:n.type)?"[]":"{}",v=(null===n||void 0===n?void 0:n.default)?JSON.stringify(n.default,null,2):b;return n?r.a.createElement(Hl,null,r.a.createElement(Jw,{defaultValue:v,fieldId:a,helperTextInvalid:d.error,isRequired:l,label:n.label,popoverContent:n.help_text,validated:p?"default":"error"},r.a.createElement(io,Object.assign({},u,{fullHeight:!0,id:a,mode:"javascript",onChange:function(e){m.setValue(e)},placeholder:JSON.stringify(null===n||void 0===n?void 0:n.placeholder,null,2)})))):null}));var eC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("system");case 2:return t=e.sent,a=t.data,n=a.ACTIVITY_STREAM_ENABLED,r=a.ACTIVITY_STREAM_ENABLED_FOR_INVENTORY_SYNC,e.abrupt("return",{ACTIVITY_STREAM_ENABLED:n,ACTIVITY_STREAM_ENABLED_FOR_INVENTORY_SYNC:r});case 7:case"end":return e.stop()}}),e)}))),[]),null),o=l.isLoading,c=l.error,u=l.request,d=l.result;Object(n.useEffect)((function(){u()}),[u]);var m=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/activity_stream/details",id:0}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:m}),r.a.createElement(Bc,null,o&&r.a.createElement(Nr,null),!o&&c&&r.a.createElement(za,{error:c}),!o&&d&&r.a.createElement(pi,null,Object.keys(d).map((function(e){var t=null===i||void 0===i?void 0:i[e];return r.a.createElement(Fw,{key:e,id:e,helpText:null===t||void 0===t?void 0:t.help_text,label:null===t||void 0===t?void 0:t.label,type:null===t||void 0===t?void 0:t.type,unit:null===t||void 0===t?void 0:t.unit,value:null===d||void 0===d?void 0:d[e]})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"/settings/activity_stream/edit"},t._({id:"Edit"})))))}));function tC(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),a=Object(f.a)(t,2),r=a[0],i=a[1];function l(){i(!r)}function o(){i(!1)}return{isModalOpen:r,toggleModal:l,closeModal:o}}var aC=function(){var e=Object(c.g)(),t=tC(),a=t.isModalOpen,i=t.toggleModal,l=t.closeModal,o=Uw().PUT,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("system");case 2:return t=e.sent,a=t.data,e.abrupt("return",{ACTIVITY_STREAM_ENABLED:Object(d.a)(Object(d.a)({},o.ACTIVITY_STREAM_ENABLED),{},{value:a.ACTIVITY_STREAM_ENABLED}),ACTIVITY_STREAM_ENABLED_FOR_INVENTORY_SYNC:Object(d.a)(Object(d.a)({},o.ACTIVITY_STREAM_ENABLED_FOR_INVENTORY_SYNC),{},{value:a.ACTIVITY_STREAM_ENABLED_FOR_INVENTORY_SYNC})});case 5:case"end":return e.stop()}}),e)}))),[o]),{}),u=s.isLoading,m=s.error,f=s.request,v=s.result,_=v.ACTIVITY_STREAM_ENABLED,h=v.ACTIVITY_STREAM_ENABLED_FOR_INVENTORY_SYNC;Object(n.useEffect)((function(){f()}),[f]);var E=$a(Object(n.useCallback)(function(){var t=Object(b.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.updateAll(a);case 2:e.push("/settings/activity_stream/details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),null),y=E.error,g=E.request,O=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){e.push("/settings/activity_stream/details")},k=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={ACTIVITY_STREAM_ENABLED:_.default,ACTIVITY_STREAM_ENABLED_FOR_INVENTORY_SYNC:h.default},e.next=3,g(t);case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,u&&r.a.createElement(Nr,null),!u&&m&&r.a.createElement(za,{error:m}),!u&&_&&r.a.createElement(Va.a,{initialValues:{ACTIVITY_STREAM_ENABLED:_.value,ACTIVITY_STREAM_ENABLED_FOR_INVENTORY_SYNC:h.value},onSubmit:O},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(Yw,{name:"ACTIVITY_STREAM_ENABLED",config:_}),r.a.createElement(Yw,{name:"ACTIVITY_STREAM_ENABLED_FOR_INVENTORY_SYNC",config:h}),y&&r.a.createElement(Yl,{error:y})),r.a.createElement(Kw,{onCancel:j,onSubmit:e.handleSubmit,onRevert:i}),a&&r.a.createElement(Mw,{onClose:l,onRevertAll:k}))})))};var nC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/activity_stream",n=Tt().me;return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(eC,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},(null===n||void 0===n?void 0:n.is_superuser)?r.a.createElement(aC,null):r.a.createElement(c.a,{to:"".concat(a,"/details")})),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View Activity Stream settings"})))))))}));var rC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("azuread-oauth2");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[]),null),o=l.isLoading,c=l.error,u=l.request,d=l.result;Object(n.useEffect)((function(){u()}),[u]);var m=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/azure/details",id:0}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:m}),r.a.createElement(Bc,null,o&&r.a.createElement(Nr,null),!o&&c&&r.a.createElement(za,{error:c}),!o&&d&&r.a.createElement(pi,null,Object.keys(d).map((function(e){var t=null===i||void 0===i?void 0:i[e];return r.a.createElement(Fw,{key:e,id:e,helpText:null===t||void 0===t?void 0:t.help_text,label:null===t||void 0===t?void 0:t.label,type:null===t||void 0===t?void 0:t.type,unit:null===t||void 0===t?void 0:t.unit,value:null===d||void 0===d?void 0:d[e]})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"/settings/azure/edit"},t._({id:"Edit"})))))}));function iC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["nested object","list","boolean"],a=Object.entries(e).filter((function(e){var a=Object(f.a)(e,2)[1];return!t.includes(a.type)})),n=Object.entries(e).filter((function(e){return"boolean"===Object(f.a)(e,2)[1].type})),r=Object.entries(e).filter((function(e){return"list"===Object(f.a)(e,2)[1].type})),i=Object.entries(e).filter((function(e){return"nested object"===Object(f.a)(e,2)[1].type}));return[].concat(Object(A.a)(a),Object(A.a)(n),Object(A.a)(r),Object(A.a)(i))}function lC(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return Object.assign.apply(Object,[{}].concat(Object(A.a)(a.map((function(t){return Object(gr.a)({},t,e[t])})))))}function oC(e){return e?ul(e)?JSON.parse(e):e:null}var cC=function(){var e=Object(c.g)(),t=tC(),a=t.isModalOpen,i=t.toggleModal,l=t.closeModal,o=Uw().PUT,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("azuread-oauth2");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){o[e]&&(n[e]=o[e],n[e].value=a[e])})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),[o]),null),u=s.isLoading,m=s.error,v=s.request,_=s.result;Object(n.useEffect)((function(){v()}),[v]);var h,E=$a(Object(n.useCallback)(function(){var t=Object(b.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.updateAll(a);case 2:e.push("/settings/azure/details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),null),y=E.error,g=E.request,O=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(d.a)(Object(d.a)({},t),{},{SOCIAL_AUTH_AZUREAD_OAUTH2_TEAM_MAP:oC(t.SOCIAL_AUTH_AZUREAD_OAUTH2_TEAM_MAP),SOCIAL_AUTH_AZUREAD_OAUTH2_ORGANIZATION_MAP:oC(t.SOCIAL_AUTH_AZUREAD_OAUTH2_ORGANIZATION_MAP)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign.apply(Object,Object(A.a)(Object.entries(_).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(gr.a)({},a,n.default)})))),e.next=3,g(t);case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){e.push("/settings/azure/details")};return r.a.createElement(Bc,null,u&&r.a.createElement(Nr,null),!u&&m&&r.a.createElement(za,{error:m}),!u&&_&&r.a.createElement(Va.a,{initialValues:(h=_,Object.keys(h).reduce((function(e,t){if("list"===h[t].type||"nested object"===h[t].type){var a="list"===h[t].type?"[]":"{}";e[t]=h[t].value?JSON.stringify(h[t].value,null,2):a}else{var n;e[t]=null!==(n=h[t].value)&&void 0!==n?n:""}return e}),{})),onSubmit:O},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement($w,{name:"SOCIAL_AUTH_AZUREAD_OAUTH2_KEY",config:_.SOCIAL_AUTH_AZUREAD_OAUTH2_KEY}),r.a.createElement(Zw,{name:"SOCIAL_AUTH_AZUREAD_OAUTH2_SECRET",config:_.SOCIAL_AUTH_AZUREAD_OAUTH2_SECRET}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_AZUREAD_OAUTH2_ORGANIZATION_MAP",config:_.SOCIAL_AUTH_AZUREAD_OAUTH2_ORGANIZATION_MAP}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_AZUREAD_OAUTH2_TEAM_MAP",config:_.SOCIAL_AUTH_AZUREAD_OAUTH2_TEAM_MAP}),y&&r.a.createElement(Yl,{error:y})),r.a.createElement(Kw,{onCancel:k,onSubmit:e.handleSubmit,onRevert:i}),a&&r.a.createElement(Mw,{onClose:l,onRevertAll:j}))})))};var sC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/azure";return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(rC,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},r.a.createElement(cC,null)),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View Azure AD settings"})))))))}));var uC=Object(u.withI18n)()((function(e){var t,a=e.i18n,i=Tt().me,l=Uw().GET,o="/settings/github",u=Object(c.j)("".concat(o,"/:category/details")),d=u.path,m=u.params.category,v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([bt.readCategory("github"),bt.readCategory("github-org"),bt.readCategory("github-team")]);case 2:return t=e.sent,a=Object(f.a)(t,3),n=a[0].data,r=a[1].data,i=a[2].data,e.abrupt("return",{default:n,organization:r,team:i});case 8:case"end":return e.stop()}}),e)}))),[]),{default:null,organization:null,team:null}),_=v.isLoading,h=v.error,E=v.request,y=v.result;Object(n.useEffect)((function(){E()}),[E]);var g=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),a._({id:"Back to Settings"})),link:"/settings",id:99},{name:a._({id:"GitHub Default"}),link:"".concat(o,"/default/details"),id:0},{name:a._({id:"GitHub Organization"}),link:"".concat(o,"/organization/details"),id:1},{name:a._({id:"GitHub Team"}),link:"".concat(o,"/team/details"),id:2}];return Object.keys(y).includes(m)?r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:g}),r.a.createElement(Bc,null,_&&r.a.createElement(Nr,null),!_&&h&&r.a.createElement(za,{error:h}),!_&&!(null===(t=Object.values(y))||void 0===t?void 0:t.includes(null))&&r.a.createElement(pi,null,Object.keys(y[m]).map((function(e){var t=null===l||void 0===l?void 0:l[e];return r.a.createElement(Fw,{key:e,id:e,helpText:null===t||void 0===t?void 0:t.help_text,label:null===t||void 0===t?void 0:t.label,type:null===t||void 0===t?void 0:t.type,unit:null===t||void 0===t?void 0:t.unit,value:y[m][e]})}))),(null===i||void 0===i?void 0:i.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":a._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"".concat(o,"/").concat(m,"/edit")},a._({id:"Edit"}))))):r.a.createElement(c.a,{from:d,to:"".concat(o,"/default/details"),exact:!0})}));var dC=function(){var e=Object(c.g)(),t=tC(),a=t.isModalOpen,i=t.toggleModal,l=t.closeModal,o=Uw().PUT,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("github");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){o[e]&&(n[e]=o[e],n[e].value=a[e])})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),[o]),null),u=s.isLoading,m=s.error,v=s.request,_=s.result;Object(n.useEffect)((function(){v()}),[v]);var h,E=$a(Object(n.useCallback)(function(){var t=Object(b.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.updateAll(a);case 2:e.push("/settings/github/details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),null),y=E.error,g=E.request,O=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(d.a)(Object(d.a)({},t),{},{SOCIAL_AUTH_GITHUB_ORGANIZATION_MAP:oC(t.SOCIAL_AUTH_GITHUB_ORGANIZATION_MAP),SOCIAL_AUTH_GITHUB_TEAM_MAP:oC(t.SOCIAL_AUTH_GITHUB_TEAM_MAP)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign.apply(Object,Object(A.a)(Object.entries(_).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(gr.a)({},a,n.default)})))),e.next=3,g(t);case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){e.push("/settings/github/details")};return r.a.createElement(Bc,null,u&&r.a.createElement(Nr,null),!u&&m&&r.a.createElement(za,{error:m}),!u&&_&&r.a.createElement(Va.a,{initialValues:(h=_,Object.keys(h).reduce((function(e,t){if("list"===h[t].type||"nested object"===h[t].type){var a="list"===h[t].type?"[]":"{}";e[t]=h[t].value?JSON.stringify(h[t].value,null,2):a}else{var n;e[t]=null!==(n=h[t].value)&&void 0!==n?n:""}return e}),{})),onSubmit:O},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement($w,{name:"SOCIAL_AUTH_GITHUB_KEY",config:_.SOCIAL_AUTH_GITHUB_KEY}),r.a.createElement(Zw,{name:"SOCIAL_AUTH_GITHUB_SECRET",config:_.SOCIAL_AUTH_GITHUB_SECRET}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GITHUB_ORGANIZATION_MAP",config:_.SOCIAL_AUTH_GITHUB_ORGANIZATION_MAP}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GITHUB_TEAM_MAP",config:_.SOCIAL_AUTH_GITHUB_TEAM_MAP}),y&&r.a.createElement(Yl,{error:y})),r.a.createElement(Kw,{onCancel:k,onSubmit:e.handleSubmit,onRevert:i}),a&&r.a.createElement(Mw,{onClose:l,onRevertAll:j}))})))};var mC=function(){var e=Object(c.g)(),t=tC(),a=t.isModalOpen,i=t.toggleModal,l=t.closeModal,o=Uw().PUT,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("github-org");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){o[e]&&(n[e]=o[e],n[e].value=a[e])})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),[o]),null),u=s.isLoading,m=s.error,v=s.request,_=s.result;Object(n.useEffect)((function(){v()}),[v]);var h,E=$a(Object(n.useCallback)(function(){var t=Object(b.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.updateAll(a);case 2:e.push("/settings/github/organization/details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),null),y=E.error,g=E.request,O=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(d.a)(Object(d.a)({},t),{},{SOCIAL_AUTH_GITHUB_ORG_ORGANIZATION_MAP:oC(t.SOCIAL_AUTH_GITHUB_ORG_ORGANIZATION_MAP),SOCIAL_AUTH_GITHUB_ORG_TEAM_MAP:oC(t.SOCIAL_AUTH_GITHUB_ORG_TEAM_MAP)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign.apply(Object,Object(A.a)(Object.entries(_).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(gr.a)({},a,n.default)})))),e.next=3,g(t);case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){e.push("/settings/github/organization/details")};return r.a.createElement(Bc,null,u&&r.a.createElement(Nr,null),!u&&m&&r.a.createElement(za,{error:m}),!u&&_&&r.a.createElement(Va.a,{initialValues:(h=_,Object.keys(h).reduce((function(e,t){if("list"===h[t].type||"nested object"===h[t].type){var a="list"===h[t].type?"[]":"{}";e[t]=h[t].value?JSON.stringify(h[t].value,null,2):a}else{var n;e[t]=null!==(n=h[t].value)&&void 0!==n?n:""}return e}),{})),onSubmit:O},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement($w,{name:"SOCIAL_AUTH_GITHUB_ORG_KEY",config:_.SOCIAL_AUTH_GITHUB_ORG_KEY}),r.a.createElement(Zw,{name:"SOCIAL_AUTH_GITHUB_ORG_SECRET",config:_.SOCIAL_AUTH_GITHUB_ORG_SECRET}),r.a.createElement($w,{name:"SOCIAL_AUTH_GITHUB_ORG_NAME",config:_.SOCIAL_AUTH_GITHUB_ORG_NAME}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GITHUB_ORG_ORGANIZATION_MAP",config:_.SOCIAL_AUTH_GITHUB_ORG_ORGANIZATION_MAP}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GITHUB_ORG_TEAM_MAP",config:_.SOCIAL_AUTH_GITHUB_ORG_TEAM_MAP}),y&&r.a.createElement(Yl,{error:y})),r.a.createElement(Kw,{onCancel:k,onSubmit:e.handleSubmit,onRevert:i}),a&&r.a.createElement(Mw,{onClose:l,onRevertAll:j}))})))};var pC=function(){var e=Object(c.g)(),t=tC(),a=t.isModalOpen,i=t.toggleModal,l=t.closeModal,o=Uw().PUT,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("github-team");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){o[e]&&(n[e]=o[e],n[e].value=a[e])})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),[o]),null),u=s.isLoading,m=s.error,v=s.request,_=s.result;Object(n.useEffect)((function(){v()}),[v]);var h,E=$a(Object(n.useCallback)(function(){var t=Object(b.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.updateAll(a);case 2:e.push("/settings/github/team/details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),null),y=E.error,g=E.request,O=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(d.a)(Object(d.a)({},t),{},{SOCIAL_AUTH_GITHUB_TEAM_ORGANIZATION_MAP:oC(t.SOCIAL_AUTH_GITHUB_TEAM_ORGANIZATION_MAP),SOCIAL_AUTH_GITHUB_TEAM_TEAM_MAP:oC(t.SOCIAL_AUTH_GITHUB_TEAM_TEAM_MAP)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign.apply(Object,Object(A.a)(Object.entries(_).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(gr.a)({},a,n.default)})))),e.next=3,g(t);case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){e.push("/settings/github/team/details")};return r.a.createElement(Bc,null,u&&r.a.createElement(Nr,null),!u&&m&&r.a.createElement(za,{error:m}),!u&&_&&r.a.createElement(Va.a,{initialValues:(h=_,Object.keys(h).reduce((function(e,t){if("list"===h[t].type||"nested object"===h[t].type){var a="list"===h[t].type?"[]":"{}";e[t]=h[t].value?JSON.stringify(h[t].value,null,2):a}else{var n;e[t]=null!==(n=h[t].value)&&void 0!==n?n:""}return e}),{})),onSubmit:O},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement($w,{name:"SOCIAL_AUTH_GITHUB_TEAM_KEY",config:_.SOCIAL_AUTH_GITHUB_TEAM_KEY}),r.a.createElement(Zw,{name:"SOCIAL_AUTH_GITHUB_TEAM_SECRET",config:_.SOCIAL_AUTH_GITHUB_TEAM_SECRET}),r.a.createElement($w,{name:"SOCIAL_AUTH_GITHUB_TEAM_ID",config:_.SOCIAL_AUTH_GITHUB_TEAM_ID}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GITHUB_TEAM_ORGANIZATION_MAP",config:_.SOCIAL_AUTH_GITHUB_TEAM_ORGANIZATION_MAP}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GITHUB_TEAM_TEAM_MAP",config:_.SOCIAL_AUTH_GITHUB_TEAM_TEAM_MAP}),y&&r.a.createElement(Yl,{error:y})),r.a.createElement(Kw,{onCancel:k,onSubmit:e.handleSubmit,onRevert:i}),a&&r.a.createElement(Mw,{onClose:l,onRevertAll:j}))})))};var bC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/github",n=Object(c.j)({path:"/settings/github",exact:!0}),i=Object(c.j)({path:"/settings/github/:category",exact:!0});return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,n&&r.a.createElement(c.a,{to:"".concat(a,"/default/details"),exact:!0}),i&&r.a.createElement(c.a,{to:"".concat(a,"/").concat(i.params.category,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/:category/details")},r.a.createElement(uC,null)),r.a.createElement(c.b,{path:"".concat(a,"/default/edit")},r.a.createElement(dC,null)),r.a.createElement(c.b,{path:"".concat(a,"/organization/edit")},r.a.createElement(mC,null)),r.a.createElement(c.b,{path:"".concat(a,"/team/edit")},r.a.createElement(pC,null)),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/default/details")},t._({id:"View GitHub Settings"})))))))}));var fC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("google-oauth2");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[]),null),o=l.isLoading,c=l.error,u=l.request,d=l.result;Object(n.useEffect)((function(){u()}),[u]);var m=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/google_oauth2/details",id:0}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:m}),r.a.createElement(Bc,null,o&&r.a.createElement(Nr,null),!o&&c&&r.a.createElement(za,{error:c}),!o&&d&&r.a.createElement(pi,null,Object.keys(d).map((function(e){var t=null===i||void 0===i?void 0:i[e];return r.a.createElement(Fw,{key:e,id:e,helpText:null===t||void 0===t?void 0:t.help_text,label:null===t||void 0===t?void 0:t.label,type:null===t||void 0===t?void 0:t.type,unit:null===t||void 0===t?void 0:t.unit,value:null===d||void 0===d?void 0:d[e]})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"/settings/google_oauth2/edit"},t._({id:"Edit"})))))}));var vC=function(){var e=Object(c.g)(),t=tC(),a=t.isModalOpen,i=t.toggleModal,l=t.closeModal,o=Uw().PUT,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("google-oauth2");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){o[e]&&(n[e]=o[e],n[e].value=a[e])})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),[o]),null),u=s.isLoading,m=s.error,v=s.request,_=s.result;Object(n.useEffect)((function(){v()}),[v]);var h,E=$a(Object(n.useCallback)(function(){var t=Object(b.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.updateAll(a);case 2:e.push("/settings/google_oauth2/details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),null),y=E.error,g=E.request,O=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(d.a)(Object(d.a)({},t),{},{SOCIAL_AUTH_GOOGLE_OAUTH2_WHITELISTED_DOMAINS:oC(t.SOCIAL_AUTH_GOOGLE_OAUTH2_WHITELISTED_DOMAINS),SOCIAL_AUTH_GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS:oC(t.SOCIAL_AUTH_GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS),SOCIAL_AUTH_GOOGLE_OAUTH2_ORGANIZATION_MAP:oC(t.SOCIAL_AUTH_GOOGLE_OAUTH2_ORGANIZATION_MAP),SOCIAL_AUTH_GOOGLE_OAUTH2_TEAM_MAP:oC(t.SOCIAL_AUTH_GOOGLE_OAUTH2_TEAM_MAP)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign.apply(Object,Object(A.a)(Object.entries(_).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(gr.a)({},a,n.default)})))),e.next=3,g(t);case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){e.push("/settings/google_oauth2/details")};return r.a.createElement(Bc,null,u&&r.a.createElement(Nr,null),!u&&m&&r.a.createElement(za,{error:m}),!u&&_&&r.a.createElement(Va.a,{initialValues:(h=_,Object.keys(h).reduce((function(e,t){if("list"===h[t].type||"nested object"===h[t].type){var a="list"===h[t].type?"[]":"{}";e[t]=h[t].value?JSON.stringify(h[t].value,null,2):a}else{var n;e[t]=null!==(n=h[t].value)&&void 0!==n?n:""}return e}),{})),onSubmit:O},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement($w,{name:"SOCIAL_AUTH_GOOGLE_OAUTH2_KEY",config:_.SOCIAL_AUTH_GOOGLE_OAUTH2_KEY}),r.a.createElement(Zw,{name:"SOCIAL_AUTH_GOOGLE_OAUTH2_SECRET",config:_.SOCIAL_AUTH_GOOGLE_OAUTH2_SECRET}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GOOGLE_OAUTH2_WHITELISTED_DOMAINS",config:_.SOCIAL_AUTH_GOOGLE_OAUTH2_WHITELISTED_DOMAINS}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS",config:_.SOCIAL_AUTH_GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GOOGLE_OAUTH2_ORGANIZATION_MAP",config:_.SOCIAL_AUTH_GOOGLE_OAUTH2_ORGANIZATION_MAP}),r.a.createElement(Qw,{name:"SOCIAL_AUTH_GOOGLE_OAUTH2_TEAM_MAP",config:_.SOCIAL_AUTH_GOOGLE_OAUTH2_TEAM_MAP}),y&&r.a.createElement(Yl,{error:y})),r.a.createElement(Kw,{onCancel:k,onSubmit:e.handleSubmit,onRevert:i}),a&&r.a.createElement(Mw,{onClose:l,onRevertAll:j}))})))};var _C=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/google_oauth2";return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(fC,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},r.a.createElement(vC,null)),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View Google OAuth 2.0 settings"})))))))})),hC=["ALLOW_JINJA_IN_EXTRA_VARS","AWX_ISOLATED_KEY_GENERATION","AWX_ISOLATED_PRIVATE_KEY","AWX_ISOLATED_PUBLIC_KEY","STDOUT_MAX_BYTES_DISPLAY","EVENT_STDOUT_MAX_BYTES_DISPLAY"];var EC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("jobs");case 2:return t=e.sent,a=t.data,a.ALLOW_JINJA_IN_EXTRA_VARS,a.AWX_ISOLATED_KEY_GENERATION,a.AWX_ISOLATED_PRIVATE_KEY,a.AWX_ISOLATED_PUBLIC_KEY,a.STDOUT_MAX_BYTES_DISPLAY,a.EVENT_STDOUT_MAX_BYTES_DISPLAY,n=Object(o.a)(a,hC),r={},Object.keys(n).forEach((function(e){r[e]=i[e],r[e].value=n[e]})),e.abrupt("return",iC(r));case 8:case"end":return e.stop()}}),e)}))),[i]),null),c=l.isLoading,u=l.error,d=l.request,m=l.result;Object(n.useEffect)((function(){d()}),[d]);var v=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/jobs/details",id:0}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:v}),r.a.createElement(Bc,null,c&&r.a.createElement(Nr,null),!c&&u&&r.a.createElement(za,{error:u}),!c&&m&&r.a.createElement(pi,null,m.map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return r.a.createElement(Fw,{key:a,id:a,helpText:null===n||void 0===n?void 0:n.help_text,label:null===n||void 0===n?void 0:n.label,type:null===n||void 0===n?void 0:n.type,unit:null===n||void 0===n?void 0:n.unit,value:null===n||void 0===n?void 0:n.value})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"/settings/jobs/edit"},t._({id:"Edit"})))))}));var yC=Object(u.withI18n)()((function(e){var t=e.i18n;return r.a.createElement(Bc,null,t._({id:"Edit form coming soon :)"}),r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"\u53d6\u6d88"}),component:s.b,to:"/settings/jobs/details"},t._({id:"\u53d6\u6d88"}))))}));var gC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/jobs";return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(EC,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},r.a.createElement(yC,null)),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View Jobs settings"})))))))}));function OC(e,t){return Object.keys(e).filter((function(e){return e.includes(t)})).reduce((function(t,a){return t[a]=e[a],t}),{})}var jC=Object(u.withI18n)()((function(e){var t,a=e.i18n,i=Tt().me,l=Uw().GET,o=Object(c.j)("/settings/ldap/:category/details"),u=o.path,m=o.params.category,v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,o,c,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("ldap");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){e.includes("_CONNECTION_OPTIONS")||(n[e]=l[e],n[e].value=a[e])})),r=OC(n,"AUTH_LDAP_1_"),i=OC(n,"AUTH_LDAP_2_"),o=OC(n,"AUTH_LDAP_3_"),c=OC(n,"AUTH_LDAP_4_"),s=OC(n,"AUTH_LDAP_5_"),u=Object.assign({},n),Object.keys(Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},r),i),o),c),s)).forEach((function(e){delete u[e]})),e.abrupt("return",{default:iC(u),1:iC(r),2:iC(i),3:iC(o),4:iC(c),5:iC(s)});case 14:case"end":return e.stop()}}),e)}))),[l]),{default:null,1:null,2:null,3:null,4:null,5:null}),_=v.isLoading,h=v.error,E=v.request,y=v.result;Object(n.useEffect)((function(){E()}),[E]);var g="/settings/ldap",j=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),a._({id:"Back to Settings"})),link:"/settings",id:99},{name:a._({id:"Default"}),link:"".concat(g,"/default/details"),id:0},{name:a._({id:"LDAP1"}),link:"".concat(g,"/1/details"),id:1},{name:a._({id:"LDAP2"}),link:"".concat(g,"/2/details"),id:2},{name:a._({id:"LDAP3"}),link:"".concat(g,"/3/details"),id:3},{name:a._({id:"LDAP4"}),link:"".concat(g,"/4/details"),id:4},{name:a._({id:"LDAP5"}),link:"".concat(g,"/5/details"),id:5}];return Object.keys(y).includes(m)?r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:j}),r.a.createElement(Bc,null,r.a.createElement(r.a.Fragment,null,_&&r.a.createElement(Nr,null),!_&&h&&r.a.createElement(za,{error:h}),!_&&!(null===(t=Object.values(y))||void 0===t?void 0:t.includes(null))&&r.a.createElement(pi,null,y[m].map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return r.a.createElement(Fw,{key:a,id:a,helpText:null===n||void 0===n?void 0:n.help_text,label:null===n||void 0===n?void 0:n.label,type:null===n||void 0===n?void 0:n.type,unit:null===n||void 0===n?void 0:n.unit,value:null===n||void 0===n?void 0:n.value})})))),(null===i||void 0===i?void 0:i.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":a._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"".concat(g,"/").concat(m,"/edit")},a._({id:"Edit"}))))):r.a.createElement(c.a,{from:u,to:"".concat(g,"/default/details"),exact:!0})}));function kC(e,t){return Object.keys(e).filter((function(e){return e.includes(t)})).reduce((function(t,a){return t[a]=e[a],t}),{})}var wC=function(){var e=Object(c.g)(),t=tC(),a=t.isModalOpen,i=t.toggleModal,l=t.closeModal,o=Uw().PUT,s=Object(c.j)("/settings/ldap/:category/edit").params.category,u="default"===s?"AUTH_LDAP_":"AUTH_LDAP_".concat(s,"_"),m=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("ldap");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){o[e]&&(n[e]=o[e],n[e].value=a[e])})),r={AUTH_LDAP_1_:kC(n,"AUTH_LDAP_1_"),AUTH_LDAP_2_:kC(n,"AUTH_LDAP_2_"),AUTH_LDAP_3_:kC(n,"AUTH_LDAP_3_"),AUTH_LDAP_4_:kC(n,"AUTH_LDAP_4_"),AUTH_LDAP_5_:kC(n,"AUTH_LDAP_5_"),AUTH_LDAP_:Object.assign({},n)},Object.keys(Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},r.AUTH_LDAP_1_),r.AUTH_LDAP_2_),r.AUTH_LDAP_3_),r.AUTH_LDAP_4_),r.AUTH_LDAP_5_)).forEach((function(e){delete r.AUTH_LDAP_[e]})),e.abrupt("return",r[u]);case 9:case"end":return e.stop()}}),e)}))),[o,u]),null),v=m.isLoading,_=m.error,h=m.request,E=m.result;Object(n.useEffect)((function(){h()}),[h]);var y,g=$a(Object(n.useCallback)(function(){var t=Object(b.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.updateAll(a);case 2:e.push("/settings/ldap/".concat(s,"/details"));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,s]),null),O=g.error,j=g.request,k=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j((a={},Object(gr.a)(a,"".concat(u,"BIND_DN"),t["".concat(u,"BIND_DN")]),Object(gr.a)(a,"".concat(u,"BIND_PASSWORD"),t["".concat(u,"BIND_PASSWORD")]),Object(gr.a)(a,"".concat(u,"DENY_GROUP"),t["".concat(u,"DENY_GROUP")]),Object(gr.a)(a,"".concat(u,"GROUP_TYPE"),t["".concat(u,"GROUP_TYPE")]),Object(gr.a)(a,"".concat(u,"REQUIRE_GROUP"),t["".concat(u,"REQUIRE_GROUP")]),Object(gr.a)(a,"".concat(u,"SERVER_URI"),t["".concat(u,"SERVER_URI")]),Object(gr.a)(a,"".concat(u,"START_TLS"),t["".concat(u,"START_TLS")]),Object(gr.a)(a,"".concat(u,"USER_DN_TEMPLATE"),t["".concat(u,"USER_DN_TEMPLATE")]),Object(gr.a)(a,"".concat(u,"GROUP_SEARCH"),oC(t["".concat(u,"GROUP_SEARCH")])),Object(gr.a)(a,"".concat(u,"GROUP_TYPE_PARAMS"),oC(t["".concat(u,"GROUP_TYPE_PARAMS")])),Object(gr.a)(a,"".concat(u,"ORGANIZATION_MAP"),oC(t["".concat(u,"ORGANIZATION_MAP")])),Object(gr.a)(a,"".concat(u,"TEAM_MAP"),oC(t["".concat(u,"TEAM_MAP")])),Object(gr.a)(a,"".concat(u,"USER_ATTR_MAP"),oC(t["".concat(u,"USER_ATTR_MAP")])),Object(gr.a)(a,"".concat(u,"USER_FLAGS_BY_GROUP"),oC(t["".concat(u,"USER_FLAGS_BY_GROUP")])),Object(gr.a)(a,"".concat(u,"USER_SEARCH"),oC(t["".concat(u,"USER_SEARCH")])),a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign.apply(Object,Object(A.a)(Object.entries(E).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(gr.a)({},a,n.default)})))),e.next=3,j(t);case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){e.push("/settings/ldap/".concat(s,"/details"))};return r.a.createElement(Bc,null,v&&r.a.createElement(Nr,null),!v&&_&&r.a.createElement(za,{error:_}),!v&&E&&r.a.createElement(Va.a,{initialValues:(y=E,Object.keys(y).reduce((function(e,t){if("list"===y[t].type||"nested object"===y[t].type){var a="list"===y[t].type?"[]":"{}";e[t]=y[t].value?JSON.stringify(y[t].value,null,2):a}else{var n;e[t]=null!==(n=y[t].value)&&void 0!==n?n:""}return e}),{})),onSubmit:k},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement($w,{name:"".concat(u,"SERVER_URI"),config:E["".concat(u,"SERVER_URI")]}),r.a.createElement(Zw,{name:"".concat(u,"BIND_PASSWORD"),config:E["".concat(u,"BIND_PASSWORD")]}),r.a.createElement(Xw,{name:"".concat(u,"GROUP_TYPE"),config:E["".concat(u,"GROUP_TYPE")]}),r.a.createElement(Yw,{name:"".concat(u,"START_TLS"),config:E["".concat(u,"START_TLS")]}),r.a.createElement(Hl,null,r.a.createElement($w,{name:"".concat(u,"BIND_DN"),config:E["".concat(u,"BIND_DN")]}),r.a.createElement($w,{name:"".concat(u,"USER_DN_TEMPLATE"),config:E["".concat(u,"USER_DN_TEMPLATE")]}),r.a.createElement($w,{name:"".concat(u,"REQUIRE_GROUP"),config:E["".concat(u,"REQUIRE_GROUP")]}),r.a.createElement($w,{name:"".concat(u,"DENY_GROUP"),config:E["".concat(u,"DENY_GROUP")]})),r.a.createElement(Qw,{name:"".concat(u,"USER_SEARCH"),config:E["".concat(u,"USER_SEARCH")]}),r.a.createElement(Qw,{name:"".concat(u,"GROUP_SEARCH"),config:E["".concat(u,"GROUP_SEARCH")]}),r.a.createElement(Qw,{name:"".concat(u,"USER_ATTR_MAP"),config:E["".concat(u,"USER_ATTR_MAP")]}),r.a.createElement(Qw,{name:"".concat(u,"GROUP_TYPE_PARAMS"),config:E["".concat(u,"GROUP_TYPE_PARAMS")]}),r.a.createElement(Qw,{name:"".concat(u,"USER_FLAGS_BY_GROUP"),config:E["".concat(u,"USER_FLAGS_BY_GROUP")]}),r.a.createElement(Qw,{name:"".concat(u,"ORGANIZATION_MAP"),config:E["".concat(u,"ORGANIZATION_MAP")]}),r.a.createElement(Qw,{name:"".concat(u,"TEAM_MAP"),config:E["".concat(u,"TEAM_MAP")]}),O&&r.a.createElement(Yl,{error:O})),r.a.createElement(Kw,{onCancel:C,onSubmit:e.handleSubmit,onRevert:i}),a&&r.a.createElement(Mw,{onClose:l,onRevertAll:w}))})))};var CC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/ldap",n=Object(c.j)({path:"/settings/ldap",exact:!0}),i=Object(c.j)({path:"/settings/ldap/:category",exact:!0});return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,n&&r.a.createElement(c.a,{to:"".concat(a,"/default/details"),exact:!0}),i&&r.a.createElement(c.a,{to:"".concat(a,"/").concat(i.params.category,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/:category/details")},r.a.createElement(jC,null)),r.a.createElement(c.b,{path:"".concat(a,"/:category/edit")},r.a.createElement(wC,null)),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/default/details")},t._({id:"View LDAP Settings"})))))))}));var SC=Object(u.withI18n)()((function(e){var t=e.i18n;return r.a.createElement(Bc,null,t._({id:"Detail coming soon :)"}),r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"/settings/license/edit"},t._({id:"Edit"}))))}));var xC=Object(u.withI18n)()((function(e){var t=e.i18n;return r.a.createElement(Bc,null,t._({id:"Edit form coming soon :)"}),r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"\u53d6\u6d88"}),component:s.b,to:"/settings/license/details"},t._({id:"\u53d6\u6d88"}))))}));var TC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/license";return r.a.createElement(La.a,null,r.a.createElement(na.a,null,t._({id:"License settings"}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(SC,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},r.a.createElement(xC,null)))))}));var IC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("logging");case 2:return t=e.sent,a=t.data,n=lC(a,"LOG_AGGREGATOR_ENABLED","LOG_AGGREGATOR_HOST","LOG_AGGREGATOR_INDIVIDUAL_FACTS","LOG_AGGREGATOR_LEVEL","LOG_AGGREGATOR_LOGGERS","LOG_AGGREGATOR_PASSWORD","LOG_AGGREGATOR_PORT","LOG_AGGREGATOR_PROTOCOL","LOG_AGGREGATOR_TCP_TIMEOUT","LOG_AGGREGATOR_TYPE","LOG_AGGREGATOR_USERNAME","LOG_AGGREGATOR_VERIFY_CERT"),r={},Object.keys(n).forEach((function(e){r[e]=i[e],r[e].value=n[e]})),e.abrupt("return",iC(r));case 8:case"end":return e.stop()}}),e)}))),[i]),null),o=l.isLoading,c=l.error,u=l.request,d=l.result;Object(n.useEffect)((function(){u()}),[u]);var m=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/logging/details",id:0}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:m}),r.a.createElement(Bc,null,o&&r.a.createElement(Nr,null),!o&&c&&r.a.createElement(za,{error:c}),!o&&d&&r.a.createElement(pi,null,d.map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return r.a.createElement(Fw,{key:a,id:a,helpText:null===n||void 0===n?void 0:n.help_text,label:null===n||void 0===n?void 0:n.label,type:null===n||void 0===n?void 0:n.type,unit:null===n||void 0===n?void 0:n.unit,value:null===n||void 0===n?void 0:n.value})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"/settings/logging/edit"},t._({id:"Edit"})))))}));var AC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.g)(),i=tC(),l=i.isModalOpen,o=i.toggleModal,s=i.closeModal,u=Uw().PUT,m=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("logging");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){u[e]&&(n[e]=u[e],n[e].value=a[e])})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),[u]),null),v=m.isLoading,_=m.error,h=m.request,E=m.result;Object(n.useEffect)((function(){h()}),[h]);var y,g=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.updateAll(t);case 2:a.push("/settings/logging/details");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),null),j=g.error,k=g.request,w=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(Object(d.a)(Object(d.a)({},t),{},{LOG_AGGREGATOR_LOGGERS:oC(t.LOG_AGGREGATOR_LOGGERS),LOG_AGGREGATOR_HOST:t.LOG_AGGREGATOR_HOST||null,LOG_AGGREGATOR_TYPE:t.LOG_AGGREGATOR_TYPE||null}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},Object.entries(E).forEach((function(e){var a=Object(f.a)(e,2),n=a[0],r=a[1];t[n]=r.default})),e.next=4,k(t);case 4:s();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.createTest("logging",{});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),[]),null),x=S.error,T=S.request,I=S.result,A=S.setValue,R=Qa(x),N=R.error,D=R.dismissError,L=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){A(null),D()},U=function(){a.push("/settings/logging/details")};return r.a.createElement(Bc,null,v&&r.a.createElement(Nr,null),!v&&_&&r.a.createElement(za,{error:_}),!v&&E&&r.a.createElement(Va.a,{initialValues:(y=E,Object.keys(y).reduce((function(e,t){var a;return"list"===y[t].type?e[t]=JSON.stringify(y[t].value,null,2):e[t]=null!==(a=y[t].value)&&void 0!==a?a:"",e}),{})),onSubmit:w},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(Yw,{name:"LOG_AGGREGATOR_ENABLED",config:Object(d.a)(Object(d.a)({},E.LOG_AGGREGATOR_ENABLED),{},{help_text:r.a.createElement(r.a.Fragment,null,E.LOG_AGGREGATOR_ENABLED.help_text,!e.values.LOG_AGGREGATOR_ENABLED&&(!e.values.LOG_AGGREGATOR_HOST||!e.values.LOG_AGGREGATOR_TYPE)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),t._({id:"Cannot enable log aggregator without providing logging aggregator host and logging aggregator type."})))}),ariaLabel:t._({id:"Enable external logging"}),disabled:!e.values.LOG_AGGREGATOR_ENABLED&&(!e.values.LOG_AGGREGATOR_HOST||!e.values.LOG_AGGREGATOR_TYPE)}),r.a.createElement($w,{name:"LOG_AGGREGATOR_HOST",config:E.LOG_AGGREGATOR_HOST,isRequired:Boolean(e.values.LOG_AGGREGATOR_ENABLED)}),r.a.createElement($w,{name:"LOG_AGGREGATOR_PORT",config:E.LOG_AGGREGATOR_PORT,type:"number"}),r.a.createElement(Xw,{name:"LOG_AGGREGATOR_TYPE",config:E.LOG_AGGREGATOR_TYPE,isRequired:Boolean(e.values.LOG_AGGREGATOR_ENABLED)}),r.a.createElement($w,{name:"LOG_AGGREGATOR_USERNAME",config:E.LOG_AGGREGATOR_USERNAME}),r.a.createElement(Zw,{name:"LOG_AGGREGATOR_PASSWORD",config:E.LOG_AGGREGATOR_PASSWORD}),r.a.createElement(Yw,{name:"LOG_AGGREGATOR_INDIVIDUAL_FACTS",ariaLabel:t._({id:"Enable log system tracking facts individually"}),config:E.LOG_AGGREGATOR_INDIVIDUAL_FACTS}),r.a.createElement(Xw,{name:"LOG_AGGREGATOR_PROTOCOL",config:E.LOG_AGGREGATOR_PROTOCOL}),r.a.createElement(Xw,{name:"LOG_AGGREGATOR_LEVEL",config:E.LOG_AGGREGATOR_LEVEL}),["tcp","https"].includes(e.values.LOG_AGGREGATOR_PROTOCOL)&&r.a.createElement($w,{name:"LOG_AGGREGATOR_TCP_TIMEOUT",config:E.LOG_AGGREGATOR_TCP_TIMEOUT,type:"number",isRequired:!0}),"https"===e.values.LOG_AGGREGATOR_PROTOCOL&&r.a.createElement(Yw,{name:"LOG_AGGREGATOR_VERIFY_CERT",ariaLabel:t._({id:"Enable HTTPS certificate verification"}),config:E.LOG_AGGREGATOR_VERIFY_CERT}),r.a.createElement(Qw,{name:"LOG_AGGREGATOR_LOGGERS",config:E.LOG_AGGREGATOR_LOGGERS}),j&&r.a.createElement(Yl,{error:j}),r.a.createElement(Kw,{onCancel:U,onSubmit:e.handleSubmit,onRevert:o},r.a.createElement(Ea.a,{content:e.dirty||!e.values.LOG_AGGREGATOR_ENABLED?t._({id:"Save and enable log aggregation before testing the log aggregator."}):t._({id:"Send a test log message to the configured log aggregator."})},r.a.createElement("div",null,r.a.createElement(O.a,{"aria-label":t._({id:"Test logging"}),ouiaId:"test-logging-button",variant:"secondary",type:"button",onClick:L,isDisabled:e.dirty||!e.values.LOG_AGGREGATOR_ENABLED||I||N},t._({id:"Test"})))))),l&&r.a.createElement(Mw,{onClose:s,onRevertAll:C}),(I||N)&&r.a.createElement(qw,{successResponse:I,errorResponse:N,onClose:P}))})))}));var RC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/logging",n=Tt().me;return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(IC,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},(null===n||void 0===n?void 0:n.is_superuser)?r.a.createElement(AC,null):r.a.createElement(c.a,{to:"".concat(a,"/details")})),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View Logging settings"})))))))})),NC=["OAUTH2_PROVIDER"],DC=["OAUTH2_PROVIDER"];var LC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n,r,l,c,s,u,m,b,f,v,_,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("all");case 2:return a=e.sent,n=a.data,r=lC(n,"ALLOW_OAUTH2_FOR_EXTERNAL_USERS","AUTH_BASIC_ENABLED","AUTOMATION_ANALYTICS_GATHER_INTERVAL","AUTOMATION_ANALYTICS_URL","CUSTOM_VENV_PATHS","INSIGHTS_TRACKING_STATE","LOGIN_REDIRECT_OVERRIDE","MANAGE_ORGANIZATION_AUTH","OAUTH2_PROVIDER","ORG_ADMINS_CAN_SEE_ALL_USERS","REDHAT_PASSWORD","REDHAT_USERNAME","REMOTE_HOST_HEADERS","SESSIONS_PER_USER","SESSION_COOKIE_AGE","TOWER_URL_BASE"),l=r.OAUTH2_PROVIDER,c=l.ACCESS_TOKEN_EXPIRE_SECONDS,s=l.REFRESH_TOKEN_EXPIRE_SECONDS,u=l.AUTHORIZATION_CODE_EXPIRE_SECONDS,m=Object(o.a)(r,NC),b=Object(d.a)(Object(d.a)({},m),{},{ACCESS_TOKEN_EXPIRE_SECONDS:c,REFRESH_TOKEN_EXPIRE_SECONDS:s,AUTHORIZATION_CODE_EXPIRE_SECONDS:u}),f=i.OAUTH2_PROVIDER,v=Object(o.a)(i,DC),_=Object(d.a)(Object(d.a)({},v),{},{ACCESS_TOKEN_EXPIRE_SECONDS:Object(d.a)(Object(d.a)({},f),{},{type:f.child.type,label:t._({id:"Access Token Expiration"})}),REFRESH_TOKEN_EXPIRE_SECONDS:Object(d.a)(Object(d.a)({},f),{},{type:f.child.type,label:t._({id:"Refresh Token Expiration"})}),AUTHORIZATION_CODE_EXPIRE_SECONDS:Object(d.a)(Object(d.a)({},f),{},{type:f.child.type,label:t._({id:"Authorization Code Expiration"})})}),h={},Object.keys(b).forEach((function(e){h[e]=_[e],h[e].value=b[e]})),e.abrupt("return",iC(h));case 11:case"end":return e.stop()}}),e)}))),[i,t]),null),c=l.isLoading,u=l.error,m=l.request,v=l.result;Object(n.useEffect)((function(){m()}),[m]);var _=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/miscellaneous_system/details",id:0}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:_}),r.a.createElement(Bc,null,c&&r.a.createElement(Nr,null),!c&&u&&r.a.createElement(za,{error:u}),!c&&v&&r.a.createElement(pi,null,v.map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return r.a.createElement(Fw,{key:a,id:a,helpText:null===n||void 0===n?void 0:n.help_text,label:null===n||void 0===n?void 0:n.label,type:null===n||void 0===n?void 0:n.type,unit:null===n||void 0===n?void 0:n.unit,value:null===n||void 0===n?void 0:n.value})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"/settings/miscellaneous_system/edit"},t._({id:"Edit"})))))})),PC=["OAUTH2_PROVIDER"],UC=["OAUTH2_PROVIDER"],GC=["ACCESS_TOKEN_EXPIRE_SECONDS","REFRESH_TOKEN_EXPIRE_SECONDS","AUTHORIZATION_CODE_EXPIRE_SECONDS"],qC=["ACCESS_TOKEN_EXPIRE_SECONDS","REFRESH_TOKEN_EXPIRE_SECONDS","AUTHORIZATION_CODE_EXPIRE_SECONDS"];var FC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.g)(),i=tC(),l=i.isModalOpen,s=i.toggleModal,u=i.closeModal,m=Uw().PUT,v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n,r,i,l,c,s,u,b,f,v,_,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("all");case 2:return a=e.sent,n=a.data,r=lC(n,"ALLOW_OAUTH2_FOR_EXTERNAL_USERS","AUTH_BASIC_ENABLED","AUTOMATION_ANALYTICS_GATHER_INTERVAL","AUTOMATION_ANALYTICS_URL","CUSTOM_VENV_PATHS","INSIGHTS_TRACKING_STATE","LOGIN_REDIRECT_OVERRIDE","MANAGE_ORGANIZATION_AUTH","OAUTH2_PROVIDER","ORG_ADMINS_CAN_SEE_ALL_USERS","REDHAT_PASSWORD","REDHAT_USERNAME","REMOTE_HOST_HEADERS","SESSIONS_PER_USER","SESSION_COOKIE_AGE","TOWER_URL_BASE"),i=r.OAUTH2_PROVIDER,l=i.ACCESS_TOKEN_EXPIRE_SECONDS,c=i.REFRESH_TOKEN_EXPIRE_SECONDS,s=i.AUTHORIZATION_CODE_EXPIRE_SECONDS,u=Object(o.a)(r,PC),b=Object(d.a)(Object(d.a)({},u),{},{ACCESS_TOKEN_EXPIRE_SECONDS:l,REFRESH_TOKEN_EXPIRE_SECONDS:c,AUTHORIZATION_CODE_EXPIRE_SECONDS:s}),f=m.OAUTH2_PROVIDER,v=Object(o.a)(m,UC),_=Object(d.a)(Object(d.a)({},v),{},{ACCESS_TOKEN_EXPIRE_SECONDS:Object(d.a)(Object(d.a)({},f),{},{default:f.default.ACCESS_TOKEN_EXPIRE_SECONDS,type:f.child.type,label:t._({id:"Access Token Expiration"})}),REFRESH_TOKEN_EXPIRE_SECONDS:Object(d.a)(Object(d.a)({},f),{},{default:f.default.REFRESH_TOKEN_EXPIRE_SECONDS,type:f.child.type,label:t._({id:"Refresh Token Expiration"})}),AUTHORIZATION_CODE_EXPIRE_SECONDS:Object(d.a)(Object(d.a)({},f),{},{default:f.default.AUTHORIZATION_CODE_EXPIRE_SECONDS,type:f.child.type,label:t._({id:"Authorization Code Expiration"})})}),h={},Object.keys(b).forEach((function(e){_[e]&&(h[e]=_[e],h[e].value=b[e])})),e.abrupt("return",h);case 11:case"end":return e.stop()}}),e)}))),[m,t]),null),_=v.isLoading,h=v.error,E=v.request,y=v.result;Object(n.useEffect)((function(){E()}),[E]);var g,O=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.updateAll(t);case 2:a.push("/settings/miscellaneous_system/details");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),null),j=O.error,k=O.request,w=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ACCESS_TOKEN_EXPIRE_SECONDS,n=t.REFRESH_TOKEN_EXPIRE_SECONDS,r=t.AUTHORIZATION_CODE_EXPIRE_SECONDS,i=Object(o.a)(t,GC),e.next=3,k(Object(d.a)(Object(d.a)({},i),{},{CUSTOM_VENV_PATHS:oC(i.CUSTOM_VENV_PATHS),REMOTE_HOST_HEADERS:oC(i.REMOTE_HOST_HEADERS),OAUTH2_PROVIDER:{ACCESS_TOKEN_EXPIRE_SECONDS:a,REFRESH_TOKEN_EXPIRE_SECONDS:n,AUTHORIZATION_CODE_EXPIRE_SECONDS:r}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.ACCESS_TOKEN_EXPIRE_SECONDS,a=y.REFRESH_TOKEN_EXPIRE_SECONDS,n=y.AUTHORIZATION_CODE_EXPIRE_SECONDS,r=Object(o.a)(y,qC),i={},Object.entries(r).forEach((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];i[a]=n.default})),e.next=5,k(Object(d.a)(Object(d.a)({},i),{},{OAUTH2_PROVIDER:{ACCESS_TOKEN_EXPIRE_SECONDS:t.default,REFRESH_TOKEN_EXPIRE_SECONDS:a.default,AUTHORIZATION_CODE_EXPIRE_SECONDS:n.default}}));case 5:u();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){a.push("/settings/miscellaneous_system/details")};return r.a.createElement(Bc,null,_&&r.a.createElement(Nr,null),!_&&h&&r.a.createElement(za,{error:h}),!_&&y&&r.a.createElement(Va.a,{initialValues:(g=y,Object.keys(g).reduce((function(e,t){var a;return"list"===g[t].type?e[t]=JSON.stringify(g[t].value,null,2):e[t]=null!==(a=g[t].value)&&void 0!==a?a:"",e}),{})),onSubmit:w},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement($w,{name:"TOWER_URL_BASE",config:y.TOWER_URL_BASE,isRequired:!0,type:"url"}),r.a.createElement(Yw,{name:"ORG_ADMINS_CAN_SEE_ALL_USERS",config:y.ORG_ADMINS_CAN_SEE_ALL_USERS}),r.a.createElement(Yw,{name:"MANAGE_ORGANIZATION_AUTH",config:y.MANAGE_ORGANIZATION_AUTH}),r.a.createElement($w,{name:"SESSION_COOKIE_AGE",config:y.SESSION_COOKIE_AGE,type:"number",isRequired:!0}),r.a.createElement($w,{name:"SESSIONS_PER_USER",config:y.SESSIONS_PER_USER,type:"number",isRequired:!0}),r.a.createElement(Yw,{name:"AUTH_BASIC_ENABLED",config:y.AUTH_BASIC_ENABLED}),r.a.createElement(Yw,{name:"ALLOW_OAUTH2_FOR_EXTERNAL_USERS",config:y.ALLOW_OAUTH2_FOR_EXTERNAL_USERS}),r.a.createElement($w,{name:"LOGIN_REDIRECT_OVERRIDE",config:y.LOGIN_REDIRECT_OVERRIDE,type:"url"}),r.a.createElement($w,{name:"ACCESS_TOKEN_EXPIRE_SECONDS",config:y.ACCESS_TOKEN_EXPIRE_SECONDS,type:"number"}),r.a.createElement($w,{name:"REFRESH_TOKEN_EXPIRE_SECONDS",config:y.REFRESH_TOKEN_EXPIRE_SECONDS,type:"number"}),r.a.createElement($w,{name:"AUTHORIZATION_CODE_EXPIRE_SECONDS",config:y.AUTHORIZATION_CODE_EXPIRE_SECONDS,type:"number"}),r.a.createElement(Yw,{name:"INSIGHTS_TRACKING_STATE",config:y.INSIGHTS_TRACKING_STATE}),r.a.createElement($w,{name:"REDHAT_USERNAME",config:y.REDHAT_USERNAME}),r.a.createElement(Zw,{name:"REDHAT_PASSWORD",config:y.REDHAT_PASSWORD}),r.a.createElement($w,{name:"AUTOMATION_ANALYTICS_URL",config:y.AUTOMATION_ANALYTICS_URL,type:"url"}),r.a.createElement($w,{name:"AUTOMATION_ANALYTICS_GATHER_INTERVAL",config:y.AUTOMATION_ANALYTICS_GATHER_INTERVAL,type:"number",isRequired:!0}),r.a.createElement(Qw,{name:"REMOTE_HOST_HEADERS",config:y.REMOTE_HOST_HEADERS,isRequired:!0}),r.a.createElement(Qw,{name:"CUSTOM_VENV_PATHS",config:y.CUSTOM_VENV_PATHS}),j&&r.a.createElement(Yl,{error:j})),r.a.createElement(Kw,{onCancel:S,onSubmit:e.handleSubmit,onRevert:s}),l&&r.a.createElement(Mw,{onClose:u,onRevertAll:C}))})))}));var zC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/miscellaneous_system",n=Tt().me;return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(LC,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},(null===n||void 0===n?void 0:n.is_superuser)?r.a.createElement(FC,null):r.a.createElement(c.a,{to:"".concat(a,"/details")})),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View Miscellaneous System settings"})))))))}));var MC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("radius");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[]),null),o=l.isLoading,c=l.error,u=l.request,d=l.result;Object(n.useEffect)((function(){u()}),[u]);var m=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/radius/details",id:0}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:m}),r.a.createElement(Bc,null,o&&r.a.createElement(Nr,null),!o&&c&&r.a.createElement(za,{error:c}),!o&&d&&r.a.createElement(pi,null,Object.keys(d).map((function(e){var t=null===i||void 0===i?void 0:i[e];return r.a.createElement(Fw,{key:e,id:e,helpText:null===t||void 0===t?void 0:t.help_text,label:null===t||void 0===t?void 0:t.label,type:null===t||void 0===t?void 0:t.type,unit:null===t||void 0===t?void 0:t.unit,value:null===d||void 0===d?void 0:d[e]})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"/settings/radius/edit"},t._({id:"Edit"})))))}));var KC=function(){var e=Object(c.g)(),t=tC(),a=t.isModalOpen,i=t.toggleModal,l=t.closeModal,o=Uw().PUT,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("radius");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){n[e]=o[e],n[e].value=a[e]})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),[o]),null),u=s.isLoading,d=s.error,m=s.request,v=s.result;Object(n.useEffect)((function(){m()}),[m]);var _,h=$a(Object(n.useCallback)(function(){var t=Object(b.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.updateAll(a);case 2:e.push("/settings/radius/details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),null),E=h.error,y=h.request,g=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign.apply(Object,Object(A.a)(Object.entries(v).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(gr.a)({},a,n.default)})))),e.next=3,y(t);case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){e.push("/settings/radius/details")};return r.a.createElement(Bc,null,u&&r.a.createElement(Nr,null),!u&&d&&r.a.createElement(za,{error:d}),!u&&v&&r.a.createElement(Va.a,{initialValues:(_=v,Object.keys(_).reduce((function(e,t){var a;return e[t]=null!==(a=_[t].value)&&void 0!==a?a:"",e}),{})),onSubmit:g},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement($w,{name:"RADIUS_SERVER",config:v.RADIUS_SERVER}),r.a.createElement($w,{name:"RADIUS_PORT",config:v.RADIUS_PORT}),r.a.createElement(Zw,{name:"RADIUS_SECRET",config:v.RADIUS_SECRET}),E&&r.a.createElement(Yl,{error:E})),r.a.createElement(Kw,{onCancel:j,onSubmit:e.handleSubmit,onRevert:i}),a&&r.a.createElement(Mw,{onClose:l,onRevertAll:O}))})))};var VC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/radius";return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(MC,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},r.a.createElement(KC,null)),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View RADIUS settings"})))))))}));var HC=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("saml");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[]),null),o=l.isLoading,c=l.error,u=l.request,d=l.result;Object(n.useEffect)((function(){u()}),[u]);var m=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/saml/details",id:0}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:m}),r.a.createElement(Bc,null,o&&r.a.createElement(Nr,null),!o&&c&&r.a.createElement(za,{error:c}),!o&&d&&r.a.createElement(pi,null,Object.keys(d).map((function(e){var t=null===i||void 0===i?void 0:i[e];return r.a.createElement(Fw,{key:e,id:e,helpText:null===t||void 0===t?void 0:t.help_text,label:null===t||void 0===t?void 0:t.label,type:null===t||void 0===t?void 0:t.type,unit:null===t||void 0===t?void 0:t.unit,value:null===d||void 0===d?void 0:d[e]})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,ouiaId:"edit-button",to:"/settings/saml/edit"},t._({id:"Edit"})))))}));var BC=Object(u.withI18n)()((function(e){var t=e.i18n;return r.a.createElement(Bc,null,t._({id:"Edit form coming soon :)"}),r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"\u53d6\u6d88"}),component:s.b,to:"/settings/saml/details"},t._({id:"\u53d6\u6d88"}))))}));var WC,JC,YC,XC,ZC=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/saml";return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(HC,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},r.a.createElement(BC,null)),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View SAML settings"})))))))})),$C=a(1083),QC=Object(j.b)(La.a)(WC||(WC=Object(v.a)(["\n  column-count: 1;\n  column-gap: 24px;\n  @media (min-width: 576px) {\n    column-count: 2;\n  }\n"]))),eS=Object(j.b)(na.a)(JC||(JC=Object(v.a)(["\n  display: inline-block;\n  margin-bottom: 24px;\n  width: 100%;\n"]))),tS=Object(j.b)(qd.a)(YC||(YC=Object(v.a)(["\n  align-items: flex-start;\n  display: flex;\n  flex-flow: column nowrap;\n  && > * {\n    padding: 0;\n  }\n"]))),aS=j.b.div(XC||(XC=Object(v.a)(["\n  color: var(--pf-global--palette--black-600);\n  font-size: var(--pf-global--FontSize--xs);\n"])));var nS=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt(),n=[{header:t._({id:"Authentication"}),description:t._({id:"Enable simplified login for your {brandName} applications",values:{brandName:"AWX"}}),id:"authentication",routes:[{title:t._({id:"Azure AD settings"}),path:"/settings/azure"},{title:t._({id:"GitHub settings"}),path:"/settings/github"},{title:t._({id:"Google OAuth 2 settings"}),path:"/settings/google_oauth2"},{title:t._({id:"LDAP settings"}),path:"/settings/ldap"},{title:t._({id:"RADIUS settings"}),path:"/settings/radius"},{title:t._({id:"SAML settings"}),path:"/settings/saml"},{title:t._({id:"TACACS+ settings"}),path:"/settings/tacacs"}]},{header:t._({id:"\u4f5c\u4e1a"}),description:t._({id:"Update settings pertaining to Jobs within {brandName}",values:{brandName:"AWX"}}),id:"jobs",routes:[{title:t._({id:"Jobs settings"}),path:"/settings/jobs"}]},{header:t._({id:"System"}),description:t._({id:"Define system-level features and functions"}),id:"system",routes:[{title:t._({id:"Miscellaneous System settings"}),path:"/settings/miscellaneous_system"},{title:t._({id:"Activity Stream settings"}),path:"/settings/activity_stream"},{title:t._({id:"Logging settings"}),path:"/settings/logging"}]},{header:t._({id:"User Interface"}),description:t._({id:"Set preferences for data collection, logos, and logins"}),id:"ui",routes:[{title:t._({id:"User Interface settings"}),path:"/settings/ui"}]},{header:t._({id:"License"}),description:t._({id:"View and edit your license information"}),id:"license",routes:[{title:t._({id:"License settings"}),path:"/settings/license"}]}];return 0===Object.keys(a).length?r.a.createElement(La.a,null,r.a.createElement(eS,null,r.a.createElement(Nr,null))):r.a.createElement(QC,null,n.map((function(e){var t,n=e.description,i=e.header,l=e.id,o=e.routes;return"license"===l&&"open"===(null===a||void 0===a||null===(t=a.license_info)||void 0===t?void 0:t.license_type)?null:r.a.createElement(eS,{isCompact:!0,key:i},r.a.createElement(tS,null,r.a.createElement($C.a,null,i),r.a.createElement(aS,null,n)),r.a.createElement(_o.a,{"aria-label":"".concat(l,"-settings"),isCompact:!0},o.map((function(e){var t=e.title,a=e.path;return r.a.createElement(ho.a,{key:t},r.a.createElement(Eo.a,null,r.a.createElement(yo.a,{dataListCells:[r.a.createElement(go.a,{key:t},r.a.createElement(s.b,{to:a},t))]})))}))))})))}));var rS=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("tacacsplus");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[]),null),o=l.isLoading,c=l.error,u=l.request,d=l.result;Object(n.useEffect)((function(){u()}),[u]);var m=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/tacacs/details",id:0}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:m}),r.a.createElement(Bc,null,o&&r.a.createElement(Nr,null),!o&&c&&r.a.createElement(za,{error:c}),!o&&d&&r.a.createElement(pi,null,Object.keys(d).map((function(e){var t=null===i||void 0===i?void 0:i[e];return r.a.createElement(Fw,{key:e,id:e,helpText:null===t||void 0===t?void 0:t.help_text,label:null===t||void 0===t?void 0:t.label,type:null===t||void 0===t?void 0:t.type,unit:null===t||void 0===t?void 0:t.unit,value:null===d||void 0===d?void 0:d[e]})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,to:"/settings/tacacs/edit",ouiaId:"edit-button"},t._({id:"Edit"})))))}));var iS=function(){var e=Object(c.g)(),t=tC(),a=t.isModalOpen,i=t.toggleModal,l=t.closeModal,o=Uw().PUT,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("tacacsplus");case 2:return t=e.sent,a=t.data,n={},Object.keys(a).forEach((function(e){n[e]=o[e],n[e].value=a[e]})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),[o]),null),u=s.isLoading,d=s.error,m=s.request,v=s.result;Object(n.useEffect)((function(){m()}),[m]);var _,h=$a(Object(n.useCallback)(function(){var t=Object(b.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.updateAll(a);case 2:e.push("/settings/tacacs/details");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),null),E=h.error,y=h.request,g=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign.apply(Object,Object(A.a)(Object.entries(v).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return Object(gr.a)({},a,n.default)})))),e.next=3,y(t);case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){e.push("/settings/tacacs/details")};return r.a.createElement(Bc,null,u&&r.a.createElement(Nr,null),!u&&d&&r.a.createElement(za,{error:d}),!u&&v&&r.a.createElement(Va.a,{initialValues:(_=v,Object.keys(_).reduce((function(e,t){var a;return e[t]=null!==(a=_[t].value)&&void 0!==a?a:"",e}),{})),onSubmit:g},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement($w,{name:"TACACSPLUS_HOST",config:v.TACACSPLUS_HOST}),r.a.createElement($w,{name:"TACACSPLUS_PORT",config:v.TACACSPLUS_PORT,type:"number"}),r.a.createElement(Zw,{name:"TACACSPLUS_SECRET",config:v.TACACSPLUS_SECRET}),r.a.createElement($w,{name:"TACACSPLUS_SESSION_TIMEOUT",config:v.TACACSPLUS_SESSION_TIMEOUT,type:"number"}),r.a.createElement(Xw,{name:"TACACSPLUS_AUTH_PROTOCOL",config:v.TACACSPLUS_AUTH_PROTOCOL}),E&&r.a.createElement(Yl,{error:E})),r.a.createElement(Kw,{onCancel:j,onSubmit:e.handleSubmit,onRevert:i}),a&&r.a.createElement(Mw,{onClose:l,onRevertAll:O}))})))};var lS=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/tacacs";return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(rS,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},r.a.createElement(iS,null)),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View TACACS+ settings"})))))))}));var oS=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt().me,i=Uw().GET,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readCategory("ui");case 2:return t=e.sent,a=t.data,n=lC(a,"PENDO_TRACKING_STATE","CUSTOM_LOGO","CUSTOM_LOGIN_INFO"),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),[]),null),o=l.isLoading,c=l.error,u=l.request,d=l.result;Object(n.useEffect)((function(){u()}),[u]);var m=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Settings"})),link:"/settings",id:99},{name:t._({id:"Details"}),link:"/settings/ui/details",id:0}];return(null===i||void 0===i?void 0:i.CUSTOM_LOGO)&&(i.CUSTOM_LOGO.type="image"),r.a.createElement(r.a.Fragment,null,r.a.createElement(us,{tabsArray:m}),r.a.createElement(Bc,null,o&&r.a.createElement(Nr,null),!o&&c&&r.a.createElement(za,{error:c}),!o&&d&&r.a.createElement(pi,null,Object.keys(d).map((function(e){var t=null===i||void 0===i?void 0:i[e];return r.a.createElement(Fw,{key:e,id:e,helpText:null===t||void 0===t?void 0:t.help_text,label:null===t||void 0===t?void 0:t.label,type:null===t||void 0===t?void 0:t.type,unit:null===t||void 0===t?void 0:t.unit,value:null===d||void 0===d?void 0:d[e]})}))),(null===a||void 0===a?void 0:a.is_superuser)&&r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"Edit"}),component:s.b,to:"/settings/ui/edit",ouiaId:"edit-button"},t._({id:"Edit"})))))}));var cS=Object(u.withI18n)()((function(e){var t=e.i18n;return r.a.createElement(Bc,null,t._({id:"Edit form coming soon :)"}),r.a.createElement(Yc,null,r.a.createElement(O.a,{"aria-label":t._({id:"\u53d6\u6d88"}),component:s.b,to:"/settings/ui/details"},t._({id:"\u53d6\u6d88"}))))}));var sS=Object(u.withI18n)()((function(e){var t=e.i18n,a="/settings/ui";return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(c.d,null,r.a.createElement(c.a,{from:a,to:"".concat(a,"/details"),exact:!0}),r.a.createElement(c.b,{path:"".concat(a,"/details")},r.a.createElement(oS,null)),r.a.createElement(c.b,{path:"".concat(a,"/edit")},r.a.createElement(cS,null)),r.a.createElement(c.b,{key:"not-found",path:"".concat(a,"/*")},r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"".concat(a,"/details")},t._({id:"View User Interface settings"})))))))}));var uS=Object(u.withI18n)()((function(e){var t=e.i18n,a=Tt(),i=a.license_info,l=void 0===i?{}:i,o=a.me,u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.readAllOptions();case 2:return t=e.sent,e.abrupt("return",t.data.actions);case 4:case"end":return e.stop()}}),e)}))),[])),d=u.request,m=u.result,f=u.isLoading,v=u.error;Object(n.useEffect)((function(){d()}),[d]);var _={"/settings":t._({id:"Settings"}),"/settings/activity_stream":t._({id:"\u6d3b\u52a8\u6d41"}),"/settings/activity_stream/details":t._({id:"Details"}),"/settings/activity_stream/edit":t._({id:"Edit Details"}),"/settings/azure":t._({id:"Azure AD"}),"/settings/azure/details":t._({id:"Details"}),"/settings/azure/edit":t._({id:"Edit Details"}),"/settings/github":null,"/settings/github/default":t._({id:"GitHub Default"}),"/settings/github/default/details":t._({id:"Details"}),"/settings/github/default/edit":t._({id:"Edit Details"}),"/settings/github/organization":t._({id:"GitHub Organization"}),"/settings/github/organization/details":t._({id:"Details"}),"/settings/github/organization/edit":t._({id:"Edit Details"}),"/settings/github/team":t._({id:"GitHub Team"}),"/settings/github/team/details":t._({id:"Details"}),"/settings/github/team/edit":t._({id:"Edit Details"}),"/settings/google_oauth2":t._({id:"Google OAuth2"}),"/settings/google_oauth2/details":t._({id:"Details"}),"/settings/google_oauth2/edit":t._({id:"Edit Details"}),"/settings/jobs":t._({id:"\u4f5c\u4e1a"}),"/settings/jobs/details":t._({id:"Details"}),"/settings/jobs/edit":t._({id:"Edit Details"}),"/settings/ldap":null,"/settings/ldap/default":t._({id:"LDAP Default"}),"/settings/ldap/1":t._({id:"LDAP 1"}),"/settings/ldap/2":t._({id:"LDAP 2"}),"/settings/ldap/3":t._({id:"LDAP 3"}),"/settings/ldap/4":t._({id:"LDAP 4"}),"/settings/ldap/5":t._({id:"LDAP 5"}),"/settings/ldap/default/details":t._({id:"Details"}),"/settings/ldap/1/details":t._({id:"Details"}),"/settings/ldap/2/details":t._({id:"Details"}),"/settings/ldap/3/details":t._({id:"Details"}),"/settings/ldap/4/details":t._({id:"Details"}),"/settings/ldap/5/details":t._({id:"Details"}),"/settings/ldap/default/edit":t._({id:"Edit Details"}),"/settings/ldap/1/edit":t._({id:"Edit Details"}),"/settings/ldap/2/edit":t._({id:"Edit Details"}),"/settings/ldap/3/edit":t._({id:"Edit Details"}),"/settings/ldap/4/edit":t._({id:"Edit Details"}),"/settings/ldap/5/edit":t._({id:"Edit Details"}),"/settings/license":t._({id:"License"}),"/settings/logging":t._({id:"Logging"}),"/settings/logging/details":t._({id:"Details"}),"/settings/logging/edit":t._({id:"Edit Details"}),"/settings/miscellaneous_system":t._({id:"Miscellaneous System"}),"/settings/miscellaneous_system/details":t._({id:"Details"}),"/settings/miscellaneous_system/edit":t._({id:"Edit Details"}),"/settings/radius":t._({id:"RADIUS"}),"/settings/radius/details":t._({id:"Details"}),"/settings/radius/edit":t._({id:"Edit Details"}),"/settings/saml":t._({id:"SAML"}),"/settings/saml/details":t._({id:"Details"}),"/settings/saml/edit":t._({id:"Edit Details"}),"/settings/tacacs":t._({id:"TACACS+"}),"/settings/tacacs/details":t._({id:"Details"}),"/settings/tacacs/edit":t._({id:"Edit Details"}),"/settings/ui":t._({id:"User Interface"}),"/settings/ui/details":t._({id:"Details"}),"/settings/ui/edit":t._({id:"Edit Details"})};return v?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:v}))):!f&&m&&o?(null===o||void 0===o?void 0:o.is_superuser)||(null===o||void 0===o?void 0:o.is_system_auditor)?r.a.createElement(Pw,{value:m},r.a.createElement(hs,{streamType:"setting",breadcrumbConfig:_}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/settings/activity_stream"},r.a.createElement(nC,null)),r.a.createElement(c.b,{path:"/settings/azure"},r.a.createElement(sC,null)),r.a.createElement(c.b,{path:"/settings/github"},r.a.createElement(bC,null)),r.a.createElement(c.b,{path:"/settings/google_oauth2"},r.a.createElement(_C,null)),r.a.createElement(c.b,{path:"/settings/jobs"},r.a.createElement(gC,null)),r.a.createElement(c.b,{path:"/settings/ldap"},r.a.createElement(CC,null)),r.a.createElement(c.b,{path:"/settings/license"},"open"===(null===l||void 0===l?void 0:l.license_type)?r.a.createElement(TC,null):r.a.createElement(c.a,{to:"/settings"})),r.a.createElement(c.b,{path:"/settings/logging"},r.a.createElement(RC,null)),r.a.createElement(c.b,{path:"/settings/miscellaneous_system"},r.a.createElement(zC,null)),r.a.createElement(c.b,{path:"/settings/radius"},r.a.createElement(VC,null)),r.a.createElement(c.b,{path:"/settings/saml"},r.a.createElement(ZC,null)),r.a.createElement(c.b,{path:"/settings/tacacs"},r.a.createElement(lS,null)),r.a.createElement(c.b,{path:"/settings/ui"},r.a.createElement(sS,null)),r.a.createElement(c.b,{path:"/settings",exact:!0},r.a.createElement(nS,null)),r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{isNotFound:!0},r.a.createElement(s.b,{to:"/settings"},t._({id:"View all settings"})))))))):r.a.createElement(c.a,{to:"/"}):r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Nr,null)))})),dS=Object(j.b)(Fo.a).withConfig({displayName:"TeamListItem__DataListAction",componentId:"sc-1wacgcz-0"})(["align-items:center;display:grid;grid-gap:16px;grid-template-columns:40px;"]);var mS=Object(u.withI18n)()((function(e){var t=e.team,a=e.isSelected,i=e.onSelect,l=e.detailUrl,o=e.i18n,c="check-action-".concat(t.id);return r.a.createElement(ho.a,{key:t.id,"aria-labelledby":c,id:"".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-team-".concat(t.id),checked:a,onChange:i,"aria-labelledby":c}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{id:c,to:"".concat(l)},r.a.createElement("b",null,t.name))),r.a.createElement(ko,{key:"organization"},t.summary_fields.organization&&r.a.createElement(n.Fragment,null,r.a.createElement("b",null,o._({id:"\u7ec4\u7ec7"}))," ",r.a.createElement(s.b,{to:"/organizations/".concat(t.summary_fields.organization.id,"/details")},r.a.createElement("b",null,t.summary_fields.organization.name))))]}),r.a.createElement(dS,{"aria-label":"actions","aria-labelledby":c,id:c},t.summary_fields.user_capabilities.edit?r.a.createElement(Ea.a,{content:o._({id:"Edit Team"}),position:"top"},r.a.createElement(O.a,{"aria-label":o._({id:"Edit Team"}),variant:"plain",component:s.b,to:"/teams/".concat(t.id,"/edit")},r.a.createElement(Mo.a,null))):"")))})),pS=R("team",{page:1,page_size:20,order_by:"name"});var bS=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l=Object(n.useState)([]),o=Object(f.a)(l,2),s=o[0],u=o[1],d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(pS,a.search),e.next=3,Promise.all([vt.read(r),vt.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{teams:o.data.results,itemCount:o.data.count,actions:c.data.actions,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{teams:[],itemCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),m=d.result,v=m.teams,_=m.itemCount,h=m.actions,E=m.relatedSearchableKeys,y=m.searchableKeys,g=d.error,O=d.isLoading,j=d.request;Object(n.useEffect)((function(){j()}),[j]);var k=s.length===v.length&&s.length>0,w=en(Object(n.useCallback)((function(){return Promise.all(s.map((function(e){return vt.destroy(e.id)})))}),[s]),{qsConfig:pS,allItemsSelected:k,fetchItems:j}),C=w.isLoading,S=w.deleteItems,x=w.deletionError,T=w.clearDeletionError,I=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:u([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=C||O,D=h&&h.POST,L=function(e){u(e?Object(A.a)(v):[])},P=function(e){s.some((function(t){return t.id===e.id}))?u(s.filter((function(t){return t.id!==e.id}))):u(s.concat(e))};return r.a.createElement(n.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:g,hasContentLoading:R,items:v,itemCount:_,pluralizedItemName:t._({id:"\u56e2\u961f"}),qsConfig:pS,onRowClick:P,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"Organization Name"}),key:"organization__name__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:y,toolbarRelatedSearchableKeys:E,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:k,onSelectAll:L,qsConfig:pS,additionalControls:[].concat(Object(A.a)(D?[r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:I,itemsToDelete:s,pluralizedItemName:t._({id:"\u56e2\u961f"})})])}))},renderItem:function(e){return r.a.createElement(mS,{key:e.id,team:e,detailUrl:"".concat(i.url,"/").concat(e.id),isSelected:s.some((function(t){return t.id===e.id})),onSelect:function(){return P(e)}})},emptyStateControls:D?r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")}):null}))),r.a.createElement(Zt,{isOpen:x,variant:"error",title:t._({id:"Error!"}),onClose:T},t._({id:"Failed to delete one or more teams."}),r.a.createElement(ua,{error:x})))})),fS=["team","handleCancel","handleSubmit","submitError"];function vS(e){var t=e.team,a=e.i18n,i=Object(Va.c)().setFieldValue,l=Object(n.useState)(t.summary_fields?t.summary_fields.organization:null),o=Object(f.a)(l,2),c=o[0],s=o[1],u=Object(Va.b)({name:"organization",validate:Yo(a._({id:"Select a value for this field"}),a)}),d=Object(f.a)(u,3),m=d[1],p=d[2],b=Object(n.useCallback)((function(e){i("organization",e.id),s(e)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"team-name",label:a._({id:"\u540d\u79f0"}),name:"name",type:"text",validate:Yo(null,a),isRequired:!0}),r.a.createElement(Tl,{id:"team-description",label:a._({id:"\u63cf\u8ff0"}),name:"description",type:"text"}),r.a.createElement(Pc,{helperTextInvalid:m.error,isValid:!m.touched||!m.error,onBlur:function(){return p.setTouched("organization")},onChange:b,value:c,required:!0,autoPopulate:!(null===t||void 0===t?void 0:t.id)}))}function _S(e){var t=e.team,a=e.handleCancel,n=e.handleSubmit,i=e.submitError,l=Object(o.a)(e,fS);return r.a.createElement(Va.a,{initialValues:{description:t.description||"",name:t.name||"",organization:t.organization||""},onSubmit:n},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(vS,Object.assign({team:t},l)),r.a.createElement(Yl,{error:i}),r.a.createElement(cc,{onCancel:a,onSubmit:e.handleSubmit})))}))}_S.defaultProps={team:{},submitError:null};var hS=Object(u.withI18n)()(_S),ES=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).handleSubmit=n.handleSubmit.bind(Object(Z.a)(n)),n.handleCancel=n.handleCancel.bind(Object(Z.a)(n)),n.state={error:null},n}return Object(S.a)(a,[{key:"handleSubmit",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.history,e.prev=1,e.next=4,vt.create(t);case 4:n=e.sent,r=n.data,a.push("/teams/".concat(r.id)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.setState({error:e.t0});case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCancel",value:function(){this.props.history.push("/teams")}},{key:"render",value:function(){var e=this,t=this.state.error;return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(xt,null,(function(a){var n=a.me;return r.a.createElement(hS,{handleSubmit:e.handleSubmit,handleCancel:e.handleCancel,me:n||{},submitError:t})})))))}}]),a}(r.a.Component),yS=Object(c.k)(ES);var gS=Object(u.withI18n)()((function(e){var t=e.team,a=e.i18n,i=t.name,l=t.description,o=t.created,u=t.modified,d=t.summary_fields,m=Object(c.g)(),f=Object(c.i)().id,v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt.destroy(f);case 2:m.push("/teams");case 3:case"end":return e.stop()}}),e)}))),[f,m])),_=v.request,h=v.isLoading,E=Qa(v.error),y=E.error,g=E.dismissError;return r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:a._({id:"\u540d\u79f0"}),value:i,dataCy:"team-detail-name"}),r.a.createElement(xi,{label:a._({id:"\u63cf\u8ff0"}),value:l}),r.a.createElement(xi,{label:a._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(d.organization.id)},d.organization.name)}),r.a.createElement(xi,{label:a._({id:"\u5df2\u521b\u5efa"}),value:ni(o)}),r.a.createElement(xi,{label:a._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),value:ni(u)})),r.a.createElement(Yc,null,d.user_capabilities&&d.user_capabilities.edit&&r.a.createElement(O.a,{"aria-label":a._({id:"Edit"}),component:s.b,to:"/teams/".concat(f,"/edit")},a._({id:"Edit"})),d.user_capabilities&&d.user_capabilities.delete&&r.a.createElement(Qc,{name:i,modalTitle:a._({id:"Delete Team"}),onConfirm:_,isDisabled:h},a._({id:"\u5220\u9664"}))),y&&r.a.createElement(Zt,{isOpen:y,variant:"error",title:a._({id:"Error!"}),onClose:g},a._({id:"Failed to delete team."}),r.a.createElement(ua,{error:y})))}));function OS(e){var t=e.team,a=Object(c.g)(),i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u=function(){var e=Object(b.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vt.update(t.id,n);case 3:a.push("/teams/".concat(t.id,"/details")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){a.push("/teams/".concat(t.id,"/details"))};return r.a.createElement(Bc,null,r.a.createElement(xt,null,(function(e){var a=e.me;return r.a.createElement(hS,{team:t,handleSubmit:u,handleCancel:d,me:a||{},submitError:o})})))}OS.contextTypes={custom_virtualenvs:Dn.a.arrayOf(Dn.a.string)};var jS=OS;var kS,wS=Object(u.withI18n)()((function(e){var t=e.role,a=e.i18n,n=e.detailUrl,i=e.onSelect,l="teamRole-".concat(t.id);return r.a.createElement(ho.a,{key:t.id,"aria-labelledby":l,id:"".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name","aria-label":a._({id:"resource name"})},r.a.createElement(s.b,{to:"".concat(n),id:l},r.a.createElement("b",null,t.summary_fields.resource_name))),r.a.createElement(ko,{key:"type","aria-label":a._({id:"resource type"})},t.summary_fields&&r.a.createElement(pi,{stacked:!0},r.a.createElement(xi,{label:a._({id:"\u7c7b\u578b"}),value:t.summary_fields.resource_type_display_name}))),r.a.createElement(ko,{key:"role","aria-label":a._({id:"resource role"})},t.name&&r.a.createElement(pi,{stacked:!0},r.a.createElement(xi,{label:a._({id:"Role"}),value:r.a.createElement(uc.a,{key:t.name,"aria-label":t.name,onClick:function(){return i(t)},isReadOnly:!t.summary_fields.user_capabilities.unattach},t.name)})))]})))}));function CS(e){return[{selectedResource:"jobTemplate",label:e._({id:"Job templates"}),searchColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:e._({id:"\u5267\u672c\u540d\u79f0"}),key:"playbook__icontains"},{name:e._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:e._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name"}],fetchItems:function(e){return at.read(e)},fetchOptions:function(){return at.readOptions()}},{selectedResource:"workflowJobTemplate",label:e._({id:"Workflow job templates"}),searchColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:e._({id:"\u5267\u672c\u540d\u79f0"}),key:"playbook__icontains"},{name:e._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:e._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name"}],fetchItems:function(e){return kt.read(e)},fetchOptions:function(){return kt.readOptions()}},{selectedResource:"credential",label:e._({id:"Credentials"}),searchColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:e._({id:"\u7c7b\u578b"}),key:"or__scm_type",options:[["",e._({id:"Manual"})],["git",e._({id:"Git"})],["svn",e._({id:"Subversion"})],["archive",e._({id:"Remote Archive"})],["insights",e._({id:"Red Hat Insights"})]]},{name:e._({id:"Source Control URL"}),key:"scm_url__icontains"},{name:e._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"},{name:e._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"}],sortColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name"}],fetchItems:function(e){return We.read(e)},fetchOptions:function(){return We.readOptions()}},{selectedResource:"inventory",label:e._({id:"Inventories"}),searchColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:e._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:e._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name"}],fetchItems:function(e){return Qe.read(e)},fetchOptions:function(){return Qe.readOptions()}},{selectedResource:"project",label:e._({id:"Projects"}),searchColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:e._({id:"\u7c7b\u578b"}),key:"or__scm_type",options:[["",e._({id:"Manual"})],["git",e._({id:"Git"})],["svn",e._({id:"Subversion"})],["archive",e._({id:"Remote Archive"})],["insights",e._({id:"Red Hat Insights"})]]},{name:e._({id:"Source Control URL"}),key:"scm_url__icontains"},{name:e._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"},{name:e._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"}],sortColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name"}],fetchItems:function(e){return ut.read(e)},fetchOptions:function(){return ut.readOptions()}},{selectedResource:"organization",label:e._({id:"Organizations"}),searchColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:e._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:e._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],sortColumns:[{name:e._({id:"\u540d\u79f0"}),key:"name"}],fetchItems:function(e){return ct.read(e)},fetchOptions:function(){return ct.readOptions()}}]}var SS=j.b.div(kS||(kS=Object(v.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 33% 33% 33%;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n"])));var xS=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.title,i=e.onFetchData,l=e.apiModel,o=Object(n.useState)(null),s=Object(f.a)(o,2),u=s[0],d=s[1],m=Object(n.useState)(!1),v=Object(f.a)(m,2),_=v[0],h=v[1],E=Object(n.useState)(1),y=Object(f.a)(E,2),g=y[0],j=y[1],k=Object(c.i)().id,w=Object(n.useContext)(pr),C=w.isKebabified,S=w.onKebabModalChange,x=Uo([]),T=x.selected,I=x.handleSelect;Object(n.useEffect)((function(){C&&S(_)}),[C,_,S]);var A=Uo([]),R=A.selected,N=A.handleSelect,D=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=T.flatMap((function(e){return Object.values(e.summary_fields.object_roles)})),R.map((function(e){return a.forEach((function(a){a.name===e.name&&t.push(l.associateRole(k,a.id))}))})),e.next=5,Promise.all(t);case 5:i(),h(!1);case 7:case"end":return e.stop()}}),e)}))),[i,R,l,k,T]),{}),L=D.request,P=Qa(D.error),U=P.error,G=P.dismissError,q=[{id:1,name:t._({id:"Add resource type"}),component:r.a.createElement(SS,null,CS(t).map((function(e){return r.a.createElement(As,{key:e.selectedResource,isSelected:e.selectedResource===(null===u||void 0===u?void 0:u.selectedResource),label:e.label,dataCy:"add-role-".concat(e.selectedResource),onClick:function(){return d(e)}})}))),enableNext:null!==u},{id:2,name:t._({id:"Select items from list"}),component:u&&r.a.createElement(Gs,{searchColumns:u.searchColumns,sortColumns:u.sortColumns,displayKey:"name",onRowClick:I,fetchItems:u.fetchItems,fetchOptions:u.fetchOptions,selectedLabel:t._({id:"\u5df2\u9009\u62e9"}),selectedResourceRows:T,sortedColumnKey:"username"}),enableNext:T.length>0,canJumpTo:g>=2},{id:3,name:t._({id:"Select roles to apply"}),component:(null===T||void 0===T?void 0:T.length)>0&&r.a.createElement(Vs,{onRolesClick:N,roles:T[0].summary_fields.object_roles,selectedListKey:"users"===u?"username":"name",selectedListLabel:t._({id:"\u5df2\u9009\u62e9"}),selectedResourceRows:T,selectedRoleRows:R}),nextButtonText:t._({id:"Save"}),canJumpTo:g>=3}];return U?r.a.createElement(Zt,{"aria-label":t._({id:"Associate role error"}),isOpen:U,variant:"error",title:t._({id:"Error!"}),onClose:G},t._({id:"Failed to associate role"}),r.a.createElement(ua,{error:U})):r.a.createElement(r.a.Fragment,null,C?r.a.createElement(ka.a,{key:"add",component:"button","aria-label":t._({id:"\u6dfb\u52a0"}),onClick:function(){return h(!0)}},t._({id:"\u6dfb\u52a0"})):r.a.createElement(O.a,{variant:"primary","aria-label":t._({id:"\u6dfb\u52a0"}),onClick:function(){return h(!0)},key:"add"},t._({id:"\u6dfb\u52a0"})),_&&r.a.createElement(Ns,{isOpen:_,title:a,steps:q,onClose:function(){return h(!1)},onNext:function(e){var t=e.id;return j(g<t?t:g)},onSave:L}))})),TS=R("roles",{page:1,page_size:20,order_by:"id"});var IS=Object(u.withI18n)()((function(e){var t,a,i=e.i18n,l=e.me,o=e.team,s=Object(c.h)().search,u=Object(n.useState)(null),d=Object(f.a)(u,2),m=d[0],v=d[1],_=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,c,u,d,m,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(TS,s),e.next=3,Promise.all([vt.readRoles(o.id,n),yt.readAdminOfOrganizations(l.id,{id:o.organization}),vt.readRoleOptions(o.id)]);case 3:return r=e.sent,i=Object(f.a)(r,3),c=i[0].data,u=c.results,d=c.count,m=i[1].count,b=i[2],e.abrupt("return",{roleCount:d,roles:u,isAdminOfOrg:m>0,relatedSearchableKeys:((null===b||void 0===b||null===(t=b.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=b.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=b.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 11:case"end":return e.stop()}}),e)}))),[l.id,o.id,o.organization,s]),{roles:[],roleCount:0,isAdminOfOrg:!1,relatedSearchableKeys:[],searchableKeys:[]}),h=_.isLoading,E=_.request,y=_.contentError,g=_.result,j=g.roleCount,k=g.roles,w=g.isAdminOfOrg,C=g.relatedSearchableKeys,S=g.searchableKeys;Object(n.useEffect)((function(){E()}),[E]);var x=en(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(null),e.next=3,dt.disassociateTeamRole(m.id,parseInt(o.id,10));case 3:case"end":return e.stop()}}),e)}))),[m,o.id]),{qsConfig:TS,fetchItems:E}),T=x.isLoading,I=x.deleteItems,R=x.deletionError,D=x.clearDeletionError,L=(null===o||void 0===o||null===(t=o.summary_fields)||void 0===t||null===(a=t.user_capabilities)||void 0===a?void 0:a.edit)||w,P=function(e){var t=e.summary_fields,a=t.resource_id,n=t.resource_type;return e&&n?(null===n||void 0===n?void 0:n.includes("template"))?"/templates/".concat(n,"/").concat(a,"/details"):(null===n||void 0===n?void 0:n.includes("inventory"))?"/inventories/".concat(n,"/").concat(a,"/details"):"/".concat(n,"s/").concat(a,"/details"):null};return k.some((function(e){return"System Administrator"===e.name}))?r.a.createElement(Pa.a,{variant:"full"},r.a.createElement(Ua.a,{icon:Tr.a}),r.a.createElement(qt.a,{headingLevel:"h5",size:"lg"},i._({id:"System Administrator"})),r.a.createElement(Ga.a,null,i._({id:"System administrators have unrestricted access to all resources."}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:y,hasContentLoading:h||T,items:k,itemCount:j,pluralizedItemName:i._({id:"Team Roles"}),qsConfig:TS,toolbarSearchColumns:[{name:i._({id:"Role"}),key:"role_field__icontains",isDefault:!0}],toolbarSortColumns:[{name:i._({id:"ID"}),key:"id"}],toolbarSearchableKeys:S,toolbarRelatedSearchableKeys:C,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{qsConfig:TS,additionalControls:Object(A.a)(L?[r.a.createElement(xS,{apiModel:vt,onFetchData:E,title:i._({id:"Add team permissions"})})]:[])}))},renderItem:function(e){return r.a.createElement(wS,{key:e.id,role:e,detailUrl:P(e),onSelect:function(e){v(e)}})}}),m&&r.a.createElement(Zt,{"aria-label":i._({id:"Disassociate role"}),isOpen:m,variant:"error",title:i._({id:"Disassociate role!"}),onClose:function(){return v(null)},actions:[r.a.createElement(O.a,{key:"disassociate",variant:"danger","aria-label":i._({id:"confirm disassociate"}),onClick:function(){return I()}},i._({id:"Disassociate"})),r.a.createElement(O.a,{key:"cancel",variant:"secondary","aria-label":i._({id:"\u53d6\u6d88"}),onClick:function(){return v(null)}},i._({id:"\u53d6\u6d88"}))]},r.a.createElement("div",null,i._({id:"This action will disassociate the following role from {0}:",values:{0:m.summary_fields.resource_name}}),r.a.createElement("br",null),r.a.createElement("strong",null,m.name))),R&&r.a.createElement(Zt,{isOpen:R,variant:"error",title:i._({id:"Error!"}),onClose:D},i._({id:"Failed to delete role."}),r.a.createElement(ua,{error:R})))}));var AS=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],u=l[1],d=Object(n.useState)(null),m=Object(f.a)(d,2),v=m[0],_=m[1],h=Object(n.useState)(!0),E=Object(f.a)(h,2),y=E[0],g=E[1],O=Object(c.h)(),j=Object(c.i)().id;Object(n.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vt.readDetail(j);case 3:t=e.sent,n=t.data,a(n),u(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),_(e.t0);case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))()}),[j,a,O]);var k=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Teams"})),link:"/teams",id:99},{name:t._({id:"Details"}),link:"/teams/".concat(j,"/details"),id:0},{name:t._({id:"Access"}),link:"/teams/".concat(j,"/access"),id:1},{name:t._({id:"Roles"}),link:"/teams/".concat(j,"/roles"),id:2}],w=!0;return O.pathname.endsWith("edit")&&(w=!1),!y&&v?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:v},404===v.response.status&&r.a.createElement("span",null,t._({id:"Team not found."})," ",r.a.createElement(s.b,{to:"/teams"},t._({id:"View all Teams."})))))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,w&&r.a.createElement(us,{tabsArray:k}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/teams/:id",to:"/teams/:id/details",exact:!0}),o&&r.a.createElement(c.b,{path:"/teams/:id/details"},r.a.createElement(gS,{team:o})),o&&r.a.createElement(c.b,{path:"/teams/:id/edit"},r.a.createElement(jS,{team:o})),o&&r.a.createElement(c.b,{path:"/teams/:id/access"},r.a.createElement(iu,{resource:o,apiModel:vt})),o&&r.a.createElement(c.b,{path:"/teams/:id/roles"},r.a.createElement(xt,null,(function(e){var t=e.me;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(IS,{me:t,team:o}))}))),r.a.createElement(c.b,{key:"not-found",path:"*"},!y&&r.a.createElement(za,{isNotFound:!0},j&&r.a.createElement(s.b,{to:"/teams/".concat(j,"/details")},t._({id:"View Team Details"})))))))}));var RS=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)({"/teams":t._({id:"\u56e2\u961f"}),"/teams/add":t._({id:"Create New Team"})}),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(n.useCallback)((function(e){var a;e&&o((a={"/teams":t._({id:"\u56e2\u961f"}),"/teams/add":t._({id:"Create New Team"})},Object(gr.a)(a,"/teams/".concat(e.id),"".concat(e.name)),Object(gr.a)(a,"/teams/".concat(e.id,"/edit"),t._({id:"Edit Details"})),Object(gr.a)(a,"/teams/".concat(e.id,"/details"),t._({id:"Details"})),Object(gr.a)(a,"/teams/".concat(e.id,"/users"),t._({id:"\u7528\u6237"})),Object(gr.a)(a,"/teams/".concat(e.id,"/access"),t._({id:"Access"})),Object(gr.a)(a,"/teams/".concat(e.id,"/roles"),t._({id:"Roles"})),a))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"team",breadcrumbConfig:l}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/teams/add"},r.a.createElement(yS,null)),r.a.createElement(c.b,{path:"/teams/:id"},r.a.createElement(AS,{setBreadcrumb:s})),r.a.createElement(c.b,{path:"/teams"},r.a.createElement(xt,null,(function(e){var t=e.me;return r.a.createElement(bS,{path:"/teams",me:t||{}})})))))})),NS=Object(j.b)(Fo.a).withConfig({displayName:"TemplateListItem__DataListAction",componentId:"sc-emnejp-0"})(["align-items:center;display:grid;grid-gap:16px;grid-template-columns:repeat(4,40px);"]);var DS=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.template,i=e.isSelected,l=e.onSelect,o=e.detailUrl,c=e.fetchTemplates,u=Object(n.useState)(!1),d=Object(f.a)(u,2),m=d[0],v=d[1],_="check-action-".concat(a.id),h=Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("job_template"!==a.type){e.next=5;break}return e.next=3,at.copy(a.id,{name:"".concat(a.name," @ ").concat(li())});case 3:e.next=7;break;case 5:return e.next=7,kt.copy(a.id,{name:"".concat(a.name," @ ").concat(li())});case 7:return e.next=9,c();case 9:case"end":return e.stop()}}),e)}))),[c,a.id,a.name,a.type]),E=Object(n.useCallback)((function(){v(!0)}),[]),y=Object(n.useCallback)((function(){v(!1)}),[]),g="job_template"===a.type&&(!a.summary_fields.project||!a.summary_fields.inventory&&!a.ask_inventory_on_launch);return r.a.createElement(ho.a,{"aria-labelledby":_,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{isDisabled:m,id:"select-jobTemplate-".concat(a.id),checked:i,onChange:l,"aria-labelledby":_}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name",id:_},r.a.createElement("span",null,r.a.createElement(s.b,{to:"".concat(o)},r.a.createElement("b",null,a.name))),g&&r.a.createElement("span",null,r.a.createElement(Ea.a,{content:t._({id:"Resources are missing from this template."}),position:"right"},r.a.createElement(LS,null)))),r.a.createElement(ko,{key:"type"},as(a.type)),r.a.createElement(ko,{key:"sparkline"},r.a.createElement(Op,{jobs:a.summary_fields.recent_jobs}))]}),r.a.createElement(NS,{"aria-label":"actions","aria-labelledby":_},"workflow_job_template"===a.type&&r.a.createElement(Ea.a,{content:t._({id:"\u53ef\u89c6\u5316"}),position:"top"},r.a.createElement(PS,{isDisabled:m,"aria-label":t._({id:"\u53ef\u89c6\u5316"}),variant:"plain",component:s.b,to:"/templates/workflow_job_template/".concat(a.id,"/visualizer")},r.a.createElement(pb.a,null))),a.summary_fields.user_capabilities.start&&r.a.createElement(Ea.a,{content:t._({id:"\u8fd0\u884c\u6a21\u677f"}),position:"top"},r.a.createElement(Mp,{resource:a},(function(e){var a=e.handleLaunch;return r.a.createElement(US,{isDisabled:m,"aria-label":t._({id:"Launch template"}),variant:"plain",onClick:a},r.a.createElement(Fd.a,null))}))),a.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:t._({id:"\u7f16\u8f91\u6a21\u677f"}),position:"top"},r.a.createElement(GS,{isDisabled:m,"aria-label":t._({id:"\u7f16\u8f91\u6a21\u677f"}),variant:"plain",component:s.b,to:"/templates/".concat(a.type,"/").concat(a.id,"/edit")},r.a.createElement(Mo.a,null))),a.summary_fields.user_capabilities.copy&&r.a.createElement(hd,{helperText:{tooltip:t._({id:"\u590d\u5236\u6a21\u677f"}),errorMessage:t._({id:"Failed to copy template."})},isDisabled:m,onCopyStart:E,onCopyFinish:y,copyItem:h}))))})),LS=Object(j.b)(Ht.a).withConfig({displayName:"TemplateListItem___StyledExclamationTriangleIcon",componentId:"sc-emnejp-1"})(["color:#c9190b;margin-left:20px;"]),PS=Object(j.b)(O.a).withConfig({displayName:"TemplateListItem___StyledButton",componentId:"sc-emnejp-2"})(["grid-column:1"]),US=Object(j.b)(O.a).withConfig({displayName:"TemplateListItem___StyledButton2",componentId:"sc-emnejp-3"})(["grid-column:2"]),GS=Object(j.b)(O.a).withConfig({displayName:"TemplateListItem___StyledButton3",componentId:"sc-emnejp-4"})(["grid-column:3"]),qS=R("template",{page:1,page_size:20,order_by:"name",type:"job_template,workflow_job_template"});var FS=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(n.useState)([]),l=Object(f.a)(i,2),o=l[0],u=l[1],d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=N(qS,a.search),e.next=3,Promise.all([ht.read(i),at.readOptions(),kt.readOptions(),ht.readOptions()]);case 3:return l=e.sent,e.abrupt("return",{results:l[0].data.results,count:l[0].data.count,jtActions:l[1].data.actions,wfjtActions:l[2].data.actions,relatedSearchableKeys:((null===(t=l[3])||void 0===t||null===(n=t.data)||void 0===n?void 0:n.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(r=l[3].data.actions)||void 0===r?void 0:r.GET)||{}).filter((function(e){var t;return null===(t=l[3].data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 5:case"end":return e.stop()}}),e)}))),[a]),{results:[],count:0,jtActions:{},wfjtActions:{},relatedSearchableKeys:[],searchableKeys:[]}),m=d.result,v=m.results,_=m.count,h=m.jtActions,E=m.wfjtActions,y=m.relatedSearchableKeys,g=m.searchableKeys,O=d.error,j=d.isLoading,k=d.request;Object(n.useEffect)((function(){k()}),[k]);var w=db(v),C=o.length===w.length&&o.length>0,S=en(Object(n.useCallback)((function(){return Promise.all(o.map((function(e){var t=e.type,a=e.id;return"job_template"===t?at.destroy(a):"workflow_job_template"===t&&kt.destroy(a)})))}),[o]),{qsConfig:qS,allItemsSelected:C,fetchItems:k}),x=S.isLoading,T=S.deleteItems,I=S.deletionError,R=S.clearDeletionError,D=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:u([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){u(e?Object(A.a)(w):[])},P=function(e){o.some((function(t){return t.id===e.id}))?u(o.filter((function(t){return t.id!==e.id}))):u(o.concat(e))},U=h&&Object.prototype.hasOwnProperty.call(h,"POST"),G=E&&Object.prototype.hasOwnProperty.call(E,"POST"),q=t._({id:"Add job template"}),F=t._({id:"Add workflow template"}),z=[];U&&z.push(r.a.createElement(ka.a,{key:q,component:s.b,to:"/templates/job_template/add/","aria-label":q},q)),G&&z.push(r.a.createElement(ka.a,{component:s.b,to:"/templates/workflow_job_template/add/",key:F,"aria-label":F},F));var M=r.a.createElement(mb,{key:"add",dropdownItems:z});return r.a.createElement(n.Fragment,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:O,hasContentLoading:j||x,items:w,itemCount:_,pluralizedItemName:t._({id:"Templates"}),qsConfig:qS,onRowClick:P,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"},{name:t._({id:"\u7c7b\u578b"}),key:"or__type",options:[["job_template",t._({id:"\u4f5c\u4e1a\u6a21\u677f"})],["workflow_job_template",t._({id:"Workflow Template"})]]},{name:t._({id:"\u5267\u672c\u540d\u79f0"}),key:"job_template__playbook__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u6e05\u5355"}),key:"job_template__inventory__id"},{name:t._({id:"\u6700\u540e\u8fd0\u884c"}),key:"last_job_run"},{name:t._({id:"\u66f4\u6539"}),key:"modified"},{name:t._({id:"\u540d\u79f0"}),key:"name"},{name:t._({id:"\u9879\u76ee"}),key:"jobtemplate__project__id"},{name:t._({id:"\u7c7b\u578b"}),key:"type"}],toolbarSearchableKeys:g,toolbarRelatedSearchableKeys:y,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:C,onSelectAll:L,qsConfig:qS,additionalControls:[].concat(Object(A.a)(U||G?[M]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:D,itemsToDelete:o,pluralizedItemName:"Templates"})])}))},renderItem:function(e){return r.a.createElement(DS,{key:e.id,value:e.name,template:e,detailUrl:"/templates/".concat(e.type,"/").concat(e.id),onSelect:function(){return P(e)},isSelected:o.some((function(t){return t.id===e.id})),fetchTemplates:k})},emptyStateControls:(U||G)&&M})),r.a.createElement(Zt,{"aria-label":t._({id:"Deletion Error"}),isOpen:I,variant:"error",title:t._({id:"Error!"}),onClose:R},t._({id:"Failed to delete one or more templates."}),r.a.createElement(ua,{error:I})))}));var zS=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.template,i=a.ask_inventory_on_launch,l=a.allow_simultaneous,o=a.become_enabled,u=a.created,d=a.description,m=a.diff_mode,f=a.extra_vars,v=a.forks,_=a.host_config_key,h=a.job_slice_count,E=a.job_tags,y=a.job_type,g=a.name,j=a.limit,k=a.modified,w=a.playbook,C=a.skip_tags,S=a.timeout,x=a.summary_fields,T=a.use_fact_cache,I=a.url,A=a.verbosity,R=a.webhook_service,N=a.related.webhook_receiver,D=a.webhook_key,L=Object(c.i)().id,P=Object(c.g)(),U=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.readInstanceGroups(L);case 2:return t=e.sent,a=t.data.results,e.abrupt("return",{instanceGroups:a});case 5:case"end":return e.stop()}}),e)}))),[L]),{instanceGroups:[]}),G=U.isLoading,q=U.request,F=U.error,z=U.result.instanceGroups;Object(n.useEffect)((function(){q()}),[q]);var M=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.destroy(L);case 2:P.push("/templates");case 3:case"end":return e.stop()}}),e)}))),[L,P])),K=M.request,V=M.isLoading,H=Qa(M.error),B=H.error,W=H.dismissError,J=x.user_capabilities&&x.user_capabilities.start,Y=[{verbosity:0,details:t._({id:"0 (Normal)"})},{verbosity:1,details:t._({id:"1 (Verbose)"})},{verbosity:2,details:t._({id:"2 (More Verbose)"})},{verbosity:3,details:t._({id:"3 (Debug)"})},{verbosity:4,details:t._({id:"4 (Connection Debug)"})},{verbosity:5,details:t._({id:"5 (WinRM Debug)"})}].filter((function(e){return e.verbosity===A})),X="".concat(window.location.origin+I,"callback/"),Z=o||_||l||T,$=r.a.createElement(Nt.a,{component:Nt.b.ul},o&&r.a.createElement(Dt.a,{component:Dt.b.li},t._({id:"Enable Privilege Escalation"})),_&&r.a.createElement(Dt.a,{component:Dt.b.li},t._({id:"Allow Provisioning Callbacks"})),l&&r.a.createElement(Dt.a,{component:Dt.b.li},t._({id:"Enable Concurrent Jobs"})),T&&r.a.createElement(Dt.a,{component:Dt.b.li},t._({id:"Use Fact Storage"})));return F?r.a.createElement(za,{error:F}):G||V?r.a.createElement(Nr,null):r.a.createElement(Bc,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:t._({id:"\u540d\u79f0"}),value:g,dataCy:"jt-detail-name"}),r.a.createElement(xi,{label:t._({id:"\u63cf\u8ff0"}),value:d}),r.a.createElement(xi,{label:t._({id:"\u4f5c\u4e1a\u7c7b\u578b"}),value:y}),x.organization?r.a.createElement(xi,{label:t._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(x.organization.id,"/details")},x.organization.name)}):r.a.createElement(Ai,{label:t._({id:"\u7ec4\u7ec7"})}),x.inventory?r.a.createElement(xi,{label:t._({id:"\u6e05\u5355"}),value:function(e,a){var l="smart"===e?"smart_inventory":"inventory";return i?r.a.createElement(n.Fragment,null,r.a.createElement(s.b,{to:"/inventories/".concat(l,"/").concat(a,"/details")},x.inventory.name),r.a.createElement("span",null," ",t._({id:"(Prompt on launch)"}))):r.a.createElement(s.b,{to:"/inventories/".concat(l,"/").concat(a,"/details")},x.inventory.name)}(x.inventory.kind,x.inventory.id)}):!i&&r.a.createElement(Ai,{label:t._({id:"\u6e05\u5355"})}),x.project?r.a.createElement(xi,{label:t._({id:"\u9879\u76ee"}),value:r.a.createElement(s.b,{to:"/projects/".concat(x.project.id,"/details")},x.project.name)}):r.a.createElement(Ai,{label:t._({id:"\u9879\u76ee"})}),r.a.createElement(xi,{label:t._({id:"Source Control Branch"}),value:a.scm_branch}),r.a.createElement(xi,{label:t._({id:"\u5267\u672c"}),value:w}),r.a.createElement(xi,{label:t._({id:"Forks"}),value:v||"0"}),r.a.createElement(xi,{label:t._({id:"\u8303\u56f4"}),value:j}),r.a.createElement(xi,{label:t._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),value:Y[0].details}),r.a.createElement(xi,{label:t._({id:"Timeout"}),value:S||"0"}),r.a.createElement(xi,{label:t._({id:"Show Changes"}),value:m?t._({id:"On"}):t._({id:"Off"})}),r.a.createElement(xi,{label:t._({id:"Job Slicing"}),value:h}),_&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xi,{label:t._({id:"Host Config Key"}),value:_}),r.a.createElement(xi,{label:t._({id:"Provisioning Callback URL"}),value:X})),R&&r.a.createElement(xi,{label:t._({id:"Webhook Service"}),value:"github"===R?t._({id:"GitHub"}):t._({id:"GitLab"})}),N&&r.a.createElement(xi,{label:t._({id:"Webhook URL"}),value:"".concat(document.location.origin).concat(N)}),r.a.createElement(xi,{label:t._({id:"Webhook Key"}),value:D}),x.webhook_credential&&r.a.createElement(xi,{label:t._({id:"Webhook Credential"}),value:r.a.createElement(s.b,{to:"/credentials/".concat(x.webhook_credential.id,"/details")},r.a.createElement(Wf.a,null,x.webhook_credential.name))}),Z&&r.a.createElement(xi,{label:t._({id:"Options"}),value:$}),r.a.createElement(Li,{label:t._({id:"\u5df2\u521b\u5efa"}),date:u,user:x.created_by}),r.a.createElement(Li,{label:t._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:k,user:x.modified_by}),x.credentials&&x.credentials.length>0&&r.a.createElement(xi,{fullWidth:!0,label:t._({id:"Credentials"}),value:r.a.createElement(fc,{numChips:5,totalChips:x.credentials.length},x.credentials.map((function(e){return r.a.createElement(du,{key:e.id,credential:e,isReadOnly:!0})})))}),x.labels&&x.labels.results.length>0&&r.a.createElement(xi,{fullWidth:!0,label:t._({id:"Labels"}),value:r.a.createElement(fc,{numChips:5,totalChips:x.labels.results.length},x.labels.results.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),z.length>0&&r.a.createElement(xi,{fullWidth:!0,label:t._({id:"Instance Groups"}),value:r.a.createElement(fc,{numChips:5,totalChips:z.length},z.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),E&&E.length>0&&r.a.createElement(xi,{fullWidth:!0,label:t._({id:"Job Tags"}),value:r.a.createElement(fc,{numChips:5,totalChips:E.split(",").length},E.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),C&&C.length>0&&r.a.createElement(xi,{fullWidth:!0,label:t._({id:"Skip Tags"}),value:r.a.createElement(fc,{numChips:5,totalChips:C.split(",").length},C.split(",").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)})))}),r.a.createElement(_l,{value:f,rows:4,label:t._({id:"\u53d8\u91cf"})})),r.a.createElement(Yc,null,x.user_capabilities&&x.user_capabilities.edit&&r.a.createElement(O.a,{component:s.b,to:"/templates/job_template/".concat(L,"/edit"),"aria-label":t._({id:"Edit"})},t._({id:"Edit"})),J&&r.a.createElement(Mp,{resource:a,"aria-label":t._({id:"\u8fd0\u884c"})},(function(e){var a=e.handleLaunch;return r.a.createElement(O.a,{variant:"secondary",type:"submit",onClick:a},t._({id:"\u8fd0\u884c"}))})),x.user_capabilities&&x.user_capabilities.delete&&r.a.createElement(Qc,{name:g,modalTitle:t._({id:"Delete Job Template"}),onConfirm:K,isDisabled:V},t._({id:"\u5220\u9664"}))),B&&r.a.createElement(Zt,{isOpen:B,variant:"error",title:t._({id:"Error!"}),onClose:W},t._({id:"Failed to delete job template."}),r.a.createElement(ua,{error:B})))}));function MS(e,t){return KS.apply(this,arguments)}function KS(){return(KS=Object(b.a)(p.a.mark((function e(t,a){var n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rt.read({page:1,page_size:200,order_by:"name"});case 3:if(r=e.sent,i=r.data,n=i.results,t(n),!i.next||!i.next.includes("page=2")){e.next=13;break}return e.next=10,rt.read({page:2,page_size:200,order_by:"name"});case 10:l=e.sent,o=l.data.results,t(n.concat(o));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),a(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function VS(e){var t=e.value,a=e.placeholder,i=e.onChange,l=e.onError,o=e.createText,c=Object(n.useState)(!0),s=Object(f.a)(c,2),u=s[0],d=s[1],m=function(e,t){var a=Object(n.useState)([]),r=Object(f.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)([]),c=Object(f.a)(o,2),s=c[0],u=c[1];return Object(n.useEffect)((function(){var t=[];if(e!==s&&i.length){var a=e.map((function(e){var a=i.find((function(t){return t.id===e.id}));return a||t.push(e),a||e}));u(a)}t.length>0&&l(i.concat(t))}),[e,i]),{selections:i.length?bm(s):[],onSelect:function(e,a){s.includes(a)?t(s.filter((function(e){return e!==a}))):t(s.concat(a))},options:i,setOptions:function(e){return l(bm(e))}}}(t,i),v=m.selections,_=m.onSelect,h=m.options,E=m.setOptions,y=Object(n.useState)(!1),g=Object(f.a)(y,2),O=g[0],j=g[1];Object(n.useEffect)((function(){Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MS(E,l);case 2:d(!1);case 3:case"end":return e.stop()}}),e)})))()}),[]);var k=function(e){return e.map((function(e){return r.a.createElement(bn.a,{key:e.id,"aria-label":e.name,value:e},e.name)}))};return r.a.createElement(dn.a,{variant:mn.e.typeaheadMulti,onToggle:function(e){j(e)},onSelect:function(e,t){"string"===typeof t&&(t={id:t,name:t}),_(e,t)},onClear:function(){return i([])},onFilter:function(e){var t=e.target.value.toLowerCase(),a=h.filter((function(e){return e.name.toLowerCase().includes(t)}));return k(a)},isCreatable:!0,onCreateOption:function(e){return e=e.trim(),h.includes(e)||E(h.concat({name:e,id:e})),e},isDisabled:u,selections:v,isOpen:O,"aria-labelledby":"label-select",placeholderText:a,createText:o},k(h))}VS.defaultProps={placeholder:""};var HS=VS;function BS(e){var t=e.projectId,a=e.isValid,i=e.field,l=e.onBlur,o=e.onError,c=e.i18n,s=Object(n.useState)(!1),u=Object(f.a)(s,2),d=u[0],m=u[1],v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,ut.readPlaybooks(t);case 4:return a=e.sent,n=a.data,(r=(n||[]).map((function(e){return{value:e,key:e,label:e,isDisabled:!1}}))).unshift({value:"",key:"",label:c._({id:"Choose a playbook"}),isDisabled:!1}),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),[t,c]),[]),_=v.result,h=v.request,E=v.isLoading,y=v.error;Object(n.useEffect)((function(){h()}),[h]),Object(n.useEffect)((function(){y&&(403===y.response.status?m(!0):o(y))}),[y,o]);var g=[{value:i.value||"",label:i.value||"",key:1,isDisabled:!0}];return r.a.createElement(Fc,Object.assign({id:"template-playbook",data:d?g:_,isValid:a},i,{onBlur:l,isDisabled:E||d}))}BS.defaultProps={projectId:null};var WS=Object(u.withI18n)()(BS);var JS=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.templateType,i=Object(Va.c)().setFieldValue,l=Object(c.i)().id,o=Object(c.h)().pathname,s=document.location.origin,u=Object(Va.b)("webhook_service"),d=Object(f.a)(u,3),m=d[0],v=d[1],_=d[2],h=Object(Va.b)("webhook_url"),E=Object(f.a)(h,3),y=E[0],g=E[2],j=Object(Va.b)("webhook_key"),k=Object(f.a)(j,3),w=k[0],C=k[1],S=k[2],x=Object(Va.b)("webhook_credential"),T=Object(f.a)(x,3),I=T[0],A=T[1],R=T[2],N=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.value){e.next=4;break}return e.next=3,Be.read({namespace:"".concat(m.value,"_token")});case 3:r=e.sent;case 4:return e.abrupt("return",null===(t=r)||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.results[0])||void 0===n?void 0:n.id);case 5:case"end":return e.stop()}}),e)}))),[m.value])),D=N.request,L=N.error,P=N.isLoading,U=N.result;Object(n.useEffect)((function(){D()}),[D]);var G=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="job_template"===a?at.updateWebhookKey(l):kt.updateWebhookKey(l),e.next=3,t;case 3:n=e.sent,r=n.data.webhook_key,S.setValue(r);case 6:case"end":return e.stop()}}),e)}))),[S,l,a])),q=G.request,F=G.error,z=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=Object(n.useCallback)((function(e){i("webhook_credential",e||null)}),[i]),K=o.endsWith("/add")||"A NEW WEBHOOK KEY WILL BE GENERATED ON SAVE."===C.initialValue,V=[{value:"",key:"",label:t._({id:"Choose a Webhook Service"}),isDisabled:!0},{value:"github",key:"github",label:t._({id:"GitHub"}),isDisabled:!1},{value:"gitlab",key:"gitlab",label:t._({id:"GitLab"}),isDisabled:!1}];return L||F?r.a.createElement(za,{error:L}):P?r.a.createElement(Nr,null):r.a.createElement(Vl,null,r.a.createElement(Wi.a,{name:"webhook_service",fieldId:"webhook_service",helperTextInvalid:v.error,label:t._({id:"Webhook Service"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Select a webhook service."})})},r.a.createElement(Fc,Object.assign({},m,{id:"webhook_service",data:V,onChange:function(e,n){_.setValue(n),g.setValue(o.endsWith("/add")?t._({id:"a new webhook url will be generated on save."}).toUpperCase():"".concat(s,"/api/v2/").concat(a,"s/").concat(l,"/").concat(n,"/")),n===v.initialValue||""===n?(S.setValue(C.initialValue),R.setValue(A.initialValue)):(S.setValue(t._({id:"a new webhook key will be generated on save."}).toUpperCase()),R.setValue(null))}}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(Wi.a,{type:"text",fieldId:"jt-webhookURL",label:t._({id:"Webhook URL"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Webhook services can launch jobs with this workflow job template by making a POST request to this URL."})}),name:"webhook_url"},r.a.createElement(Rn.a,{id:"t-webhookURL","aria-label":t._({id:"Webhook URL"}),value:y.value,isReadOnly:!0})),r.a.createElement(Wi.a,{label:t._({id:"Webhook Key"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Webhook services can use this as a shared secret."})}),fieldId:"template-webhook_key"},r.a.createElement(An.a,null,r.a.createElement(Rn.a,{id:"template-webhook_key",isReadOnly:!0,"aria-label":"wfjt-webhook-key",value:w.value}),r.a.createElement(O.a,{isDisabled:K,variant:"tertiary","aria-label":t._({id:"Update webhook key"}),onClick:z},r.a.createElement(Rv.a,null))))),U&&r.a.createElement(lf,{label:t._({id:"Webhook Credential"}),tooltip:t._({id:"Optionally select the credential to use to send status updates back to the webhook service."}),credentialTypeId:U,onChange:M,isValid:!A.error,helperTextInvalid:A.error,value:I.value}))})),YS=document.location.origin;function XS(e){var t,a,i,l=e.template,o=e.handleCancel,c=e.handleSubmit,s=e.setFieldValue,u=e.submitError,d=e.i18n,m=e.isOverrideDisabledLookup,v=Object(n.useState)(!1),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Object(n.useState)(null===l||void 0===l||null===(t=l.summary_fields)||void 0===t?void 0:t.inventory),g=Object(f.a)(y,2),O=g[0],j=g[1],k=Object(n.useState)(Boolean(null===l||void 0===l?void 0:l.host_config_key)),w=Object(f.a)(k,2),C=w[0],S=w[1],x=Object(n.useState)(Boolean(l.webhook_service)),T=Object(f.a)(x,2),I=T[0],R=T[1],N=Object(Va.b)("ask_inventory_on_launch"),D=Object(f.a)(N,1)[0],L=Object(Va.b)({name:"job_type",validate:Yo(null,d)}),P=Object(f.a)(L,3),U=P[0],G=P[1],q=P[2],F=Object(Va.b)("inventory"),z=Object(f.a)(F,3),M=z[1],K=z[2],V=Object(Va.b)({name:"project",validate:function(e){return nt(e)}}),H=Object(f.a)(V,3),B=H[0],W=H[1],J=H[2],Y=Object(Va.b)("scm_branch"),X=Object(f.a)(Y,3),Z=X[0],$=X[2],Q=Object(Va.b)({name:"playbook",validate:Yo(d._({id:"Select a value for this field"}),d)}),ee=Object(f.a)(Q,3),te=ee[0],ae=ee[1],ne=ee[2],re=Object(Va.b)("credentials"),ie=Object(f.a)(re,3),le=ie[0],oe=ie[2],ce=Object(Va.b)("labels"),se=Object(f.a)(ce,3),ue=se[0],de=se[2],me=Object(Va.b)("limit"),pe=Object(f.a)(me,3),be=pe[0],fe=pe[1],ve=pe[2],_e=Object(Va.b)("verbosity"),he=Object(f.a)(_e,1)[0],Ee=Object(Va.b)("diff_mode"),ye=Object(f.a)(Ee,3),ge=ye[0],Oe=ye[2],je=Object(Va.b)("instanceGroups"),ke=Object(f.a)(je,3),we=ke[0],Ce=ke[2],Se=Object(Va.b)("job_tags"),xe=Object(f.a)(Se,3),Te=xe[0],Ie=xe[2],Ae=Object(Va.b)("skip_tags"),Re=Object(f.a)(Ae,3),Ne=Re[0],De=Re[2],Le=Object(Va.b)("webhook_service"),Pe=Object(f.a)(Le,3),Ue=Pe[1],Ge=Pe[2],qe=Object(Va.b)("webhook_url"),Fe=Object(f.a)(qe,3),ze=Fe[1],Me=Fe[2],Ke=Object(Va.b)("webhook_key"),Ve=Object(f.a)(Ke,3),He=Ve[1],Be=Ve[2],We=Object(Va.b)("webhook_credential"),Je=Object(f.a)(We,3),Ye=Je[1],Xe=Je[2],Ze=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===l||void 0===l?void 0:l.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,at.readInstanceGroups(l.id);case 4:t=e.sent,a=t.data,s("initialInstanceGroups",a.results),s("instanceGroups",Object(A.a)(a.results));case 8:case"end":return e.stop()}}),e)}))),[s,l])),$e=Ze.request,Qe=Ze.error,et=Ze.contentLoading;Object(n.useEffect)((function(){$e()}),[$e]),Object(n.useEffect)((function(){I?(Ge.setValue(Ue.initialValue),Me.setValue(ze.initialValue),Be.setValue(He.initialValue),Xe.setValue(Ye.initialValue)):(Ge.setValue(""),Me.setValue(""),Be.setValue(""),Xe.setValue(null))}),[I]);var tt,nt=function(e){var t;return!e&&W.touched?d._({id:"Select a value for this field"}):"never updated"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.status)?d._({id:"This project needs to be updated"}):void 0},rt=Object(n.useCallback)((function(e){s("playbook",0),s("scm_branch",""),s("project",e)}),[s]),it=[{value:"",key:"",label:d._({id:"Choose a job type"}),isDisabled:!0},{value:"run",key:"run",label:d._({id:"Run"}),isDisabled:!1},{value:"check",key:"check",label:d._({id:"Check"}),isDisabled:!1}],lt=[{value:"0",key:"0",label:d._({id:"0 (Normal)"})},{value:"1",key:"1",label:d._({id:"1 (Verbose)"})},{value:"2",key:"2",label:d._({id:"2 (More Verbose)"})},{value:"3",key:"3",label:d._({id:"3 (Debug)"})},{value:"4",key:"4",label:d._({id:"4 (Connection Debug)"})}];if(null===l||void 0===l?void 0:l.related){var ot=l.related.callback||"".concat(l.url,"callback");tt="".concat(YS).concat(ot)}return et?r.a.createElement(Nr,null):h||Qe?r.a.createElement(za,{error:h||Qe}):r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:c},r.a.createElement(Vl,null,r.a.createElement(Tl,{id:"template-name",name:"name",type:"text",label:d._({id:"\u540d\u79f0"}),validate:Yo(null,d),isRequired:!0}),r.a.createElement(Tl,{id:"template-description",name:"description",type:"text",label:d._({id:"\u63cf\u8ff0"})}),r.a.createElement(Ru,{fieldId:"template-job-type",isRequired:!0,label:d._({id:"\u4f5c\u4e1a\u7c7b\u578b"}),promptId:"template-ask-job-type-on-launch",promptName:"ask_job_type_on_launch",tooltip:d._({id:"For job templates, select run to execute the playbook. Select check to only check playbook syntax, test environment setup, and report problems without executing the playbook."})},r.a.createElement(Fc,Object.assign({},U,{isValid:!G.touched||!G.error,id:"template-job-type",data:it,onChange:function(e,t){q.setValue(t)}}))),r.a.createElement(Wi.a,{fieldId:"inventory-lookup",validated:(M.touched||D.value)&&M.error?"error":"default",helperTextInvalid:M.error,isRequired:!D.value},r.a.createElement(Vb,{fieldId:"template-inventory",value:O,promptId:"template-ask-inventory-on-launch",promptName:"ask_inventory_on_launch",isPromptableField:!0,tooltip:d._({id:"Select the inventory containing the hosts you want this job to manage."}),onBlur:function(){return K.setTouched()},onChange:function(e){K.setValue(e?e.id:null),j(e)},required:!D.value,touched:M.touched,error:M.error,isOverrideDisabled:m})),r.a.createElement(Wb,{value:B.value,onBlur:function(){return J.setTouched()},tooltip:d._({id:"Select the project containing the playbook you want this job to execute."}),isValid:!W.touched||!W.error,helperTextInvalid:W.error,onChange:rt,required:!0,autoPopulate:!(null===l||void 0===l?void 0:l.id),isOverrideDisabled:m}),(null===(a=B.value)||void 0===a?void 0:a.allow_override)&&r.a.createElement(Ru,{fieldId:"template-scm-branch",label:d._({id:"Source Control Branch"}),promptId:"template-ask-scm-branch-on-launch",promptName:"ask_scm_branch_on_launch",tooltip:d._({id:"Select a branch for the job template. This branch is applied to all job template nodes that prompt for a branch."})},r.a.createElement(Rn.a,Object.assign({id:"template-scm-branch"},Z,{onChange:function(e){$.setValue(e)}}))),r.a.createElement(Wi.a,{fieldId:"template-playbook",helperTextInvalid:ae.error,validated:ae.touched&&ae.error?"error":"default",isRequired:!0,label:d._({id:"\u5267\u672c"}),labelIcon:r.a.createElement(gi,{content:d._({id:"Select the playbook to be executed by this job."})})},r.a.createElement(WS,{projectId:null===(i=B.value)||void 0===i?void 0:i.id,isValid:!ae.touched||!ae.error,field:te,onBlur:function(){return ne.setTouched()},onError:E})),r.a.createElement(Hl,null,r.a.createElement(Ru,{fieldId:"template-credentials",label:d._({id:"Credentials"}),promptId:"template-ask-credential-on-launch",promptName:"ask_credential_on_launch",tooltip:d._({id:'Select credentials that allow Tower to access the nodes this job will be ran against. You can only select one credential of each type. For machine credentials (SSH), checking "Prompt on launch" without selecting credentials will require you to select a machine credential at run time. If you select credentials and check "Prompt on launch", the selected credential(s) become the defaults that can be updated at run time.'})},r.a.createElement($b,{value:le.value,onChange:function(e){return oe.setValue(e)},onError:E})),r.a.createElement(Wi.a,{label:d._({id:"Labels"}),labelIcon:r.a.createElement(gi,{content:d._({id:"Optional labels that describe this job template, such as 'dev' or 'test'. Labels can be used to group and filter job templates and completed jobs."})}),fieldId:"template-labels"},r.a.createElement(HS,{value:ue.value,onChange:function(e){return de.setValue(e)},onError:E,createText:d._({id:"Create"})})),r.a.createElement(ro,{id:"template-variables",name:"extra_vars",label:d._({id:"\u53d8\u91cf"}),promptId:"template-ask-variables-on-launch",tooltip:d._({id:"Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON. Refer to the Ansible Tower documentation for example syntax."})}),r.a.createElement(Vl,null,r.a.createElement(Tl,{id:"template-forks",name:"forks",type:"number",min:"0",label:d._({id:"Forks"}),tooltip:r.a.createElement("span",null,d._({id:"The number of parallel or simultaneous processes to use while executing the playbook. An empty value, or a value less than 1 will use the Ansible default which is usually 5. The default number of forks can be overwritten with a change to"})," ",r.a.createElement("code",null,"ansible.cfg"),"."," ",d._({id:"Refer to the Ansible documentation for details about the configuration file."}))}),r.a.createElement(Ru,{fieldId:"template-limit",label:d._({id:"\u8303\u56f4"}),promptId:"template-ask-limit-on-launch",promptName:"ask_limit_on_launch",tooltip:d._({id:"Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns are allowed. Refer to Ansible documentation for more information and examples on patterns."})},r.a.createElement(Rn.a,Object.assign({id:"template-limit"},be,{validated:fe.touched&&fe.error?"error":"default",onChange:function(e){ve.setValue(e)}}))),r.a.createElement(Ru,{fieldId:"template-verbosity",label:d._({id:"\u8be6\u7ec6\u7a0b\u5ea6"}),promptId:"template-ask-verbosity-on-launch",promptName:"ask_verbosity_on_launch",tooltip:d._({id:"Control the level of output ansible will produce as the playbook executes."})},r.a.createElement(Fc,Object.assign({id:"template-verbosity",data:lt},he))),r.a.createElement(Tl,{id:"template-job-slicing",name:"job_slice_count",type:"number",min:"1",label:d._({id:"Job Slicing"}),tooltip:d._({id:"Divide the work done by this job template into the specified number of job slices, each running the same tasks against a portion of the inventory."})}),r.a.createElement(Tl,{id:"template-timeout",name:"timeout",type:"number",min:"0",label:d._({id:"Timeout"}),tooltip:d._({id:"The amount of time (in seconds) to run before the job is canceled. Defaults to 0 for no job timeout."})}),r.a.createElement(Ru,{fieldId:"template-diff-mode",label:d._({id:"Show Changes"}),promptId:"template-ask-diff-mode-on-launch",promptName:"ask_diff_mode_on_launch",tooltip:d._({id:"If enabled, show the changes made by Ansible tasks, where supported. This is equivalent to Ansible's --diff mode."})},r.a.createElement(dm.a,{id:"template-show-changes",label:ge.value?d._({id:"On"}):d._({id:"Off"}),isChecked:ge.value,onChange:function(e){return Oe.setValue(e)}})),r.a.createElement(Hl,null,r.a.createElement(zb,{value:we.value,onChange:function(e){return Ce.setValue(e)},tooltip:d._({id:"Select the Instance Groups for this Organization to run on."})}),r.a.createElement(Ru,{fieldId:"template-tags",label:d._({id:"Job Tags"}),promptId:"template-ask-tags-on-launch",promptName:"ask_tags_on_launch",tooltip:d._({id:"Tags are useful when you have a large playbook, and you want to run a specific part of a play or task. Use commas to separate multiple tags. Refer to Ansible Tower documentation for details on the usage of tags."})},r.a.createElement(pm,{value:Te.value,onChange:function(e){return Ie.setValue(e)}})),r.a.createElement(Ru,{fieldId:"template-skip-tags",label:d._({id:"Skip Tags"}),promptId:"template-ask-skip-tags-on-launch",promptName:"ask_skip_tags_on_launch",tooltip:d._({id:"Skip tags are useful when you have a large playbook, and you want to skip specific parts of a play or task. Use commas to separate multiple tags. Refer to Ansible Tower documentation for details on the usage of tags."})},r.a.createElement(pm,{value:Ne.value,onChange:function(e){return De.setValue(e)}})),r.a.createElement(Wi.a,{fieldId:"template-option-checkboxes",label:d._({id:"Options"})},r.a.createElement(Bl,null,r.a.createElement(Rl,{id:"option-privilege-escalation",name:"become_enabled",label:d._({id:"Privilege Escalation"}),tooltip:d._({id:"If enabled, run this playbook as an administrator."})}),r.a.createElement(En.a,{"aria-label":d._({id:"Provisioning Callbacks"}),label:r.a.createElement("span",null,d._({id:"Provisioning Callbacks"}),"\xa0",r.a.createElement(gi,{content:d._({id:"Enables creation of a provisioning callback URL. Using the URL a host can contact BRAND_NAME and request a configuration update using this job template."})})),id:"option-callbacks",isChecked:C,onChange:function(e){S(e)}}),r.a.createElement(En.a,{"aria-label":d._({id:"Enable Webhook"}),label:r.a.createElement("span",null,d._({id:"Enable Webhook"}),"\xa0",r.a.createElement(gi,{content:d._({id:"Enable webhook for this template."})})),id:"wfjt-enabled-webhooks",isChecked:I,onChange:function(e){R(e)}}),r.a.createElement(Rl,{id:"option-concurrent",name:"allow_simultaneous",label:d._({id:"Concurrent Jobs"}),tooltip:d._({id:"If enabled, simultaneous runs of this job template will be allowed."})}),r.a.createElement(Rl,{id:"option-fact-cache",name:"use_fact_cache",label:d._({id:"Enable Fact Storage"}),tooltip:d._({id:"If enabled, this will store gathered facts so they can be viewed at the host level. Facts are persisted and injected into the fact cache at runtime."})})))),(C||I)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Wl,null,C&&r.a.createElement(r.a.Fragment,null,r.a.createElement(qt.a,{size:"md",headingLevel:"h4"},d._({id:"Provisioning Callback details"})),r.a.createElement(Vl,null,tt&&r.a.createElement(Wi.a,{label:d._({id:"Provisioning Callback URL"}),fieldId:"template-callback-url"},r.a.createElement(Rn.a,{id:"template-callback-url",isDisabled:!0,value:tt})),r.a.createElement(Tl,{id:"template-host-config-key",name:"host_config_key",label:d._({id:"Host Config Key"}),validate:C?Yo(null,d):null,isRequired:C}))),C&&I&&r.a.createElement("br",null),I&&r.a.createElement(r.a.Fragment,null,r.a.createElement(qt.a,{size:"md",headingLevel:"h4"},d._({id:"Webhook details"})),r.a.createElement(Vl,null,r.a.createElement(JS,{templateType:l.type}))))))),r.a.createElement(Yl,{error:u}),r.a.createElement(cc,{onCancel:o,onSubmit:c})))}XS.defaultProps={template:{name:"",description:"",job_type:"run",inventory:void 0,project:void 0,playbook:"",summary_fields:{inventory:null,labels:{results:[]},project:null,credentials:[]},isNew:!0},submitError:null,isOverrideDisabledLookup:!1};var ZS=Object(Va.d)({mapPropsToValues:function(e){var t,a,n=e.template,r=void 0===n?{}:n,i=e.i18n,l=r.summary_fields,o=void 0===l?{labels:{results:[]},inventory:{organization:null}}:l;return{allow_callbacks:r.allow_callbacks||!1,allow_simultaneous:r.allow_simultaneous||!1,ask_credential_on_launch:r.ask_credential_on_launch||!1,ask_diff_mode_on_launch:r.ask_diff_mode_on_launch||!1,ask_inventory_on_launch:r.ask_inventory_on_launch||!1,ask_job_type_on_launch:r.ask_job_type_on_launch||!1,ask_limit_on_launch:r.ask_limit_on_launch||!1,ask_scm_branch_on_launch:r.ask_scm_branch_on_launch||!1,ask_skip_tags_on_launch:r.ask_skip_tags_on_launch||!1,ask_tags_on_launch:r.ask_tags_on_launch||!1,ask_variables_on_launch:r.ask_variables_on_launch||!1,ask_verbosity_on_launch:r.ask_verbosity_on_launch||!1,become_enabled:r.become_enabled||!1,credentials:o.credentials||[],description:r.description||"",diff_mode:r.diff_mode||!1,extra_vars:r.extra_vars||"---\n",forks:r.forks||0,host_config_key:r.host_config_key||"",initialInstanceGroups:[],instanceGroups:[],inventory:r.inventory||null,job_slice_count:r.job_slice_count||1,job_tags:r.job_tags||"",job_type:r.job_type||"run",labels:o.labels.results||[],limit:r.limit||"",name:r.name||"",playbook:r.playbook||"",project:(null===o||void 0===o?void 0:o.project)||null,scm_branch:r.scm_branch||"",skip_tags:r.skip_tags||"",timeout:r.timeout||0,use_fact_cache:r.use_fact_cache||!1,verbosity:r.verbosity||"0",webhook_service:r.webhook_service||"",webhook_url:(null===r||void 0===r||null===(t=r.related)||void 0===t?void 0:t.webhook_receiver)?"".concat(YS).concat(r.related.webhook_receiver):i._({id:"a new webhook url will be generated on save."}).toUpperCase(),webhook_key:r.webhook_key||i._({id:"a new webhook key will be generated on save."}).toUpperCase(),webhook_credential:(null===r||void 0===r||null===(a=r.summary_fields)||void 0===a?void 0:a.webhook_credential)||null}},handleSubmit:function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=a.setErrors,e.prev=1,e.next=4,n.handleSubmit(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),r(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}(),validate:function(e,t){var a=t.i18n,n={};return e.inventory&&""!==e.inventory||e.ask_inventory_on_launch||(n.inventory=a._({id:"Please select an Inventory or check the Prompt on Launch option."})),n}})(XS),$S=Object(u.withI18n)()(ZS),QS=["labels","instanceGroups","initialInstanceGroups","credentials","webhook_credential","webhook_key","webhook_url"];var ex=function(e){var t,a,i=e.template,l=Object(c.g)(),s=Object(n.useState)(null),u=Object(f.a)(s,2),d=u[0],m=u[1],v=Object(n.useState)(!1),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Object(n.useState)(!1),g=Object(f.a)(y,2),O=g[0],j=g[1],k="/templates/".concat(i.type,"/").concat(i.id,"/details"),w=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut.readDetail(i.project);case 2:case"end":return e.stop()}}),e)}))),[i.project])),C=w.request,S=w.error,x=w.isLoading;Object(n.useEffect)((function(){C()}),[C]),Object(n.useEffect)((function(){S&&403===S.response.status&&j(!0)}),[S]);var T=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,c,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.labels,n=t.instanceGroups,r=t.initialInstanceGroups,c=t.credentials,s=t.webhook_credential,t.webhook_key,t.webhook_url,u=Object(o.a)(t,QS),m(null),E(!0),u.project=t.project.id,u.webhook_credential=(null===s||void 0===s?void 0:s.id)||null,e.prev=5,e.next=8,at.update(i.id,u);case 8:return e.next=10,Promise.all([I(a,null===i||void 0===i?void 0:i.organization),R(n,r),N(c)]);case 10:l.push(k),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),m(e.t0);case 16:return e.prev=16,E(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[5,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,l,o,c,s,u=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:[],a=u.length>1?u[1]:void 0,n=Jv(i.summary_fields.labels.results,t),r=n.added,l=n.removed,o=l.map((function(e){return at.disassociateLabel(i.id,e)})),c=r.map((function(e){return at.associateLabel(i.id,e,a)})),e.next=7,Promise.all([].concat(Object(A.a)(o),Object(A.a)(c)));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,r,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jv(a,t),r=n.added,l=n.removed,e.next=3,l.map((function(e){return at.disassociateInstanceGroup(i.id,e.id)}));case 3:return o=e.sent,e.next=6,r.map((function(e){return at.associateInstanceGroup(i.id,e.id)}));case 6:return c=e.sent,e.abrupt("return",Promise.all([].concat(Object(A.a)(o),Object(A.a)(c))));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,l,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Jv(i.summary_fields.credentials,t),n=a.added,r=a.removed,l=r.map((function(e){return at.disassociateCredentials(i.id,e.id)})),e.next=4,Promise.all(l);case 4:return o=e.sent,c=n.map((function(e){return at.associateCredentials(i.id,e.id)})),e.next=8,Promise.all(c);case 8:return s=e.sent,e.abrupt("return",Promise.all([o,s]));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(null===i||void 0===i||null===(t=i.summary_fields)||void 0===t||null===(a=t.user_capabilities)||void 0===a?void 0:a.edit)?h||x?r.a.createElement(Nr,null):r.a.createElement(Bc,null,r.a.createElement($S,{template:i,handleCancel:function(){return l.push(k)},handleSubmit:T,submitError:d,isOverrideDisabledLookup:!O})):r.a.createElement(c.a,{to:k})},tx=a(1084),ax=a(1085),nx=Object(j.b)(Fo.a).withConfig({displayName:"SurveyListItem__DataListAction",componentId:"sc-84tnuo-0"})(["margin-left:0;margin-right:20px;padding-top:15px;padding-bottom:15px;"]),rx=Object(j.b)(O.a).withConfig({displayName:"SurveyListItem__Button",componentId:"sc-84tnuo-1"})(["padding-top:0;padding-bottom:0;padding-left:0;"]),ix=j.b.span.withConfig({displayName:"SurveyListItem__Required",componentId:"sc-84tnuo-2"})(["color:var(--pf-global--danger-color--100);margin-left:var(--pf-global--spacer--xs);"]),lx=j.b.b.withConfig({displayName:"SurveyListItem__Label",componentId:"sc-84tnuo-3"})(["margin-right:20px;"]);var ox,cx=Object(u.withI18n)()((function(e){var t=e.canEdit,a=e.question,n=e.i18n,i=e.isLast,l=e.isFirst,o=e.isChecked,c=e.onSelect,u=e.onMoveUp,d=e.onMoveDown;return r.a.createElement(ho.a,{"aria-labelledby":n._({id:"Survey questions"}),id:"survey-list-item-".concat(a.variable)},r.a.createElement(sx,null,r.a.createElement(nx,{id:"sortQuestions","aria-labelledby":n._({id:"Sort question order"}),"aria-label":n._({id:"Sort question order"})},r.a.createElement(tx.a,null,r.a.createElement(ax.a,null,r.a.createElement(rx,{variant:"plain","aria-label":n._({id:"move up"}),isDisabled:l||!t,onClick:function(){return u(a)}},r.a.createElement(HO.a,null))),r.a.createElement(ax.a,null,r.a.createElement(rx,{variant:"plain","aria-label":n._({id:"move down"}),isDisabled:i||!t,onClick:function(){return d(a)}},r.a.createElement(WO.a,null))))),r.a.createElement(zo.a,{isDisabled:!t,checked:o,onChange:c,"aria-labelledby":"survey check"}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"survey/edit?question_variable=".concat(a.variable)},a.question_name),a.required&&r.a.createElement(ix,{"aria-label":n._({id:"Required"}),className:"pf-c-form__label-required","aria-hidden":"true"},"*"))),r.a.createElement(ko,{key:"type"},r.a.createElement(lx,null,n._({id:"\u7c7b\u578b"})),a.type),r.a.createElement(ko,{key:"default"},r.a.createElement(lx,null,n._({id:"Default"})),[a.type].includes("password")&&r.a.createElement("span",null,n._({id:"encrypted"}).toUpperCase()),[a.type].includes("multiselect")&&a.default.length>0&&r.a.createElement(fc,{numChips:5,totalChips:a.default.split("\n").length},a.default.split("\n").map((function(e){return r.a.createElement(uc.a,{key:e,isReadOnly:!0},e)}))),![a.type].includes("password")&&![a.type].includes("multiselect")&&r.a.createElement("span",null,a.default))]})))})),sx=Object(j.b)(Eo.a).withConfig({displayName:"SurveyListItem___StyledDataListItemRow",componentId:"sc-84tnuo-4"})(["padding-left:16px"]),ux=Object(j.b)(fn.a)(ox||(ox=Object(v.a)(["\n  margin-left: 52px;\n"])));var dx=Object(u.withI18n)()((function(e){var t=e.canEdit,a=e.isAllSelected,n=e.onSelectAll,i=e.i18n,l=e.surveyEnabled,o=e.onToggleSurvey,s=e.isDeleteDisabled,u=e.onToggleDeleteModal;s=!t||s;var d=Object(c.j)();return r.a.createElement(ux,{id:"survey-toolbar"},r.a.createElement(vn.a,null,r.a.createElement(hn.a,null,r.a.createElement(En.a,{isDisabled:!t,isChecked:a,onChange:function(e){n(e)},"aria-label":i._({id:"Select all"}),id:"select-all"})),r.a.createElement(hn.a,null,r.a.createElement(dm.a,{"aria-label":i._({id:"Survey Toggle"}),id:"survey-toggle",label:i._({id:"On"}),labelOff:i._({id:"Off"}),isChecked:l,isDisabled:!t,onChange:function(){return o(!l)}})),r.a.createElement(_n.a,null,r.a.createElement(hn.a,null,r.a.createElement(Po,{isDisabled:!t,linkTo:"".concat(d.url,"/add")})),r.a.createElement(hn.a,null,r.a.createElement(O.a,{variant:"secondary",isDisabled:s,onClick:function(){return u(!0)}},i._({id:"\u5220\u9664"}))))))}));var mx,px=Object(u.withI18n)()((function(e){var t=e.questions,a=e.isPreviewModalOpen,n=e.onToggleModalOpen,i=e.i18n,l={};return t.forEach((function(e){return l[e.variable]=e.default,l})),r.a.createElement(Ft.a,{title:i._({id:"Survey Preview"}),"aria-label":i._({id:"Survey preview modal"}),isOpen:a,onClose:function(){return n(!1)},variant:"small"},r.a.createElement(Va.a,{initialValues:l},(function(){return r.a.createElement(Jo.a,null,t.map((function(e){return r.a.createElement("div",{key:e.variable},["text","integer","float"].includes(e.type)&&r.a.createElement(Wi.a,{fieldId:"survey-preview-text-".concat(e.variable),label:e.question_name,isRequired:e.required},r.a.createElement(Rn.a,{id:"survey-preview-text-".concat(e.variable),value:e.default,isDisabled:!0,"aria-label":i._({id:"Text"})})),["textarea"].includes(e.type)&&r.a.createElement(Wi.a,{fieldId:"survey-preview-textArea-".concat(e.variable),label:e.question_name,isRequired:e.required},r.a.createElement(Cl.b,{id:"survey-preview-textArea-".concat(e.variable),type:"survey-preview-textArea-".concat(e.variable),value:e.default,"aria-label":i._({id:"Text Area"}),isDisabled:!0})),["password"].includes(e.type)&&r.a.createElement(Ml,{id:"survey-preview-password-".concat(e.variable),label:e.question_name,name:e.variable,isDisabled:!0,isRequired:e.required}),["multiplechoice"].includes(e.type)&&r.a.createElement(Wi.a,{fieldId:"survey-preview-multipleChoice-".concat(e.variable),label:e.question_name,isRequired:e.required},r.a.createElement(dn.a,{id:"survey-preview-multipleChoice-".concat(e.variable),isDisabled:!0,"aria-label":i._({id:"Multiple Choice"}),placeholderText:e.default,onToggle:function(){}})),["multiselect"].includes(e.type)&&r.a.createElement(Wi.a,{fieldId:"survey-preview-multiSelect-".concat(e.variable),label:e.question_name,isRequired:e.required},r.a.createElement(dn.a,{isDisabled:!0,isReadOnly:!0,variant:mn.e.typeaheadMulti,isOpen:!1,selections:e.default.length>0?e.default.split("\n"):[],onToggle:function(){},"aria-label":i._({id:"Multi-Select"}),id:"survey-preview-multiSelect-".concat(e.variable)},e.choices.length>0&&e.choices.split("\n").map((function(e){return r.a.createElement(bn.a,{key:e,value:e})})))))})))})))})),bx=Object(j.b)(O.a)(mx||(mx=Object(v.a)(["\n  margin: 20px;\n"])));var fx=Object(u.withI18n)()((function(e){var t,a=e.isLoading,i=e.survey,l=e.surveyEnabled,o=e.toggleSurvey,s=e.updateSurvey,u=e.deleteSurvey,d=e.canEdit,m=e.i18n,v=Object(c.j)(),_=(null===i||void 0===i?void 0:i.spec)||[],h=Object(n.useState)([]),E=Object(f.a)(h,2),y=E[0],g=E[1],O=Object(n.useState)(!1),j=Object(f.a)(O,2),k=j[0],w=j[1],C=Object(n.useState)(!1),S=Object(f.a)(C,2),x=S[0],T=S[1],I=y.length===(null===_||void 0===_?void 0:_.length)&&y.length>0,R=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I){e.next=5;break}return e.next=3,u();case 3:e.next=7;break;case 5:return e.next=7,s(_.filter((function(e){return!y.includes(e)})));case 7:w(!1),g([]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){var t=_.indexOf(e);if(!(t<1)){var a=_.slice(0,t-1),n=_[t-1],r=_.slice(t+1);s([].concat(Object(A.a)(a),[e,n],Object(A.a)(r)))}},D=function(e){var t=_.indexOf(e);if(!(-1===t||t>_.length-1)){var a=_.slice(0,t),n=_[t+1],r=_.slice(t+2);s([].concat(Object(A.a)(a),[n,e],Object(A.a)(r)))}},L=r.a.createElement(Zt,{variant:"danger",title:I?m._({id:"Delete Survey"}):m._({id:"Delete Questions"}),isOpen:k,onClose:function(){w(!1),g([])},actions:[r.a.createElement(bx,{key:"delete",variant:"danger","aria-label":m._({id:"\u786e\u8ba4\u5220\u9664"}),onClick:R},m._({id:"\u5220\u9664"})),r.a.createElement(bx,{key:"cancel",variant:"secondary","aria-label":m._({id:"\u53d6\u6d88\u5220\u9664"}),onClick:function(){w(!1),g([])}},m._({id:"\u53d6\u6d88"}))]},r.a.createElement("div",null,m._({id:"This action will delete the following:"})),y.map((function(e){return r.a.createElement("span",{key:e.variable},r.a.createElement("strong",null,e.question_name),r.a.createElement("br",null))})));return t=a?r.a.createElement(Nr,null):r.a.createElement(_o.a,{"aria-label":m._({id:"Survey List"})},null===_||void 0===_?void 0:_.map((function(e,t){return r.a.createElement(cx,{key:e.variable,isLast:t===_.length-1,isFirst:0===t,question:e,isChecked:y.some((function(t){return t.variable===e.variable})),onSelect:function(){return t=e,void(y.some((function(e){return e.variable===t.variable}))?g(y.filter((function(e){return e.variable!==t.variable}))):g(y.concat(t)));var t},onMoveUp:N,onMoveDown:D,canEdit:d})})),k&&L,x&&r.a.createElement(px,{isPreviewModalOpen:x,onToggleModalOpen:function(){return T(!1)},questions:_}),r.a.createElement(bx,{onClick:function(){return T(!0)},variant:"primary","aria-label":m._({id:"Preview"})},m._({id:"Preview"}))),_&&!((null===_||void 0===_?void 0:_.length)<=0)||a?r.a.createElement(r.a.Fragment,null,r.a.createElement(dx,{isAllSelected:I,onSelectAll:function(e){g(e?Object(A.a)(_):[])},surveyEnabled:l,onToggleSurvey:o,isDeleteDisabled:0===(null===y||void 0===y?void 0:y.length),canEdit:d,onToggleDeleteModal:function(){return w(!0)}}),t):r.a.createElement(Pa.a,{variant:"full"},r.a.createElement(Ua.a,{icon:Tr.a}),r.a.createElement(qt.a,{size:"lg",headingLevel:"h3"},m._({id:"No survey questions found."})),r.a.createElement(Ga.a,null,m._({id:"Please add survey questions."})),r.a.createElement(Po,{isDisabled:!d,linkTo:"".concat(v.url,"/add")}))}));function vx(e){var t=e.i18n,a=Object(Va.b)({name:"type",validate:Yo(t._({id:"Select a value for this field"}),t)}),n=Object(f.a)(a,1)[0];return r.a.createElement(Wi.a,{label:t._({id:"Answer type"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Choose an answer type or format you want as the prompt for the user. Refer to the Ansible Tower Documentation for more additional information about each option."})}),isRequired:!0,fieldId:"question-answer-type"},r.a.createElement(Fc,Object.assign({id:"question-type"},n,{data:[{key:"text",value:"text",label:t._({id:"Text"})},{key:"textarea",value:"textarea",label:t._({id:"Textarea"})},{key:"password",value:"password",label:t._({id:"Password"})},{key:"multiplechoice",value:"multiplechoice",label:t._({id:"Multiple Choice (single select)"})},{key:"multiselect",value:"multiselect",label:t._({id:"Multiple Choice (multiple select)"})},{key:"integer",value:"integer",label:t._({id:"Integer"})},{key:"float",value:"float",label:t._({id:"Float"})}]})))}function _x(e){var t=e.question,a=e.handleSubmit,n=e.handleCancel,i=e.submitError,l=e.i18n;return r.a.createElement(Va.a,{enableReinitialize:!0,initialValues:{question_name:(null===t||void 0===t?void 0:t.question_name)||"",question_description:(null===t||void 0===t?void 0:t.question_description)||"",required:!t||(null===t||void 0===t?void 0:t.required),type:(null===t||void 0===t?void 0:t.type)||"text",variable:(null===t||void 0===t?void 0:t.variable)||"",min:(null===t||void 0===t?void 0:t.min)||0,max:(null===t||void 0===t?void 0:t.max)||1024,default:(null===t||void 0===t?void 0:t.default)||"",choices:(null===t||void 0===t?void 0:t.choices)||"",new_question:!t},onSubmit:a},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(Tl,{id:"question-name",name:"question_name",type:"text",label:l._({id:"Question"}),validate:Yo(null,l),isRequired:!0}),r.a.createElement(Tl,{id:"question-description",name:"question_description",type:"text",label:l._({id:"\u63cf\u8ff0"})}),r.a.createElement(Tl,{id:"question-variable",name:"variable",type:"text",label:l._({id:"Answer variable name"}),validate:rc([ec(l),Yo(null,l)]),isRequired:!0,tooltip:l._({id:"The suggested format for variable names is lowercase and underscore-separated (for example, foo_bar, user_id, host_name, etc.). Variable names with spaces are not allowed."})}),r.a.createElement(vx,{i18n:l}),r.a.createElement(Rl,{id:"question-required",name:"required",label:l._({id:"Required"})})),r.a.createElement(Vl,null,["text","textarea","password"].includes(e.values.type)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"question-min",name:"min",type:"number",label:l._({id:"Minimum length"})}),r.a.createElement(Tl,{id:"question-max",name:"max",type:"number",label:l._({id:"Maximum length"})})),["integer","float"].includes(e.values.type)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"question-min",name:"min",type:"number",label:l._({id:"Minimum"})}),r.a.createElement(Tl,{id:"question-max",name:"max",type:"number",label:l._({id:"Maximum"})})),["text","integer","float"].includes(e.values.type)&&r.a.createElement(Tl,{id:"question-default",name:"default",validate:{text:Xo(e.values.max,l),integer:tc(l),float:ac(l)}[e.values.type],min:e.values.min,max:e.values.max,type:"text"===e.values.type?"text":"number",label:l._({id:"Default answer"})}),"textarea"===e.values.type&&r.a.createElement(Tl,{id:"question-default",name:"default",type:"textarea",label:l._({id:"Default answer"})}),"password"===e.values.type&&r.a.createElement(Ml,{id:"question-default",name:"default",label:l._({id:"Default answer"})}),["multiplechoice","multiselect"].includes(e.values.type)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"question-options",name:"choices",type:"textarea",label:l._({id:"Multiple Choice Options"}),validate:Yo(null,l),tooltip:l._({id:"Each answer choice must be on a separate line."}),isRequired:!0,rows:"10"}),r.a.createElement(Tl,{id:"question-default",name:"default",validate:(t=e.values.choices,function(e){var a;return Object(A.a)(e).every((function(e){return t.indexOf(e)>-1}))||(a=l._({id:"Default choice must be answered from the choices listed."})),a}),type:"multiplechoice"===e.values.type?"text":"textarea",label:l._({id:"Default answer"})}))),r.a.createElement(Yl,{error:i}),r.a.createElement(cc,{onCancel:n,onSubmit:e.handleSubmit}));var t}))}_x.defaultProps={question:null,submitError:null};var hx=Object(u.withI18n)()(_x);function Ex(e){var t=e.survey,a=e.updateSurvey,i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(c.g)(),d=Object(c.j)(),m=function(){var e=Object(b.a)(p.a.mark((function e(n){var r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===(r=t.spec)||void 0===r?void 0:r.some((function(e){return e.variable===n.variable})))){e.next=4;break}return s(new Error("Survey already contains a question with variable named \u201c".concat(n.variable,"\u201d"))),e.abrupt("return");case 4:return"multiselect"===n.type&&(n.default=n.default.split("\n").filter((function(e){return""!==e||"\n"})).map((function(e){return e.trim()})).join("\n")),i=t.spec?t.spec.concat(n):[n],e.next=8,a(i);case 8:u.push(d.url.replace("/add","")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),s(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(hx,{handleSubmit:m,handleCancel:function(){u.push(d.url.replace("/add",""))},submitError:o}))}function yx(e){var t=e.survey,a=e.updateSurvey,i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(c.g)(),d=Object(c.j)(),m=Object(c.h)().search,v=new URLSearchParams(m).get("question_variable");if(!t)return r.a.createElement(Nr,null);var _=t.spec.find((function(e){return e.variable===v}));if(!_)return r.a.createElement(c.a,{to:"/templates/".concat(d.params.templateType,"/").concat(d.params.id,"/survey")});var h=function(){var e=d.url.indexOf("/edit");u.push(d.url.substr(0,e))},E=function(){var e=Object(b.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.variable===_.variable||!t.spec.find((function(e){return e.variable===n.variable}))){e.next=4;break}return s(new Error("Survey already contains a question with variable named \u201c".concat(n.variable,"\u201d"))),e.abrupt("return");case 4:if(-1!==(r=t.spec.findIndex((function(e){return e.variable===v})))){e.next=7;break}throw new Error("Question not found in spec");case 7:return"multiselect"===n.type&&(n.default=n.default.split("\n").filter((function(e){return""!==e||"\n"})).map((function(e){return e.trim()})).join("\n")),e.next=10,a([].concat(Object(A.a)(t.spec.slice(0,r)),[n],Object(A.a)(t.spec.slice(r+1))));case 10:h(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),s(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(hx,{question:_,handleSubmit:E,handleCancel:h,submitError:o}))}var gx=Object(u.withI18n)()((function(e){var t=e.template,a=e.canEdit,i=e.i18n,l=Object(n.useState)(t.survey_enabled),o=Object(f.a)(l,2),s=o[0],u=o[1],d=Object(c.i)(),m=d.templateType,v=d.id,_=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("workflow_job_template"!==m){e.next=6;break}return e.next=3,kt.readSurvey(v);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,at.readSurvey(v);case 8:e.t0=e.sent;case 9:return t=e.t0,a=t.data,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),[v,m])),h=_.result,E=_.request,y=_.isLoading,g=_.error,O=_.setValue;Object(n.useEffect)((function(){E()}),[E]);var j=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("workflow_job_template"!==m){e.next=5;break}return e.next=3,kt.updateSurvey(v,t);case 3:e.next=7;break;case 5:return e.next=7,at.updateSurvey(v,t);case 7:O(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,O,m])),k=j.request,w=j.error,C=j.isLoading,S=function(e){k({name:h.name||"",description:h.description||"",spec:e})},x=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.destroySurvey(v);case 2:O(null);case 3:case"end":return e.stop()}}),e)}))),[v,O])),T=x.request,I=x.error,A=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("workflow_job_template"!==m){e.next=5;break}return e.next=3,kt.update(v,{survey_enabled:!s});case 3:e.next=7;break;case 5:return e.next=7,at.update(v,{survey_enabled:!s});case 7:u(!s);case 8:case"end":return e.stop()}}),e)}))),[v,m,s])),R=A.request,N=A.error,D=Qa(w||I||N),L=D.error,P=D.dismissError;return g?r.a.createElement(za,{error:g}):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.d,null,a&&r.a.createElement(c.b,{path:"/templates/:templateType/:id/survey/add"},r.a.createElement(Ex,{survey:h,updateSurvey:S})),a&&r.a.createElement(c.b,{path:"/templates/:templateType/:id/survey/edit"},r.a.createElement(yx,{survey:h,updateSurvey:S})),r.a.createElement(c.b,{path:"/templates/:templateType/:id/survey",exact:!0},r.a.createElement(fx,{isLoading:y||C,survey:h,surveyEnabled:s,toggleSurvey:R,updateSurvey:S,deleteSurvey:T,canEdit:a}))),L&&r.a.createElement(Zt,{isOpen:L,variant:"error",title:i._({id:"Error!"}),onClose:P},i._({id:"Failed to update survey."}),r.a.createElement(ua,{error:L})))}));var Ox,jx=Object(u.withI18n)()((function(e){var t,a,i,l=e.i18n,o=e.setBreadcrumb,u=Object(c.j)(),d=Object(c.h)(),m=Object(c.i)().id,v=Tt().me,_=void 0===v?{}:v,h=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,s,u,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([at.readDetail(m),at.readTemplateOptions(m),ct.read({page_size:1,role_level:"notification_admin_role"})]);case 2:if(t=e.sent,a=Object(f.a)(t,3),n=a[0].data,r=a[1],i=a[2],!n.summary_fields.credentials){e.next=14;break}return l={page:1,page_size:200,order_by:"name"},e.next=11,at.readCredentials(n.id,l);case 11:o=e.sent,c=o.data.results,n.summary_fields.credentials=c;case 14:if(!r.data.actions.PUT){e.next=21;break}if(!n.webhook_service||!(null===n||void 0===n||null===(s=n.related)||void 0===s?void 0:s.webhook_key)){e.next=21;break}return e.next=18,at.readWebhookKey(m);case 18:u=e.sent,d=u.data.webhook_key,n.webhook_key=d;case 21:return e.abrupt("return",{template:n,isNotifAdmin:i.data.results.length>0});case 22:case"end":return e.stop()}}),e)}))),[m]),{isNotifAdmin:!1,template:null}),E=h.result,y=E.isNotifAdmin,g=E.template,O=h.isLoading,j=h.error,k=h.request;Object(n.useEffect)((function(){k()}),[k,d.pathname]),Object(n.useEffect)((function(){g&&o(g)}),[g,o]);var w,C=Object(n.useCallback)((function(){return at.readScheduleOptions(m)}),[m]),S=Object(n.useCallback)((function(e){return at.readSchedules(m,e)}),[m]),x=(null===_||void 0===_?void 0:_.is_system_auditor)||y,T=(null===g||void 0===g||null===(t=g.summary_fields)||void 0===t?void 0:t.user_capabilities.edit)||(null===g||void 0===g||null===(a=g.summary_fields)||void 0===a?void 0:a.user_capabilities.delete),I=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),l._({id:"Back to Templates"})),link:"/templates",id:99},{name:l._({id:"Details"}),link:"".concat(u.url,"/details")},{name:l._({id:"Access"}),link:"".concat(u.url,"/access")}];if(x&&I.push({name:l._({id:"Notifications"}),link:"".concat(u.url,"/notifications")}),g&&I.push({name:l._({id:"\u8ba1\u5212"}),link:"".concat(u.url,"/schedules")}),I.push({name:l._({id:"Completed Jobs"}),link:"".concat(u.url,"/completed_jobs")},{name:T?l._({id:"Survey"}):l._({id:"View Survey"}),link:"".concat(u.url,"/survey")}),I.forEach((function(e,t){e.id=t})),j)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:j},404===(null===(w=j.response)||void 0===w?void 0:w.status)&&r.a.createElement("span",null,l._({id:"Template not found."})," ",r.a.createElement(s.b,{to:"/templates"},l._({id:"View all Templates."}))))));var A=!(d.pathname.endsWith("edit")||d.pathname.includes("schedules/"));return r.a.createElement(La.a,null,r.a.createElement(na.a,null,A&&r.a.createElement(us,{tabsArray:I}),g&&r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/templates/:templateType/:id",to:"/templates/:templateType/:id/details",exact:!0}),r.a.createElement(c.b,{key:"details",path:"/templates/:templateType/:id/details"},r.a.createElement(zS,{hasTemplateLoading:O,template:g})),r.a.createElement(c.b,{key:"edit",path:"/templates/:templateType/:id/edit"},r.a.createElement(ex,{template:g})),r.a.createElement(c.b,{key:"access",path:"/templates/:templateType/:id/access"},r.a.createElement(iu,{resource:g,apiModel:at})),r.a.createElement(c.b,{key:"schedules",path:"/templates/:templateType/:id/schedules"},r.a.createElement(Vh,{createSchedule:function(e){return at.createSchedule(g.id,e)},setBreadcrumb:o,unifiedJobTemplate:g,loadSchedules:S,loadScheduleOptions:C})),x&&r.a.createElement(c.b,{path:"/templates/:templateType/:id/notifications"},r.a.createElement(jE,{id:Number(m),canToggleNotifications:y,apiModel:at})),r.a.createElement(c.b,{path:"/templates/:templateType/:id/completed_jobs"},r.a.createElement(tb,{defaultParams:{job__job_template:g.id}})),r.a.createElement(c.b,{path:"/templates/:templateType/:id/survey"},r.a.createElement(gx,{template:g,canEdit:T})),!O&&r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,{isNotFound:!0},u.params.id&&r.a.createElement(s.b,{to:"/templates/".concat(null===u||void 0===u||null===(i=u.params)||void 0===i?void 0:i.templateType,"/").concat(m,"/details")},l._({id:"View Template Details"})))))))})),kx=function(e){Object(w.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).el=document.createElement("div"),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){var e=this.props.children;return l.a.createPortal(e,this.el)}}]),a}(n.Component),wx=j.b.div(Ox||(Ox=Object(v.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: white;\n  z-index: 300;\n"])));var Cx=Object(u.withI18n)()((function(e){var t,a,i,l,o=e.template,u=e.i18n,m=o.id,f=o.ask_inventory_on_launch,v=o.name,_=o.description,h=o.type,E=o.extra_vars,y=o.created,g=o.modified,j=o.summary_fields,k=o.related,w=o.webhook_credential,C=o.webhook_key,S=window.location.origin,x=Object(c.g)(),T=o.allow_simultaneous||o.webhook_service,I=r.a.createElement(Nt.a,{component:Nt.b.ul},o.allow_simultaneous&&r.a.createElement(Dt.a,{component:Dt.b.li},u._({id:"- Enable Concurrent Jobs"})),o.webhook_service&&r.a.createElement(Dt.a,{component:Dt.b.li},u._({id:"- Enable Webhooks"}))),A=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt.destroy(m);case 2:x.push("/templates");case 3:case"end":return e.stop()}}),e)}))),[m,x])),R=A.request,N=A.isLoading,D=Qa(A.error),L=D.error,P=D.dismissError,U=null===j||void 0===j||null===(t=j.user_capabilities)||void 0===t?void 0:t.start,G=j.recent_jobs.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"workflow_job"})}));return r.a.createElement(Bc,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:u._({id:"\u540d\u79f0"}),value:v,dataCy:"jt-detail-name"}),r.a.createElement(xi,{label:u._({id:"\u63cf\u8ff0"}),value:_}),(null===(a=j.recent_jobs)||void 0===a?void 0:a.length)>0&&r.a.createElement(xi,{value:r.a.createElement(Op,{jobs:G}),label:u._({id:"Activity"})}),j.organization&&r.a.createElement(xi,{label:u._({id:"\u7ec4\u7ec7"}),value:r.a.createElement(s.b,{to:"/organizations/".concat(j.organization.id,"/details")},r.a.createElement(Wf.a,null,j.organization.name))}),r.a.createElement(xi,{label:u._({id:"\u4f5c\u4e1a\u7c7b\u578b"}),value:as(h)}),j.inventory&&r.a.createElement(xi,{label:u._({id:"\u6e05\u5355"}),value:function(e,t){var a="smart"===e?"smart_inventory":"inventory";return f?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"/inventories/".concat(a,"/").concat(t,"/details")},r.a.createElement(Wf.a,null,j.inventory.name)),r.a.createElement("span",null," ",u._({id:"(Prompt on launch)"}))):r.a.createElement(s.b,{to:"/inventories/".concat(a,"/").concat(t,"/details")},r.a.createElement(Wf.a,null,j.inventory.name))}(j.inventory.kind,j.inventory.id)}),r.a.createElement(xi,{label:u._({id:"Webhook Service"}),value:as(o.webhook_service)}),k.webhook_receiver&&r.a.createElement(xi,{label:u._({id:"Webhook URL"}),value:"".concat(S).concat(o.related.webhook_receiver)}),r.a.createElement(xi,{label:u._({id:"Webhook Key"}),value:C}),w&&r.a.createElement(xi,{fullWidth:!0,label:u._({id:"Webhook Credentials"}),value:r.a.createElement(s.b,{to:"/credentials/".concat(j.webhook_credential.id,"/details")},r.a.createElement(Wf.a,null,j.webhook_credential.name))}),T&&r.a.createElement(xi,{label:u._({id:"Options"}),value:I}),r.a.createElement(Li,{label:u._({id:"\u5df2\u521b\u5efa"}),date:y,user:j.created_by}),r.a.createElement(Li,{label:u._({id:"\u66f4\u6539"}),date:g,user:j.modified_by}),(null===(i=j.labels)||void 0===i||null===(l=i.results)||void 0===l?void 0:l.length)>0&&r.a.createElement(xi,{fullWidth:!0,label:u._({id:"Labels"}),value:r.a.createElement(fc,{numChips:3,totalChips:j.labels.results.length},j.labels.results.map((function(e){return r.a.createElement(uc.a,{key:e.id,isReadOnly:!0},e.name)})))}),r.a.createElement(_l,{label:u._({id:"\u53d8\u91cf"}),value:E,rows:4})),r.a.createElement(Yc,null,j.user_capabilities&&j.user_capabilities.edit&&r.a.createElement(O.a,{component:s.b,to:"/templates/workflow_job_template/".concat(m,"/edit"),"aria-label":u._({id:"Edit"})},u._({id:"Edit"})),U&&r.a.createElement(Mp,{resource:o,"aria-label":u._({id:"\u8fd0\u884c"})},(function(e){var t=e.handleLaunch;return r.a.createElement(O.a,{variant:"secondary",type:"submit",onClick:t},u._({id:"\u8fd0\u884c"}))})),j.user_capabilities&&j.user_capabilities.delete&&r.a.createElement(Qc,{name:v,modalTitle:u._({id:"Delete Workflow Job Template"}),onConfirm:R,isDisabled:N},u._({id:"\u5220\u9664"}))),L&&r.a.createElement(Zt,{isOpen:L,variant:"error",title:u._({id:"Error!"}),onClose:P},u._({id:"Failed to delete workflow job template."}),r.a.createElement(ua,{error:L})))})),Sx=window.location.origin;function xx(e){var t=e.template,a=e.handleSubmit,i=e.handleCancel,l=e.i18n,o=e.submitError,c=Object(Va.c)().setFieldValue,s=Object(n.useState)(Boolean(t.webhook_service)),u=Object(f.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(null),b=Object(f.a)(p,2),v=b[0],_=b[1],h=Object(Va.b)("ask_inventory_on_launch"),E=Object(f.a)(h,1)[0],y=Object(Va.b)("inventory"),g=Object(f.a)(y,3),O=g[0],j=g[1],k=g[2],w=Object(Va.b)("labels"),C=Object(f.a)(w,3),S=C[0],x=C[2],T=Object(Va.b)("limit"),I=Object(f.a)(T,3),A=I[0],R=I[1],N=I[2],D=Object(Va.b)("organization"),L=Object(f.a)(D,2),P=L[0],U=L[1],G=Object(Va.b)("scm_branch"),q=Object(f.a)(G,3),F=q[0],z=q[2],M=Object(Va.b)("webhook_service"),K=Object(f.a)(M,3),V=K[1],H=K[2],B=Object(Va.b)("webhook_url"),W=Object(f.a)(B,3),J=W[1],Y=W[2],X=Object(Va.b)("webhook_key"),Z=Object(f.a)(X,3),$=Z[1],Q=Z[2],ee=Object(Va.b)("webhook_credential"),te=Object(f.a)(ee,3),ae=te[1],ne=te[2];Object(n.useEffect)((function(){d?(H.setValue(V.initialValue),Y.setValue(J.initialValue),Q.setValue($.initialValue),ne.setValue(ae.initialValue)):(H.setValue(""),Y.setValue(""),Q.setValue(""),ne.setValue(null))}),[d]);var re=Object(n.useCallback)((function(e){c("organization",e)}),[c]);return v?r.a.createElement(za,{error:v}):r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:a},r.a.createElement(Vl,null,r.a.createElement(Tl,{id:"wfjt-name",name:"name",type:"text",label:l._({id:"\u540d\u79f0"}),validate:Yo(null,l),isRequired:!0}),r.a.createElement(Tl,{id:"wfjt-description",name:"description",type:"text",label:l._({id:"\u63cf\u8ff0"})}),r.a.createElement(Pc,{helperTextInvalid:U.error,onChange:re,value:P.value,isValid:!U.error}),r.a.createElement(r.a.Fragment,null,r.a.createElement(Vb,{promptId:"wfjt-ask-inventory-on-launch",promptName:"ask_inventory_on_launch",tooltip:l._({id:"Select an inventory for the workflow. This inventory is applied to all job template nodes that prompt for an inventory."}),fieldId:"wfjt-inventory",isPromptableField:!0,value:O.value,onBlur:function(){return k.setTouched()},onChange:function(e){k.setValue(e)},touched:j.touched,error:j.error}),(j.touched||E.value)&&j.error&&r.a.createElement("div",{className:"pf-c-form__helper-text pf-m-error","aria-live":"polite"},j.error)),r.a.createElement(Ru,{fieldId:"wjft-limit",label:l._({id:"\u8303\u56f4"}),promptId:"template-ask-limit-on-launch",promptName:"ask_limit_on_launch",tooltip:l._({id:"Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns are allowed. Refer to Ansible documentation for more information and examples on patterns."})},r.a.createElement(Rn.a,Object.assign({id:"text-wfjt-limit"},A,{validated:R.touched&&R.error?"error":"default",onChange:function(e){N.setValue(e)}}))),r.a.createElement(Ru,{fieldId:"wfjt-scm-branch",label:l._({id:"Source control branch"}),promptId:"wfjt-ask-scm-branch-on-launch",promptName:"ask_scm_branch_on_launch",tooltip:l._({id:"Select a branch for the workflow. This branch is applied to all job template nodes that prompt for a branch."})},r.a.createElement(Rn.a,Object.assign({id:"text-wfjt-scm-branch"},F,{onChange:function(e){z.setValue(e)}})))),r.a.createElement(Hl,null,r.a.createElement(Wi.a,{label:l._({id:"Labels"}),labelIcon:r.a.createElement(gi,{content:l._({id:"Optional labels that describe this job template, such as 'dev' or 'test'. Labels can be used to group and filter job templates and completed jobs."})}),fieldId:"template-labels"},r.a.createElement(HS,{value:S.value,onChange:function(e){return x.setValue(e)},onError:_,createText:l._({id:"Create"})}))),r.a.createElement(Hl,null,r.a.createElement(ro,{id:"wfjt-variables",name:"extra_vars",label:l._({id:"\u53d8\u91cf"}),promptId:"template-ask-variables-on-launch",tooltip:l._({id:"Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON. Refer to the Ansible Tower documentation for example syntax."})})),r.a.createElement(Wi.a,{fieldId:"options",label:l._({id:"Options"})},r.a.createElement(Bl,{isInline:!0},r.a.createElement(En.a,{"aria-label":l._({id:"Enable Webhook"}),label:r.a.createElement("span",null,l._({id:"Enable Webhook"}),"\xa0",r.a.createElement(gi,{content:l._({id:"Enable Webhook for this workflow job template."})})),id:"wfjt-enabled-webhooks",isChecked:d,onChange:function(e){m(e)}}),r.a.createElement(Rl,{name:"allow_simultaneous",id:"allow_simultaneous",tooltip:l._({id:"If enabled, simultaneous runs of this workflow job template will be allowed."}),label:l._({id:"Enable Concurrent Jobs"})}))),d&&r.a.createElement(Wl,null,r.a.createElement(qt.a,{size:"md",headingLevel:"h4"},l._({id:"Webhook details"})),r.a.createElement(JS,{templateType:t.type})),o&&r.a.createElement(Yl,{error:o}),r.a.createElement(cc,{onCancel:i,onSubmit:a}))}xx.defaultProps={submitError:null,template:{name:"",description:"",inventory:void 0,project:void 0}};var Tx=Object(Va.d)({mapPropsToValues:function(e){var t,a,n,r,i,l,o=e.template,c=void 0===o?{}:o;return{name:c.name||"",description:c.description||"",inventory:(null===c||void 0===c||null===(t=c.summary_fields)||void 0===t?void 0:t.inventory)||null,organization:(null===c||void 0===c||null===(a=c.summary_fields)||void 0===a?void 0:a.organization)||null,labels:(null===(n=c.summary_fields)||void 0===n||null===(r=n.labels)||void 0===r?void 0:r.results)||[],extra_vars:c.extra_vars||"---",limit:c.limit||"",scm_branch:c.scm_branch||"",allow_simultaneous:c.allow_simultaneous||!1,webhook_credential:(null===c||void 0===c||null===(i=c.summary_fields)||void 0===i?void 0:i.webhook_credential)||null,webhook_service:c.webhook_service||"",ask_limit_on_launch:c.ask_limit_on_launch||!1,ask_inventory_on_launch:c.ask_inventory_on_launch||!1,ask_variables_on_launch:c.ask_variables_on_launch||!1,ask_scm_branch_on_launch:c.ask_scm_branch_on_launch||!1,webhook_url:(null===c||void 0===c||null===(l=c.related)||void 0===l?void 0:l.webhook_receiver)?"".concat(Sx).concat(c.related.webhook_receiver):"",webhook_key:c.webhook_key||""}},handleSubmit:function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=a.setErrors,e.prev=1,e.next=4,n.handleSubmit(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),r(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()})(xx),Ix=Object(u.withI18n)()(Tx),Ax=["labels","inventory","organization","webhook_credential","webhook_key"];var Rx=function(e){var t=e.template,a=Object(c.g)(),i=Object(n.useState)(null),l=Object(f.a)(i,2),s=l[0],u=l[1],d=function(){var e=Object(b.a)(p.a.mark((function e(n){var r,i,l,c,s,d,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.labels,l=n.inventory,c=n.organization,s=n.webhook_credential,n.webhook_key,(d=Object(o.a)(n,Ax)).inventory=(null===l||void 0===l?void 0:l.id)||null,d.organization=null===c||void 0===c?void 0:c.id,d.webhook_credential=(null===s||void 0===s?void 0:s.id)||null,b=(null===c||void 0===c?void 0:c.id)||(null===l||void 0===l||null===(r=l.summary_fields)||void 0===r?void 0:r.organization.id)||null,e.prev=5,e.t0=Promise,e.next=9,m(i,b,t.organization);case 9:return e.t1=e.sent,e.next=12,e.t0.all.call(e.t0,e.t1);case 12:return e.next=14,kt.update(t.id,d);case 14:a.push("/templates/workflow_job_template/".concat(t.id,"/details")),e.next=20;break;case 17:e.prev=17,e.t2=e.catch(5),u(e.t2);case 20:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(p.a.mark((function e(){var a,n,r,i,l,o,c,s,u,d,m,b,f=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.length>0&&void 0!==f[0]?f[0]:[],n=f.length>1?f[1]:void 0,r=f.length>2?f[2]:void 0,i=Jv(t.summary_fields.labels.results,a),l=i.added,o=i.removed,c=n||r){e.next=17;break}return e.prev=6,e.next=9,ct.read();case 9:s=e.sent,u=s.data.results,c=u[0].id,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(6),e.t0;case 17:return e.next=19,o.map((function(e){return kt.disassociateLabel(t.id,e)}));case 19:return d=e.sent,e.next=22,l.map((function(e){return kt.associateLabel(t.id,e,c)}));case 22:return m=e.sent,b=[].concat(Object(A.a)(d),Object(A.a)(m)),e.abrupt("return",b);case 25:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(Ix,{handleSubmit:d,handleCancel:function(){a.push("/templates/workflow_job_template/".concat(t.id,"/details"))},template:t,submitError:s}))};var Nx=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useContext)(yg);return r.a.createElement(Zt,{actions:[r.a.createElement(O.a,{id:"confirm-delete-all-nodes",key:"remove",variant:"danger","aria-label":t._({id:"Confirm removal of all nodes"}),onClick:function(){return a({type:"DELETE_ALL_NODES"})}},t._({id:"Remove"})),r.a.createElement(O.a,{id:"cancel-delete-all-nodes",key:"cancel",variant:"secondary","aria-label":t._({id:"Cancel node removal"}),onClick:function(){return a({type:"TOGGLE_DELETE_ALL_NODES_MODAL"})}},t._({id:"\u53d6\u6d88"}))],isOpen:!0,onClose:function(){return a({type:"TOGGLE_DELETE_ALL_NODES_MODAL"})},title:t._({id:"Remove All Nodes"}),variant:"danger"},r.a.createElement("p",null,t._({id:"Are you sure you want to remove all the nodes in this workflow?"})))}));var Dx=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.onSaveAndExit,i=e.onExit,l=Object(n.useContext)(yg);return r.a.createElement(Ft.a,{width:600,isOpen:!0,title:t._({id:"Warning: Unsaved Changes"}),"aria-label":t._({id:"Unsaved changes modal"}),onClose:function(){return l({type:"TOGGLE_UNSAVED_CHANGES_MODAL"})},actions:[r.a.createElement(O.a,{id:"confirm-exit-without-saving",key:"exit",variant:"danger","aria-label":t._({id:"Exit Without Saving"}),onClick:i},t._({id:"Exit Without Saving"})),r.a.createElement(O.a,{id:"confirm-save-and-exit",key:"save",variant:"primary","aria-label":t._({id:"Save & Exit"}),onClick:a},t._({id:"Save & Exit"}))]},r.a.createElement("p",null,r.a.createElement(u.Trans,{id:"Are you sure you want to exit the Workflow Creator without saving your changes?"})))}));var Lx=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useContext)(yg),i=Object(n.useContext)(gg).linkToDelete;return r.a.createElement(Zt,{variant:"danger",title:"Remove Link",isOpen:i,onClose:function(){return a({type:"SET_LINK_TO_DELETE",value:null})},actions:[r.a.createElement(O.a,{id:"confirm-link-removal","aria-label":t._({id:"Confirm link removal"}),key:"remove",onClick:function(){return a({type:"DELETE_LINK"})},variant:"danger"},t._({id:"Remove"})),r.a.createElement(O.a,{id:"cancel-link-removal","aria-label":t._({id:"Cancel link removal"}),key:"cancel",onClick:function(){return a({type:"SET_LINK_TO_DELETE",value:null})},variant:"secondary"},t._({id:"\u53d6\u6d88"}))]},r.a.createElement("p",null,t._({id:"Are you sure you want to remove this link?"})),!i.isConvergenceLink&&r.a.createElement(n.Fragment,null,r.a.createElement("br",null),r.a.createElement("p",null,t._({id:"Removing this link will orphan the rest of the branch and cause it to be executed immediately on launch."}))))}));var Px=Object(u.withI18n)()((function(e){var t=e.header,a=e.i18n,i=e.onConfirm,l=Object(n.useContext)(yg),o=Object(n.useContext)(gg).linkToEdit,c=Object(n.useState)(o?o.linkType:"success"),s=Object(f.a)(c,2),u=s[0],d=s[1];return r.a.createElement(Ft.a,{width:600,header:t,isOpen:!0,title:a._({id:"Workflow Link"}),"aria-label":a._({id:"Workflow link modal"}),onClose:function(){return l({type:"CANCEL_LINK_MODAL"})},actions:[r.a.createElement(O.a,{id:"link-confirm",key:"save",variant:"primary","aria-label":a._({id:"Save link changes"}),onClick:function(){return i(u)}},a._({id:"Save"})),r.a.createElement(O.a,{id:"link-cancel",key:"cancel",variant:"secondary","aria-label":a._({id:"Cancel link changes"}),onClick:function(){return l({type:"CANCEL_LINK_MODAL"})}},a._({id:"\u53d6\u6d88"}))]},r.a.createElement(Wi.a,{fieldId:"link-select",label:a._({id:"Run"})},r.a.createElement(Fc,{id:"link-select",name:"linkType",value:u,data:[{value:"always",key:"always",label:a._({id:"Always"})},{value:"success",key:"success",label:a._({id:"On Success"})},{value:"failure",key:"failure",label:a._({id:"On Failure"})}],onChange:function(e,t){d(t)}})))}));var Ux=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useContext)(yg);return r.a.createElement(Px,{header:r.a.createElement(qt.a,{headingLevel:"h1",size:"xl"},t._({id:"Add Link"})),onConfirm:function(e){return a({type:"CREATE_LINK",linkType:e})}})}));var Gx=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useContext)(yg);return r.a.createElement(Px,{header:r.a.createElement(qt.a,{headingLevel:"h1",size:"xl"},t._({id:"Edit Link"})),onConfirm:function(e){return a({type:"UPDATE_LINK",linkType:e})}})})),qx=R("inventory-sources",{page:1,page_size:5,order_by:"name"});function Fx(e){var t=e.i18n,a=e.nodeResource,i=e.onUpdateNodeResource,l=Object(c.h)(),o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(qx,l.search),e.next=3,Promise.all([et.read(n),et.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),o=i[0],c=i[1],e.abrupt("return",{inventorySources:o.data.results,count:o.data.count,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=c.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[l]),{inventorySources:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),s=o.result,u=s.inventorySources,d=s.count,m=s.relatedSearchableKeys,v=s.searchableKeys,_=o.error,h=o.isLoading,E=o.request;return Object(n.useEffect)((function(){E()}),[E]),r.a.createElement(To,{contentError:_,hasContentLoading:h,itemCount:d,items:u,onRowClick:function(e){return i(e)},qsConfig:qx,showPageSizeOptions:!1,renderItem:function(e){return r.a.createElement(Oc,{isSelected:!(!a||a.id!==e.id),itemId:e.id,key:e.id,name:e.name,label:e.name,onSelect:function(){return i(e)},onDeselect:function(){return i(null)},isRadio:!0})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{fillWidth:!0}))},toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"Source"}),key:"or__source",options:[["file",t._({id:"File, directory or script"})],["scm",t._({id:"Sourced from a project"})],["ec2",t._({id:"Amazon EC2"})],["gce",t._({id:"Google Compute Engine"})],["azure_rm",t._({id:"Microsoft Azure Resource Manager"})],["vmware",t._({id:"VMware vCenter"})],["satellite6",t._({id:"Red Hat Satellite 6"})],["openstack",t._({id:"OpenStack"})],["rhv",t._({id:"Red Hat Virtualization"})],["tower",t._({id:"Ansible Tower"})]]}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:v,toolbarRelatedSearchableKeys:m})}Fx.defaultProps={nodeResource:null};var zx=Object(u.withI18n)()(Fx),Mx=R("job-templates",{page:1,page_size:5,order_by:"name"});function Kx(e){var t=e.i18n,a=e.nodeResource,i=e.onUpdateNodeResource,l=Object(c.h)(),o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(Mx,l.search),e.next=3,Promise.all([at.read(n,{role_level:"execute_role"}),at.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),o=i[0],c=i[1],e.abrupt("return",{jobTemplates:o.data.results,count:o.data.count,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=c.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[l]),{jobTemplates:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),s=o.result,u=s.jobTemplates,d=s.count,m=s.relatedSearchableKeys,v=s.searchableKeys,_=o.error,h=o.isLoading,E=o.request;return Object(n.useEffect)((function(){E()}),[E]),r.a.createElement(To,{contentError:_,hasContentLoading:h,itemCount:d,items:u,onRowClick:function(e){return i(e)},qsConfig:Mx,renderItem:function(e){return r.a.createElement(Oc,{isSelected:!(!a||a.id!==e.id),itemId:e.id,key:e.id,name:e.name,label:e.name,onSelect:function(){return i(e)},onDeselect:function(){return i(null)},isRadio:!0})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{fillWidth:!0}))},showPageSizeOptions:!1,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u5267\u672c\u540d\u79f0"}),key:"playbook__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:v,toolbarRelatedSearchableKeys:m})}Kx.defaultProps={nodeResource:null};var Vx=Object(u.withI18n)()(Kx),Hx=R("projects",{page:1,page_size:5,order_by:"name"});function Bx(e){var t=e.i18n,a=e.nodeResource,i=e.onUpdateNodeResource,l=Object(c.h)(),o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(Hx,l.search),e.next=3,Promise.all([ut.read(n),ut.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),o=i[0],c=i[1],e.abrupt("return",{projects:o.data.results,count:o.data.count,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=c.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[l]),{projects:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),s=o.result,u=s.projects,d=s.count,m=s.relatedSearchableKeys,v=s.searchableKeys,_=o.error,h=o.isLoading,E=o.request;return Object(n.useEffect)((function(){E()}),[E]),r.a.createElement(To,{contentError:_,hasContentLoading:h,itemCount:d,items:u,onRowClick:function(e){return i(e)},qsConfig:Hx,renderItem:function(e){return r.a.createElement(Oc,{isSelected:!(!a||a.id!==e.id),itemId:e.id,key:e.id,name:e.name,label:e.name,onSelect:function(){return i(e)},onDeselect:function(){return i(null)},isRadio:!0})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{fillWidth:!0}))},showPageSizeOptions:!1,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u7c7b\u578b"}),key:"or__scm_type",options:[["",t._({id:"Manual"})],["git",t._({id:"Git"})],["svn",t._({id:"Subversion"})],["archive",t._({id:"Remote Archive"})],["insights",t._({id:"Red Hat Insights"})]]},{name:t._({id:"Source Control URL"}),key:"scm_url__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:v,toolbarRelatedSearchableKeys:m})}Bx.defaultProps={nodeResource:null};var Wx=Object(u.withI18n)()(Bx),Jx=R("workflow-job-templates",{page:1,page_size:5,order_by:"name"});function Yx(e){var t=e.i18n,a=e.nodeResource,i=e.onUpdateNodeResource,l=Object(c.h)(),o=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(Jx,l.search),e.next=3,Promise.all([kt.read(n,{role_level:"execute_role"}),kt.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),o=i[0],c=i[1],e.abrupt("return",{workflowJobTemplates:o.data.results,count:o.data.count,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=c.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[l]),{workflowJobTemplates:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),s=o.result,u=s.workflowJobTemplates,d=s.count,m=s.relatedSearchableKeys,v=s.searchableKeys,_=o.error,h=o.isLoading,E=o.request;return Object(n.useEffect)((function(){E()}),[E]),r.a.createElement(To,{contentError:_,hasContentLoading:h,itemCount:d,items:u,onRowClick:function(e){return i(e)},qsConfig:Jx,renderItem:function(e){return r.a.createElement(Oc,{isSelected:!(!a||a.id!==e.id),itemId:e.id,key:e.id,name:e.name,label:e.name,onSelect:function(){return i(e)},onDeselect:function(){return i(null)},isRadio:!0})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{fillWidth:!0}))},showPageSizeOptions:!1,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"Organization (Name)"}),key:"organization__name__icontains"},{name:t._({id:"Inventory (Name)"}),key:"inventory__name__icontains"},{name:t._({id:"\u521b\u5efa\u8005"}),key:"created_by__username__icontains"},{name:t._({id:"\u4fee\u6539\u8005"}),key:"modified_by__username__icontains"}],toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"}],toolbarSearchableKeys:v,toolbarRelatedSearchableKeys:m})}Yx.defaultProps={nodeResource:null};var Xx=Object(u.withI18n)()(Yx),Zx=Object(j.b)(Rn.a).withConfig({displayName:"NodeTypeStep__TimeoutInput",componentId:"sc-1pfk214-0"})(["width:200px;:not(:first-of-type){margin-left:20px;}"]);Zx.displayName="TimeoutInput";var $x=j.b.p.withConfig({displayName:"NodeTypeStep__TimeoutLabel",componentId:"sc-1pfk214-1"})(["margin-left:10px;"]);var Qx,eT=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(Va.b)("nodeType"),n=Object(f.a)(a,3),i=n[0],l=n[2],o=Object(Va.b)("nodeResource"),c=Object(f.a)(o,3),s=c[0],d=c[2],m=Object(Va.b)("approvalName"),p=Object(f.a)(m,3),b=p[1],v=p[2],_=Object(Va.b)("approvalDescription"),h=Object(f.a)(_,3)[2],E=Object(Va.b)("timeoutMinutes"),y=Object(f.a)(E,3),g=y[0],O=y[2],j=Object(Va.b)("timeoutSeconds"),k=Object(f.a)(j,3),w=k[0],C=k[2],S=!b.touched||!b.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(tT,null,r.a.createElement(aT,null,t._({id:"Node Type"})),r.a.createElement("div",null,r.a.createElement(Fc,{id:"nodeResource-select",label:t._({id:"Select a Node Type"}),data:[{key:"workflow_approval_template",value:"workflow_approval_template",label:t._({id:"Approval"}),isDisabled:!1},{key:"inventory_source",value:"inventory_source",label:t._({id:"Inventory Source Sync"}),isDisabled:!1},{key:"job_template",value:"job_template",label:t._({id:"\u4f5c\u4e1a\u6a21\u677f"}),isDisabled:!1},{key:"project",value:"project",label:t._({id:"Project Sync"}),isDisabled:!1},{key:"workflow_job_template",value:"workflow_job_template",label:t._({id:"Workflow Job Template"}),isDisabled:!1}],value:i.value,onChange:function(e,t){l.setValue(t),d.setValue(null),v.setValue(""),h.setValue(""),O.setValue(0),C.setValue(0)}}))),"job_template"===i.value&&r.a.createElement(Vx,{nodeResource:s.value,onUpdateNodeResource:d.setValue}),"project"===i.value&&r.a.createElement(Wx,{nodeResource:s.value,onUpdateNodeResource:d.setValue}),"inventory_source"===i.value&&r.a.createElement(zx,{nodeResource:s.value,onUpdateNodeResource:d.setValue}),"workflow_job_template"===i.value&&r.a.createElement(Xx,{nodeResource:s.value,onUpdateNodeResource:d.setValue}),"workflow_approval_template"===i.value&&r.a.createElement(nT,null,r.a.createElement(Hl,null,r.a.createElement(Tl,{name:"approvalName",id:"approval-name",isRequired:!0,validate:Yo(null,t),validated:S?"default":"error",label:t._({id:"\u540d\u79f0"})}),r.a.createElement(Tl,{name:"approvalDescription",id:"approval-description",label:t._({id:"\u63cf\u8ff0"})}),r.a.createElement(Wi.a,{label:t._({id:"Timeout"}),fieldId:"approval-timeout",name:"timeout"},r.a.createElement(rT,null,r.a.createElement(Zx,Object.assign({},g,{"aria-label":t._({id:"Timeout minutes"}),id:"approval-timeout-minutes",min:"0",onChange:function(e,t){g.onChange(t)},step:"1",type:"number"})),r.a.createElement($x,null,r.a.createElement(u.Trans,{id:"min"})),r.a.createElement(Zx,Object.assign({},w,{"aria-label":t._({id:"Timeout seconds"}),id:"approval-timeout-seconds",min:"0",onChange:function(e,t){w.onChange(t)},step:"1",type:"number"})),r.a.createElement($x,null,r.a.createElement(u.Trans,{id:"sec"})))))))})),tT=Object(j.b)("div").withConfig({displayName:"NodeTypeStep___StyledDiv",componentId:"sc-1pfk214-2"})(["display:flex;align-items:center;margin-bottom:20px;"]),aT=Object(j.b)("b").withConfig({displayName:"NodeTypeStep___StyledB",componentId:"sc-1pfk214-3"})(["margin-right:24px"]),nT=Object(j.b)(Jo.a).withConfig({displayName:"NodeTypeStep___StyledForm",componentId:"sc-1pfk214-4"})(["margin-top:20px;"]),rT=Object(j.b)("div").withConfig({displayName:"NodeTypeStep___StyledDiv2",componentId:"sc-1pfk214-5"})(["display:flex;align-items:center;"]);function iT(e){var t=Object(Va.b)("nodeType"),a=Object(f.a)(t,2)[1],n=Object(Va.b)("approvalName"),r=Object(f.a)(n,1)[0],i=Object(Va.b)("nodeType"),l=Object(f.a)(i,2)[0],o=Object(Va.b)("nodeResource");return{step:lT(e,l,r,Object(f.a)(o,1)[0]),initialValues:{approvalName:"",approvalDescription:"",timeoutMinutes:0,timeoutSeconds:0,nodeType:"job_template"},isReady:!0,contentError:null,hasError:!!a.error,setTouched:function(e){e("nodeType",!0,!1)},validate:function(){}}}function lT(e,t,a,n){return{id:"nodeType",name:r.a.createElement(Yd,{hasErrors:!1,id:"node-type-step"},e._({id:"Node type"})),component:r.a.createElement(eT,{i18n:e}),enableNext:!("workflow_approval_template"!==t.value&&null===n.value||"workflow_approval_template"===t.value&&void 0===a.value)}}var oT=j.b.div(Qx||(Qx=Object(v.a)(["\n  display: grid;\n  grid-auto-rows: 100px;\n  grid-gap: 20px;\n  grid-template-columns: 33% 33% 33%;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  margin: 20px 0px;\n  width: 100%;\n"])));var cT=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(Va.b)("linkType"),n=Object(f.a)(a,3),i=n[0],l=n[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt.a,{headingLevel:"h1",size:"xl"},t._({id:"Run"})),r.a.createElement("p",null,t._({id:"Specify the conditions under which this node should be executed"})),r.a.createElement(oT,null,r.a.createElement(As,{id:"link-type-success",isSelected:"success"===i.value,label:t._({id:"On Success"}),description:t._({id:"Execute when the parent node results in a successful state."}),onClick:function(){return l.setValue("success")}}),r.a.createElement(As,{id:"link-type-failure",isSelected:"failure"===i.value,label:t._({id:"On Failure"}),description:t._({id:"Execute when the parent node results in a failure state."}),onClick:function(){return l.setValue("failure")}}),r.a.createElement(As,{id:"link-type-always",isSelected:"always"===i.value,label:t._({id:"Always"}),description:t._({id:"Execute regardless of the parent node's final state."}),onClick:function(){return l.setValue("always")}})))}));function sT(e,t){var a=Object(Va.b)("linkType"),n=Object(f.a)(a,2)[1];return{step:uT(t,n,e),initialValues:t?{linkType:"success"}:{},isReady:!0,contentError:null,hasError:!!n.error,setTouched:function(e){e("linkType",!0,!1)},validate:function(){}}}function uT(e,t,a){return e?{id:"runType",name:r.a.createElement(Yd,{hasErrors:!1,id:"run-type-step"},a._({id:"Run type"})),component:r.a.createElement(cT,null),enableNext:""!==t.value}:null}var dT=function(e,t,a){var n,r,i,l,o,c,s,u={nodeResource:(null===a||void 0===a?void 0:a.fullUnifiedJobTemplate)||null,nodeType:(null===a||void 0===a||null===(n=a.fullUnifiedJobTemplate)||void 0===n?void 0:n.type)||"job_template"};if("workflow_approval_template"===(null===a||void 0===a||null===(r=a.fullUnifiedJobTemplate)||void 0===r?void 0:r.type)){var m=a.fullUnifiedJobTemplate.timeout||0;return u.approvalName=a.fullUnifiedJobTemplate.name||"",u.approvalDescription=a.fullUnifiedJobTemplate.description||"",u.timeoutMinutes=Math.floor(m/60),u.timeoutSeconds=m-60*Math.floor(m/60),u}if(!e||e==={})return u;if(e.ask_inventory_on_launch)if(null===a||void 0===a?void 0:a.promptValues)u.inventory=null===a||void 0===a||null===(o=a.promptValues)||void 0===o?void 0:o.inventory;else if(null===a||void 0===a||null===(i=a.originalNodeObject)||void 0===i||null===(l=i.summary_fields)||void 0===l?void 0:l.inventory){var p,b;u.inventory=null===a||void 0===a||null===(p=a.originalNodeObject)||void 0===p||null===(b=p.summary_fields)||void 0===b?void 0:b.inventory}else u.inventory=null;if(e.ask_credential_on_launch)if(null===a||void 0===a||null===(c=a.promptValues)||void 0===c?void 0:c.credentials)u.credentials=null===a||void 0===a||null===(s=a.promptValues)||void 0===s?void 0:s.credentials;else if(null===a||void 0===a?void 0:a.originalNodeCredentials){var v,_,h=[];(null===a||void 0===a||null===(v=a.fullUnifiedJobTemplate)||void 0===v||null===(_=v.summary_fields)||void 0===_?void 0:_.credentials)&&a.fullUnifiedJobTemplate.summary_fields.credentials.forEach((function(e){(function(e){var t=!1;return a.originalNodeCredentials.forEach((function(a){e.credential_type===a.credential_type&&(!e.vault_id&&!a.inputs.vault_id||e.vault_id&&a.inputs.vault_id&&e.vault_id===a.inputs.vault_id)&&(t=!0)})),t})(e)||h.push(e)})),u.credentials=a.originalNodeCredentials.concat(h)}else u.credentials=[];var E=(null===a||void 0===a?void 0:a.promptValues)||a.originalNodeObject;if(e.ask_job_type_on_launch&&(u.job_type=(null===E||void 0===E?void 0:E.job_type)||""),e.ask_limit_on_launch&&(u.limit=(null===E||void 0===E?void 0:E.limit)||""),e.ask_verbosity_on_launch&&(u.verbosity=(null===E||void 0===E?void 0:E.verbosity)||0),e.ask_tags_on_launch&&(u.job_tags=(null===E||void 0===E?void 0:E.job_tags)||""),e.ask_skip_tags_on_launch&&(u.skip_tags=(null===E||void 0===E?void 0:E.skip_tags)||""),e.ask_scm_branch_on_launch&&(u.scm_branch=(null===E||void 0===E?void 0:E.scm_branch)||""),e.ask_diff_mode_on_launch&&(u.diff_mode=(null===E||void 0===E?void 0:E.diff_mode)||!1),e.ask_variables_on_launch){var y=Object(d.a)({},E.extra_data);e.survey_enabled&&t.spec&&t.spec.forEach((function(e){Object.prototype.hasOwnProperty.call(y,e.variable)&&delete y[e.variable]})),u.extra_vars=cl(JSON.stringify(y))}return(null===t||void 0===t?void 0:t.spec)&&t.spec.forEach((function(e){"multiselect"===e.type?u["survey_".concat(e.variable)]=e.default.split("\n"):u["survey_".concat(e.variable)]=e.default,(null===E||void 0===E?void 0:E.extra_data)&&Object.entries(null===E||void 0===E?void 0:E.extra_data).forEach((function(t){var a=Object(f.a)(t,2),n=a[0],r=a[1];n===e.variable&&(e.type,u["survey_".concat(e.variable)]=r)}))})),u};function mT(e,t,a,r,i){var l=Object(n.useContext)(gg).nodeToEdit,o=Object(Va.c)(),c=o.resetForm,s=o.values,u=Object(n.useState)({}),m=Object(f.a)(u,2),p=m[0],b=m[1],v=[sT(a,i),iT(a),Xd(e,r,a,p),rm(e,r,a),Om(e,r,a),Im(e,t,r,a,p)],_=v.some((function(e){return e.hasError}));v.push(Pp(e,a,r,t,_,function(e,t){return!(!["workflow_job_template","job_template"].includes(e)||0===Object.keys(t).length)&&(!t.can_start_without_user_input||t.ask_inventory_on_launch||t.ask_variables_on_launch||t.ask_limit_on_launch||t.ask_scm_branch_on_launch||t.survey_enabled||t.variables_needed_to_start&&t.variables_needed_to_start.length>0)}(s.nodeType,e)));var h=v.map((function(e){return e.step})).filter((function(e){return null!=e})),E=!v.some((function(e){return!e.isReady}));Object(n.useEffect)((function(){if(e&&t&&E){var a,n,r,i,o={};o=l&&(null===l||void 0===l?void 0:l.fullUnifiedJobTemplate)&&(null===l||void 0===l||null===(a=l.fullUnifiedJobTemplate)||void 0===a?void 0:a.id)===(null===(n=s.nodeResource)||void 0===n?void 0:n.id)?dT(e,t,l):v.reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),t.initialValues)}),{}),c({values:Object(d.a)(Object(d.a)({},o),{},{nodeResource:s.nodeResource,nodeType:s.nodeType,linkType:s.linkType,verbosity:null===(r=o)||void 0===r||null===(i=r.verbosity)||void 0===i?void 0:i.toString()})})}}),[e,t,E]);var y=v.find((function(e){return e.contentError}));return{steps:h,validateStep:function(e){v.find((function(t){var a;return(null===t||void 0===t||null===(a=t.step)||void 0===a?void 0:a.id)===e})).validate()},visitStep:function(e,t){b(Object(d.a)(Object(d.a)({},p),{},Object(gr.a)({},e,!0))),v.find((function(t){var a;return(null===t||void 0===t||null===(a=t.step)||void 0===a?void 0:a.id)===e})).setTouched(t)},visitAllSteps:function(e){b({inventory:!0,credentials:!0,other:!0,survey:!0,preview:!0}),v.forEach((function(t){return t.setTouched(e)}))},contentError:y?y.contentError:null}}var pT=function(e){var t=e.activeStep,a=e.buttonText,i=e.onClick,l=e.onNext,o=e.triggerNext,c=e.isDisabled;return Object(n.useEffect)((function(){o&&l()}),[l,o]),r.a.createElement(O.a,{id:"next-node-modal",variant:"primary",type:"submit",onClick:function(){return i(t)},isDisabled:c||!t.enableNext},a)},bT=["i18n","title"];function fT(e){var t=e.askLinkType,a=e.i18n,i=e.onSave,l=e.title,o=e.credentialError,s=e.launchConfig,u=e.surveyConfig,d=e.isLaunchLoading,m=Object(c.g)(),v=Object(n.useContext)(yg),_=Object(Va.c)(),h=_.values,E=_.setFieldTouched,y=Object(n.useState)(0),g=Object(f.a)(y,2),j=g[0],k=g[1],w=function(){var e=m.location.search.replace(/^\?/,"").split("&").filter((function(e){return/^!(job_templates\.|projects\.|inventory_sources\.|workflow_job_templates\.)/.test(e)}));m.replace("".concat(m.location.pathname,"?").concat(e.join("&")))},C=mT(s,u,a,h.nodeResource,t),S=C.steps,x=C.validateStep,T=C.visitStep,I=C.visitAllSteps,A=C.contentError,R=function(){if(w(),"workflow_approval_template"!==h.nodeType&&(delete h.approvalName,delete h.approvalDescription,delete h.timeoutMinutes,delete h.timeoutSeconds),["job_template","workflow_job_template"].includes(h.nodeType)&&(s.ask_variables_on_launch||s.survey_enabled)){var e,t=Md(h),a=s.ask_variables_on_launch&&(h.extra_vars||"---");e=(null===u||void 0===u?void 0:u.spec)?ll.a.safeDump(zd(a,t)):ll.a.safeDump(zd(a,{})),h.extra_data=e&&dl(e),delete h.extra_vars}i(h,s)},N=function(){w(),v({type:"CANCEL_NODE_MODAL"})},D=Qa(A||o),L=D.error,P=D.dismissError,U=function(e){var t;return e.id===(null===(t=S[(null===S||void 0===S?void 0:S.length)-1])||void 0===t?void 0:t.id)||"Preview"===e.name?a._({id:"Save"}):a._({id:"Next"})},G=r.a.createElement(Nu.a,null,r.a.createElement(Du.a,null,(function(e){var t,n=e.activeStep,i=e.onNext,l=e.onBack;return r.a.createElement(r.a.Fragment,null,r.a.createElement(pT,{isDisabled:d,triggerNext:j,activeStep:n,"aria-label":U(n),onNext:i,onClick:function(){return k(j+1)},buttonText:U(n)}),n&&n.id!==(null===(t=S[0])||void 0===t?void 0:t.id)&&r.a.createElement(O.a,{id:"back-node-modal",variant:"secondary","aria-label":a._({id:"\u8fd4\u56de"}),onClick:l},a._({id:"\u8fd4\u56de"})),r.a.createElement(O.a,{id:"cancel-node-modal",variant:"link","aria-label":a._({id:"\u53d6\u6d88"}),onClick:N},a._({id:"\u53d6\u6d88"})))})));return L||L&&!d?r.a.createElement(Zt,{isOpen:L,variant:"error",title:a._({id:"Error!"}),onClose:function(){P()}},r.a.createElement(za,{error:L})):r.a.createElement(hT,{footer:G,isOpen:!L,onClose:N,onSave:function(){R()},onBack:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t.id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onGoToStep:function(){var e=Object(b.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"preview"===t.id?I(E):(T(a.prevId,E),x(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),steps:S,title:l,onNext:function(){var e=Object(b.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"preview"===t.id?I(E):(T(a.prevId,E),x(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})}var vT=function(e){var t=e.i18n,a=e.title,i=Object(o.a)(e,bT),l=Object(Va.c)().values,c=l.nodeResource?"".concat(a," | ").concat(l.nodeResource.name):a,s=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,o,c,s,u,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e,t){return"workflow_job_template"===e?kt.readLaunch(t):at.readLaunch(t)},l.nodeResource&&["job_template","workflow_job_template"].includes(null===l||void 0===l?void 0:l.nodeType)&&["job_template","workflow_job_template"].includes(null===(t=l.nodeResource)||void 0===t?void 0:t.type)){e.next=3;break}return e.abrupt("return",{launchConfig:{},surveyConfig:{}});case 3:return e.next=5,n(l.nodeType,null===l||void 0===l||null===(a=l.nodeResource)||void 0===a?void 0:a.id);case 5:if(r=e.sent,i=r.data,o={},!i.survey_enabled){e.next=21;break}if(!(null===i||void 0===i?void 0:i.workflow_job_template_data)){e.next=15;break}return e.next=12,kt.readSurvey(null===i||void 0===i||null===(c=i.workflow_job_template_data)||void 0===c?void 0:c.id);case 12:e.t0=e.sent,e.next=18;break;case 15:return e.next=17,at.readSurvey(null===i||void 0===i||null===(s=i.job_template_data)||void 0===s?void 0:s.id);case 17:e.t0=e.sent;case 18:u=e.t0,d=u.data,o=d;case 21:return e.abrupt("return",{launchConfig:i,surveyConfig:o});case 22:case"end":return e.stop()}}),e)}))),[l.nodeResource,l.nodeType]),{}),u=s.request,d=s.error,m=s.result,f=m.launchConfig,v=m.surveyConfig,_=s.isLoading;Object(n.useEffect)((function(){u()}),[u,l.nodeResource]);var h=Qa(d),E=h.error,y=h.dismissError;return E?r.a.createElement(Zt,{isOpen:E,variant:"error",title:t._({id:"Error!"}),onClose:function(){y()}},r.a.createElement(za,{error:E})):f&&v?r.a.createElement(fT,Object.assign({},i,{launchConfig:f,surveyConfig:v,isLaunchLoading:_,title:c,i18n:t})):r.a.createElement(Ns,{isOpen:!0,steps:[{name:t._({id:"Loading"}),component:r.a.createElement(Nr,null)}],title:c,footer:r.a.createElement(r.a.Fragment,null)})},_T=Object(u.withI18n)()((function(e){var t,a=e.onSave,i=e.i18n,l=e.askLinkType,o=e.title,c=Object(n.useContext)(gg).nodeToEdit,s=function(e,t){a(e,t)};return r.a.createElement(Va.a,{initialValues:{approvalName:"",approvalDescription:"",timeoutMinutes:0,timeoutSeconds:0,linkType:"success",nodeResource:(null===c||void 0===c?void 0:c.fullUnifiedJobTemplate)||null,nodeType:(null===c||void 0===c||null===(t=c.fullUnifiedJobTemplate)||void 0===t?void 0:t.type)||"job_template"},onSave:function(){return s}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(vT,{onSave:s,i18n:i,title:o,askLinkType:l}))}))})),hT=Object(j.b)(Ns).withConfig({displayName:"NodeModal___StyledWizard",componentId:"sc-1nmcg0d-0"})(["overflow:scroll"]);var ET=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useContext)(yg),i=Object(n.useContext)(gg).addNodeSource;return r.a.createElement(_T,{askLinkType:1!==i,onSave:function(e,t){var n=e.approvalName,r=e.approvalDescription,i=e.timeoutMinutes,l=e.timeoutSeconds,o=e.linkType;if(e){var c,s=Jv(null===t||void 0===t||null===(c=t.defaults)||void 0===c?void 0:c.credentials,null===e||void 0===e?void 0:e.credentials),u=s.added,d=s.removed;e.addedCredentials=u,e.removedCredentials=d}var m={linkType:o};delete e.linkType,"workflow_approval_template"===e.nodeType?m.nodeResource={description:r,name:n,timeout:60*Number(i)+Number(l),type:"workflow_approval_template"}:(m.nodeResource=e.nodeResource,"job_template"!==(null===e||void 0===e?void 0:e.nodeType)&&"workflow_job_template"!==(null===e||void 0===e?void 0:e.nodeType)||(m.promptValues=e)),a({type:"CREATE_NODE",node:m})},title:t._({id:"Add Node"})})}));var yT=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useContext)(yg),i=Object(n.useContext)(gg).nodeToDelete;return r.a.createElement(Zt,{variant:"danger",title:t._({id:"Remove Node"}),isOpen:i,onClose:function(){return a({type:"SET_NODE_TO_DELETE",value:null})},actions:[r.a.createElement(O.a,{id:"confirm-node-removal",key:"remove",variant:"danger","aria-label":t._({id:"Confirm node removal"}),onClick:function(){return a({type:"DELETE_NODE"})}},t._({id:"Remove"})),r.a.createElement(O.a,{id:"cancel-node-removal",key:"cancel",variant:"secondary","aria-label":t._({id:"Cancel node removal"}),onClick:function(){return a({type:"SET_NODE_TO_DELETE",value:null})}},t._({id:"\u53d6\u6d88"}))]},i&&i.unifiedJobTemplate?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,t._({id:"Are you sure you want to remove the node below:"})),r.a.createElement("br",null),r.a.createElement(gT,null,i.unifiedJobTemplate.name)):r.a.createElement("p",null,t._({id:"Are you sure you want to remove this node?"})))})),gT=Object(j.b)("strong").withConfig({displayName:"NodeDeleteModal___StyledStrong",componentId:"sc-1qwmlkc-0"})(["color:var(--pf-global--danger-color--100)"]),OT=["approvalName","approvalDescription","credentials","linkType","nodeResource","nodeType","timeoutMinutes","timeoutSeconds"];var jT=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useContext)(yg);return r.a.createElement(_T,{askLinkType:!1,onSave:function(e,t){var n,r=e.approvalName,i=e.approvalDescription,l=e.credentials,c=(e.linkType,e.nodeResource),s=e.nodeType,u=e.timeoutMinutes,m=e.timeoutSeconds,p=Object(o.a)(e,OT);"workflow_approval_template"===e.nodeType?n={nodeResource:{description:i,name:r,timeout:60*Number(u)+Number(m),type:"workflow_approval_template"}}:(n={nodeResource:c},"job_template"!==s&&"workflow_job_template"!==s||(n.promptValues=Object(d.a)(Object(d.a)({},p),{},{credentials:l}),n.launchConfig=t)),a({type:"UPDATE_NODE",node:n})},title:t._({id:"Edit Node"})})}));function kT(e){switch((null===e||void 0===e?void 0:e.type)||(null===e||void 0===e?void 0:e.unified_job_type)){case"job_template":case"job":return["job_template",at];case"project":case"project_update":return["project_sync",ut];case"inventory_source":case"inventory_update":return["inventory_source_sync",et];case"workflow_job_template":case"workflow_job":return["workflow_job_template",kt];case"workflow_approval_template":case"workflow_approval":return["approval",null];default:return[null,null]}}var wT,CT=Object(u.withI18n)()((function(e){var t,a,i,l=e.i18n,o=e.readOnly,c=Object(n.useContext)(yg),s=Object(n.useContext)(gg).nodeToView,u=s.fullUnifiedJobTemplate,m=s.originalNodeCredentials,v=s.originalNodeObject,_=s.promptValues,h=kT(u||(null===v||void 0===v||null===(t=v.summary_fields)||void 0===t?void 0:t.unified_job_template)),E=Object(f.a)(h,2),y=E[0],g=E[1],j=(null===u||void 0===u?void 0:u.id)||(null===v||void 0===v||null===(a=v.summary_fields)||void 0===a?void 0:a.unified_job_template.id),k=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="workflow_job_template"===y?kt.readLaunch(j):at.readLaunch(j),e.next=3,t;case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),[y,j]),{}),w=k.result,C=k.isLoading,S=k.error,x=k.request,T=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},"job_template"!==y||u.instance_groups){e.next=8;break}return e.next=4,at.readInstanceGroups(u.id);case 4:n=e.sent,r=n.data.results,i=void 0===r?[]:r,a.instance_groups=i;case 8:if(!(null===u||void 0===u||null===(t=u.related)||void 0===t?void 0:t.webhook_receiver)||u.webhook_key){e.next=14;break}return e.next=11,null===g||void 0===g?void 0:g.readWebhookKey(u.id);case 11:l=e.sent,o=l.data.webhook_key,a.webhook_key=o;case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)}))),[g,u,y]),null),I=T.result,A=T.isLoading,R=T.error,N=T.request;if(Object(n.useEffect)((function(){var e;"workflow_job_template"!==y&&"job_template"!==y||x(),u&&("job_template"===y&&!u.instance_groups||(null===u||void 0===u||null===(e=u.related)||void 0===e?void 0:e.webhook_receiver)&&!u.webhook_key)&&N()}),[]),Object(n.useEffect)((function(){I&&c({type:"REFRESH_NODE",node:{fullUnifiedJobTemplate:Object(d.a)(Object(d.a)({},u),I)}})}),[I]),C||A)i=r.a.createElement(Nr,null);else if(S||R)i=r.a.createElement(za,{error:S||R});else if(u){var D={};_?(D=_,(w.ask_variables_on_launch||w.survey_enabled)&&(D.extra_vars=cl(JSON.stringify(_.extra_data)))):u.id===(null===v||void 0===v?void 0:v.unified_job_template)&&(w.ask_inventory_on_launch&&(D.inventory=v.summary_fields.inventory),w.ask_scm_branch_on_launch&&(D.scm_branch=v.scm_branch),(w.ask_variables_on_launch||w.survey_enabled)&&(D.extra_vars=cl(JSON.stringify(v.extra_data))),w.ask_tags_on_launch&&(D.job_tags=v.job_tags),w.ask_diff_mode_on_launch&&(D.diff_mode=v.diff_mode),w.ask_skip_tags_on_launch&&(D.skip_tags=v.skip_tags),w.ask_job_type_on_launch&&(D.job_type=v.job_type),w.ask_limit_on_launch&&(D.limit=v.limit),w.ask_verbosity_on_launch&&(D.verbosity=v.verbosity.toString()),w.ask_credential_on_launch&&(D.credentials=m||[])),i=r.a.createElement(Ap,{launchConfig:w,resource:u,overrides:D})}else i=r.a.createElement("p",null,l._({id:"The resource associated with this node has been deleted."}),"\xa0\xa0",o?"":l._({id:"Click the Edit button below to reconfigure the node."}));return r.a.createElement(Ft.a,{variant:"large",isOpen:!0,title:(null===u||void 0===u?void 0:u.name)||l._({id:"Resource deleted"}),"aria-label":l._({id:"Workflow node view modal"}),onClose:function(){return c({type:"SET_NODE_TO_VIEW",value:null})},actions:o?[]:[r.a.createElement(O.a,{id:"node-view-edit-button",key:"edit","aria-label":l._({id:"Edit Node"}),onClick:function(){c({type:"SET_NODE_TO_VIEW",value:null}),c({type:"SET_NODE_TO_EDIT",value:s})}},l._({id:"Edit"}))]},i)})),ST=j.b.g(wT||(wT=Object(v.a)(["\n  pointer-events: ",";\n"])),(function(e){return e.ignorePointerEvents?"none":"auto"}));var xT,TT,IT,AT=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.link,i=e.updateLinkHelp,l=e.readOnly,o=e.updateHelpText,c=Object(n.useRef)(null),s=Object(n.useState)(!1),u=Object(f.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(),b=Object(f.a)(p,2),v=b[0],_=b[1],h=Object(n.useState)("#CCCCCC"),E=Object(f.a)(h,2),y=E[0],g=E[1],O=Object(n.useState)(),j=Object(f.a)(O,2),k=j[0],w=j[1],C=Object(n.useState)(),S=Object(f.a)(C,2),x=S[0],T=S[1],I=Object(n.useContext)(yg),A=Object(n.useContext)(gg),R=A.addingLink,N=A.nodePositions,D=r.a.createElement(Qg,{id:"link-add-node",key:"add",onClick:function(){o(null),m(!1),I({type:"START_ADD_NODE",sourceNodeId:a.source.id,targetNodeId:a.target.id})},onMouseEnter:function(){return o(t._({id:"Add a new node between these two nodes"}))},onMouseLeave:function(){return o(null)}},r.a.createElement(My.a,null)),L=1===a.source.id?[D]:[D,r.a.createElement(Qg,{id:"link-edit",key:"edit",onClick:function(){o(null),m(!1),I({type:"SET_LINK_TO_EDIT",value:a})},onMouseEnter:function(){return o(t._({id:"Edit this link"}))},onMouseLeave:function(){return o(null)}},r.a.createElement(Mo.a,null)),r.a.createElement(Qg,{id:"link-delete",key:"delete",onClick:function(){o(null),m(!1),I({type:"START_DELETE_LINK",link:a})},onMouseEnter:function(){return o(t._({id:"Delete this link"}))},onMouseLeave:function(){return o(null)}},r.a.createElement(Ry.a,null))];return Object(n.useEffect)((function(){"failure"===a.linkType&&g("#d9534f"),"success"===a.linkType&&g("#5cb85c"),"always"===a.linkType&&g("#337ab7")}),[a.linkType]),Object(n.useEffect)((function(){var e=Ig(a,N);_(Tg(e)),w((e[0].x+e[1].x)/2),T((e[0].y+e[1].y)/2)}),[a,N]),r.a.createElement(ST,{id:"link-".concat(a.source.id,"-").concat(a.target.id),ignorePointerEvents:R,onMouseEnter:function(){c.current.parentNode.appendChild(c.current),m(!0)},onMouseLeave:function(){c.current.parentNode.prepend(c.current),m(null)},ref:c},r.a.createElement("polygon",{fill:"#E1E1E1",id:"link-".concat(a.source.id,"-").concat(a.target.id,"-background"),opacity:d?"1":"0",points:Ag(a,N)}),r.a.createElement("path",{d:v,stroke:y,strokeWidth:"2px"}),r.a.createElement("polygon",{id:"link-".concat(a.source.id,"-").concat(a.target.id,"-overlay"),onMouseEnter:function(){return i(a)},onMouseLeave:function(){return i(null)},opacity:"0",points:Ag(a,N)}),!l&&d&&r.a.createElement(Jg,{actions:L,pointX:k,pointY:x}))})),RT=a(1086),NT=a(1087),DT=j.b.g(xT||(xT=Object(v.a)(["\n  pointer-events: ",";\n  cursor: ",";\n"])),(function(e){return e.noPointerEvents?"none":"initial"}),(function(e){return e.job?"pointer":"default"})),LT=j.b.div(TT||(TT=Object(v.a)(["\n  font-size: 13px;\n  padding: 0px 10px;\n  background-color: ",";\n"])),(function(e){return e.isInvalidLinkTarget?"#D7D7D7":"#FFFFFF"})),PT=j.b.p(IT||(IT=Object(v.a)(["\n  margin-top: 20px;\n  overflow: hidden;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])));function UT(e){var t,a,i,l,o=e.i18n,c=e.node,s=e.onMouseOver,u=e.readOnly,d=e.updateHelpText,m=e.updateNodeHelp,v=Object(n.useRef)(null),_=Object(n.useState)(!1),h=Object(f.a)(_,2),E=h[0],y=h[1],g=Object(n.useState)(null),O=Object(f.a)(g,2),j=O[0],k=O[1],w=Object(n.useState)(null),C=Object(f.a)(w,2),S=C[0],x=C[1],T=Object(n.useContext)(yg),I=Object(n.useContext)(gg),R=I.addingLink,N=I.addLinkSourceNode,D=I.nodePositions,L=I.nodes,P=N&&N.id===c.id,U=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,s,u,d,m,b,v,_;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=Object(A.a)(L),o=l.find((function(e){return e.id===c.id})),c.fullUnifiedJobTemplate||!(null===c||void 0===c||null===(t=c.originalNodeObject)||void 0===t||null===(a=t.summary_fields)||void 0===a?void 0:a.unified_job_template)){e.next=16;break}return s=kT(c.originalNodeObject.summary_fields.unified_job_template),u=Object(f.a)(s,2),d=u[1],e.prev=4,e.next=7,d.readDetail(c.originalNodeObject.unified_job_template);case 7:m=e.sent,b=m.data,o.fullUnifiedJobTemplate=b,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),x(e.t0),e.abrupt("return",null);case 16:if("job"!==(null===c||void 0===c||null===(n=c.originalNodeObject)||void 0===n||null===(r=n.summary_fields)||void 0===r||null===(i=r.unified_job_template)||void 0===i?void 0:i.unified_job_type)||(null===c||void 0===c?void 0:c.originalNodeCredentials)){e.next=29;break}return e.prev=17,e.next=20,jt.readCredentials(c.originalNodeObject.id);case 20:v=e.sent,_=v.data.results,o.originalNodeCredentials=_,e.next=29;break;case 25:return e.prev=25,e.t1=e.catch(17),k(e.t1),e.abrupt("return",null);case 29:return T({type:"SET_NODES",value:l}),e.abrupt("return",o);case 31:case"end":return e.stop()}}),e,null,[[4,12],[17,25]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(null),y(!1),e.next=4,U();case 4:(t=e.sent)&&T({type:"SET_NODE_TO_EDIT",value:t});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(null),y(!1),e.next=4,U();case 4:(t=e.sent)&&T({type:"SET_NODE_TO_VIEW",value:t});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=r.a.createElement(Qg,{id:"node-details",key:"details",onClick:q,onMouseEnter:function(){return d(o._({id:"View node details"}))},onMouseLeave:function(){return d(null)}},r.a.createElement(RT.a,null)),z=u?[F]:[r.a.createElement(Qg,{id:"node-add",key:"add",onClick:function(){d(null),y(!1),T({type:"START_ADD_NODE",sourceNodeId:c.id})},onMouseEnter:function(){return d(o._({id:"Add a new node"}))},onMouseLeave:function(){return d(null)}},r.a.createElement(My.a,null)),F,r.a.createElement(Qg,{id:"node-edit",key:"edit",onClick:G,onMouseEnter:function(){return d(o._({id:"Edit this node"}))},onMouseLeave:function(){return d(null)}},r.a.createElement(Mo.a,null)),r.a.createElement(Qg,{id:"node-link",key:"link",onClick:function(){d(null),y(!1),T({type:"SELECT_SOURCE_FOR_LINKING",node:c})},onMouseEnter:function(){return d(o._({id:"Link to an available node"}))},onMouseLeave:function(){return d(null)}},r.a.createElement(NT.a,null)),r.a.createElement(Qg,{id:"node-delete",key:"delete",onClick:function(){d(null),y(!1),T({type:"SET_NODE_TO_DELETE",value:c})},onMouseEnter:function(){return d(o._({id:"Delete this node"}))},onMouseLeave:function(){return d(null)}},r.a.createElement(Ry.a,null))];return r.a.createElement(r.a.Fragment,null,r.a.createElement(DT,{id:"node-".concat(c.id),job:c.job,noPointerEvents:P,onMouseEnter:function(){v.current.parentNode.appendChild(v.current),y(!0),R&&(d(c.isInvalidLinkTarget?o._({id:"Invalid link target.  Unable to link to children or ancestor nodes.  Graph cycles are not supported."}):o._({id:"Click to create a new link to this node."})),s(c))},onMouseLeave:function(){y(!1),R&&d(null)},ref:v,transform:"translate(".concat(D[c.id].x,",").concat(D[c.id].y-D[1].y,")")},r.a.createElement("rect",{fill:"#FFFFFF",height:wg,rx:"2",ry:"2",stroke:E&&R&&!c.isInvalidLinkTarget?"#007ABC":"#93969A",strokeWidth:"2px",width:kg}),r.a.createElement("foreignObject",Object.assign({height:"58"},!R&&{onMouseEnter:function(){return m(c)},onMouseLeave:function(){return m(null)}},{onClick:function(){!R||c.isInvalidLinkTarget||P||T({type:"SET_ADD_LINK_TARGET_NODE",value:c})},width:"178",x:"1",y:"1"}),r.a.createElement(LT,{isInvalidLinkTarget:c.isInvalidLinkTarget},r.a.createElement(PT,{id:"node-".concat(c.id,"-name")},(null===c||void 0===c||null===(t=c.fullUnifiedJobTemplate)||void 0===t?void 0:t.name)||(null===c||void 0===c||null===(a=c.originalNodeObject)||void 0===a||null===(i=a.summary_fields)||void 0===i||null===(l=i.unified_job_template)||void 0===l?void 0:l.name)||o._({id:"DELETED"})))),r.a.createElement(qO,{node:c}),E&&!R&&r.a.createElement(Jg,{pointX:kg,pointY:wg/2,actions:z})),S&&r.a.createElement(Zt,{isOpen:S,variant:"error",title:o._({id:"Error!"}),onClose:function(){return x(null)}},o._({id:"Failed to retrieve full node resource object."}),r.a.createElement(ua,{error:S})),j&&r.a.createElement(Zt,{isOpen:j,variant:"error",title:o._({id:"Error!"}),onClose:function(){return k(null)}},o._({id:"Failed to retrieve node credentials."}),r.a.createElement(ua,{error:j})))}PT.displayName="NodeResourceName",UT.defaultProps={onMouseOver:function(){}};var GT=Object(u.withI18n)()(UT),qT=j.b.polyline.withConfig({displayName:"VisualizerGraph__PotentialLink",componentId:"sc-miv8p8-0"})(["pointer-events:none;"]),FT=j.b.svg.withConfig({displayName:"VisualizerGraph__WorkflowSVG",componentId:"sc-miv8p8-1"})(["background-color:#f6f6f6;display:flex;height:100%;"]);var zT=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.readOnly,i=Object(n.useState)(null),l=Object(f.a)(i,2),o=l[0],c=l[1],s=Object(n.useState)(),u=Object(f.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(),b=Object(f.a)(p,2),v=b[0],_=b[1],h=Object(n.useState)(100),E=Object(f.a)(h,2),y=E[0],g=E[1],O=Object(n.useRef)(null),j=Object(n.useRef)(null),k=Object(n.useContext)(gg),w=k.addLinkSourceNode,C=k.addingLink,S=k.links,x=k.nodePositions,T=k.nodes,I=k.showLegend,A=k.showTools,R=Object(n.useContext)(yg),N=function(){var e=ab.r(ab.l(O.current).node()).k,t=ab.l(j.current).node().getBoundingClientRect(),a=ab.l(j.current).node().getBBox(),n=xg(t,O.current.getBoundingClientRect(),a,e),r=Object(f.a)(n,2),i=r[0],l=r[1];ab.l(O.current).call(D.transform,ab.q.translate(0,l).scale(i)),g(100*i)},D=ab.p().scaleExtent([.1,2]).on("zoom",(function(){var e=[ab.d.transform.x,ab.d.transform.y];ab.l(j.current).attr("transform","translate(".concat(e,") scale(").concat(ab.d.transform.k,")")),g(100*ab.d.transform.k)}));return Object(n.useEffect)((function(){ab.l(O.current).call(D)}),[D]),Object(n.useEffect)((function(){N()}),[]),r.a.createElement(r.a.Fragment,null,(o||v||d)&&r.a.createElement(mO,null,o&&r.a.createElement("p",null,o),v&&r.a.createElement(DO,{node:v}),d&&r.a.createElement(xO,{link:d})),r.a.createElement(FT,{id:"workflow-svg",ref:O},r.a.createElement("defs",null,r.a.createElement("marker",{className:"WorkflowChart-noPointerEvents",id:"workflow-triangle",markerHeight:"6",markerUnits:"strokeWidth",markerWidth:"6",orient:"auto",refX:"10",viewBox:"0 -5 10 10"},r.a.createElement("path",{d:"M0,-5L10,0L0,5",fill:"#93969A"}))),r.a.createElement("rect",Object.assign({height:"100%",id:"workflow-backround",opacity:"0",width:"100%"},C&&{onMouseMove:function(e){return function(e){var t=ab.r(ab.l(j.current).node()),a=e.target.getBoundingClientRect(),n=e.clientX-a.left,r=e.clientY-a.top,i=x[w.id].x,l=x[w.id].y-x[1].y,o=i+kg,c=l+wg/2;ab.l("#workflow-potentialLink").attr("points","".concat(o,",").concat(c," ").concat(n/t.k-t.x/t.k,",").concat(r/t.k-t.y/t.k)).raise()}(e)},onMouseOver:function(){return c(t._({id:"Click an available node to create a new link.  Click outside the graph to cancel."}))},onMouseOut:function(){return c(null)},onClick:function(){return c(null),void R({type:"CANCEL_LINK"})}})),r.a.createElement("g",{id:"workflow-g",ref:j},x&&[r.a.createElement(MO,{key:"start",showActionTooltip:!a,onUpdateHelpText:c,readOnly:a}),S.map((function(e){return x[e.source.id]&&x[e.target.id]?r.a.createElement(AT,{key:"link-".concat(e.source.id,"-").concat(e.target.id),link:e,readOnly:a,updateLinkHelp:function(e){return m(e)},updateHelpText:function(e){return c(e)}}):null})),T.map((function(e){return e.id>1&&x[e.id]&&!e.isDeleted?r.a.createElement(GT,Object.assign({key:"node-".concat(e.id),node:e,readOnly:a,updateHelpText:function(e){return c(e)},updateNodeHelp:function(e){return _(e)}},C&&{onMouseOver:function(){return function(e){if(e.id!==w.id){var t=x[w.id].x,a=x[w.id].y-x[1].y,n=x[e.id].x,r=x[e.id].y-x[1].y,i=t+kg,l=a+wg/2,o=n,c=r+wg/2;ab.l("#workflow-potentialLink").attr("points","".concat(i,",").concat(l," ").concat(o,",").concat(c)).raise()}}(e)}})):null}))],C&&r.a.createElement(qT,{id:"workflow-potentialLink",markerEnd:"url(#workflow-triangle)",stroke:"#93969A",strokeDasharray:"5,5",strokeWidth:"2"}))),r.a.createElement(MT,null,A&&r.a.createElement(lj,{onFitGraph:N,onPan:function(e){var t=ab.r(ab.l(O.current).node()),a=t.x,n=t.y,r=t.k;switch(e){case"up":n-=50;break;case"down":n+=50;break;case"left":a-=50;break;case"right":a+=50}ab.l(O.current).call(D.transform,ab.q.translate(a,n).scale(r))},onPanToMiddle:function(){var e=O.current.getBoundingClientRect();ab.l(O.current).call(D.transform,ab.q.translate(0,e.height/2-30).scale(1)),g(100)},onZoomChange:function(e){var t=Ng(O.current.getBoundingClientRect(),ab.r(ab.l(O.current).node()),e),a=Object(f.a)(t,2),n=a[0],r=a[1];ab.l(O.current).call(D.transform,ab.q.translate(n,r).scale(e)),g(100*e)},zoomPercentage:y}),I&&r.a.createElement(CO,null)))})),MT=Object(j.b)("div").withConfig({displayName:"VisualizerGraph___StyledDiv",componentId:"sc-miv8p8-2"})(["position:absolute;top:75px;right:20px;display:flex;"]),KT=Object(j.b)(O.a).withConfig({displayName:"VisualizerStartScreen__Button",componentId:"sc-1stetb2-0"})(["&&{background-color:#5cb85c;padding:5px 8px;--pf-global--FontSize--md:14px;margin-top:20px;}"]),VT=j.b.div.withConfig({displayName:"VisualizerStartScreen__StartPanel",componentId:"sc-1stetb2-1"})(["background-color:white;border:1px solid #c7c7c7;padding:60px 80px;text-align:center;"]),HT=j.b.div.withConfig({displayName:"VisualizerStartScreen__StartPanelWrapper",componentId:"sc-1stetb2-2"})(["align-items:center;background-color:#f6f6f6;display:flex;height:100%;justify-content:center;"]);var BT=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.readOnly,i=Object(n.useContext)(yg);return r.a.createElement(WT,null,r.a.createElement(HT,null,r.a.createElement(VT,null,a?r.a.createElement("p",null,t._({id:"This workflow does not have any nodes configured."})):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t._({id:"Please click the Start button to begin."})),r.a.createElement(KT,{id:"visualizer-start","aria-label":t._({id:"Start"}),onClick:function(){return i({type:"START_ADD_NODE",sourceNodeId:1})},variant:"primary"},t._({id:"Start"}))))))})),WT=Object(j.b)("div").withConfig({displayName:"VisualizerStartScreen___StyledDiv",componentId:"sc-1stetb2-3"})(["flex:1"]),JT=a(1088),YT=Object(j.b)(Pi.a).withConfig({displayName:"VisualizerToolbar__Badge",componentId:"sc-1vrkrp5-0"})(["align-items:center;display:flex;justify-content:center;margin-left:10px;"]),XT=Object(j.b)(O.a).withConfig({displayName:"VisualizerToolbar__ActionButton",componentId:"sc-1vrkrp5-1"})(["padding:6px 10px;margin:0px 6px;border:none;&:hover{background-color:#0066cc;color:white;}&.pf-m-active{background-color:#0066cc;color:white;}"]);XT.displayName="ActionButton";var ZT,$T,QT=Object(u.withI18n)()((function(e){var t,a,i=e.i18n,l=e.onClose,o=e.onSave,c=e.template,s=e.hasUnsavedChanges,u=e.readOnly,d=Object(n.useContext)(yg),m=Object(n.useContext)(gg),p=m.nodes,b=m.showLegend,f=m.showTools,v=p.reduce((function(e,t){return e+!t.isDeleted}),0)-1;return r.a.createElement("div",{id:"visualizer-toolbar"},r.a.createElement(eI,null,r.a.createElement(qt.a,{headingLevel:"h2",size:"xl",id:"visualizer-toolbar-template-name"},c.name),r.a.createElement(tI,null,r.a.createElement("div",null,i._({id:"Total Nodes"})),r.a.createElement(YT,{id:"visualizer-total-nodes-badge",isRead:!0},v),r.a.createElement(Ea.a,{content:i._({id:"Toggle legend"}),position:"bottom"},r.a.createElement(XT,{"aria-label":i._({id:"Toggle legend"}),id:"visualizer-toggle-legend",isActive:v>0&&b,isDisabled:0===v,onClick:function(){return d({type:"TOGGLE_LEGEND"})},variant:"plain"},r.a.createElement(Tj.a,null))),r.a.createElement(Ea.a,{content:i._({id:"Toggle tools"}),position:"bottom"},r.a.createElement(XT,{"aria-label":i._({id:"Toggle tools"}),id:"visualizer-toggle-tools",isActive:v>0&&f,isDisabled:0===v,onClick:function(){return d({type:"TOGGLE_TOOLS"})},variant:"plain"},r.a.createElement(Ij.a,null))),r.a.createElement(Ea.a,{content:i._({id:"Workflow documentation"}),position:"bottom"},r.a.createElement(XT,{"aria-label":i._({id:"Workflow documentation"}),id:"visualizer-documentation",variant:"plain",component:"a",target:"_blank",href:"https://docs.ansible.com/ansible-tower/latest/html/userguide/workflow_templates.html#ug-wf-editor"},r.a.createElement(JT.a,null))),(null===(t=c.summary_fields)||void 0===t||null===(a=t.user_capabilities)||void 0===a?void 0:a.start)&&r.a.createElement(Ea.a,{content:i._({id:"Launch workflow"}),position:"bottom"},r.a.createElement(Mp,{resource:c,"aria-label":i._({id:"Launch workflow"})},(function(e){var t=e.handleLaunch;return r.a.createElement(XT,{id:"visualizer-launch",variant:"plain",isDisabled:s||0===v,onClick:t},r.a.createElement(Fd.a,null))}))),!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{content:i._({id:"Delete all nodes"}),position:"bottom"},r.a.createElement(XT,{id:"visualizer-delete-all","aria-label":i._({id:"Delete all nodes"}),isDisabled:0===v,onClick:function(){return d({type:"SET_SHOW_DELETE_ALL_NODES_MODAL",value:!0})},variant:"plain"},r.a.createElement(Ry.a,null))),r.a.createElement(aI,{id:"visualizer-save","aria-label":i._({id:"Save"}),variant:"primary",onClick:o},i._({id:"Save"}))),r.a.createElement(O.a,{id:"visualizer-close","aria-label":i._({id:"Close"}),onClick:l,variant:"plain"},r.a.createElement(pO.a,null)))))})),eI=Object(j.b)("div").withConfig({displayName:"VisualizerToolbar___StyledDiv",componentId:"sc-1vrkrp5-2"})(["align-items:center;border-bottom:1px solid grey;display:flex;height:56px;padding:0px 20px;"]),tI=Object(j.b)("div").withConfig({displayName:"VisualizerToolbar___StyledDiv2",componentId:"sc-1vrkrp5-3"})(["align-items:center;display:flex;flex:1;justify-content:flex-end"]),aI=Object(j.b)(O.a).withConfig({displayName:"VisualizerToolbar___StyledButton",componentId:"sc-1vrkrp5-4"})(["margin:0 32px"]),nI=j.b.div(ZT||(ZT=Object(v.a)(["\n  align-items: center;\n  display: flex;\n  flex-flow: column;\n  height: 100%;\n  justify-content: center;\n"]))),rI=j.b.div($T||($T=Object(v.a)(["\n  display: flex;\n  flex-flow: column;\n  height: 100%;\n"]))),iI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],n=function(t){var a=!1;return e.forEach((function(e){t.credential_type===e.credential_type&&(!t.vault_id&&!e.inputs.vault_id||t.vault_id&&e.inputs.vault_id&&t.vault_id===e.inputs.vault_id)&&(a=!0)})),a};return t.length>0&&t.forEach((function(e){n(e)||a.push(e)})),a=a.concat(e)},lI=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i,l=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:1,n=l.length>2&&void 0!==l[2]?l[2]:[],e.next=4,kt.readNodes(t,{page_size:200,page:a});case 4:if(r=e.sent,!(i=r.data).next){e.next=8;break}return e.abrupt("return",lI(t,a+1,n.concat(i.results)));case 8:return e.abrupt("return",n.concat(i.results));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var oI=Object(u.withI18n)()((function(e){var t,a,i=e.template,l=e.i18n,o=Object(c.g)(),s=Object(n.useReducer)(Lg,{addLinkSourceNode:null,addLinkTargetNode:null,addNodeSource:null,addNodeTarget:null,addingLink:!1,contentError:null,isLoading:!0,linkToDelete:null,linkToEdit:null,links:[],nextNodeId:0,nodePositions:null,nodeToDelete:null,nodeToEdit:null,nodeToView:null,nodes:[],showDeleteAllNodesModal:!1,showLegend:!1,showTools:!1,showUnsavedChangesModal:!1,unsavedChanges:!1}),u=Object(f.a)(s,2),m=u[0],v=u[1],_=m.addLinkSourceNode,h=m.addLinkTargetNode,E=m.addNodeSource,y=m.contentError,g=m.isLoading,O=m.linkToDelete,j=m.linkToEdit,k=m.links,w=m.nodeToDelete,C=m.nodeToEdit,S=m.nodeToView,x=m.nodes,T=m.showDeleteAllNodesModal,I=m.showUnsavedChangesModal,A=m.unsavedChanges,R=function(e,t){var a=[];return e.forEach((function(e){switch(e.linkType){case"success":a.push(jt.associateSuccessNode(t[e.source.id].id,t[e.target.id].id));break;case"failure":a.push(jt.associateFailureNode(t[e.source.id].id,t[e.target.id].id));break;case"always":a.push(jt.associateAlwaysNode(t[e.source.id].id,t[e.target.id].id))}})),a},N=function(e,t,a){var n=[];return Object.keys(e).forEach((function(r){var i=e[r];i.success_nodes.forEach((function(e){t.includes(e)||a[i.id]&&a[i.id][e]&&"success"===a[i.id][e]||n.push(jt.disassociateSuccessNode(i.id,e))})),i.failure_nodes.forEach((function(e){t.includes(e)||a[i.id]&&a[i.id][e]&&"failure"===a[i.id][e]||n.push(jt.disassociateFailuresNode(i.id,e))})),i.always_nodes.forEach((function(e){t.includes(e)||a[i.id]&&a[i.id][e]&&"always"===a[i.id][e]||n.push(jt.disassociateAlwaysNode(i.id,e))}))})),n};Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lI(i.id);case 3:t=e.sent,v({type:"GENERATE_NODES_AND_LINKS",nodes:t,i18n:l}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v({type:"SET_CONTENT_ERROR",value:e.t0});case 10:return e.prev=10,v({type:"SET_IS_LOADING",value:!1}),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i.id,l]),Object(n.useEffect)((function(){if(x){var e={},t=Rg(x.filter((function(e){return!e.isDeleted})),k);t.nodes().forEach((function(a){e[a]=t.node(a)})),v({type:"SET_NODE_POSITIONS",value:e})}}),[k,x]);var D=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,l,c,s,u,m,b,v;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],n={},r=[],l=[],c=[],s=function(){var e={},t=[];return k.forEach((function(a){if(1!==a.source.id){var r=n[a.source.id].id,i=n[a.target.id].id;switch(e[r]||(e[r]={}),e[r][i]=a.linkType,a.linkType){case"success":n[a.source.id].success_nodes.includes(n[a.target.id].id)||t.push(a);break;case"failure":n[a.source.id].failure_nodes.includes(n[a.target.id].id)||t.push(a);break;case"always":n[a.source.id].always_nodes.includes(n[a.target.id].id)||t.push(a)}}})),[e,t]},x.forEach((function(e){if(1!==e.id){if(e.originalNodeObject&&!e.isDeleted){var o=e.originalNodeObject,s=o.id,u=o.success_nodes,m=o.failure_nodes,p=o.always_nodes;n[e.id]={id:s,success_nodes:u,failure_nodes:m,always_nodes:p}}if(e.isDeleted&&e.originalNodeObject)r.push(e.originalNodeObject.id),t.push(jt.destroy(e.originalNodeObject.id));else if(e.isDeleted||e.originalNodeObject){if(e.isEdited){var b,f;if("workflow_approval_template"===e.fullUnifiedJobTemplate.type)"workflow_approval"===e.originalNodeObject.summary_fields.unified_job_template.unified_job_type?a.push(Ot.update(e.originalNodeObject.summary_fields.unified_job_template.id,{name:e.fullUnifiedJobTemplate.name,description:e.fullUnifiedJobTemplate.description,timeout:e.fullUnifiedJobTemplate.timeout})):a.push(jt.createApprovalTemplate(e.originalNodeObject.id,{name:e.fullUnifiedJobTemplate.name,description:e.fullUnifiedJobTemplate.description,timeout:e.fullUnifiedJobTemplate.timeout}));else t.push(jt.replace(e.originalNodeObject.id,Object(d.a)(Object(d.a)({},e.promptValues),{},{inventory:(null===(b=e.promptValues)||void 0===b||null===(f=b.inventory)||void 0===f?void 0:f.id)||null,unified_job_template:e.fullUnifiedJobTemplate.id})).then((function(){var t,a,n,r=Jv(iI(null===e||void 0===e?void 0:e.originalNodeCredentials,null===(t=e.launchConfig)||void 0===t||null===(a=t.defaults)||void 0===a?void 0:a.credentials),null===(n=e.promptValues)||void 0===n?void 0:n.credentials),i=r.added,o=r.removed;i.length>0&&i.forEach((function(t){l.push(jt.associateCredentials(e.originalNodeObject.id,t.id))})),(null===o||void 0===o?void 0:o.length)>0&&o.forEach((function(t){return c.push(jt.disassociateCredentials(e.originalNodeObject.id,t.id))}))})))}}else{var v,_;if("workflow_approval_template"===e.fullUnifiedJobTemplate.type)t.push(kt.createNode(i.id,{}).then((function(t){var r=t.data;e.originalNodeObject=r,n[e.id]={id:r.id,success_nodes:[],failure_nodes:[],always_nodes:[]},a.push(jt.createApprovalTemplate(r.id,{name:e.fullUnifiedJobTemplate.name,description:e.fullUnifiedJobTemplate.description,timeout:e.fullUnifiedJobTemplate.timeout}))})));else t.push(kt.createNode(i.id,Object(d.a)(Object(d.a)({},e.promptValues),{},{inventory:(null===(v=e.promptValues)||void 0===v||null===(_=v.inventory)||void 0===_?void 0:_.id)||null,unified_job_template:e.fullUnifiedJobTemplate.id})).then((function(t){var a,r,i,o,s=t.data;e.originalNodeObject=s,n[e.id]={id:s.id,success_nodes:[],failure_nodes:[],always_nodes:[]},(null===(a=e.promptValues)||void 0===a||null===(r=a.removedCredentials)||void 0===r?void 0:r.length)>0&&e.promptValues.removedCredentials.forEach((function(e){c.push(jt.disassociateCredentials(s.id,e.id))})),(null===(i=e.promptValues)||void 0===i||null===(o=i.addedCredentials)||void 0===o?void 0:o.length)>0&&e.promptValues.addedCredentials.forEach((function(e){l.push(jt.associateCredentials(s.id,e.id))}))})))}}})),e.next=10,Promise.all(t);case 10:return e.next=12,Promise.all(a);case 12:return u=s(n),m=Object(f.a)(u,2),b=m[0],v=m[1],e.next=15,Promise.all(N(n,r,b));case 15:return e.next=17,Promise.all(R(v,n));case 17:return e.next=19,Promise.all(c);case 19:return e.next=21,Promise.all(l);case 21:o.push("/templates/workflow_job_template/".concat(i.id,"/details"));case 22:case"end":return e.stop()}}),e)}))),[k,x,o,i.id]),{}),L=D.error,P=D.request,U=Qa(L),G=U.error,q=U.dismissError;if(g)return r.a.createElement(nI,null,r.a.createElement(Nr,null));if(y)return r.a.createElement(nI,null,r.a.createElement(za,{error:y}));var F=!(null===i||void 0===i||null===(t=i.summary_fields)||void 0===t||null===(a=t.user_capabilities)||void 0===a?void 0:a.edit);return r.a.createElement(gg.Provider,{value:m},r.a.createElement(yg.Provider,{value:v},r.a.createElement(rI,null,r.a.createElement(QT,{onClose:function(){A?v({type:"TOGGLE_UNSAVED_CHANGES_MODAL"}):o.push("/templates/workflow_job_template/".concat(i.id,"/details"))},onSave:function(){return P(x)},hasUnsavedChanges:A,template:i,readOnly:F}),k.length>0?r.a.createElement(zT,{readOnly:F}):r.a.createElement(BT,{readOnly:F})),w&&r.a.createElement(yT,null),O&&r.a.createElement(Lx,null),j&&r.a.createElement(Gx,null),_&&h&&r.a.createElement(Ux,null),E&&r.a.createElement(ET,null),C&&r.a.createElement(jT,null),I&&r.a.createElement(Dx,{onExit:function(){return o.push("/templates/workflow_job_template/".concat(i.id,"/details"))},onSaveAndExit:function(){return P(x)}}),T&&r.a.createElement(Nx,null),S&&r.a.createElement(CT,{readOnly:F}),G&&r.a.createElement(Zt,{isOpen:!0,variant:"error",title:l._({id:"Error!"}),onClose:q},l._({id:"There was an error saving the workflow."}),r.a.createElement(ua,{error:G}))))}));var cI=Object(u.withI18n)()((function(e){var t,a,i=e.i18n,l=e.setBreadcrumb,o=Object(c.h)(),u=Object(c.j)(),d=Object(c.i)().id,m=Tt().me,v=void 0===m?{}:m,_=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([kt.readDetail(d),kt.readWorkflowJobTemplateOptions(d),ct.read({page_size:1,role_level:"notification_admin_role"})]);case 2:if(t=e.sent,a=Object(f.a)(t,3),n=a[0].data,r=a[1],i=a[2],!r.data.actions.PUT){e.next=14;break}if(!n.webhook_service||!(null===n||void 0===n||null===(o=n.related)||void 0===o?void 0:o.webhook_key)){e.next=14;break}return e.next=11,kt.readWebhookKey(d);case 11:c=e.sent,s=c.data.webhook_key,n.webhook_key=s;case 14:return l(n),e.abrupt("return",{template:n,isNotifAdmin:i.data.results.length>0});case 16:case"end":return e.stop()}}),e)}))),[l,d]),{isNotifAdmin:!1,template:null}),h=_.result,E=h.isNotifAdmin,y=h.template,g=_.isLoading,O=_.error,j=_.request;Object(n.useEffect)((function(){j()}),[j,o.pathname]);var k=Object(n.useCallback)((function(){return kt.readScheduleOptions(d)}),[d]),w=Object(n.useCallback)((function(e){return kt.readSchedules(d,e)}),[d]),C=v.is_system_auditor||E,S=(null===y||void 0===y||null===(t=y.summary_fields)||void 0===t?void 0:t.user_capabilities.edit)||(null===y||void 0===y||null===(a=y.summary_fields)||void 0===a?void 0:a.user_capabilities.delete),x=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),i._({id:"Back to Templates"})),link:"/templates",id:99},{name:i._({id:"Details"}),link:"".concat(u.url,"/details")},{name:i._({id:"Access"}),link:"".concat(u.url,"/access")}];C&&x.push({name:i._({id:"Notifications"}),link:"".concat(u.url,"/notifications")}),y&&x.push({name:i._({id:"\u8ba1\u5212"}),link:"".concat(u.url,"/schedules")}),x.push({name:i._({id:"\u53ef\u89c6\u5316"}),link:"".concat(u.url,"/visualizer")},{name:i._({id:"Completed Jobs"}),link:"".concat(u.url,"/completed_jobs")},{name:S?i._({id:"Survey"}):i._({id:"View Survey"}),link:"".concat(u.url,"/survey")}),x.forEach((function(e,t){e.id=t}));var T=!0;(o.pathname.endsWith("edit")||o.pathname.includes("schedules/"))&&(T=!1);var I=O;return g?r.a.createElement(Nr,null):!g&&I?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:I},404===I.response.status&&r.a.createElement("span",null,i._({id:"Template not found."})," ",r.a.createElement(s.b,{to:"/templates"},i._({id:"View all Templates."})))))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,T&&r.a.createElement(us,{tabsArray:x}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/templates/:templateType/:id",to:"/templates/:templateType/:id/details",exact:!0}),y&&r.a.createElement(c.b,{key:"details",path:"/templates/:templateType/:id/details"},r.a.createElement(Cx,{template:y})),y&&r.a.createElement(c.b,{key:"edit",path:"/templates/:templateType/:id/edit"},r.a.createElement(Rx,{template:y})),y&&r.a.createElement(c.b,{key:"access",path:"/templates/:templateType/:id/access"},r.a.createElement(iu,{resource:y,apiModel:kt})),y&&r.a.createElement(c.b,{key:"schedules",path:"/templates/:templateType/:id/schedules"},r.a.createElement(Vh,{createSchedule:function(e){return kt.createSchedule(d,e)},setBreadcrumb:l,unifiedJobTemplate:y,loadSchedules:w,loadScheduleOptions:k})),C&&r.a.createElement(c.b,{path:"/templates/:templateType/:id/notifications"},r.a.createElement(jE,{id:Number(d),canToggleNotifications:E,apiModel:kt,showApprovalsToggle:!0})),y&&r.a.createElement(c.b,{key:"wfjt-visualizer",path:"/templates/workflow_job_template/:id/visualizer"},r.a.createElement(kx,null,r.a.createElement(wx,null,r.a.createElement(oI,{template:y})))),(null===y||void 0===y?void 0:y.id)&&r.a.createElement(c.b,{path:"/templates/:templateType/:id/completed_jobs"},r.a.createElement(tb,{defaultParams:{workflow_job__workflow_job_template:y.id}})),y&&r.a.createElement(c.b,{path:"/templates/:templateType/:id/survey"},r.a.createElement(gx,{template:y,canEdit:S})),!g&&r.a.createElement(c.b,{key:"not-found",path:"*"},r.a.createElement(za,{isNotFound:!0},u.params.id&&r.a.createElement(s.b,{to:"/templates/".concat(u.params.templateType,"/").concat(u.params.id,"/details")},i._({id:"View Template Details"})))))))})),sI=["labels","instanceGroups","initialInstanceGroups","credentials","webhook_credential","webhook_key","webhook_url"];var uI=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],i=t[1],l=Object(c.g)();function s(){return(s=Object(b.a)(p.a.mark((function e(t){var a,n,r,c,s,d,b,f,_;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.labels,n=t.instanceGroups,t.initialInstanceGroups,r=t.credentials,c=t.webhook_credential,t.webhook_key,t.webhook_url,s=Object(o.a)(t,sI),i(null),s.project=s.project.id,s.webhook_credential=null===c||void 0===c?void 0:c.id,e.prev=4,e.next=7,at.create(s);case 7:return d=e.sent,b=d.data,f=b.id,_=b.type,e.next=13,Promise.all([u(f,a,t.project.summary_fields.organization.id),m(f,n),v(f,r)]);case 13:l.push("/templates/".concat(_,"/").concat(f,"/details")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),i(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=Object(b.a)(p.a.mark((function e(t){var a,n,r,i,l,o=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>1&&void 0!==o[1]?o[1]:[],n=o.length>2?o[2]:void 0){e.next=14;break}return e.prev=3,e.next=6,ct.read();case 6:r=e.sent,i=r.data.results,n=i[0].id,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(3),e.t0;case 14:return l=a.map((function(e){return at.associateLabel(t,e,n)})),e.abrupt("return",Promise.all(Object(A.a)(l)));case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=t.map((function(t){return at.associateInstanceGroup(e,t.id)}));return Promise.all(a)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=t.map((function(t){return at.associateCredentials(e,t.id)}));return Promise.all(a)}return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement($S,{handleCancel:function(){l.push("/templates")},handleSubmit:function(e){return s.apply(this,arguments)},submitError:a,isOverrideDisabledLookup:!0}))))},dI=["labels","inventory","organization","webhook_credential","webhook_key"];var mI=function(){var e=Object(c.g)(),t=Object(n.useState)(null),a=Object(f.a)(t,2),i=a[0],l=a[1],s=function(){var t=Object(b.a)(p.a.mark((function t(a){var n,r,i,c,s,d,m,b,f;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.labels,i=a.inventory,c=a.organization,s=a.webhook_credential,a.webhook_key,(d=Object(o.a)(a,dI)).inventory=null===i||void 0===i?void 0:i.id,d.organization=null===c||void 0===c?void 0:c.id,d.webhook_credential=null===s||void 0===s?void 0:s.id,m=(null===c||void 0===c?void 0:c.id)||(null===i||void 0===i||null===(n=i.summary_fields)||void 0===n?void 0:n.organization.id),t.prev=5,t.next=8,kt.create(d);case 8:return b=t.sent,f=b.data.id,t.t0=Promise,t.next=13,u(f,r,m);case 13:return t.t1=t.sent,t.next=16,t.t0.all.call(t.t0,t.t1);case 16:e.push("/templates/workflow_job_template/".concat(f,"/visualizer")),t.next=22;break;case 19:t.prev=19,t.t2=t.catch(5),l(t.t2);case 22:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e){return t.apply(this,arguments)}}(),u=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,i,l,o=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>1&&void 0!==o[1]?o[1]:[],n=o.length>2?o[2]:void 0){e.next=14;break}return e.prev=3,e.next=6,ct.read();case 6:r=e.sent,i=r.data.results,n=i[0].id,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(3),e.t0;case 14:return l=a.map((function(e){return kt.associateLabel(t,e,n)})),e.abrupt("return",Object(A.a)(l));case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(Ix,{handleCancel:function(){e.push("/templates")},handleSubmit:s,submitError:i}))))};var pI=Object(u.withI18n)()(Object(c.k)((function(e){var t=e.i18n,a=Object(n.useRef)({"/templates":t._({id:"Templates"}),"/templates/job_template/add":t._({id:"Create New Job Template"}),"/templates/workflow_job_template/add":t._({id:"Create New Workflow Template"})}),i=Object(n.useState)(a.current),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(n.useState)(),m=Object(f.a)(u,2),p=m[0],b=m[1],v=Object(n.useState)(),_=Object(f.a)(v,2),h=_[0],E=_[1],y=Object(n.useCallback)((function(e,n){var r;if(e&&e.name!==(null===h||void 0===h?void 0:h.name)&&E(e),n&&n.name!==(null===p||void 0===p?void 0:p.name)&&b(n),h){var i="/templates/".concat(h.type,"/").concat(h.id),l="".concat(i,"/schedules"),o="".concat(i,"/survey");s(Object(d.a)(Object(d.a)({},a.current),{},(r={},Object(gr.a)(r,i,"".concat(h.name)),Object(gr.a)(r,"".concat(i,"/details"),t._({id:"Details"})),Object(gr.a)(r,"".concat(i,"/edit"),t._({id:"Edit Details"})),Object(gr.a)(r,"".concat(i,"/access"),t._({id:"Access"})),Object(gr.a)(r,"".concat(i,"/notifications"),t._({id:"Notifications"})),Object(gr.a)(r,"".concat(i,"/completed_jobs"),t._({id:"Completed Jobs"})),Object(gr.a)(r,o,t._({id:"Survey"})),Object(gr.a)(r,"".concat(o,"/add"),t._({id:"Add Question"})),Object(gr.a)(r,"".concat(o,"/edit"),t._({id:"Edit Question"})),Object(gr.a)(r,l,t._({id:"\u8ba1\u5212"})),Object(gr.a)(r,"".concat(l,"/add"),t._({id:"Create New Schedule"})),Object(gr.a)(r,"".concat(l,"/").concat(null===p||void 0===p?void 0:p.id),"".concat(null===p||void 0===p?void 0:p.name)),Object(gr.a)(r,"".concat(l,"/").concat(null===p||void 0===p?void 0:p.id,"/details"),t._({id:"Schedule Details"})),Object(gr.a)(r,"".concat(l,"/").concat(null===p||void 0===p?void 0:p.id,"/edit"),t._({id:"Edit Schedule"})),r)))}}),[t,h,p]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"job_template,workflow_job_template,workflow_job_template_node",breadcrumbConfig:o}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/templates/job_template/add"},r.a.createElement(uI,null)),r.a.createElement(c.b,{path:"/templates/workflow_job_template/add"},r.a.createElement(mI,null)),r.a.createElement(c.b,{path:"/templates/job_template/:id"},r.a.createElement(jx,{setBreadcrumb:y})),r.a.createElement(c.b,{path:"/templates/workflow_job_template/:id"},r.a.createElement(cI,{setBreadcrumb:y})),r.a.createElement(c.b,{path:"/templates"},r.a.createElement(La.a,null,r.a.createElement(FS,null)))))})));function bI(e){var t,a=e.user,i=e.isSelected,l=e.onSelect,o=e.detailUrl,c=e.i18n,u="check-action-".concat(a.id);t=a.is_superuser?c._({id:"System Administrator"}):a.is_system_auditor?c._({id:"System Auditor"}):c._({id:"Normal User"});var d=a.ldap_dn,m=a.auth.length>0;return r.a.createElement(ho.a,{key:a.id,"aria-labelledby":u,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-user-".concat(a.id),checked:i,onChange:l,"aria-labelledby":u}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"username","aria-label":c._({id:"username"})},r.a.createElement("span",{id:u},r.a.createElement(s.b,{to:"".concat(o),id:u},r.a.createElement("b",null,a.username))),d&&r.a.createElement(vI,null,r.a.createElement(Wf.a,{"aria-label":c._({id:"ldap user"})},c._({id:"LDAP"}))),m&&r.a.createElement(_I,null,r.a.createElement(Wf.a,{"aria-label":c._({id:"social login"})},c._({id:"SOCIAL"})))),r.a.createElement(ko,{key:"first-name","aria-label":c._({id:"user first name"})},a.first_name&&r.a.createElement(n.Fragment,null,r.a.createElement(hI,null,c._({id:"First Name"})),a.first_name)),r.a.createElement(ko,{key:"last-name","aria-label":c._({id:"user last name"})},a.last_name&&r.a.createElement(n.Fragment,null,r.a.createElement(EI,null,c._({id:"Last Name"})),a.last_name)),r.a.createElement(ko,{key:"user-type","aria-label":c._({id:"user type"})},t)]}),r.a.createElement(Fo.a,{"aria-label":"actions","aria-labelledby":u,id:u},a.summary_fields.user_capabilities.edit&&r.a.createElement(Ea.a,{content:c._({id:"\u7f16\u8f91\u7528\u6237"}),position:"top"},r.a.createElement(O.a,{"aria-label":c._({id:"\u7f16\u8f91\u7528\u6237"}),variant:"plain",component:s.b,to:"/users/".concat(a.id,"/edit")},r.a.createElement(Mo.a,null))))))}bI.prototype={user:Bn.isRequired,detailUrl:Nn.string.isRequired,isSelected:Nn.bool.isRequired,onSelect:Nn.func.isRequired};var fI=Object(u.withI18n)()(bI),vI=Object(j.b)("span").withConfig({displayName:"UserListItem___StyledSpan",componentId:"sc-92gjvf-0"})(["margin-left:12px"]),_I=Object(j.b)("span").withConfig({displayName:"UserListItem___StyledSpan2",componentId:"sc-92gjvf-1"})(["margin-left:12px"]),hI=Object(j.b)("b").withConfig({displayName:"UserListItem___StyledB",componentId:"sc-92gjvf-2"})(["margin-right:24px"]),EI=Object(j.b)("b").withConfig({displayName:"UserListItem___StyledB2",componentId:"sc-92gjvf-3"})(["margin-right:24px"]),yI=R("user",{page:1,page_size:20,order_by:"username"});var gI=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(yI,a.search),e.next=3,Promise.all([yt.read(r),yt.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{users:o.data.results,itemCount:o.data.count,actions:c.data.actions,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{users:[],itemCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),o=l.result,s=o.users,u=o.itemCount,d=o.actions,m=o.relatedSearchableKeys,v=o.searchableKeys,_=l.error,h=l.isLoading,E=l.request;Object(n.useEffect)((function(){E()}),[E]);var y=Uo(s),g=y.selected,O=y.isAllSelected,j=y.handleSelect,k=y.setSelected,w=en(Object(n.useCallback)((function(){return Promise.all(g.map((function(e){return yt.destroy(e.id)})))}),[g]),{qsConfig:yI,allItemsSelected:O,fetchItems:E}),C=w.isLoading,S=w.deleteItems,x=w.deletionError,T=w.clearDeletionError,I=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:k([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=C||h,D=d&&d.POST;return r.a.createElement(r.a.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:_,hasContentLoading:R,items:s,itemCount:u,pluralizedItemName:t._({id:"\u7528\u6237"}),qsConfig:yI,onRowClick:j,toolbarSearchColumns:[{name:t._({id:"Username"}),key:"username__icontains",isDefault:!0},{name:t._({id:"First Name"}),key:"first_name__icontains"},{name:t._({id:"Last Name"}),key:"last_name__icontains"}],toolbarSortColumns:[{name:t._({id:"Username"}),key:"username"},{name:t._({id:"First Name"}),key:"first_name"},{name:t._({id:"Last Name"}),key:"last_name"}],toolbarSearchableKeys:v,toolbarRelatedSearchableKeys:m,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:O,onSelectAll:function(e){return k(e?Object(A.a)(s):[])},qsConfig:yI,additionalControls:[].concat(Object(A.a)(D?[r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")})]:[]),[r.a.createElement(Ro,{key:"delete",onDelete:I,itemsToDelete:g,pluralizedItemName:"Users"})])}))},renderItem:function(e){return r.a.createElement(fI,{key:e.id,user:e,detailUrl:"".concat(i.url,"/").concat(e.id,"/details"),isSelected:g.some((function(t){return t.id===e.id})),onSelect:function(){return j(e)}})},emptyStateControls:D?r.a.createElement(Po,{key:"add",linkTo:"".concat(i.url,"/add")}):null}))),x&&r.a.createElement(Zt,{isOpen:x,variant:"error",title:t._({id:"Error!"}),onClose:T},t._({id:"Failed to delete one or more users."}),r.a.createElement(ua,{error:x})))})),OI=["confirm_password"];function jI(e){var t,a=e.user,i=e.i18n,l=Object(n.useState)(null),o=Object(f.a)(l,2),c=o[0],s=o[1],u=Object(Va.c)().setFieldValue,d=a.ldap_dn,m=(null===(t=a.auth)||void 0===t?void 0:t.length)>0,p=a.external_account,b=[{value:"normal",key:"normal",label:i._({id:"Normal User"}),isDisabled:!1},{value:"auditor",key:"auditor",label:i._({id:"System Auditor"}),isDisabled:!1},{value:"administrator",key:"administrator",label:i._({id:"System Administrator"}),isDisabled:!1}],v=Object(Va.b)({name:"organization",validate:a.id?function(){}:Yo(i._({id:"Select a value for this field"}),i)}),_=Object(f.a)(v,3),h=_[1],E=_[2],y=Object(Va.b)("user_type"),g=Object(f.a)(y,2),O=g[0],j=g[1],k=Object(n.useCallback)((function(e){u("organization",e.id),s(e)}),[u]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tl,{id:"user-username",label:i._({id:"Username"}),name:"username",type:"text",validate:d||p?function(){}:Yo(null,i),isRequired:!d&&!p}),r.a.createElement(Tl,{id:"user-email",label:i._({id:"Email"}),name:"email",validate:Qo(i),isRequired:!0}),!d&&!(m&&p)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ml,{id:"user-password",label:i._({id:"Password"}),name:"password",validate:a.id?function(){}:Yo(i._({id:"This field must not be blank"}),i),isRequired:!a.id}),r.a.createElement(Ml,{id:"user-confirm-password",label:i._({id:"Confirm Password"}),name:"confirm_password",validate:a.id?function(){}:Yo(i._({id:"This field must not be blank"}),i),isRequired:!a.id})),r.a.createElement(Tl,{id:"user-first-name",label:i._({id:"First Name"}),name:"first_name",type:"text"}),r.a.createElement(Tl,{id:"user-last-name",label:i._({id:"Last Name"}),name:"last_name",type:"text"}),!a.id&&r.a.createElement(Pc,{helperTextInvalid:h.error,isValid:!h.touched||!h.error,onBlur:function(){return E.setTouched()},onChange:k,value:c,required:!0,autoPopulate:!(null===a||void 0===a?void 0:a.id)}),r.a.createElement(Wi.a,{fieldId:"user-type",helperTextInvalid:j.error,isRequired:!0,validated:j.touched&&j.error?"error":"default",label:i._({id:"User Type"})},r.a.createElement(Fc,Object.assign({isValid:!j.touched||!j.error,id:"user-type",data:b},O))))}function kI(e){var t,a=e.user,n=e.handleCancel,i=e.handleSubmit,l=e.submitError,c=e.i18n;return t=a.is_superuser?"administrator":a.is_system_auditor?"auditor":"normal",r.a.createElement(Va.a,{initialValues:{first_name:a.first_name||"",last_name:a.last_name||"",organization:a.organization||"",email:a.email||"",username:a.username||"",password:"",confirm_password:"",user_type:t},onSubmit:function(e,t){var a=t.setErrors;if(e.password!==e.confirm_password)a({confirm_password:c._({id:"This value does not match the password you entered previously. Please confirm that password."})});else{e.is_superuser="administrator"===e.user_type,e.is_system_auditor="auditor"===e.user_type,e.password&&""!==e.password||delete e.password;e.confirm_password;var n=Object(o.a)(e,OI);i(n)}}},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(jI,{user:a,i18n:c}),r.a.createElement(Yl,{error:l}),r.a.createElement(cc,{onCancel:n,onSubmit:e.handleSubmit})))}))}kI.defaultProps={user:{}};var wI=Object(u.withI18n)()(kI),CI=["organization"];var SI=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],i=t[1],l=Object(c.g)(),s=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(null),a=t.organization,n=Object(o.a)(t,CI),e.prev=2,e.next=5,ct.createUser(a,n);case 5:r=e.sent,c=r.data.id,l.push("/users/".concat(c,"/details")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),i(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(Bc,null,r.a.createElement(wI,{handleCancel:function(){l.push("/users")},handleSubmit:s,submitError:a}))))};var xI=Object(u.withI18n)()((function(e){var t,a,i=e.user,l=e.i18n,o=i.id,u=i.username,d=i.email,m=i.first_name,f=i.last_name,v=i.last_login,_=i.created,h=i.is_superuser,E=i.is_system_auditor,y=i.summary_fields,g=Object(c.g)(),j=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt.destroy(o);case 2:g.push("/users");case 3:case"end":return e.stop()}}),e)}))),[o,g])),k=j.request,w=j.isLoading,C=Qa(j.error),S=C.error,x=C.dismissError;return t=h?l._({id:"System Administrator"}):E?l._({id:"System Auditor"}):l._({id:"Normal User"}),i.ldap_dn?a=l._({id:"LDAP"}):i.auth.length>0&&(a=l._({id:"SOCIAL"})),r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:l._({id:"Username"}),value:u,dataCy:"user-detail-username"}),r.a.createElement(xi,{label:l._({id:"Email"}),value:d}),r.a.createElement(xi,{label:l._({id:"First Name"}),value:"".concat(m)}),r.a.createElement(xi,{label:l._({id:"Last Name"}),value:"".concat(f)}),r.a.createElement(xi,{label:l._({id:"User Type"}),value:"".concat(t)}),a&&r.a.createElement(xi,{label:l._({id:"\u7c7b\u578b"}),value:r.a.createElement(Wf.a,{"aria-label":l._({id:"login type"})},a)}),v&&r.a.createElement(xi,{label:l._({id:"Last Login"}),value:ni(v)}),r.a.createElement(xi,{label:l._({id:"\u5df2\u521b\u5efa"}),value:ni(_)})),r.a.createElement(Yc,null,y.user_capabilities&&y.user_capabilities.edit&&r.a.createElement(O.a,{"aria-label":l._({id:"edit"}),component:s.b,to:"/users/".concat(o,"/edit")},l._({id:"Edit"})),y.user_capabilities&&y.user_capabilities.delete&&r.a.createElement(Qc,{name:u,modalTitle:l._({id:"Delete User"}),onConfirm:k,isDisabled:w},l._({id:"\u5220\u9664"}))),S&&r.a.createElement(Zt,{isOpen:S,variant:"error",title:l._({id:"Error!"}),onClose:x},l._({id:"Failed to delete user."}),r.a.createElement(ua,{error:S})))}));var TI=Object(u.withI18n)()((function(e){var t=e.user,a=Object(n.useState)(null),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(c.g)(),u=function(){var e=Object(b.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),e.prev=1,e.next=4,yt.update(t.id,a);case 4:s.push("/users/".concat(t.id,"/details")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Bc,null,r.a.createElement(wI,{user:t,handleCancel:function(){s.push("/users/".concat(t.id,"/details"))},handleSubmit:u,submitError:l}))}));function II(e){var t=e.organization,a="organization-".concat(t.id);return r.a.createElement(ho.a,{"aria-labelledby":a},r.a.createElement(Eo.a,null,r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:t.id},r.a.createElement(s.b,{to:"/organizations/".concat(t.id,"/details"),id:a},r.a.createElement("b",null,t.name))),r.a.createElement(ko,{key:t.description},t.description)]})))}var AI=R("organizations",{page:1,page_size:20,order_by:"name",type:"organization"});var RI=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.i)().id,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(AI,a.search),e.next=3,yt.readOrganizations(i,t);case 3:return n=e.sent,r=n.data,l=r.results,o=r.count,e.abrupt("return",{organizations:l,count:o});case 8:case"end":return e.stop()}}),e)}))),[i,a.search]),{organizations:[],count:0}),o=l.result,s=o.organizations,u=o.count,d=l.error,m=l.isLoading,f=l.request;return Object(n.useEffect)((function(){f()}),[f]),r.a.createElement(To,{items:s,contentError:d,hasContentLoading:m,itemCount:u,pluralizedItemName:t._({id:"Organizations"}),qsConfig:AI,renderItem:function(e){return r.a.createElement(II,{key:e.id,value:e.name,organization:e,detailUrl:"/organizations/".concat(e.id,"/details"),onSelect:function(){},isSelected:!1})}})}));var NI=function(){return r.a.createElement(RI,null)};function DI(e){var t=e.team,a=e.isSelected,n=e.onSelect,i=e.i18n;return r.a.createElement(ho.a,{key:t.id,id:"".concat(t.id),"aria-labelledby":"team-".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{"aria-labelledby":"team-".concat(t.id),checked:a,id:"team-".concat(t.id),onChange:n}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name"},r.a.createElement(s.b,{to:"/teams/".concat(t.id,"/details"),id:"team-".concat(t.id)},t.name)),r.a.createElement(ko,{key:"organization"},t.summary_fields.organization&&r.a.createElement($i.a,{hasGutter:!0},r.a.createElement(Qi.a,null,r.a.createElement("b",null,i._({id:"\u7ec4\u7ec7"}))," "),r.a.createElement(Qi.a,null,r.a.createElement(s.b,{to:"/organizations/".concat(t.summary_fields.organization.id,"/details")},r.a.createElement("b",null,t.summary_fields.organization.name))))),r.a.createElement(ko,{key:"description"},t.description)]})))}DI.prototype={team:Hn.isRequired,isSelected:Nn.bool.isRequired,onSelect:Nn.func.isRequired};var LI=Object(u.withI18n)()(DI),PI=R("teams",{page:1,page_size:20,order_by:"name"});var UI=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)(!1),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(c.h)(),u=Object(c.i)().id,d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,l,o,c,d,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(PI,s.search),e.next=3,Promise.all([yt.readTeams(u,n),yt.readTeamsOptions(u),yt.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,3),l=i[0].data,o=l.results,c=l.count,d=i[1],m=i[2],e.abrupt("return",{teams:o,count:c,userOptions:m.data.actions,actions:d.data.actions,relatedSearchableKeys:((null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=d.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=d.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 11:case"end":return e.stop()}}),e)}))),[u,s.search]),{teams:[],count:0,roles:{},userOptions:{},relatedSearchableKeys:[],searchableKeys:[]}),m=d.result,v=m.teams,_=m.count,h=m.userOptions,E=m.relatedSearchableKeys,y=m.searchableKeys,g=d.error,O=d.isLoading,j=d.request;Object(n.useEffect)((function(){j()}),[j]);var k=Uo(v),w=k.selected,C=k.isAllSelected,S=k.handleSelect,x=k.setSelected,T=en(Object(n.useCallback)((function(){return Promise.all(w.flatMap((function(e){return function(e){return[yt.disassociateRole(u,e.summary_fields.object_roles.admin_role.id),yt.disassociateRole(u,e.summary_fields.object_roles.member_role.id),yt.disassociateRole(u,e.summary_fields.object_roles.read_role.id)]}(e)})))}),[w]),{qsConfig:PI,allItemsSelected:C,fetchItems:j}),I=T.isLoading,R=T.deleteItems,D=T.deletionError,L=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return yt.associateRole(u,e.summary_fields.object_roles.member_role.id)})));case 2:j();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,j])),P=L.request,U=L.error,G=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:x([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=Qa(U||D),z=q.error,M=q.dismissError,K=h&&Object.prototype.hasOwnProperty.call(h,"POST"),V=Object(n.useCallback)((function(e){return vt.read(F(e,{not__member_role__members__id:u,not__admin_role__members__id:u}))}),[u]),H=Object(n.useCallback)((function(){return yt.readTeamsOptions(u)}),[u]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{items:v,contentError:g,hasContentLoading:O||I,itemCount:_,pluralizedItemName:t._({id:"\u56e2\u961f"}),qsConfig:PI,onRowClick:S,renderItem:function(e){return r.a.createElement(LI,{key:e.id,value:e.name,team:e,detailUrl:"/teams/".concat(e.id,"/details"),onSelect:function(){return S(e)},isSelected:w.some((function(t){return t.id===e.id}))})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:C,onSelectAll:function(e){return x(e?Object(A.a)(v):[])},qsConfig:PI,additionalControls:[].concat(Object(A.a)(K?[r.a.createElement(Po,{key:"associate",onClick:function(){return o(!0)},defaultLabel:t._({id:"Associate"})})]:[]),[r.a.createElement(Nf,{key:"disassociate",onDisassociate:G,itemsToDisassociate:w,modalTitle:t._({id:"Disassociate related team(s)?"}),modalNote:t._({id:"This action will disassociate all roles for this user from the selected teams."})})]),emptyStateControls:K?r.a.createElement(Po,{key:"add",onClick:function(){return o(!0)}}):null}))},toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u7ec4\u7ec7"}),key:"organization__name__icontains"}],toolbarSearchableKeys:y,toolbarRelatedSearchableKeys:E}),l&&r.a.createElement(If,{header:t._({id:"\u56e2\u961f"}),fetchRequest:V,isModalOpen:l,onAssociate:P,onClose:function(){return o(!1)},title:t._({id:"Select Teams"}),optionsRequest:H}),z&&r.a.createElement(Zt,{isOpen:z,onClose:M,title:t._({id:"Error!"}),variant:"error"},U?t._({id:"Failed to associate."}):t._({id:"Failed to disassociate one or more teams."}),r.a.createElement(ua,{error:z})))}));function GI(){return r.a.createElement(UI,null)}function qI(e){var t=e.i18n,a=Object(Va.b)("application"),n=Object(f.a)(a,3),i=n[0],l=n[1],o=n[2],c=Object(Va.b)({name:"scope",validate:Yo(t._({id:"Please enter a value."}),t)}),s=Object(f.a)(c,3),u=s[0],d=s[1],m=s[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wi.a,{fieldId:"application-lookup",name:"application",validated:l.touched&&l.error?"error":"default",helperTextInvalid:l.error},r.a.createElement(sf,{value:i.value,onChange:function(e){o.setValue(e)},label:r.a.createElement("span",null,t._({id:"Application"}),r.a.createElement(gi,{content:t._({id:"Select the application that this token will belong to."})})),touched:l.touched})),r.a.createElement(Tl,{id:"token-description",name:"description",type:"text",label:t._({id:"\u63cf\u8ff0"})}),r.a.createElement(Wi.a,{name:"scope",fieldId:"token-scope",helperTextInvalid:d.error,isRequired:!0,validated:d.touched&&d.error?"error":"default",label:t._({id:"Scope"}),labelIcon:r.a.createElement(gi,{content:t._({id:"Specify a scope for the token's access"})})},r.a.createElement(Fc,Object.assign({},u,{id:"token-scope",data:[{key:"default",label:"",value:""},{key:"read",value:"read",label:t._({id:"Read"})},{key:"write",value:"write",label:t._({id:"Write"})}],onChange:function(e,t){m.setValue(t)}}))))}var FI=Object(u.withI18n)()((function(e){var t=e.handleCancel,a=e.handleSubmit,n=e.submitError,i=e.i18n,l=e.token,o=void 0===l?{}:l;return r.a.createElement(Va.a,{initialValues:{description:o.description||"",application:o.application||null,scope:o.scope||""},onSubmit:a},(function(e){return r.a.createElement(Jo.a,{autoComplete:"off",onSubmit:e.handleSubmit},r.a.createElement(Vl,null,r.a.createElement(qI,{i18n:i}),n&&r.a.createElement(Yl,{error:n}),r.a.createElement(cc,{onCancel:t,onSubmit:function(){e.handleSubmit()}})))}))}));var zI,MI,KI=function(e){var t=e.onSuccessfulAdd,a=Object(c.g)(),i=Object(c.i)().id,l=$a(Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(n){var r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.application){e.next=6;break}return e.next=3,yt.createToken(i,Object(d.a)(Object(d.a)({},n),{},{application:(null===(l=n.application)||void 0===l?void 0:l.id)||null}));case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,_t.create(n);case 8:r=e.sent;case 9:t(r.data),a.push("/users/".concat(i,"/tokens/").concat(r.data.id,"/details"));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,i,t])),o=l.error,s=l.request;return r.a.createElement(Bc,null,r.a.createElement(FI,{handleCancel:function(){a.push("/users/".concat(i,"/tokens"))},handleSubmit:s,submitError:o}))},VI=j.b.b(zI||(zI=Object(v.a)(["\n  margin-right: 20px;\n"]))),HI=j.b.b(MI||(MI=Object(v.a)(["\n  margin-right: 5px;\n"])));var BI=Object(u.withI18n)()((function(e){var t,a,n=e.i18n,i=e.token,l=e.isSelected,o=e.onSelect,u=Object(c.i)().id,d="check-action-".concat(i.id);return r.a.createElement(ho.a,{key:i.id,"aria-labelledby":d,id:"".concat(i.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-token-".concat(i.id),checked:l,onChange:o,"aria-labelledby":d}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{"aria-label":n._({id:"Token type"}),key:"type"},r.a.createElement(s.b,{to:"/users/".concat(u,"/tokens/").concat(i.id,"/details")},(null===(t=i.summary_fields)||void 0===t?void 0:t.application)?n._({id:"Application access token"}):n._({id:"Personal access token"}))),r.a.createElement(ko,{"aria-label":n._({id:"Application name"}),key:"applicationName"},(null===(a=i.summary_fields)||void 0===a?void 0:a.application)&&r.a.createElement("span",null,r.a.createElement(HI,null,n._({id:"Application"})),r.a.createElement(s.b,{to:"/applications/".concat(i.summary_fields.application.id,"/details")},i.summary_fields.application.name))),r.a.createElement(ko,{"aria-label":n._({id:"Scope"}),key:"scope"},r.a.createElement(VI,null,n._({id:"Scope"})),as(i.scope)),r.a.createElement(ko,{"aria-label":n._({id:"Expiration"}),key:"expiration"},r.a.createElement(VI,null,n._({id:"Expires"})),ni(i.expires))]})))})),WI=R("user",{page:1,page_size:20,order_by:"application__name"});var JI=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.i)().id,l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,l,o,c,s,u,d,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(WI,a.search),e.next=3,Promise.all([yt.readTokens(i,r),yt.readTokenOptions(i)]);case 3:return l=e.sent,o=Object(f.a)(l,2),c=o[0].data,s=c.results,u=c.count,d=o[1],m=s.map((function(e){var t;return e.summary_fields={user:e.summary_fields.user,application:e.summary_fields.application,user_capabilities:{delete:!0}},e.name=null===(t=e.summary_fields.application)||void 0===t?void 0:t.name,e})),e.abrupt("return",{tokens:m,itemCount:u,relatedSearchableKeys:((null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=d.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=d.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 11:case"end":return e.stop()}}),e)}))),[i,a.search]),{tokens:[],itemCount:0,relatedSearchableKeys:[],searchableKeys:[]}),o=l.error,s=l.isLoading,u=l.request,d=l.result,m=d.tokens,v=d.itemCount,_=d.relatedSearchableKeys,h=d.searchableKeys;Object(n.useEffect)((function(){u()}),[u]);var E=Uo(m),y=E.selected,g=E.isAllSelected,O=E.handleSelect,j=E.setSelected,k=en(Object(n.useCallback)((function(){return Promise.all(y.map((function(e){var t=e.id;return _t.destroy(t)})))}),[y]),{qsConfig:WI,allItemsSelected:g,fetchItems:u}),w=k.isLoading,C=k.deleteItems,S=k.deletionError,x=k.clearDeletionError,T=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:j([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:o,hasContentLoading:s||w,items:m,itemCount:v,pluralizedItemName:t._({id:"Tokens"}),qsConfig:WI,onRowClick:O,toolbarSearchColumns:[{name:t._({id:"Application name"}),key:"application__name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"}],toolbarSortColumns:[{name:t._({id:"Application name"}),key:"application__name"},{name:t._({id:"Scope"}),key:"scope"},{name:t._({id:"Expires"}),key:"expires"},{name:t._({id:"\u5df2\u521b\u5efa"}),key:"created"},{name:t._({id:"\u66f4\u6539"}),key:"modified"}],toolbarSearchableKeys:h,toolbarRelatedSearchableKeys:_,renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:g,qsConfig:WI,onSelectAll:function(e){return j(e?Object(A.a)(m):[])},additionalControls:[].concat(Object(A.a)([r.a.createElement(Po,{key:"add",linkTo:"".concat(a.pathname,"/add")})]),[r.a.createElement(Ro,{key:"delete",onDelete:T,itemsToDelete:y,pluralizedItemName:t._({id:"User tokens"})})])}))},renderItem:function(e){return r.a.createElement(BI,{key:e.id,token:e,onSelect:function(){O(e)},isSelected:y.some((function(t){return t.id===e.id}))})},emptyStateControls:r.a.createElement(Po,{key:"add",linkTo:"".concat(a.pathname,"/add")})}),S&&r.a.createElement(Zt,{isOpen:S,variant:"danger",title:t._({id:"Error!"}),onClose:x},t._({id:"Failed to delete one or more user tokens."}),r.a.createElement(ua,{error:S})))}));var YI=Object(u.withI18n)()((function(e){var t,a,i=e.token,l=e.i18n,o=i.scope,s=i.description,u=i.created,d=i.modified,m=i.expires,f=i.summary_fields,v=Object(c.g)(),_=Object(c.i)(),h=_.id,E=_.tokenId,y=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t.destroy(E);case 2:v.push("/users/".concat(h,"/tokens"));case 3:case"end":return e.stop()}}),e)}))),[E,h,v])),g=y.request,O=y.isLoading,j=Qa(y.error),k=j.error,w=j.dismissError;return r.a.createElement(Bc,null,r.a.createElement(pi,null,r.a.createElement(xi,{label:l._({id:"Application"}),value:null===f||void 0===f||null===(t=f.application)||void 0===t?void 0:t.name,dataCy:"application-token-detail-name"}),r.a.createElement(xi,{label:l._({id:"\u63cf\u8ff0"}),value:s,dataCy:"application-token-detail-description"}),r.a.createElement(xi,{label:l._({id:"Scope"}),value:as(o),dataCy:"application-token-detail-scope"}),r.a.createElement(xi,{label:l._({id:"Expires"}),value:ni(m),dataCy:"application-token-detail-expires"}),r.a.createElement(Li,{label:l._({id:"\u5df2\u521b\u5efa"}),date:u,user:f.user,dataCy:"application-token-detail-created"}),r.a.createElement(Li,{label:l._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),date:d,user:f.user,dataCy:"application-token-detail-last-modified"})),r.a.createElement(Yc,null,r.a.createElement(Qc,{name:null===f||void 0===f||null===(a=f.application)||void 0===a?void 0:a.name,modalTitle:l._({id:"Delete User Token"}),onConfirm:g,isDisabled:O},l._({id:"\u5220\u9664"}))),k&&r.a.createElement(Zt,{isOpen:k,variant:"error",title:l._({id:"Error!"}),onClose:w},l._({id:"Failed to user token."}),r.a.createElement(ua,{error:k})))}));var XI,ZI=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=e.user,l=Object(c.h)(),o=Object(c.i)(),u=o.id,d=o.tokenId,m=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t.readDetail(d);case 2:return t=e.sent,a(i,t.data),e.abrupt("return",{token:t.data});case 5:case"end":return e.stop()}}),e)}))),[a,i,d]),{token:null}),f=m.isLoading,v=m.error,_=m.request,h=m.result.token;Object(n.useEffect)((function(){_()}),[_]);var E=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Tokens"})),link:"/users/".concat(u,"/tokens"),id:99},{name:t._({id:"Details"}),link:"/users/".concat(u,"/tokens/").concat(d,"/details"),id:0}],y=!0;return l.pathname.endsWith("edit")&&(y=!1),!f&&v?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:v},404===v.response.status&&r.a.createElement("span",null,t._({id:"Token not found."})," ",r.a.createElement(s.b,{to:"/users/:id/tokens"},t._({id:"View all tokens."})))))):r.a.createElement(r.a.Fragment,null,y&&r.a.createElement(us,{tabsArray:E}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/users/:id/tokens/:tokenId",to:"/users/:id/tokens/:tokenId/details",exact:!0}),h&&r.a.createElement(c.b,{path:"/users/:id/tokens/:tokenId/details"},r.a.createElement(YI,{token:h})),r.a.createElement(c.b,{key:"not-found",path:"*"},!f&&r.a.createElement(za,{isNotFound:!0},u&&r.a.createElement(s.b,{to:"/users/".concat(u,"/tokens")},t._({id:"View Tokens"}))))))})),$I=Object(j.b)(Kl.a)(XI||(XI=Object(v.a)(["\n  margin-bottom: 20px;\n"])));var QI=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=e.user,l=Object(n.useState)(null),o=Object(f.a)(l,2),s=o[0],u=o[1],d=Object(c.i)().id,m=Object(n.useCallback)((function(e){return u(e)}),[u]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{key:"add",path:"/users/:id/tokens/add"},r.a.createElement(KI,{id:Number(d),onSuccessfulAdd:m})),r.a.createElement(c.b,{key:"token",path:"/users/:id/tokens/:tokenId"},r.a.createElement(ZI,{user:i,setBreadcrumb:a,id:Number(d)})),r.a.createElement(c.b,{key:"list",path:"/users/:id/tokens"},r.a.createElement(JI,{id:Number(d)}))),s&&r.a.createElement(Ft.a,{"aria-label":t._({id:"Token information"}),isOpen:!0,variant:"medium",title:t._({id:"Token information"}),onClose:function(){return u(null)}},r.a.createElement($I,{variant:"info",isInline:!0,title:t._({id:"This is the only time the token value and associated refresh token value will be shown."})}),r.a.createElement(pi,{stacked:!0},s.token&&r.a.createElement(xi,{label:t._({id:"Token"}),value:r.a.createElement(vo.a,{isReadOnly:!0,variant:vo.b.expansion},s.token)}),s.refresh_token&&r.a.createElement(xi,{label:t._({id:"Refresh Token"}),value:r.a.createElement(vo.a,{isReadOnly:!0,variant:vo.b.expansion},s.refresh_token)}),r.a.createElement(xi,{label:t._({id:"Expires"}),value:ni(s.expires)}))))}));var eA=Object(u.withI18n)()((function(e){var t=e.role,a=e.i18n,n=e.detailUrl,i=e.onSelect,l="userRole-".concat(t.id);return r.a.createElement(ho.a,{key:t.id,"aria-labelledby":l,id:"".concat(t.id)},r.a.createElement(Eo.a,null,r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"name","aria-label":a._({id:"Resource name"})},t.summary_fields.resource_name?r.a.createElement(s.b,{to:"".concat(n),id:l},r.a.createElement("b",null,t.summary_fields.resource_name)):r.a.createElement("b",null,a._({id:"System"}))),r.a.createElement(ko,{key:"type","aria-label":a._({id:"Resource type"})},t.summary_fields&&r.a.createElement(pi,{stacked:!0},r.a.createElement(xi,{label:a._({id:"\u7c7b\u578b"}),value:t.summary_fields.resource_type_display_name}))),r.a.createElement(ko,{key:"role","aria-label":a._({id:"Resource role"})},t.name&&r.a.createElement(pi,{stacked:!0},r.a.createElement(xi,{label:a._({id:"Role"}),value:r.a.createElement(uc.a,{key:t.name,"aria-label":t.name,onClick:function(){return i(t)},isReadOnly:!t.summary_fields.user_capabilities.unattach},t.name)})))]})))})),tA=R("roles",{page:1,page_size:20,order_by:"id"});var aA=Object(u.withI18n)()((function(e){var t,a,i=e.i18n,l=e.user,o=Object(c.h)().search,s=Object(n.useState)(null),u=Object(f.a)(s,2),d=u[0],m=u[1],v=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a,n,r,i,c,s,u,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(tA,o),e.next=3,Promise.all([yt.readRoles(l.id,n),yt.readOptions()]);case 3:return r=e.sent,i=Object(f.a)(r,2),c=i[0].data,s=c.results,u=c.count,d=i[1],e.abrupt("return",{roleCount:u,roles:s,actions:d.data.actions,relatedSearchableKeys:((null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(a=d.data.actions)||void 0===a?void 0:a.GET)||{}).filter((function(e){var t;return null===(t=d.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 10:case"end":return e.stop()}}),e)}))),[l.id,o]),{roles:[],roleCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[]}),_=v.isLoading,h=v.request,E=v.error,y=v.result,g=y.roleCount,j=y.roles,k=y.actions,w=y.relatedSearchableKeys,C=y.searchableKeys;Object(n.useEffect)((function(){h()}),[h]);var S=en(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null),e.next=3,dt.disassociateUserRole(d.id,parseInt(l.id,10));case 3:case"end":return e.stop()}}),e)}))),[d,l.id]),{qsConfig:tA,fetchItems:h}),x=S.isLoading,T=S.deleteItems,I=S.deletionError,R=S.clearDeletionError,D=(null===l||void 0===l||null===(t=l.summary_fields)||void 0===t||null===(a=t.user_capabilities)||void 0===a?void 0:a.edit)||k&&Object.prototype.hasOwnProperty.call(k,"POST"),L=function(e){var t=e.summary_fields,a=t.resource_id,n=t.resource_type;return e&&n?(null===n||void 0===n?void 0:n.includes("template"))?"/templates/".concat(n,"/").concat(a,"/details"):(null===n||void 0===n?void 0:n.includes("inventory"))?"/inventories/".concat(n,"/").concat(a,"/details"):"/".concat(n,"s/").concat(a,"/details"):null};return j.some((function(e){return"System Administrator"===e.name}))?r.a.createElement(Pa.a,{variant:"full"},r.a.createElement(Ua.a,{icon:Tr.a}),r.a.createElement(qt.a,{headingLevel:"h5",size:"lg"},i._({id:"System Administrator"})),r.a.createElement(Ga.a,null,i._({id:"System administrators have unrestricted access to all resources."}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(To,{contentError:E,hasContentLoading:_||x,items:j,itemCount:g,pluralizedItemName:i._({id:"User Roles"}),qsConfig:tA,toolbarSearchColumns:[{name:i._({id:"Role"}),key:"role_field__icontains",isDefault:!0}],toolbarSortColumns:[{name:i._({id:"ID"}),key:"id"}],toolbarSearchableKeys:C,toolbarRelatedSearchableKeys:w,renderItem:function(e){return r.a.createElement(eA,{key:e.id,value:e.name,role:e,detailUrl:L(e),isSelected:!1,onSelect:function(e){m(e)}})},renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{qsConfig:tA,additionalControls:Object(A.a)(D?[r.a.createElement(xS,{apiModel:yt,onFetchData:h,title:i._({id:"Add user permissions"})})]:[])}))}}),d&&r.a.createElement(Zt,{"aria-label":i._({id:"Disassociate role"}),isOpen:d,variant:"error",title:i._({id:"Disassociate role!"}),onClose:function(){return m(null)},actions:[r.a.createElement(O.a,{key:"disassociate",variant:"danger","aria-label":i._({id:"Confirm disassociate"}),onClick:function(){return T()}},i._({id:"Disassociate"})),r.a.createElement(O.a,{key:"cancel",variant:"secondary","aria-label":i._({id:"\u53d6\u6d88"}),onClick:function(){return m(null)}},i._({id:"\u53d6\u6d88"}))]},r.a.createElement("div",null,i._({id:"This action will disassociate the following role from {0}:",values:{0:d.summary_fields.resource_name}}),r.a.createElement("br",null),r.a.createElement("strong",null,d.name))),I&&r.a.createElement(Zt,{isOpen:I,variant:"error",title:i._({id:"Error!"}),onClose:R},i._({id:"Failed to delete role."}),r.a.createElement(ua,{error:I})))}));var nA=Object(u.withI18n)()((function(e){var t=e.i18n,a=e.setBreadcrumb,i=e.me,l=Object(c.h)(),o=Object(c.j)("/users/:id"),u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt.readDetail(o.params.id);case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[o.params.id]),null),d=u.result,m=u.error,f=u.isLoading,v=u.request;Object(n.useEffect)((function(){v()}),[v,l.pathname]),Object(n.useEffect)((function(){d&&a(d)}),[d,a]);var _=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),t._({id:"Back to Users"})),link:"/users",id:99},{name:t._({id:"Details"}),link:"".concat(o.url,"/details"),id:0},{name:t._({id:"Organizations"}),link:"".concat(o.url,"/organizations"),id:1},{name:t._({id:"\u56e2\u961f"}),link:"".concat(o.url,"/teams"),id:2},{name:t._({id:"Roles"}),link:"".concat(o.url,"/roles"),id:3}];(null===i||void 0===i?void 0:i.id)===Number(o.params.id)&&_.push({name:t._({id:"Tokens"}),link:"".concat(o.url,"/tokens"),id:4});var h=!0;return["edit","add","tokens"].some((function(e){return l.pathname.includes(e)}))&&(h=!1),!f&&m?r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:m},m.response&&404===m.response.status&&r.a.createElement("span",null,t._({id:"User not found."})," ",r.a.createElement(s.b,{to:"/users"},t._({id:"View all Users."})))))):r.a.createElement(La.a,null,r.a.createElement(na.a,null,h&&r.a.createElement(us,{tabsArray:_}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/users/:id",to:"/users/:id/details",exact:!0}),d&&[r.a.createElement(c.b,{path:"/users/:id/edit",key:"edit"},r.a.createElement(TI,{user:d})),r.a.createElement(c.b,{path:"/users/:id/details",key:"details"},r.a.createElement(xI,{user:d})),r.a.createElement(c.b,{path:"/users/:id/organizations",key:"organizations"},r.a.createElement(NI,{id:Number(o.params.id)})),r.a.createElement(c.b,{path:"/users/:id/teams",key:"teams"},r.a.createElement(GI,null)),r.a.createElement(c.b,{path:"/users/:id/roles",key:"roles"},r.a.createElement(aA,{user:d})),r.a.createElement(c.b,{path:"/users/:id/tokens",key:"tokens"},r.a.createElement(QI,{user:d,setBreadcrumb:a,id:Number(o.params.id)}))],r.a.createElement(c.b,{key:"not-found",path:"*"},!f&&r.a.createElement(za,{isNotFound:!0},o.params.id&&r.a.createElement(s.b,{to:"/users/".concat(o.params.id,"/details")},t._({id:"View User Details"})))))))}));var rA=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(n.useState)({"/users":t._({id:"\u7528\u6237"}),"/users/add":t._({id:"Create New User"})}),i=Object(f.a)(a,2),l=i[0],o=i[1],s=Object(c.j)(),u=Object(n.useCallback)((function(e,a){var n;e&&o((n={"/users":t._({id:"\u7528\u6237"}),"/users/add":t._({id:"Create New User"})},Object(gr.a)(n,"/users/".concat(e.id),"".concat(e.username)),Object(gr.a)(n,"/users/".concat(e.id,"/edit"),t._({id:"Edit Details"})),Object(gr.a)(n,"/users/".concat(e.id,"/details"),t._({id:"Details"})),Object(gr.a)(n,"/users/".concat(e.id,"/roles"),t._({id:"Roles"})),Object(gr.a)(n,"/users/".concat(e.id,"/teams"),t._({id:"\u56e2\u961f"})),Object(gr.a)(n,"/users/".concat(e.id,"/organizations"),t._({id:"Organizations"})),Object(gr.a)(n,"/users/".concat(e.id,"/tokens"),t._({id:"Tokens"})),Object(gr.a)(n,"/users/".concat(e.id,"/tokens/add"),t._({id:"Create user token"})),Object(gr.a)(n,"/users/".concat(e.id,"/tokens/").concat(a&&a.id),t._({id:"Application Name"})),Object(gr.a)(n,"/users/".concat(e.id,"/tokens/").concat(a&&a.id,"/details"),t._({id:"Details"})),n))}),[t]);return r.a.createElement(n.Fragment,null,r.a.createElement(hs,{streamType:"user",breadcrumbConfig:l}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"".concat(s.path,"/add")},r.a.createElement(SI,null)),r.a.createElement(c.b,{path:"".concat(s.path,"/:id")},r.a.createElement(xt,null,(function(e){var t=e.me;return r.a.createElement(nA,{setBreadcrumb:u,me:t||{}})}))),r.a.createElement(c.b,{path:"".concat(s.path)},r.a.createElement(gI,null))))})),iA=a(1089);function lA(e){var t=e.workflowApproval,a=e.i18n;return"pending"===t.status?t.approval_expiration?a._({id:"Expires on {0}",values:{0:ni(t.approval_expiration)}}):a._({id:"Never expires"}):t.timed_out?r.a.createElement(Wf.a,{color:"red"},a._({id:"Timed out"})):t.canceled_on?r.a.createElement(Wf.a,{color:"red"},a._({id:"Canceled"})):"failed"===t.status&&t.failed?r.a.createElement(Ea.a,{content:a._({id:"Denied by {0} - {1}",values:{0:t.summary_fields.approved_or_denied_by.username,1:ni(t.finished)}}),position:"top"},r.a.createElement(Wf.a,{variant:"outline",color:"red",icon:r.a.createElement(Kt.a,null)},a._({id:"Denied"}))):"successful"===t.status?r.a.createElement(Ea.a,{content:a._({id:"Approved by {0} - {1}",values:{0:t.summary_fields.approved_or_denied_by.username,1:ni(t.finished)}}),position:"top"},r.a.createElement(Wf.a,{variant:"outline",color:"green",icon:r.a.createElement(iA.a,null)},a._({id:"Approved"}))):null}lA.defaultProps={workflowApproval:Xn.isRequired};var oA,cA,sA=Object(u.withI18n)()(lA),uA=Object(j.b)(ko)(oA||(oA=Object(v.a)(["\n  @media screen and (min-width: 768px) {\n    display: flex;\n    justify-content: flex-end;\n  }\n"]))),dA=j.b.b(cA||(cA=Object(v.a)(["\n  margin-right: 24px;\n"])));var mA=Object(u.withI18n)()((function(e){var t,a=e.workflowApproval,n=e.isSelected,i=e.onSelect,l=e.detailUrl,o=e.i18n,c="check-action-".concat(a.id),u=null===a||void 0===a||null===(t=a.summary_fields)||void 0===t?void 0:t.source_workflow_job;return r.a.createElement(ho.a,{key:a.id,"aria-labelledby":c,id:"".concat(a.id)},r.a.createElement(Eo.a,null,r.a.createElement(zo.a,{id:"select-workflowApproval-".concat(a.id),checked:n,onChange:i,"aria-labelledby":c}),r.a.createElement(yo.a,{dataListCells:[r.a.createElement(ko,{key:"title"},r.a.createElement(s.b,{to:"".concat(l)},r.a.createElement("b",null,a.name))),r.a.createElement(ko,{key:"job"},r.a.createElement(r.a.Fragment,null,r.a.createElement(dA,null,o._({id:"Job"})),u&&(null===u||void 0===u?void 0:u.id)?r.a.createElement(s.b,{to:"/jobs/workflow/".concat(null===u||void 0===u?void 0:u.id)},"".concat(null===u||void 0===u?void 0:u.id," - ").concat(null===u||void 0===u?void 0:u.name)):o._({id:"Deleted"}))),r.a.createElement(uA,{key:"status"},r.a.createElement("div",null,"pending"===a.status&&a.approval_expiration?r.a.createElement(Wf.a,null,o._({id:"Expires on {0}",values:{0:ni(a.approval_expiration)}})):"pending"!==a.status||a.approval_expiration?r.a.createElement(sA,{workflowApproval:a}):r.a.createElement(Wf.a,null,o._({id:"Never expires"}))))]})))}));function pA(e){return!e.can_approve_or_deny}function bA(e){var t=e.onApprove,a=e.selectedItems,i=e.i18n,l=Object(n.useContext)(pr).isKebabified,o=0===a.length||a.some(pA);return r.a.createElement(r.a.Fragment,null,l?r.a.createElement(ka.a,{key:"approve",isDisabled:o,component:"button",onClick:t},i._({id:"Approve"})):r.a.createElement(Ea.a,{content:function(){if(0===a.length)return i._({id:"Select a row to approve"});var e=a.filter(pA).map((function(e){return e.name})).join(", ");return a.some(pA)?i._({id:"You are unable to act on the following workflow approvals: {itemsUnableToApprove}",values:{itemsUnableToApprove:e}}):i._({id:"Approve"})}(),position:"top"},r.a.createElement("div",null,r.a.createElement(O.a,{isDisabled:o,"aria-label":i._({id:"Approve"}),variant:"primary",onClick:t},i._({id:"Approve"})))))}bA.defaultProps={selectedItems:[]};var fA=Object(u.withI18n)()(bA);function vA(e){return!e.can_approve_or_deny}function _A(e){var t=e.onDeny,a=e.selectedItems,i=e.i18n,l=Object(n.useContext)(pr).isKebabified,o=0===a.length||a.some(vA);return r.a.createElement(r.a.Fragment,null,l?r.a.createElement(ka.a,{key:"deny",isDisabled:o,component:"button",onClick:t},i._({id:"Deny"})):r.a.createElement(Ea.a,{content:function(){if(0===a.length)return i._({id:"Select a row to deny"});var e=a.filter(vA).map((function(e){return e.name})).join(", ");return a.some(vA)?i._({id:"You are unable to act on the following workflow approvals: {itemsUnableToDeny}",values:{itemsUnableToDeny:e}}):i._({id:"Deny"})}(),position:"top"},r.a.createElement("div",null,r.a.createElement(O.a,{isDisabled:o,"aria-label":i._({id:"Deny"}),variant:"danger",onClick:t},i._({id:"Deny"})))))}_A.defaultProps={selectedItems:[]};var hA=Object(u.withI18n)()(_A),EA=R("workflow_approvals",{page:1,page_size:20,order_by:"-started"});var yA=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.h)(),i=Object(c.j)(),l=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var t,n,r,i,l,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(EA,a.search),e.next=3,Promise.all([gt.read(r),gt.readOptions()]);case 3:return i=e.sent,l=Object(f.a)(i,2),o=l[0],c=l[1],e.abrupt("return",{results:o.data.results,count:o.data.count,relatedSearchableKeys:((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.related_search_fields)||[]).map((function(e){return e.slice(0,-8)})),searchableKeys:Object.keys((null===(n=c.data.actions)||void 0===n?void 0:n.GET)||{}).filter((function(e){var t;return null===(t=c.data.actions)||void 0===t?void 0:t.GET[e].filterable}))});case 8:case"end":return e.stop()}}),e)}))),[a]),{results:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),o=l.result,s=o.results,u=o.count,m=o.relatedSearchableKeys,v=o.searchableKeys,_=l.error,h=l.isLoading,E=l.request;Object(n.useEffect)((function(){E()}),[E]),Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(d.a)({},N(EA,a.search))).id__in=t.join(","),e.next=4,gt.read(n);case 4:return r=e.sent,i=r.data,e.abrupt("return",i.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a.search]);var y=function(e,t){var a=Object(n.useState)(e),r=Object(f.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)(!1),c=Object(f.a)(o,2),s=c[0],u=c[1],d=Xp(s,1e3),m=Yp({jobs:["status_changed"],control:["limit_reached_1"]});return Object(n.useEffect)((function(){l(e)}),[e]),Object(n.useEffect)((function(){Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:u(!1),t();case 4:case"end":return e.stop()}}),e)})))()}),[d,t]),Object(n.useEffect)((function(){if("workflow_approval"===(null===m||void 0===m?void 0:m.type)){var e=i.findIndex((function(e){return e.id===m.unified_job_id}));(e>-1&&!["new","pending","waiting","running"].includes(m.status)||-1===e&&"pending"===m.status)&&u(!0)}}),[m]),i}(s,E),g=Uo(y),O=g.selected,j=g.isAllSelected,k=g.handleSelect,w=g.setSelected,C=en(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(O.map((function(e){var t=e.id;return gt.destroy(t)}))));case 1:case"end":return e.stop()}}),e)}))),[O]),{qsConfig:EA,allItemsSelected:j,fetchItems:E}),S=C.isLoading,x=C.deleteItems,T=C.deletionError,I=C.clearDeletionError,R=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:w([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(O.map((function(e){var t=e.id;return gt.approve(t)}))));case 1:case"end":return e.stop()}}),e)}))),[O]),{}),L=D.error,P=D.isLoading,U=D.request,G=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:w([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(O.map((function(e){var t=e.id;return gt.deny(t)}))));case 1:case"end":return e.stop()}}),e)}))),[O]),{}),F=q.error,z=q.isLoading,M=q.request,K=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:w([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=Qa(L||F),H=V.error,B=V.dismissError;return r.a.createElement(r.a.Fragment,null,r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(To,{contentError:_,hasContentLoading:h||S||P||z,items:y,itemCount:u,pluralizedItemName:t._({id:"\u5de5\u4f5c\u6d41\u5ba1\u6279"}),qsConfig:EA,onRowClick:k,toolbarSearchColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name__icontains",isDefault:!0},{name:t._({id:"\u63cf\u8ff0"}),key:"description__icontains"}],toolbarSearchableKeys:v,toolbarRelatedSearchableKeys:m,toolbarSortColumns:[{name:t._({id:"\u540d\u79f0"}),key:"name"},{name:t._({id:"\u5f00\u59cb\u65f6\u95f4"}),key:"started"}],renderToolbar:function(e){return r.a.createElement(hr,Object.assign({},e,{showSelectAll:!0,isAllSelected:j,onSelectAll:function(e){return w(e?Object(A.a)(y):[])},qsConfig:EA,additionalControls:[r.a.createElement(fA,{key:"approve",onApprove:G,selectedItems:O}),r.a.createElement(hA,{key:"deny",onDeny:K,selectedItems:O}),r.a.createElement(Ro,{key:"delete",onDelete:R,itemsToDelete:O,pluralizedItemName:t._({id:"\u5de5\u4f5c\u6d41\u5ba1\u6279"}),cannotDelete:function(e){return"pending"===e.status||!e.summary_fields.user_capabilities.delete},errorMessage:t._({id:"These approvals cannot be deleted due to insufficient permissions or a pending job status"})})]}))},renderItem:function(e){return r.a.createElement(mA,{key:e.id,workflowApproval:e,detailUrl:"".concat(i.url,"/").concat(e.id),isSelected:O.some((function(t){return t.id===e.id})),onSelect:function(){return k(e)},onSuccessfulAction:E})}}))),T&&r.a.createElement(Zt,{isOpen:T,variant:"error",title:t._({id:"Error!"}),onClose:I},t._({id:"Failed to delete one or more workflow approval."}),r.a.createElement(ua,{error:T})),H&&r.a.createElement(Zt,{isOpen:H,variant:"error",title:t._({id:"Error!"}),onClose:B},L?t._({id:"Failed to approve one or more workflow approval."}):t._({id:"Failed to deny one or more workflow approval."}),r.a.createElement(ua,{error:H})))}));function gA(e){var t,a,i=e.i18n,l=e.workflowApproval,o=Object(c.i)().id,u=Object(c.g)(),d=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt.destroy(o);case 2:u.push("/workflow_approvals");case 3:case"end":return e.stop()}}),e)}))),[o,u])),m=d.request,f=d.isLoading,v=Qa(d.error),_=v.error,h=v.dismissError,E=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt.approve(o);case 2:u.push("/workflow_approvals/".concat(o));case 3:case"end":return e.stop()}}),e)}))),[o,u]),{}),y=E.error,g=E.isLoading,j=E.request,k=Qa(y),w=k.error,C=k.dismissError,S=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt.deny(o);case 2:u.push("/workflow_approvals/".concat(o));case 3:case"end":return e.stop()}}),e)}))),[o,u]),{}),x=S.error,T=S.isLoading,I=S.request,A=Qa(x),R=A.error,N=A.dismissError,D=null===l||void 0===l||null===(t=l.summary_fields)||void 0===t?void 0:t.source_workflow_job,L=null===l||void 0===l||null===(a=l.summary_fields)||void 0===a?void 0:a.workflow_job_template,P=f||g||T;return r.a.createElement(Bc,null,r.a.createElement(pi,{gutter:"sm"},r.a.createElement(xi,{label:i._({id:"\u540d\u79f0"}),value:l.name,dataCy:"wa-detail-name"}),r.a.createElement(xi,{label:i._({id:"\u63cf\u8ff0"}),value:l.description,dataCy:"wa-detail-description"}),"pending"===l.status&&r.a.createElement(xi,{label:i._({id:"Expires"}),value:l.approval_expiration?ni(l.approval_expiration):i._({id:"Never"}),dataCy:"wa-detail-expires"}),"pending"!==l.status&&r.a.createElement(xi,{label:i._({id:"\u72b6\u6001"}),value:r.a.createElement(sA,{workflowApproval:l}),dataCy:"wa-detail-status"}),l.summary_fields.approved_or_denied_by&&r.a.createElement(xi,{label:i._({id:"Actor"}),value:r.a.createElement(s.b,{to:"/users/".concat(l.summary_fields.approved_or_denied_by.id)},l.summary_fields.approved_or_denied_by.username),dataCy:"wa-detail-actor"}),r.a.createElement(xi,{label:i._({id:"Explanation"}),value:l.job_explanation,dataCy:"wa-detail-explanation"}),r.a.createElement(xi,{label:i._({id:"Workflow Job"}),value:D&&(null===D||void 0===D?void 0:D.id)?r.a.createElement(s.b,{to:"/jobs/workflow/".concat(null===D||void 0===D?void 0:D.id)},"".concat(null===D||void 0===D?void 0:D.id," - ").concat(null===D||void 0===D?void 0:D.name)):i._({id:"Deleted"}),dataCy:"wa-detail-source-job"}),r.a.createElement(xi,{label:i._({id:"Workflow Job Template"}),value:L&&r.a.createElement(s.b,{to:"/templates/workflow_job_template/".concat(null===L||void 0===L?void 0:L.id)},null===L||void 0===L?void 0:L.name),dataCy:"wa-detail-source-workflow"}),r.a.createElement(Li,{label:i._({id:"\u5df2\u521b\u5efa"}),date:l.created,user:l.summary_fields.created_by,dataCy:"wa-detail-created-by"}),r.a.createElement(xi,{label:i._({id:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),value:ni(l.modified),dataCy:"wa-detail-last-modified"}),r.a.createElement(xi,{label:i._({id:"\u7ed3\u675f\u65f6\u95f4"}),value:ni(l.finished),dataCy:"wa-detail-finished"}),r.a.createElement(xi,{label:i._({id:"Canceled"}),value:ni(l.canceled_on),dataCy:"wa-detail-canceled"}),r.a.createElement(xi,{label:i._({id:"Elapsed"}),value:ii(l.elapsed),dataCy:"wa-detail-elapsed"})),r.a.createElement(Yc,null,l.can_approve_or_deny&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{"aria-label":i._({id:"Approve"}),variant:"primary",onClick:j,isDisabled:P},i._({id:"Approve"})),r.a.createElement(O.a,{"aria-label":i._({id:"Deny"}),variant:"danger",onClick:I,isDisabled:P},i._({id:"Deny"}))),"pending"!==l.status&&l.summary_fields.user_capabilities&&l.summary_fields.user_capabilities.delete&&r.a.createElement(Qc,{name:l.name,modalTitle:i._({id:"Delete Workflow Approval"}),onConfirm:m,isDisabled:P},i._({id:"\u5220\u9664"}))),_&&r.a.createElement(Zt,{isOpen:_,variant:"error",title:i._({id:"Error!"}),onClose:h},i._({id:"Failed to delete workflow approval."}),r.a.createElement(ua,{error:_})),w&&r.a.createElement(Zt,{isOpen:w,variant:"error",title:i._({id:"Error!"}),onClose:C},i._({id:"Failed to approve workflow approval."}),r.a.createElement(ua,{error:w})),R&&r.a.createElement(Zt,{isOpen:R,variant:"error",title:i._({id:"Error!"}),onClose:N},i._({id:"Failed to deny workflow approval."}),r.a.createElement(ua,{error:R})))}gA.defaultProps={workflowApproval:Xn.isRequired};var OA=Object(u.withI18n)()(gA);var jA=Object(u.withI18n)()((function(e){var t=e.setBreadcrumb,a=e.i18n,i=Object(c.i)().id,l=Object(c.j)(),o=Object(c.h)(),u=$a(Object(n.useCallback)(Object(b.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt.readDetail(i);case 2:return a=e.sent,t(a.data),e.abrupt("return",{workflowApproval:a.data});case 5:case"end":return e.stop()}}),e)}))),[i,t]),{workflowApproval:null}),d=u.result.workflowApproval,m=u.isLoading,f=u.error,v=u.request;if(Object(n.useEffect)((function(){v()}),[v,o.pathname]),!m&&f)return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(za,{error:f},404===f.response.status&&r.a.createElement("span",null,a._({id:"Workflow Approval not found."})," ",r.a.createElement(s.b,{to:"/workflow_approvals"},a._({id:"View all Workflow Approvals."}))))));var _=[{name:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,null),a._({id:"Back to Workflow Approvals"})),link:"/workflow_approvals",id:99},{name:a._({id:"Details"}),link:"".concat(l.url,"/details"),id:0}];return r.a.createElement(La.a,null,r.a.createElement(na.a,null,r.a.createElement(us,{tabsArray:_}),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/workflow_approvals/:id",to:"/workflow_approvals/:id/details",exact:!0}),d&&r.a.createElement(c.b,{path:"/workflow_approvals/:id/details"},r.a.createElement(OA,{workflowApproval:d,isLoading:m})),r.a.createElement(c.b,{key:"not-found",path:"*"},!m&&r.a.createElement(za,{isNotFound:!0},l.params.id&&r.a.createElement(s.b,{to:"/workflow_approvals/".concat(l.params.id,"/details")},a._({id:"View Workflow Approval Details"})))))))}));var kA=Object(u.withI18n)()((function(e){var t=e.i18n,a=Object(c.j)(),i=Object(n.useState)({"/workflow_approvals":t._({id:"\u5de5\u4f5c\u6d41\u5ba1\u6279"})}),l=Object(f.a)(i,2),o=l[0],s=l[1],u=Object(n.useCallback)((function(e){var a,n=e.id;s((a={"/workflow_approvals":t._({id:"\u5de5\u4f5c\u6d41\u5ba1\u6279"})},Object(gr.a)(a,"/workflow_approvals/".concat(n),e.name),Object(gr.a)(a,"/workflow_approvals/".concat(n,"/details"),t._({id:"Details"})),a))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{streamType:"workflow_approval",breadcrumbConfig:o}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"".concat(a.url,"/:id")},r.a.createElement(jA,{setBreadcrumb:u})),r.a.createElement(c.b,{path:"".concat(a.url)},r.a.createElement(yA,null))))}));var wA=function(e){return[{groupTitle:e._({id:"\u89c6\u56fe"}),groupId:"views_group",routes:[{title:e._({id:"\u4eea\u8868\u76d8"}),path:"/home",screen:Ib},{title:e._({id:"\u4f5c\u4e1a"}),path:"/jobs",screen:Xj},{title:e._({id:"\u8ba1\u5212"}),path:"/schedules",screen:Dw},{title:e._({id:"\u6d3b\u52a8\u6d41"}),path:"/activity_stream",screen:fo},{title:e._({id:"\u5de5\u4f5c\u6d41"}),path:"/workflow_approvals",screen:kA}]},{groupTitle:e._({id:"\u8d44\u6e90"}),groupId:"resources_group",routes:[{title:e._({id:"\u6a21\u677f"}),path:"/templates",screen:pI},{title:e._({id:"\u51ed\u8bc1"}),path:"/credentials",screen:jd},{title:e._({id:"\u9879\u76ee"}),path:"/projects",screen:Nw},{title:e._({id:"\u6e05\u5355"}),path:"/inventories",screen:ZE},{title:e._({id:"\u4e3b\u673a"}),path:"/hosts",screen:qf}]},{groupTitle:e._({id:"\u6743\u9650"}),groupId:"access_group",routes:[{title:e._({id:"\u7ec4\u7ec7"}),path:"/organizations",screen:Jk},{title:e._({id:"\u7528\u6237"}),path:"/users",screen:rA},{title:e._({id:"\u56e2\u961f"}),path:"/teams",screen:RS}]},{groupTitle:e._({id:"\u7ba1\u7406"}),groupId:"administration_group",routes:[{title:e._({id:"\u51ed\u8bc1\u7c7b\u578b"}),path:"/credential_types",screen:Gd},{title:e._({id:"\u901a\u77e5"}),path:"/notification_templates",screen:Ak},{title:e._({id:"\u7ba1\u7406\u4f5c\u4e1a"}),path:"/management_jobs",screen:Zj},{title:e._({id:"\u5b9e\u4f8b\u7ec4"}),path:"/instance_groups",screen:Iv},{title:e._({id:"\u5e94\u7528"}),path:"/applications",screen:ks}]},{groupTitle:e._({id:"\u8bbe\u7f6e"}),groupId:"settings",routes:[{title:e._({id:"\u8bbe\u7f6e"}),path:"/settings",screen:uS}]}]},CA=["children"],SA=function(e){var t=e.children,a=Object(o.a)(e,CA);return It(document.cookie)?r.a.createElement(c.b,a,t):r.a.createElement(c.a,{to:"/login"})};function xA(){var e={en:on.a,ja:rn.a},t=cn(navigator).toLowerCase().split(/[_-]+/)[0];Object.keys(e).includes(t)||(t="en");var a=Object(c.j)(),n=Object(c.h)(),i=n.hash,l=n.search,o=n.pathname;return r.a.createElement(u.I18nProvider,{language:t,catalogs:e},r.a.createElement(u.I18n,null,(function(e){var t=e.i18n;return r.a.createElement(Da,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,strict:!0,path:"/*/"},r.a.createElement(c.a,{to:"".concat(o.slice(0,-1)).concat(l).concat(i)})),r.a.createElement(c.b,{path:"/login"},r.a.createElement(an,{isAuthenticated:It})),r.a.createElement(c.b,{exact:!0,path:"/"},r.a.createElement(c.a,{to:"/home"})),r.a.createElement(SA,null,r.a.createElement(Ra,{navRouteConfig:wA(t)},r.a.createElement(c.d,null,wA(t).flatMap((function(e){return e.routes})).map((function(e){var t=e.path,n=e.screen;return r.a.createElement(SA,{key:t,path:t},r.a.createElement(n,{match:a}))})).concat(r.a.createElement(SA,{key:"not-found",path:"*"},r.a.createElement(Ka,null))))))))})))}var TA=function(){return r.a.createElement(s.a,null,r.a.createElement(xA,null))};document.title="Ansible ".concat("AWX"),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(TA,null)),document.getElementById("app")||document.createElement("div"))}},[[577,1,2]]]);
//# sourceMappingURL=main.2298722c.chunk.js.map